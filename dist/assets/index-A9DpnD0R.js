function JA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var XA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function YA(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var O0={exports:{}},Dd={},D0={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fu=Symbol.for("react.element"),eP=Symbol.for("react.portal"),tP=Symbol.for("react.fragment"),nP=Symbol.for("react.strict_mode"),rP=Symbol.for("react.profiler"),iP=Symbol.for("react.provider"),sP=Symbol.for("react.context"),oP=Symbol.for("react.forward_ref"),aP=Symbol.for("react.suspense"),lP=Symbol.for("react.memo"),uP=Symbol.for("react.lazy"),Nv=Symbol.iterator;function cP(t){return t===null||typeof t!="object"?null:(t=Nv&&t[Nv]||t["@@iterator"],typeof t=="function"?t:null)}var M0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j0=Object.assign,V0={};function Ca(t,e,n){this.props=t,this.context=e,this.refs=V0,this.updater=n||M0}Ca.prototype.isReactComponent={};Ca.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ca.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function F0(){}F0.prototype=Ca.prototype;function sg(t,e,n){this.props=t,this.context=e,this.refs=V0,this.updater=n||M0}var og=sg.prototype=new F0;og.constructor=sg;j0(og,Ca.prototype);og.isPureReactComponent=!0;var Lv=Array.isArray,U0=Object.prototype.hasOwnProperty,ag={current:null},z0={key:!0,ref:!0,__self:!0,__source:!0};function B0(t,e,n){var r,i={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)U0.call(e,r)&&!z0.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var h=Array(u),p=0;p<u;p++)h[p]=arguments[p+2];i.children=h}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:Fu,type:t,key:o,ref:a,props:i,_owner:ag.current}}function hP(t,e){return{$$typeof:Fu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function lg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fu}function dP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ov=/\/+/g;function Vf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dP(""+t.key):e.toString(36)}function vh(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Fu:case eP:a=!0}}if(a)return a=t,i=i(a),t=r===""?"."+Vf(a,0):r,Lv(i)?(n="",t!=null&&(n=t.replace(Ov,"$&/")+"/"),vh(i,e,n,"",function(p){return p})):i!=null&&(lg(i)&&(i=hP(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Ov,"$&/")+"/")+t)),e.push(i)),1;if(a=0,r=r===""?".":r+":",Lv(t))for(var u=0;u<t.length;u++){o=t[u];var h=r+Vf(o,u);a+=vh(o,e,n,h,i)}else if(h=cP(t),typeof h=="function")for(t=h.call(t),u=0;!(o=t.next()).done;)o=o.value,h=r+Vf(o,u++),a+=vh(o,e,n,h,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Bc(t,e,n){if(t==null)return t;var r=[],i=0;return vh(t,r,"","",function(o){return e.call(n,o,i++)}),r}function fP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Yt={current:null},yh={transition:null},pP={ReactCurrentDispatcher:Yt,ReactCurrentBatchConfig:yh,ReactCurrentOwner:ag};function $0(){throw Error("act(...) is not supported in production builds of React.")}Pe.Children={map:Bc,forEach:function(t,e,n){Bc(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Bc(t,function(){e++}),e},toArray:function(t){return Bc(t,function(e){return e})||[]},only:function(t){if(!lg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pe.Component=Ca;Pe.Fragment=tP;Pe.Profiler=rP;Pe.PureComponent=sg;Pe.StrictMode=nP;Pe.Suspense=aP;Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pP;Pe.act=$0;Pe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=j0({},t.props),i=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=ag.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(h in e)U0.call(e,h)&&!z0.hasOwnProperty(h)&&(r[h]=e[h]===void 0&&u!==void 0?u[h]:e[h])}var h=arguments.length-2;if(h===1)r.children=n;else if(1<h){u=Array(h);for(var p=0;p<h;p++)u[p]=arguments[p+2];r.children=u}return{$$typeof:Fu,type:t.type,key:i,ref:o,props:r,_owner:a}};Pe.createContext=function(t){return t={$$typeof:sP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iP,_context:t},t.Consumer=t};Pe.createElement=B0;Pe.createFactory=function(t){var e=B0.bind(null,t);return e.type=t,e};Pe.createRef=function(){return{current:null}};Pe.forwardRef=function(t){return{$$typeof:oP,render:t}};Pe.isValidElement=lg;Pe.lazy=function(t){return{$$typeof:uP,_payload:{_status:-1,_result:t},_init:fP}};Pe.memo=function(t,e){return{$$typeof:lP,type:t,compare:e===void 0?null:e}};Pe.startTransition=function(t){var e=yh.transition;yh.transition={};try{t()}finally{yh.transition=e}};Pe.unstable_act=$0;Pe.useCallback=function(t,e){return Yt.current.useCallback(t,e)};Pe.useContext=function(t){return Yt.current.useContext(t)};Pe.useDebugValue=function(){};Pe.useDeferredValue=function(t){return Yt.current.useDeferredValue(t)};Pe.useEffect=function(t,e){return Yt.current.useEffect(t,e)};Pe.useId=function(){return Yt.current.useId()};Pe.useImperativeHandle=function(t,e,n){return Yt.current.useImperativeHandle(t,e,n)};Pe.useInsertionEffect=function(t,e){return Yt.current.useInsertionEffect(t,e)};Pe.useLayoutEffect=function(t,e){return Yt.current.useLayoutEffect(t,e)};Pe.useMemo=function(t,e){return Yt.current.useMemo(t,e)};Pe.useReducer=function(t,e,n){return Yt.current.useReducer(t,e,n)};Pe.useRef=function(t){return Yt.current.useRef(t)};Pe.useState=function(t){return Yt.current.useState(t)};Pe.useSyncExternalStore=function(t,e,n){return Yt.current.useSyncExternalStore(t,e,n)};Pe.useTransition=function(){return Yt.current.useTransition()};Pe.version="18.3.1";D0.exports=Pe;var U=D0.exports;const lu=YA(U),mP=JA({__proto__:null,default:lu},[U]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP=U,_P=Symbol.for("react.element"),vP=Symbol.for("react.fragment"),yP=Object.prototype.hasOwnProperty,wP=gP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,EP={key:!0,ref:!0,__self:!0,__source:!0};function H0(t,e,n){var r,i={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)yP.call(e,r)&&!EP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:_P,type:t,key:o,ref:a,props:i,_owner:wP.current}}Dd.Fragment=vP;Dd.jsx=H0;Dd.jsxs=H0;O0.exports=Dd;var f=O0.exports,Rp={},W0={exports:{}},Tn={},q0={exports:{}},G0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(K,ce){var ee=K.length;K.push(ce);e:for(;0<ee;){var le=ee-1>>>1,de=K[le];if(0<i(de,ce))K[le]=ce,K[ee]=de,ee=le;else break e}}function n(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var ce=K[0],ee=K.pop();if(ee!==ce){K[0]=ee;e:for(var le=0,de=K.length,xe=de>>>1;le<xe;){var be=2*(le+1)-1,Se=K[be],ve=be+1,_t=K[ve];if(0>i(Se,ee))ve<de&&0>i(_t,Se)?(K[le]=_t,K[ve]=ee,le=ve):(K[le]=Se,K[be]=ee,le=be);else if(ve<de&&0>i(_t,ee))K[le]=_t,K[ve]=ee,le=ve;else break e}}return ce}function i(K,ce){var ee=K.sortIndex-ce.sortIndex;return ee!==0?ee:K.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,u=a.now();t.unstable_now=function(){return a.now()-u}}var h=[],p=[],_=1,v=null,E=3,k=!1,P=!1,A=!1,I=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(K){for(var ce=n(p);ce!==null;){if(ce.callback===null)r(p);else if(ce.startTime<=K)r(p),ce.sortIndex=ce.expirationTime,e(h,ce);else break;ce=n(p)}}function V(K){if(A=!1,x(K),!P)if(n(h)!==null)P=!0,je(G);else{var ce=n(p);ce!==null&&Tt(V,ce.startTime-K)}}function G(K,ce){P=!1,A&&(A=!1,b(R),R=-1),k=!0;var ee=E;try{for(x(ce),v=n(h);v!==null&&(!(v.expirationTime>ce)||K&&!F());){var le=v.callback;if(typeof le=="function"){v.callback=null,E=v.priorityLevel;var de=le(v.expirationTime<=ce);ce=t.unstable_now(),typeof de=="function"?v.callback=de:v===n(h)&&r(h),x(ce)}else r(h);v=n(h)}if(v!==null)var xe=!0;else{var be=n(p);be!==null&&Tt(V,be.startTime-ce),xe=!1}return xe}finally{v=null,E=ee,k=!1}}var Z=!1,N=null,R=-1,O=5,D=-1;function F(){return!(t.unstable_now()-D<O)}function z(){if(N!==null){var K=t.unstable_now();D=K;var ce=!0;try{ce=N(!0,K)}finally{ce?M():(Z=!1,N=null)}}else Z=!1}var M;if(typeof T=="function")M=function(){T(z)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,xn=Me.port2;Me.port1.onmessage=z,M=function(){xn.postMessage(null)}}else M=function(){I(z,0)};function je(K){N=K,Z||(Z=!0,M())}function Tt(K,ce){R=I(function(){K(t.unstable_now())},ce)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(K){K.callback=null},t.unstable_continueExecution=function(){P||k||(P=!0,je(G))},t.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<K?Math.floor(1e3/K):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(h)},t.unstable_next=function(K){switch(E){case 1:case 2:case 3:var ce=3;break;default:ce=E}var ee=E;E=ce;try{return K()}finally{E=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(K,ce){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ee=E;E=K;try{return ce()}finally{E=ee}},t.unstable_scheduleCallback=function(K,ce,ee){var le=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?le+ee:le):ee=le,K){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=ee+de,K={id:_++,callback:ce,priorityLevel:K,startTime:ee,expirationTime:de,sortIndex:-1},ee>le?(K.sortIndex=ee,e(p,K),n(h)===null&&K===n(p)&&(A?(b(R),R=-1):A=!0,Tt(V,ee-le))):(K.sortIndex=de,e(h,K),P||k||(P=!0,je(G))),K},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(K){var ce=E;return function(){var ee=E;E=ce;try{return K.apply(this,arguments)}finally{E=ee}}}})(G0);q0.exports=G0;var TP=q0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP=U,En=TP;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K0=new Set,uu={};function Xs(t,e){ha(t,e),ha(t+"Capture",e)}function ha(t,e){for(uu[t]=e,t=0;t<e.length;t++)K0.add(e[t])}var Zr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bp=Object.prototype.hasOwnProperty,xP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dv={},Mv={};function IP(t){return bp.call(Mv,t)?!0:bp.call(Dv,t)?!1:xP.test(t)?Mv[t]=!0:(Dv[t]=!0,!1)}function AP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function PP(t,e,n,r){if(e===null||typeof e>"u"||AP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function en(t,e,n,r,i,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Mt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mt[t]=new en(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mt[e]=new en(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mt[t]=new en(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mt[t]=new en(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mt[t]=new en(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mt[t]=new en(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mt[t]=new en(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mt[t]=new en(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mt[t]=new en(t,5,!1,t.toLowerCase(),null,!1,!1)});var ug=/[\-:]([a-z])/g;function cg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ug,cg);Mt[e]=new en(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ug,cg);Mt[e]=new en(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ug,cg);Mt[e]=new en(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mt[t]=new en(t,1,!1,t.toLowerCase(),null,!1,!1)});Mt.xlinkHref=new en("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mt[t]=new en(t,1,!1,t.toLowerCase(),null,!0,!0)});function hg(t,e,n,r){var i=Mt.hasOwnProperty(e)?Mt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(PP(e,n,i,r)&&(n=null),r||i===null?IP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var si=SP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$c=Symbol.for("react.element"),zo=Symbol.for("react.portal"),Bo=Symbol.for("react.fragment"),dg=Symbol.for("react.strict_mode"),kp=Symbol.for("react.profiler"),Z0=Symbol.for("react.provider"),Q0=Symbol.for("react.context"),fg=Symbol.for("react.forward_ref"),Np=Symbol.for("react.suspense"),Lp=Symbol.for("react.suspense_list"),pg=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),J0=Symbol.for("react.offscreen"),jv=Symbol.iterator;function xl(t){return t===null||typeof t!="object"?null:(t=jv&&t[jv]||t["@@iterator"],typeof t=="function"?t:null)}var nt=Object.assign,Ff;function jl(t){if(Ff===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ff=e&&e[1]||""}return`
`+Ff+t}var Uf=!1;function zf(t,e){if(!t||Uf)return"";Uf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(p){var r=p}Reflect.construct(t,[],e)}else{try{e.call()}catch(p){r=p}t.call(e.prototype)}else{try{throw Error()}catch(p){r=p}t()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),o=r.stack.split(`
`),a=i.length-1,u=o.length-1;1<=a&&0<=u&&i[a]!==o[u];)u--;for(;1<=a&&0<=u;a--,u--)if(i[a]!==o[u]){if(a!==1||u!==1)do if(a--,u--,0>u||i[a]!==o[u]){var h=`
`+i[a].replace(" at new "," at ");return t.displayName&&h.includes("<anonymous>")&&(h=h.replace("<anonymous>",t.displayName)),h}while(1<=a&&0<=u);break}}}finally{Uf=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jl(t):""}function CP(t){switch(t.tag){case 5:return jl(t.type);case 16:return jl("Lazy");case 13:return jl("Suspense");case 19:return jl("SuspenseList");case 0:case 2:case 15:return t=zf(t.type,!1),t;case 11:return t=zf(t.type.render,!1),t;case 1:return t=zf(t.type,!0),t;default:return""}}function Op(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Bo:return"Fragment";case zo:return"Portal";case kp:return"Profiler";case dg:return"StrictMode";case Np:return"Suspense";case Lp:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Q0:return(t.displayName||"Context")+".Consumer";case Z0:return(t._context.displayName||"Context")+".Provider";case fg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case pg:return e=t.displayName||null,e!==null?e:Op(t.type)||"Memo";case Ti:e=t._payload,t=t._init;try{return Op(t(e))}catch{}}return null}function RP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Op(e);case 8:return e===dg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function X0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bP(t){var e=X0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hc(t){t._valueTracker||(t._valueTracker=bP(t))}function Y0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=X0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Wh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Dp(t,e){var n=e.checked;return nt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Vv(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Qi(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function eE(t,e){e=e.checked,e!=null&&hg(t,"checked",e,!1)}function Mp(t,e){eE(t,e);var n=Qi(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?jp(t,e.type,n):e.hasOwnProperty("defaultValue")&&jp(t,e.type,Qi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fv(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function jp(t,e,n){(e!=="number"||Wh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Vl=Array.isArray;function ea(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Qi(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Vp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return nt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Uv(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Vl(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Qi(n)}}function tE(t,e){var n=Qi(e.value),r=Qi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function zv(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wc,rE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wc=Wc||document.createElement("div"),Wc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function cu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Gl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kP=["Webkit","ms","Moz","O"];Object.keys(Gl).forEach(function(t){kP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gl[e]=Gl[t]})});function iE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Gl.hasOwnProperty(t)&&Gl[t]?(""+e).trim():e+"px"}function sE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=iE(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var NP=nt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Up(t,e){if(e){if(NP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function zp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bp=null;function mg(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var $p=null,ta=null,na=null;function Bv(t){if(t=Bu(t)){if(typeof $p!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Ud(e),$p(t.stateNode,t.type,e))}}function oE(t){ta?na?na.push(t):na=[t]:ta=t}function aE(){if(ta){var t=ta,e=na;if(na=ta=null,Bv(t),e)for(t=0;t<e.length;t++)Bv(e[t])}}function lE(t,e){return t(e)}function uE(){}var Bf=!1;function cE(t,e,n){if(Bf)return t(e,n);Bf=!0;try{return lE(t,e,n)}finally{Bf=!1,(ta!==null||na!==null)&&(uE(),aE())}}function hu(t,e){var n=t.stateNode;if(n===null)return null;var r=Ud(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Hp=!1;if(Zr)try{var Il={};Object.defineProperty(Il,"passive",{get:function(){Hp=!0}}),window.addEventListener("test",Il,Il),window.removeEventListener("test",Il,Il)}catch{Hp=!1}function LP(t,e,n,r,i,o,a,u,h){var p=Array.prototype.slice.call(arguments,3);try{e.apply(n,p)}catch(_){this.onError(_)}}var Kl=!1,qh=null,Gh=!1,Wp=null,OP={onError:function(t){Kl=!0,qh=t}};function DP(t,e,n,r,i,o,a,u,h){Kl=!1,qh=null,LP.apply(OP,arguments)}function MP(t,e,n,r,i,o,a,u,h){if(DP.apply(this,arguments),Kl){if(Kl){var p=qh;Kl=!1,qh=null}else throw Error(Y(198));Gh||(Gh=!0,Wp=p)}}function Ys(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hE(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $v(t){if(Ys(t)!==t)throw Error(Y(188))}function jP(t){var e=t.alternate;if(!e){if(e=Ys(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return $v(i),t;if(o===r)return $v(i),e;o=o.sibling}throw Error(Y(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(Y(189))}}if(n.alternate!==r)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function dE(t){return t=jP(t),t!==null?fE(t):null}function fE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fE(t);if(e!==null)return e;t=t.sibling}return null}var pE=En.unstable_scheduleCallback,Hv=En.unstable_cancelCallback,VP=En.unstable_shouldYield,FP=En.unstable_requestPaint,ct=En.unstable_now,UP=En.unstable_getCurrentPriorityLevel,gg=En.unstable_ImmediatePriority,mE=En.unstable_UserBlockingPriority,Kh=En.unstable_NormalPriority,zP=En.unstable_LowPriority,gE=En.unstable_IdlePriority,Md=null,_r=null;function BP(t){if(_r&&typeof _r.onCommitFiberRoot=="function")try{_r.onCommitFiberRoot(Md,t,void 0,(t.current.flags&128)===128)}catch{}}var er=Math.clz32?Math.clz32:WP,$P=Math.log,HP=Math.LN2;function WP(t){return t>>>=0,t===0?32:31-($P(t)/HP|0)|0}var qc=64,Gc=4194304;function Fl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var u=a&~i;u!==0?r=Fl(u):(o&=a,o!==0&&(r=Fl(o)))}else a=n&~i,a!==0?r=Fl(a):o!==0&&(r=Fl(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-er(e),i=1<<n,r|=t[n],e&=~i;return r}function qP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function GP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-er(o),u=1<<a,h=i[a];h===-1?(!(u&n)||u&r)&&(i[a]=qP(u,e)):h<=e&&(t.expiredLanes|=u),o&=~u}}function qp(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _E(){var t=qc;return qc<<=1,!(qc&4194240)&&(qc=64),t}function $f(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Uu(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-er(e),t[e]=n}function KP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-er(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function _g(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-er(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Fe=0;function vE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var yE,vg,wE,EE,TE,Gp=!1,Kc=[],ji=null,Vi=null,Fi=null,du=new Map,fu=new Map,xi=[],ZP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wv(t,e){switch(t){case"focusin":case"focusout":ji=null;break;case"dragenter":case"dragleave":Vi=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":du.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(e.pointerId)}}function Al(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Bu(e),e!==null&&vg(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function QP(t,e,n,r,i){switch(e){case"focusin":return ji=Al(ji,t,e,n,r,i),!0;case"dragenter":return Vi=Al(Vi,t,e,n,r,i),!0;case"mouseover":return Fi=Al(Fi,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return du.set(o,Al(du.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,fu.set(o,Al(fu.get(o)||null,t,e,n,r,i)),!0}return!1}function SE(t){var e=Ps(t.target);if(e!==null){var n=Ys(e);if(n!==null){if(e=n.tag,e===13){if(e=hE(n),e!==null){t.blockedOn=e,TE(t.priority,function(){wE(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Kp(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Bp=r,n.target.dispatchEvent(r),Bp=null}else return e=Bu(n),e!==null&&vg(e),t.blockedOn=n,!1;e.shift()}return!0}function qv(t,e,n){wh(t)&&n.delete(e)}function JP(){Gp=!1,ji!==null&&wh(ji)&&(ji=null),Vi!==null&&wh(Vi)&&(Vi=null),Fi!==null&&wh(Fi)&&(Fi=null),du.forEach(qv),fu.forEach(qv)}function Pl(t,e){t.blockedOn===e&&(t.blockedOn=null,Gp||(Gp=!0,En.unstable_scheduleCallback(En.unstable_NormalPriority,JP)))}function pu(t){function e(i){return Pl(i,t)}if(0<Kc.length){Pl(Kc[0],t);for(var n=1;n<Kc.length;n++){var r=Kc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ji!==null&&Pl(ji,t),Vi!==null&&Pl(Vi,t),Fi!==null&&Pl(Fi,t),du.forEach(e),fu.forEach(e),n=0;n<xi.length;n++)r=xi[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xi.length&&(n=xi[0],n.blockedOn===null);)SE(n),n.blockedOn===null&&xi.shift()}var ra=si.ReactCurrentBatchConfig,Qh=!0;function XP(t,e,n,r){var i=Fe,o=ra.transition;ra.transition=null;try{Fe=1,yg(t,e,n,r)}finally{Fe=i,ra.transition=o}}function YP(t,e,n,r){var i=Fe,o=ra.transition;ra.transition=null;try{Fe=4,yg(t,e,n,r)}finally{Fe=i,ra.transition=o}}function yg(t,e,n,r){if(Qh){var i=Kp(t,e,n,r);if(i===null)Yf(t,e,r,Jh,n),Wv(t,r);else if(QP(i,t,e,n,r))r.stopPropagation();else if(Wv(t,r),e&4&&-1<ZP.indexOf(t)){for(;i!==null;){var o=Bu(i);if(o!==null&&yE(o),o=Kp(t,e,n,r),o===null&&Yf(t,e,r,Jh,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Yf(t,e,r,null,n)}}var Jh=null;function Kp(t,e,n,r){if(Jh=null,t=mg(r),t=Ps(t),t!==null)if(e=Ys(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hE(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jh=t,null}function xE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UP()){case gg:return 1;case mE:return 4;case Kh:case zP:return 16;case gE:return 536870912;default:return 16}default:return 16}}var Ni=null,wg=null,Eh=null;function IE(){if(Eh)return Eh;var t,e=wg,n=e.length,r,i="value"in Ni?Ni.value:Ni.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===i[o-r];r++);return Eh=i.slice(t,1<r?1-r:void 0)}function Th(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zc(){return!0}function Gv(){return!1}function Sn(t){function e(n,r,i,o,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Zc:Gv,this.isPropagationStopped=Gv,this}return nt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zc)},persist:function(){},isPersistent:Zc}),e}var Ra={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Eg=Sn(Ra),zu=nt({},Ra,{view:0,detail:0}),eC=Sn(zu),Hf,Wf,Cl,jd=nt({},zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tg,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Cl&&(Cl&&t.type==="mousemove"?(Hf=t.screenX-Cl.screenX,Wf=t.screenY-Cl.screenY):Wf=Hf=0,Cl=t),Hf)},movementY:function(t){return"movementY"in t?t.movementY:Wf}}),Kv=Sn(jd),tC=nt({},jd,{dataTransfer:0}),nC=Sn(tC),rC=nt({},zu,{relatedTarget:0}),qf=Sn(rC),iC=nt({},Ra,{animationName:0,elapsedTime:0,pseudoElement:0}),sC=Sn(iC),oC=nt({},Ra,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aC=Sn(oC),lC=nt({},Ra,{data:0}),Zv=Sn(lC),uC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hC[t])?!!e[t]:!1}function Tg(){return dC}var fC=nt({},zu,{key:function(t){if(t.key){var e=uC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Th(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tg,charCode:function(t){return t.type==="keypress"?Th(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Th(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pC=Sn(fC),mC=nt({},jd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qv=Sn(mC),gC=nt({},zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tg}),_C=Sn(gC),vC=nt({},Ra,{propertyName:0,elapsedTime:0,pseudoElement:0}),yC=Sn(vC),wC=nt({},jd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),EC=Sn(wC),TC=[9,13,27,32],Sg=Zr&&"CompositionEvent"in window,Zl=null;Zr&&"documentMode"in document&&(Zl=document.documentMode);var SC=Zr&&"TextEvent"in window&&!Zl,AE=Zr&&(!Sg||Zl&&8<Zl&&11>=Zl),Jv=" ",Xv=!1;function PE(t,e){switch(t){case"keyup":return TC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function CE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $o=!1;function xC(t,e){switch(t){case"compositionend":return CE(e);case"keypress":return e.which!==32?null:(Xv=!0,Jv);case"textInput":return t=e.data,t===Jv&&Xv?null:t;default:return null}}function IC(t,e){if($o)return t==="compositionend"||!Sg&&PE(t,e)?(t=IE(),Eh=wg=Ni=null,$o=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return AE&&e.locale!=="ko"?null:e.data;default:return null}}var AC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AC[t.type]:e==="textarea"}function RE(t,e,n,r){oE(r),e=Xh(e,"onChange"),0<e.length&&(n=new Eg("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ql=null,mu=null;function PC(t){UE(t,0)}function Vd(t){var e=qo(t);if(Y0(e))return t}function CC(t,e){if(t==="change")return e}var bE=!1;if(Zr){var Gf;if(Zr){var Kf="oninput"in document;if(!Kf){var ey=document.createElement("div");ey.setAttribute("oninput","return;"),Kf=typeof ey.oninput=="function"}Gf=Kf}else Gf=!1;bE=Gf&&(!document.documentMode||9<document.documentMode)}function ty(){Ql&&(Ql.detachEvent("onpropertychange",kE),mu=Ql=null)}function kE(t){if(t.propertyName==="value"&&Vd(mu)){var e=[];RE(e,mu,t,mg(t)),cE(PC,e)}}function RC(t,e,n){t==="focusin"?(ty(),Ql=e,mu=n,Ql.attachEvent("onpropertychange",kE)):t==="focusout"&&ty()}function bC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Vd(mu)}function kC(t,e){if(t==="click")return Vd(e)}function NC(t,e){if(t==="input"||t==="change")return Vd(e)}function LC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var rr=typeof Object.is=="function"?Object.is:LC;function gu(t,e){if(rr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bp.call(e,i)||!rr(t[i],e[i]))return!1}return!0}function ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ry(t,e){var n=ny(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ny(n)}}function NE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?NE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function LE(){for(var t=window,e=Wh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Wh(t.document)}return e}function xg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function OC(t){var e=LE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&NE(n.ownerDocument.documentElement,n)){if(r!==null&&xg(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=ry(n,o);var a=ry(n,r);i&&a&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var DC=Zr&&"documentMode"in document&&11>=document.documentMode,Ho=null,Zp=null,Jl=null,Qp=!1;function iy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Qp||Ho==null||Ho!==Wh(r)||(r=Ho,"selectionStart"in r&&xg(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jl&&gu(Jl,r)||(Jl=r,r=Xh(Zp,"onSelect"),0<r.length&&(e=new Eg("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ho)))}function Qc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wo={animationend:Qc("Animation","AnimationEnd"),animationiteration:Qc("Animation","AnimationIteration"),animationstart:Qc("Animation","AnimationStart"),transitionend:Qc("Transition","TransitionEnd")},Zf={},OE={};Zr&&(OE=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function Fd(t){if(Zf[t])return Zf[t];if(!Wo[t])return t;var e=Wo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OE)return Zf[t]=e[n];return t}var DE=Fd("animationend"),ME=Fd("animationiteration"),jE=Fd("animationstart"),VE=Fd("transitionend"),FE=new Map,sy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ns(t,e){FE.set(t,e),Xs(e,[t])}for(var Qf=0;Qf<sy.length;Qf++){var Jf=sy[Qf],MC=Jf.toLowerCase(),jC=Jf[0].toUpperCase()+Jf.slice(1);ns(MC,"on"+jC)}ns(DE,"onAnimationEnd");ns(ME,"onAnimationIteration");ns(jE,"onAnimationStart");ns("dblclick","onDoubleClick");ns("focusin","onFocus");ns("focusout","onBlur");ns(VE,"onTransitionEnd");ha("onMouseEnter",["mouseout","mouseover"]);ha("onMouseLeave",["mouseout","mouseover"]);ha("onPointerEnter",["pointerout","pointerover"]);ha("onPointerLeave",["pointerout","pointerover"]);Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ul="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ul));function oy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,MP(r,e,void 0,t),t.currentTarget=null}function UE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var u=r[a],h=u.instance,p=u.currentTarget;if(u=u.listener,h!==o&&i.isPropagationStopped())break e;oy(i,u,p),o=h}else for(a=0;a<r.length;a++){if(u=r[a],h=u.instance,p=u.currentTarget,u=u.listener,h!==o&&i.isPropagationStopped())break e;oy(i,u,p),o=h}}}if(Gh)throw t=Wp,Gh=!1,Wp=null,t}function We(t,e){var n=e[tm];n===void 0&&(n=e[tm]=new Set);var r=t+"__bubble";n.has(r)||(zE(e,t,2,!1),n.add(r))}function Xf(t,e,n){var r=0;e&&(r|=4),zE(n,t,r,e)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function _u(t){if(!t[Jc]){t[Jc]=!0,K0.forEach(function(n){n!=="selectionchange"&&(VC.has(n)||Xf(n,!1,t),Xf(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jc]||(e[Jc]=!0,Xf("selectionchange",!1,e))}}function zE(t,e,n,r){switch(xE(e)){case 1:var i=XP;break;case 4:i=YP;break;default:i=yg}n=i.bind(null,e,n,t),i=void 0,!Hp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Yf(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var h=a.tag;if((h===3||h===4)&&(h=a.stateNode.containerInfo,h===i||h.nodeType===8&&h.parentNode===i))return;a=a.return}for(;u!==null;){if(a=Ps(u),a===null)return;if(h=a.tag,h===5||h===6){r=o=a;continue e}u=u.parentNode}}r=r.return}cE(function(){var p=o,_=mg(n),v=[];e:{var E=FE.get(t);if(E!==void 0){var k=Eg,P=t;switch(t){case"keypress":if(Th(n)===0)break e;case"keydown":case"keyup":k=pC;break;case"focusin":P="focus",k=qf;break;case"focusout":P="blur",k=qf;break;case"beforeblur":case"afterblur":k=qf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":k=Kv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":k=nC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":k=_C;break;case DE:case ME:case jE:k=sC;break;case VE:k=yC;break;case"scroll":k=eC;break;case"wheel":k=EC;break;case"copy":case"cut":case"paste":k=aC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":k=Qv}var A=(e&4)!==0,I=!A&&t==="scroll",b=A?E!==null?E+"Capture":null:E;A=[];for(var T=p,x;T!==null;){x=T;var V=x.stateNode;if(x.tag===5&&V!==null&&(x=V,b!==null&&(V=hu(T,b),V!=null&&A.push(vu(T,V,x)))),I)break;T=T.return}0<A.length&&(E=new k(E,P,null,n,_),v.push({event:E,listeners:A}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",k=t==="mouseout"||t==="pointerout",E&&n!==Bp&&(P=n.relatedTarget||n.fromElement)&&(Ps(P)||P[Qr]))break e;if((k||E)&&(E=_.window===_?_:(E=_.ownerDocument)?E.defaultView||E.parentWindow:window,k?(P=n.relatedTarget||n.toElement,k=p,P=P?Ps(P):null,P!==null&&(I=Ys(P),P!==I||P.tag!==5&&P.tag!==6)&&(P=null)):(k=null,P=p),k!==P)){if(A=Kv,V="onMouseLeave",b="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(A=Qv,V="onPointerLeave",b="onPointerEnter",T="pointer"),I=k==null?E:qo(k),x=P==null?E:qo(P),E=new A(V,T+"leave",k,n,_),E.target=I,E.relatedTarget=x,V=null,Ps(_)===p&&(A=new A(b,T+"enter",P,n,_),A.target=x,A.relatedTarget=I,V=A),I=V,k&&P)t:{for(A=k,b=P,T=0,x=A;x;x=Do(x))T++;for(x=0,V=b;V;V=Do(V))x++;for(;0<T-x;)A=Do(A),T--;for(;0<x-T;)b=Do(b),x--;for(;T--;){if(A===b||b!==null&&A===b.alternate)break t;A=Do(A),b=Do(b)}A=null}else A=null;k!==null&&ay(v,E,k,A,!1),P!==null&&I!==null&&ay(v,I,P,A,!0)}}e:{if(E=p?qo(p):window,k=E.nodeName&&E.nodeName.toLowerCase(),k==="select"||k==="input"&&E.type==="file")var G=CC;else if(Yv(E))if(bE)G=NC;else{G=bC;var Z=RC}else(k=E.nodeName)&&k.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(G=kC);if(G&&(G=G(t,p))){RE(v,G,n,_);break e}Z&&Z(t,E,p),t==="focusout"&&(Z=E._wrapperState)&&Z.controlled&&E.type==="number"&&jp(E,"number",E.value)}switch(Z=p?qo(p):window,t){case"focusin":(Yv(Z)||Z.contentEditable==="true")&&(Ho=Z,Zp=p,Jl=null);break;case"focusout":Jl=Zp=Ho=null;break;case"mousedown":Qp=!0;break;case"contextmenu":case"mouseup":case"dragend":Qp=!1,iy(v,n,_);break;case"selectionchange":if(DC)break;case"keydown":case"keyup":iy(v,n,_)}var N;if(Sg)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else $o?PE(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(AE&&n.locale!=="ko"&&($o||R!=="onCompositionStart"?R==="onCompositionEnd"&&$o&&(N=IE()):(Ni=_,wg="value"in Ni?Ni.value:Ni.textContent,$o=!0)),Z=Xh(p,R),0<Z.length&&(R=new Zv(R,t,null,n,_),v.push({event:R,listeners:Z}),N?R.data=N:(N=CE(n),N!==null&&(R.data=N)))),(N=SC?xC(t,n):IC(t,n))&&(p=Xh(p,"onBeforeInput"),0<p.length&&(_=new Zv("onBeforeInput","beforeinput",null,n,_),v.push({event:_,listeners:p}),_.data=N))}UE(v,e)})}function vu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xh(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=hu(t,n),o!=null&&r.unshift(vu(t,o,i)),o=hu(t,e),o!=null&&r.push(vu(t,o,i))),t=t.return}return r}function Do(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ay(t,e,n,r,i){for(var o=e._reactName,a=[];n!==null&&n!==r;){var u=n,h=u.alternate,p=u.stateNode;if(h!==null&&h===r)break;u.tag===5&&p!==null&&(u=p,i?(h=hu(n,o),h!=null&&a.unshift(vu(n,h,u))):i||(h=hu(n,o),h!=null&&a.push(vu(n,h,u)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var FC=/\r\n?/g,UC=/\u0000|\uFFFD/g;function ly(t){return(typeof t=="string"?t:""+t).replace(FC,`
`).replace(UC,"")}function Xc(t,e,n){if(e=ly(e),ly(t)!==e&&n)throw Error(Y(425))}function Yh(){}var Jp=null,Xp=null;function Yp(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var em=typeof setTimeout=="function"?setTimeout:void 0,zC=typeof clearTimeout=="function"?clearTimeout:void 0,uy=typeof Promise=="function"?Promise:void 0,BC=typeof queueMicrotask=="function"?queueMicrotask:typeof uy<"u"?function(t){return uy.resolve(null).then(t).catch($C)}:em;function $C(t){setTimeout(function(){throw t})}function ep(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),pu(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);pu(e)}function Ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ba=Math.random().toString(36).slice(2),pr="__reactFiber$"+ba,yu="__reactProps$"+ba,Qr="__reactContainer$"+ba,tm="__reactEvents$"+ba,HC="__reactListeners$"+ba,WC="__reactHandles$"+ba;function Ps(t){var e=t[pr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qr]||n[pr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=cy(t);t!==null;){if(n=t[pr])return n;t=cy(t)}return e}t=n,n=t.parentNode}return null}function Bu(t){return t=t[pr]||t[Qr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Ud(t){return t[yu]||null}var nm=[],Go=-1;function rs(t){return{current:t}}function Ge(t){0>Go||(t.current=nm[Go],nm[Go]=null,Go--)}function He(t,e){Go++,nm[Go]=t.current,t.current=e}var Ji={},qt=rs(Ji),an=rs(!1),Fs=Ji;function da(t,e){var n=t.type.contextTypes;if(!n)return Ji;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ln(t){return t=t.childContextTypes,t!=null}function ed(){Ge(an),Ge(qt)}function hy(t,e,n){if(qt.current!==Ji)throw Error(Y(168));He(qt,e),He(an,n)}function BE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Y(108,RP(t)||"Unknown",i));return nt({},n,r)}function td(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ji,Fs=qt.current,He(qt,t),He(an,an.current),!0}function dy(t,e,n){var r=t.stateNode;if(!r)throw Error(Y(169));n?(t=BE(t,e,Fs),r.__reactInternalMemoizedMergedChildContext=t,Ge(an),Ge(qt),He(qt,t)):Ge(an),He(an,n)}var Br=null,zd=!1,tp=!1;function $E(t){Br===null?Br=[t]:Br.push(t)}function qC(t){zd=!0,$E(t)}function is(){if(!tp&&Br!==null){tp=!0;var t=0,e=Fe;try{var n=Br;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Br=null,zd=!1}catch(i){throw Br!==null&&(Br=Br.slice(t+1)),pE(gg,is),i}finally{Fe=e,tp=!1}}return null}var Ko=[],Zo=0,nd=null,rd=0,Ln=[],On=0,Us=null,$r=1,Hr="";function Ss(t,e){Ko[Zo++]=rd,Ko[Zo++]=nd,nd=t,rd=e}function HE(t,e,n){Ln[On++]=$r,Ln[On++]=Hr,Ln[On++]=Us,Us=t;var r=$r;t=Hr;var i=32-er(r)-1;r&=~(1<<i),n+=1;var o=32-er(e)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,$r=1<<32-er(e)+i|n<<i|r,Hr=o+t}else $r=1<<o|n<<i|r,Hr=t}function Ig(t){t.return!==null&&(Ss(t,1),HE(t,1,0))}function Ag(t){for(;t===nd;)nd=Ko[--Zo],Ko[Zo]=null,rd=Ko[--Zo],Ko[Zo]=null;for(;t===Us;)Us=Ln[--On],Ln[On]=null,Hr=Ln[--On],Ln[On]=null,$r=Ln[--On],Ln[On]=null}var wn=null,vn=null,Qe=!1,Jn=null;function WE(t,e){var n=Mn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,wn=t,vn=Ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,wn=t,vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Us!==null?{id:$r,overflow:Hr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Mn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,wn=t,vn=null,!0):!1;default:return!1}}function rm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function im(t){if(Qe){var e=vn;if(e){var n=e;if(!fy(t,e)){if(rm(t))throw Error(Y(418));e=Ui(n.nextSibling);var r=wn;e&&fy(t,e)?WE(r,n):(t.flags=t.flags&-4097|2,Qe=!1,wn=t)}}else{if(rm(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Qe=!1,wn=t}}}function py(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;wn=t}function Yc(t){if(t!==wn)return!1;if(!Qe)return py(t),Qe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yp(t.type,t.memoizedProps)),e&&(e=vn)){if(rm(t))throw qE(),Error(Y(418));for(;e;)WE(t,e),e=Ui(e.nextSibling)}if(py(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vn=Ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vn=null}}else vn=wn?Ui(t.stateNode.nextSibling):null;return!0}function qE(){for(var t=vn;t;)t=Ui(t.nextSibling)}function fa(){vn=wn=null,Qe=!1}function Pg(t){Jn===null?Jn=[t]:Jn.push(t)}var GC=si.ReactCurrentBatchConfig;function Rl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var r=n.stateNode}if(!r)throw Error(Y(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var u=i.refs;a===null?delete u[o]:u[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function eh(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function my(t){var e=t._init;return e(t._payload)}function GE(t){function e(b,T){if(t){var x=b.deletions;x===null?(b.deletions=[T],b.flags|=16):x.push(T)}}function n(b,T){if(!t)return null;for(;T!==null;)e(b,T),T=T.sibling;return null}function r(b,T){for(b=new Map;T!==null;)T.key!==null?b.set(T.key,T):b.set(T.index,T),T=T.sibling;return b}function i(b,T){return b=Hi(b,T),b.index=0,b.sibling=null,b}function o(b,T,x){return b.index=x,t?(x=b.alternate,x!==null?(x=x.index,x<T?(b.flags|=2,T):x):(b.flags|=2,T)):(b.flags|=1048576,T)}function a(b){return t&&b.alternate===null&&(b.flags|=2),b}function u(b,T,x,V){return T===null||T.tag!==6?(T=lp(x,b.mode,V),T.return=b,T):(T=i(T,x),T.return=b,T)}function h(b,T,x,V){var G=x.type;return G===Bo?_(b,T,x.props.children,V,x.key):T!==null&&(T.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Ti&&my(G)===T.type)?(V=i(T,x.props),V.ref=Rl(b,T,x),V.return=b,V):(V=Rh(x.type,x.key,x.props,null,b.mode,V),V.ref=Rl(b,T,x),V.return=b,V)}function p(b,T,x,V){return T===null||T.tag!==4||T.stateNode.containerInfo!==x.containerInfo||T.stateNode.implementation!==x.implementation?(T=up(x,b.mode,V),T.return=b,T):(T=i(T,x.children||[]),T.return=b,T)}function _(b,T,x,V,G){return T===null||T.tag!==7?(T=Ls(x,b.mode,V,G),T.return=b,T):(T=i(T,x),T.return=b,T)}function v(b,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return T=lp(""+T,b.mode,x),T.return=b,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case $c:return x=Rh(T.type,T.key,T.props,null,b.mode,x),x.ref=Rl(b,null,T),x.return=b,x;case zo:return T=up(T,b.mode,x),T.return=b,T;case Ti:var V=T._init;return v(b,V(T._payload),x)}if(Vl(T)||xl(T))return T=Ls(T,b.mode,x,null),T.return=b,T;eh(b,T)}return null}function E(b,T,x,V){var G=T!==null?T.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return G!==null?null:u(b,T,""+x,V);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case $c:return x.key===G?h(b,T,x,V):null;case zo:return x.key===G?p(b,T,x,V):null;case Ti:return G=x._init,E(b,T,G(x._payload),V)}if(Vl(x)||xl(x))return G!==null?null:_(b,T,x,V,null);eh(b,x)}return null}function k(b,T,x,V,G){if(typeof V=="string"&&V!==""||typeof V=="number")return b=b.get(x)||null,u(T,b,""+V,G);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case $c:return b=b.get(V.key===null?x:V.key)||null,h(T,b,V,G);case zo:return b=b.get(V.key===null?x:V.key)||null,p(T,b,V,G);case Ti:var Z=V._init;return k(b,T,x,Z(V._payload),G)}if(Vl(V)||xl(V))return b=b.get(x)||null,_(T,b,V,G,null);eh(T,V)}return null}function P(b,T,x,V){for(var G=null,Z=null,N=T,R=T=0,O=null;N!==null&&R<x.length;R++){N.index>R?(O=N,N=null):O=N.sibling;var D=E(b,N,x[R],V);if(D===null){N===null&&(N=O);break}t&&N&&D.alternate===null&&e(b,N),T=o(D,T,R),Z===null?G=D:Z.sibling=D,Z=D,N=O}if(R===x.length)return n(b,N),Qe&&Ss(b,R),G;if(N===null){for(;R<x.length;R++)N=v(b,x[R],V),N!==null&&(T=o(N,T,R),Z===null?G=N:Z.sibling=N,Z=N);return Qe&&Ss(b,R),G}for(N=r(b,N);R<x.length;R++)O=k(N,b,R,x[R],V),O!==null&&(t&&O.alternate!==null&&N.delete(O.key===null?R:O.key),T=o(O,T,R),Z===null?G=O:Z.sibling=O,Z=O);return t&&N.forEach(function(F){return e(b,F)}),Qe&&Ss(b,R),G}function A(b,T,x,V){var G=xl(x);if(typeof G!="function")throw Error(Y(150));if(x=G.call(x),x==null)throw Error(Y(151));for(var Z=G=null,N=T,R=T=0,O=null,D=x.next();N!==null&&!D.done;R++,D=x.next()){N.index>R?(O=N,N=null):O=N.sibling;var F=E(b,N,D.value,V);if(F===null){N===null&&(N=O);break}t&&N&&F.alternate===null&&e(b,N),T=o(F,T,R),Z===null?G=F:Z.sibling=F,Z=F,N=O}if(D.done)return n(b,N),Qe&&Ss(b,R),G;if(N===null){for(;!D.done;R++,D=x.next())D=v(b,D.value,V),D!==null&&(T=o(D,T,R),Z===null?G=D:Z.sibling=D,Z=D);return Qe&&Ss(b,R),G}for(N=r(b,N);!D.done;R++,D=x.next())D=k(N,b,R,D.value,V),D!==null&&(t&&D.alternate!==null&&N.delete(D.key===null?R:D.key),T=o(D,T,R),Z===null?G=D:Z.sibling=D,Z=D);return t&&N.forEach(function(z){return e(b,z)}),Qe&&Ss(b,R),G}function I(b,T,x,V){if(typeof x=="object"&&x!==null&&x.type===Bo&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case $c:e:{for(var G=x.key,Z=T;Z!==null;){if(Z.key===G){if(G=x.type,G===Bo){if(Z.tag===7){n(b,Z.sibling),T=i(Z,x.props.children),T.return=b,b=T;break e}}else if(Z.elementType===G||typeof G=="object"&&G!==null&&G.$$typeof===Ti&&my(G)===Z.type){n(b,Z.sibling),T=i(Z,x.props),T.ref=Rl(b,Z,x),T.return=b,b=T;break e}n(b,Z);break}else e(b,Z);Z=Z.sibling}x.type===Bo?(T=Ls(x.props.children,b.mode,V,x.key),T.return=b,b=T):(V=Rh(x.type,x.key,x.props,null,b.mode,V),V.ref=Rl(b,T,x),V.return=b,b=V)}return a(b);case zo:e:{for(Z=x.key;T!==null;){if(T.key===Z)if(T.tag===4&&T.stateNode.containerInfo===x.containerInfo&&T.stateNode.implementation===x.implementation){n(b,T.sibling),T=i(T,x.children||[]),T.return=b,b=T;break e}else{n(b,T);break}else e(b,T);T=T.sibling}T=up(x,b.mode,V),T.return=b,b=T}return a(b);case Ti:return Z=x._init,I(b,T,Z(x._payload),V)}if(Vl(x))return P(b,T,x,V);if(xl(x))return A(b,T,x,V);eh(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,T!==null&&T.tag===6?(n(b,T.sibling),T=i(T,x),T.return=b,b=T):(n(b,T),T=lp(x,b.mode,V),T.return=b,b=T),a(b)):n(b,T)}return I}var pa=GE(!0),KE=GE(!1),id=rs(null),sd=null,Qo=null,Cg=null;function Rg(){Cg=Qo=sd=null}function bg(t){var e=id.current;Ge(id),t._currentValue=e}function sm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ia(t,e){sd=t,Cg=Qo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(on=!0),t.firstContext=null)}function Vn(t){var e=t._currentValue;if(Cg!==t)if(t={context:t,memoizedValue:e,next:null},Qo===null){if(sd===null)throw Error(Y(308));Qo=t,sd.dependencies={lanes:0,firstContext:t}}else Qo=Qo.next=t;return e}var Cs=null;function kg(t){Cs===null?Cs=[t]:Cs.push(t)}function ZE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,kg(e)):(n.next=i.next,i.next=n),e.interleaved=n,Jr(t,r)}function Jr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Si=!1;function Ng(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function QE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Jr(t,n)}return i=r.interleaved,i===null?(e.next=e,kg(r)):(e.next=i.next,i.next=e),r.interleaved=e,Jr(t,n)}function Sh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_g(t,n)}}function gy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function od(t,e,n,r){var i=t.updateQueue;Si=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var h=u,p=h.next;h.next=null,a===null?o=p:a.next=p,a=h;var _=t.alternate;_!==null&&(_=_.updateQueue,u=_.lastBaseUpdate,u!==a&&(u===null?_.firstBaseUpdate=p:u.next=p,_.lastBaseUpdate=h))}if(o!==null){var v=i.baseState;a=0,_=p=h=null,u=o;do{var E=u.lane,k=u.eventTime;if((r&E)===E){_!==null&&(_=_.next={eventTime:k,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var P=t,A=u;switch(E=e,k=n,A.tag){case 1:if(P=A.payload,typeof P=="function"){v=P.call(k,v,E);break e}v=P;break e;case 3:P.flags=P.flags&-65537|128;case 0:if(P=A.payload,E=typeof P=="function"?P.call(k,v,E):P,E==null)break e;v=nt({},v,E);break e;case 2:Si=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,E=i.effects,E===null?i.effects=[u]:E.push(u))}else k={eventTime:k,lane:E,tag:u.tag,payload:u.payload,callback:u.callback,next:null},_===null?(p=_=k,h=v):_=_.next=k,a|=E;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;E=u,u=E.next,E.next=null,i.lastBaseUpdate=E,i.shared.pending=null}}while(!0);if(_===null&&(h=v),i.baseState=h,i.firstBaseUpdate=p,i.lastBaseUpdate=_,e=i.shared.interleaved,e!==null){i=e;do a|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Bs|=a,t.lanes=a,t.memoizedState=v}}function _y(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Y(191,i));i.call(r)}}}var $u={},vr=rs($u),wu=rs($u),Eu=rs($u);function Rs(t){if(t===$u)throw Error(Y(174));return t}function Lg(t,e){switch(He(Eu,e),He(wu,t),He(vr,$u),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Fp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Fp(e,t)}Ge(vr),He(vr,e)}function ma(){Ge(vr),Ge(wu),Ge(Eu)}function JE(t){Rs(Eu.current);var e=Rs(vr.current),n=Fp(e,t.type);e!==n&&(He(wu,t),He(vr,n))}function Og(t){wu.current===t&&(Ge(vr),Ge(wu))}var Ye=rs(0);function ad(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var np=[];function Dg(){for(var t=0;t<np.length;t++)np[t]._workInProgressVersionPrimary=null;np.length=0}var xh=si.ReactCurrentDispatcher,rp=si.ReactCurrentBatchConfig,zs=0,et=null,vt=null,Pt=null,ld=!1,Xl=!1,Tu=0,KC=0;function Ft(){throw Error(Y(321))}function Mg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!rr(t[n],e[n]))return!1;return!0}function jg(t,e,n,r,i,o){if(zs=o,et=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xh.current=t===null||t.memoizedState===null?XC:YC,t=n(r,i),Xl){o=0;do{if(Xl=!1,Tu=0,25<=o)throw Error(Y(301));o+=1,Pt=vt=null,e.updateQueue=null,xh.current=eR,t=n(r,i)}while(Xl)}if(xh.current=ud,e=vt!==null&&vt.next!==null,zs=0,Pt=vt=et=null,ld=!1,e)throw Error(Y(300));return t}function Vg(){var t=Tu!==0;return Tu=0,t}function fr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?et.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function Fn(){if(vt===null){var t=et.alternate;t=t!==null?t.memoizedState:null}else t=vt.next;var e=Pt===null?et.memoizedState:Pt.next;if(e!==null)Pt=e,vt=t;else{if(t===null)throw Error(Y(310));vt=t,t={memoizedState:vt.memoizedState,baseState:vt.baseState,baseQueue:vt.baseQueue,queue:vt.queue,next:null},Pt===null?et.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function Su(t,e){return typeof e=="function"?e(t):e}function ip(t){var e=Fn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=vt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=a=null,h=null,p=o;do{var _=p.lane;if((zs&_)===_)h!==null&&(h=h.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:t(r,p.action);else{var v={lane:_,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};h===null?(u=h=v,a=r):h=h.next=v,et.lanes|=_,Bs|=_}p=p.next}while(p!==null&&p!==o);h===null?a=r:h.next=u,rr(r,e.memoizedState)||(on=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=h,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,et.lanes|=o,Bs|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sp(t){var e=Fn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do o=t(o,a.action),a=a.next;while(a!==i);rr(o,e.memoizedState)||(on=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function XE(){}function YE(t,e){var n=et,r=Fn(),i=e(),o=!rr(r.memoizedState,i);if(o&&(r.memoizedState=i,on=!0),r=r.queue,Fg(nT.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Pt!==null&&Pt.memoizedState.tag&1){if(n.flags|=2048,xu(9,tT.bind(null,n,r,i,e),void 0,null),Ct===null)throw Error(Y(349));zs&30||eT(n,e,i)}return i}function eT(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function tT(t,e,n,r){e.value=n,e.getSnapshot=r,rT(e)&&iT(t)}function nT(t,e,n){return n(function(){rT(e)&&iT(t)})}function rT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!rr(t,n)}catch{return!0}}function iT(t){var e=Jr(t,1);e!==null&&tr(e,t,1,-1)}function vy(t){var e=fr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Su,lastRenderedState:t},e.queue=t,t=t.dispatch=JC.bind(null,et,t),[e.memoizedState,t]}function xu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=et.updateQueue,e===null?(e={lastEffect:null,stores:null},et.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function sT(){return Fn().memoizedState}function Ih(t,e,n,r){var i=fr();et.flags|=t,i.memoizedState=xu(1|e,n,void 0,r===void 0?null:r)}function Bd(t,e,n,r){var i=Fn();r=r===void 0?null:r;var o=void 0;if(vt!==null){var a=vt.memoizedState;if(o=a.destroy,r!==null&&Mg(r,a.deps)){i.memoizedState=xu(e,n,o,r);return}}et.flags|=t,i.memoizedState=xu(1|e,n,o,r)}function yy(t,e){return Ih(8390656,8,t,e)}function Fg(t,e){return Bd(2048,8,t,e)}function oT(t,e){return Bd(4,2,t,e)}function aT(t,e){return Bd(4,4,t,e)}function lT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function uT(t,e,n){return n=n!=null?n.concat([t]):null,Bd(4,4,lT.bind(null,e,t),n)}function Ug(){}function cT(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mg(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function hT(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Mg(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dT(t,e,n){return zs&21?(rr(n,e)||(n=_E(),et.lanes|=n,Bs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,on=!0),t.memoizedState=n)}function ZC(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=rp.transition;rp.transition={};try{t(!1),e()}finally{Fe=n,rp.transition=r}}function fT(){return Fn().memoizedState}function QC(t,e,n){var r=$i(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},pT(t))mT(e,n);else if(n=ZE(t,e,n,r),n!==null){var i=Xt();tr(n,t,r,i),gT(n,e,r)}}function JC(t,e,n){var r=$i(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(pT(t))mT(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,u=o(a,n);if(i.hasEagerState=!0,i.eagerState=u,rr(u,a)){var h=e.interleaved;h===null?(i.next=i,kg(e)):(i.next=h.next,h.next=i),e.interleaved=i;return}}catch{}finally{}n=ZE(t,e,i,r),n!==null&&(i=Xt(),tr(n,t,r,i),gT(n,e,r))}}function pT(t){var e=t.alternate;return t===et||e!==null&&e===et}function mT(t,e){Xl=ld=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function gT(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,_g(t,n)}}var ud={readContext:Vn,useCallback:Ft,useContext:Ft,useEffect:Ft,useImperativeHandle:Ft,useInsertionEffect:Ft,useLayoutEffect:Ft,useMemo:Ft,useReducer:Ft,useRef:Ft,useState:Ft,useDebugValue:Ft,useDeferredValue:Ft,useTransition:Ft,useMutableSource:Ft,useSyncExternalStore:Ft,useId:Ft,unstable_isNewReconciler:!1},XC={readContext:Vn,useCallback:function(t,e){return fr().memoizedState=[t,e===void 0?null:e],t},useContext:Vn,useEffect:yy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ih(4194308,4,lT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ih(4,2,t,e)},useMemo:function(t,e){var n=fr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fr();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=QC.bind(null,et,t),[r.memoizedState,t]},useRef:function(t){var e=fr();return t={current:t},e.memoizedState=t},useState:vy,useDebugValue:Ug,useDeferredValue:function(t){return fr().memoizedState=t},useTransition:function(){var t=vy(!1),e=t[0];return t=ZC.bind(null,t[1]),fr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=et,i=fr();if(Qe){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),Ct===null)throw Error(Y(349));zs&30||eT(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,yy(nT.bind(null,r,o,t),[t]),r.flags|=2048,xu(9,tT.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=fr(),e=Ct.identifierPrefix;if(Qe){var n=Hr,r=$r;n=(r&~(1<<32-er(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YC={readContext:Vn,useCallback:cT,useContext:Vn,useEffect:Fg,useImperativeHandle:uT,useInsertionEffect:oT,useLayoutEffect:aT,useMemo:hT,useReducer:ip,useRef:sT,useState:function(){return ip(Su)},useDebugValue:Ug,useDeferredValue:function(t){var e=Fn();return dT(e,vt.memoizedState,t)},useTransition:function(){var t=ip(Su)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:XE,useSyncExternalStore:YE,useId:fT,unstable_isNewReconciler:!1},eR={readContext:Vn,useCallback:cT,useContext:Vn,useEffect:Fg,useImperativeHandle:uT,useInsertionEffect:oT,useLayoutEffect:aT,useMemo:hT,useReducer:sp,useRef:sT,useState:function(){return sp(Su)},useDebugValue:Ug,useDeferredValue:function(t){var e=Fn();return vt===null?e.memoizedState=t:dT(e,vt.memoizedState,t)},useTransition:function(){var t=sp(Su)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:XE,useSyncExternalStore:YE,useId:fT,unstable_isNewReconciler:!1};function Zn(t,e){if(t&&t.defaultProps){e=nt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function om(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:nt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var $d={isMounted:function(t){return(t=t._reactInternals)?Ys(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=$i(t),o=Kr(r,i);o.payload=e,n!=null&&(o.callback=n),e=zi(t,o,i),e!==null&&(tr(e,t,i,r),Sh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Xt(),i=$i(t),o=Kr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=zi(t,o,i),e!==null&&(tr(e,t,i,r),Sh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Xt(),r=$i(t),i=Kr(n,r);i.tag=2,e!=null&&(i.callback=e),e=zi(t,i,r),e!==null&&(tr(e,t,r,n),Sh(e,t,r))}};function wy(t,e,n,r,i,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!gu(n,r)||!gu(i,o):!0}function _T(t,e,n){var r=!1,i=Ji,o=e.contextType;return typeof o=="object"&&o!==null?o=Vn(o):(i=ln(e)?Fs:qt.current,r=e.contextTypes,o=(r=r!=null)?da(t,i):Ji),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=$d,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Ey(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&$d.enqueueReplaceState(e,e.state,null)}function am(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ng(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Vn(o):(o=ln(e)?Fs:qt.current,i.context=da(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(om(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&$d.enqueueReplaceState(i,i.state,null),od(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ga(t,e){try{var n="",r=e;do n+=CP(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function op(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function lm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tR=typeof WeakMap=="function"?WeakMap:Map;function vT(t,e,n){n=Kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hd||(hd=!0,vm=r),lm(t,e)},n}function yT(t,e,n){n=Kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){lm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){lm(t,e),typeof r!="function"&&(Bi===null?Bi=new Set([this]):Bi.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function Ty(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=mR.bind(null,t,e,n),e.then(t,t))}function Sy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Kr(-1,1),e.tag=2,zi(n,e,1))),n.lanes|=1),t)}var nR=si.ReactCurrentOwner,on=!1;function Jt(t,e,n,r){e.child=t===null?KE(e,null,n,r):pa(e,t.child,n,r)}function Iy(t,e,n,r,i){n=n.render;var o=e.ref;return ia(e,i),r=jg(t,e,n,r,o,i),n=Vg(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xr(t,e,i)):(Qe&&n&&Ig(e),e.flags|=1,Jt(t,e,r,i),e.child)}function Ay(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!Kg(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,wT(t,e,o,r,i)):(t=Rh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:gu,n(a,r)&&t.ref===e.ref)return Xr(t,e,i)}return e.flags|=1,t=Hi(o,r),t.ref=e.ref,t.return=e,e.child=t}function wT(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(gu(o,r)&&t.ref===e.ref)if(on=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(on=!0);else return e.lanes=t.lanes,Xr(t,e,i)}return um(t,e,n,r,i)}function ET(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Xo,_n),_n|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(Xo,_n),_n|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,He(Xo,_n),_n|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,He(Xo,_n),_n|=r;return Jt(t,e,i,n),e.child}function TT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function um(t,e,n,r,i){var o=ln(n)?Fs:qt.current;return o=da(e,o),ia(e,i),n=jg(t,e,n,r,o,i),r=Vg(),t!==null&&!on?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xr(t,e,i)):(Qe&&r&&Ig(e),e.flags|=1,Jt(t,e,n,i),e.child)}function Py(t,e,n,r,i){if(ln(n)){var o=!0;td(e)}else o=!1;if(ia(e,i),e.stateNode===null)Ah(t,e),_T(e,n,r),am(e,n,r,i),r=!0;else if(t===null){var a=e.stateNode,u=e.memoizedProps;a.props=u;var h=a.context,p=n.contextType;typeof p=="object"&&p!==null?p=Vn(p):(p=ln(n)?Fs:qt.current,p=da(e,p));var _=n.getDerivedStateFromProps,v=typeof _=="function"||typeof a.getSnapshotBeforeUpdate=="function";v||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==r||h!==p)&&Ey(e,a,r,p),Si=!1;var E=e.memoizedState;a.state=E,od(e,r,a,i),h=e.memoizedState,u!==r||E!==h||an.current||Si?(typeof _=="function"&&(om(e,n,_,r),h=e.memoizedState),(u=Si||wy(e,n,u,r,E,h,p))?(v||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=h),a.props=r,a.state=h,a.context=p,r=u):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,QE(t,e),u=e.memoizedProps,p=e.type===e.elementType?u:Zn(e.type,u),a.props=p,v=e.pendingProps,E=a.context,h=n.contextType,typeof h=="object"&&h!==null?h=Vn(h):(h=ln(n)?Fs:qt.current,h=da(e,h));var k=n.getDerivedStateFromProps;(_=typeof k=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==v||E!==h)&&Ey(e,a,r,h),Si=!1,E=e.memoizedState,a.state=E,od(e,r,a,i);var P=e.memoizedState;u!==v||E!==P||an.current||Si?(typeof k=="function"&&(om(e,n,k,r),P=e.memoizedState),(p=Si||wy(e,n,p,r,E,P,h)||!1)?(_||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,P,h),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,P,h)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=P),a.props=r,a.state=P,a.context=h,r=p):(typeof a.componentDidUpdate!="function"||u===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),r=!1)}return cm(t,e,n,r,o,i)}function cm(t,e,n,r,i,o){TT(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return i&&dy(e,n,!1),Xr(t,e,o);r=e.stateNode,nR.current=e;var u=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=pa(e,t.child,null,o),e.child=pa(e,null,u,o)):Jt(t,e,u,o),e.memoizedState=r.state,i&&dy(e,n,!0),e.child}function ST(t){var e=t.stateNode;e.pendingContext?hy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&hy(t,e.context,!1),Lg(t,e.containerInfo)}function Cy(t,e,n,r,i){return fa(),Pg(i),e.flags|=256,Jt(t,e,n,r),e.child}var hm={dehydrated:null,treeContext:null,retryLane:0};function dm(t){return{baseLanes:t,cachePool:null,transitions:null}}function xT(t,e,n){var r=e.pendingProps,i=Ye.current,o=!1,a=(e.flags&128)!==0,u;if((u=a)||(u=t!==null&&t.memoizedState===null?!1:(i&2)!==0),u?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),He(Ye,i&1),t===null)return im(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=qd(a,r,0,null),t=Ls(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=dm(n),e.memoizedState=hm,t):zg(e,a));if(i=t.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return rR(t,e,a,r,u,i,n);if(o){o=r.fallback,a=e.mode,i=t.child,u=i.sibling;var h={mode:"hidden",children:r.children};return!(a&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=h,e.deletions=null):(r=Hi(i,h),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=Hi(u,o):(o=Ls(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?dm(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=hm,r}return o=t.child,t=o.sibling,r=Hi(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zg(t,e){return e=qd({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function th(t,e,n,r){return r!==null&&Pg(r),pa(e,t.child,null,n),t=zg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rR(t,e,n,r,i,o,a){if(n)return e.flags&256?(e.flags&=-257,r=op(Error(Y(422))),th(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=qd({mode:"visible",children:r.children},i,0,null),o=Ls(o,i,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&pa(e,t.child,null,a),e.child.memoizedState=dm(a),e.memoizedState=hm,o);if(!(e.mode&1))return th(t,e,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(Y(419)),r=op(o,r,void 0),th(t,e,a,r)}if(u=(a&t.childLanes)!==0,on||u){if(r=Ct,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Jr(t,i),tr(r,t,i,-1))}return Gg(),r=op(Error(Y(421))),th(t,e,a,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=gR.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,vn=Ui(i.nextSibling),wn=e,Qe=!0,Jn=null,t!==null&&(Ln[On++]=$r,Ln[On++]=Hr,Ln[On++]=Us,$r=t.id,Hr=t.overflow,Us=e),e=zg(e,r.children),e.flags|=4096,e)}function Ry(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),sm(t.return,e,n)}function ap(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function IT(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Jt(t,e,r.children,n),r=Ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ry(t,n,e);else if(t.tag===19)Ry(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(Ye,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ad(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),ap(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ad(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}ap(e,!0,n,null,o);break;case"together":ap(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ah(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iR(t,e,n){switch(e.tag){case 3:ST(e),fa();break;case 5:JE(e);break;case 1:ln(e.type)&&td(e);break;case 4:Lg(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;He(id,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(Ye,Ye.current&1),e.flags|=128,null):n&e.child.childLanes?xT(t,e,n):(He(Ye,Ye.current&1),t=Xr(t,e,n),t!==null?t.sibling:null);He(Ye,Ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return IT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),He(Ye,Ye.current),r)break;return null;case 22:case 23:return e.lanes=0,ET(t,e,n)}return Xr(t,e,n)}var AT,fm,PT,CT;AT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};fm=function(){};PT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Rs(vr.current);var o=null;switch(n){case"input":i=Dp(t,i),r=Dp(t,r),o=[];break;case"select":i=nt({},i,{value:void 0}),r=nt({},r,{value:void 0}),o=[];break;case"textarea":i=Vp(t,i),r=Vp(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Yh)}Up(n,r);var a;n=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var u=i[p];for(a in u)u.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(uu.hasOwnProperty(p)?o||(o=[]):(o=o||[]).push(p,null));for(p in r){var h=r[p];if(u=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&h!==u&&(h!=null||u!=null))if(p==="style")if(u){for(a in u)!u.hasOwnProperty(a)||h&&h.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in h)h.hasOwnProperty(a)&&u[a]!==h[a]&&(n||(n={}),n[a]=h[a])}else n||(o||(o=[]),o.push(p,n)),n=h;else p==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,u=u?u.__html:void 0,h!=null&&u!==h&&(o=o||[]).push(p,h)):p==="children"?typeof h!="string"&&typeof h!="number"||(o=o||[]).push(p,""+h):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(uu.hasOwnProperty(p)?(h!=null&&p==="onScroll"&&We("scroll",t),o||u===h||(o=[])):(o=o||[]).push(p,h))}n&&(o=o||[]).push("style",n);var p=o;(e.updateQueue=p)&&(e.flags|=4)}};CT=function(t,e,n,r){n!==r&&(e.flags|=4)};function bl(t,e){if(!Qe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function sR(t,e,n){var r=e.pendingProps;switch(Ag(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ut(e),null;case 1:return ln(e.type)&&ed(),Ut(e),null;case 3:return r=e.stateNode,ma(),Ge(an),Ge(qt),Dg(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Jn!==null&&(Em(Jn),Jn=null))),fm(t,e),Ut(e),null;case 5:Og(e);var i=Rs(Eu.current);if(n=e.type,t!==null&&e.stateNode!=null)PT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Y(166));return Ut(e),null}if(t=Rs(vr.current),Yc(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[pr]=e,r[yu]=o,t=(e.mode&1)!==0,n){case"dialog":We("cancel",r),We("close",r);break;case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(i=0;i<Ul.length;i++)We(Ul[i],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"details":We("toggle",r);break;case"input":Vv(r,o),We("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},We("invalid",r);break;case"textarea":Uv(r,o),We("invalid",r)}Up(n,o),i=null;for(var a in o)if(o.hasOwnProperty(a)){var u=o[a];a==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&Xc(r.textContent,u,t),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&Xc(r.textContent,u,t),i=["children",""+u]):uu.hasOwnProperty(a)&&u!=null&&a==="onScroll"&&We("scroll",r)}switch(n){case"input":Hc(r),Fv(r,o,!0);break;case"textarea":Hc(r),zv(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Yh)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[pr]=e,t[yu]=r,AT(t,e,!1,!1),e.stateNode=t;e:{switch(a=zp(n,r),n){case"dialog":We("cancel",t),We("close",t),i=r;break;case"iframe":case"object":case"embed":We("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ul.length;i++)We(Ul[i],t);i=r;break;case"source":We("error",t),i=r;break;case"img":case"image":case"link":We("error",t),We("load",t),i=r;break;case"details":We("toggle",t),i=r;break;case"input":Vv(t,r),i=Dp(t,r),We("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=nt({},r,{value:void 0}),We("invalid",t);break;case"textarea":Uv(t,r),i=Vp(t,r),We("invalid",t);break;default:i=r}Up(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var h=u[o];o==="style"?sE(t,h):o==="dangerouslySetInnerHTML"?(h=h?h.__html:void 0,h!=null&&rE(t,h)):o==="children"?typeof h=="string"?(n!=="textarea"||h!=="")&&cu(t,h):typeof h=="number"&&cu(t,""+h):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(uu.hasOwnProperty(o)?h!=null&&o==="onScroll"&&We("scroll",t):h!=null&&hg(t,o,h,a))}switch(n){case"input":Hc(t),Fv(t,r,!1);break;case"textarea":Hc(t),zv(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Qi(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?ea(t,!!r.multiple,o,!1):r.defaultValue!=null&&ea(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Yh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ut(e),null;case 6:if(t&&e.stateNode!=null)CT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Rs(Eu.current),Rs(vr.current),Yc(e)){if(r=e.stateNode,n=e.memoizedProps,r[pr]=e,(o=r.nodeValue!==n)&&(t=wn,t!==null))switch(t.tag){case 3:Xc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xc(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pr]=e,e.stateNode=r}return Ut(e),null;case 13:if(Ge(Ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Qe&&vn!==null&&e.mode&1&&!(e.flags&128))qE(),fa(),e.flags|=98560,o=!1;else if(o=Yc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[pr]=e}else fa(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ut(e),o=!1}else Jn!==null&&(Em(Jn),Jn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ye.current&1?wt===0&&(wt=3):Gg())),e.updateQueue!==null&&(e.flags|=4),Ut(e),null);case 4:return ma(),fm(t,e),t===null&&_u(e.stateNode.containerInfo),Ut(e),null;case 10:return bg(e.type._context),Ut(e),null;case 17:return ln(e.type)&&ed(),Ut(e),null;case 19:if(Ge(Ye),o=e.memoizedState,o===null)return Ut(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)bl(o,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ad(t),a!==null){for(e.flags|=128,bl(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(Ye,Ye.current&1|2),e.child}t=t.sibling}o.tail!==null&&ct()>_a&&(e.flags|=128,r=!0,bl(o,!1),e.lanes=4194304)}else{if(!r)if(t=ad(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!Qe)return Ut(e),null}else 2*ct()-o.renderingStartTime>_a&&n!==1073741824&&(e.flags|=128,r=!0,bl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ct(),e.sibling=null,n=Ye.current,He(Ye,r?n&1|2:n&1),e):(Ut(e),null);case 22:case 23:return qg(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_n&1073741824&&(Ut(e),e.subtreeFlags&6&&(e.flags|=8192)):Ut(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function oR(t,e){switch(Ag(e),e.tag){case 1:return ln(e.type)&&ed(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ma(),Ge(an),Ge(qt),Dg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Og(e),null;case 13:if(Ge(Ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));fa()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ge(Ye),null;case 4:return ma(),null;case 10:return bg(e.type._context),null;case 22:case 23:return qg(),null;case 24:return null;default:return null}}var nh=!1,$t=!1,aR=typeof WeakSet=="function"?WeakSet:Set,ie=null;function Jo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){st(t,e,r)}else n.current=null}function pm(t,e,n){try{n()}catch(r){st(t,e,r)}}var by=!1;function lR(t,e){if(Jp=Qh,t=LE(),xg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,u=-1,h=-1,p=0,_=0,v=t,E=null;t:for(;;){for(var k;v!==n||i!==0&&v.nodeType!==3||(u=a+i),v!==o||r!==0&&v.nodeType!==3||(h=a+r),v.nodeType===3&&(a+=v.nodeValue.length),(k=v.firstChild)!==null;)E=v,v=k;for(;;){if(v===t)break t;if(E===n&&++p===i&&(u=a),E===o&&++_===r&&(h=a),(k=v.nextSibling)!==null)break;v=E,E=v.parentNode}v=k}n=u===-1||h===-1?null:{start:u,end:h}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xp={focusedElem:t,selectionRange:n},Qh=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var P=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(P!==null){var A=P.memoizedProps,I=P.memoizedState,b=e.stateNode,T=b.getSnapshotBeforeUpdate(e.elementType===e.type?A:Zn(e.type,A),I);b.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(V){st(e,e.return,V)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return P=by,by=!1,P}function Yl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&pm(e,n,o)}i=i.next}while(i!==r)}}function Hd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function mm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function RT(t){var e=t.alternate;e!==null&&(t.alternate=null,RT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pr],delete e[yu],delete e[tm],delete e[HC],delete e[WC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function bT(t){return t.tag===5||t.tag===3||t.tag===4}function ky(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||bT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function gm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yh));else if(r!==4&&(t=t.child,t!==null))for(gm(t,e,n),t=t.sibling;t!==null;)gm(t,e,n),t=t.sibling}function _m(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(_m(t,e,n),t=t.sibling;t!==null;)_m(t,e,n),t=t.sibling}var bt=null,Qn=!1;function yi(t,e,n){for(n=n.child;n!==null;)kT(t,e,n),n=n.sibling}function kT(t,e,n){if(_r&&typeof _r.onCommitFiberUnmount=="function")try{_r.onCommitFiberUnmount(Md,n)}catch{}switch(n.tag){case 5:$t||Jo(n,e);case 6:var r=bt,i=Qn;bt=null,yi(t,e,n),bt=r,Qn=i,bt!==null&&(Qn?(t=bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):bt.removeChild(n.stateNode));break;case 18:bt!==null&&(Qn?(t=bt,n=n.stateNode,t.nodeType===8?ep(t.parentNode,n):t.nodeType===1&&ep(t,n),pu(t)):ep(bt,n.stateNode));break;case 4:r=bt,i=Qn,bt=n.stateNode.containerInfo,Qn=!0,yi(t,e,n),bt=r,Qn=i;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&pm(n,e,a),i=i.next}while(i!==r)}yi(t,e,n);break;case 1:if(!$t&&(Jo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){st(n,e,u)}yi(t,e,n);break;case 21:yi(t,e,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,yi(t,e,n),$t=r):yi(t,e,n);break;default:yi(t,e,n)}}function Ny(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aR),e.forEach(function(r){var i=_R.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function qn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,a=e,u=a;e:for(;u!==null;){switch(u.tag){case 5:bt=u.stateNode,Qn=!1;break e;case 3:bt=u.stateNode.containerInfo,Qn=!0;break e;case 4:bt=u.stateNode.containerInfo,Qn=!0;break e}u=u.return}if(bt===null)throw Error(Y(160));kT(o,a,i),bt=null,Qn=!1;var h=i.alternate;h!==null&&(h.return=null),i.return=null}catch(p){st(i,e,p)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NT(e,t),e=e.sibling}function NT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(qn(e,t),hr(t),r&4){try{Yl(3,t,t.return),Hd(3,t)}catch(A){st(t,t.return,A)}try{Yl(5,t,t.return)}catch(A){st(t,t.return,A)}}break;case 1:qn(e,t),hr(t),r&512&&n!==null&&Jo(n,n.return);break;case 5:if(qn(e,t),hr(t),r&512&&n!==null&&Jo(n,n.return),t.flags&32){var i=t.stateNode;try{cu(i,"")}catch(A){st(t,t.return,A)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,u=t.type,h=t.updateQueue;if(t.updateQueue=null,h!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&eE(i,o),zp(u,a);var p=zp(u,o);for(a=0;a<h.length;a+=2){var _=h[a],v=h[a+1];_==="style"?sE(i,v):_==="dangerouslySetInnerHTML"?rE(i,v):_==="children"?cu(i,v):hg(i,_,v,p)}switch(u){case"input":Mp(i,o);break;case"textarea":tE(i,o);break;case"select":var E=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var k=o.value;k!=null?ea(i,!!o.multiple,k,!1):E!==!!o.multiple&&(o.defaultValue!=null?ea(i,!!o.multiple,o.defaultValue,!0):ea(i,!!o.multiple,o.multiple?[]:"",!1))}i[yu]=o}catch(A){st(t,t.return,A)}}break;case 6:if(qn(e,t),hr(t),r&4){if(t.stateNode===null)throw Error(Y(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(A){st(t,t.return,A)}}break;case 3:if(qn(e,t),hr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{pu(e.containerInfo)}catch(A){st(t,t.return,A)}break;case 4:qn(e,t),hr(t);break;case 13:qn(e,t),hr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Hg=ct())),r&4&&Ny(t);break;case 22:if(_=n!==null&&n.memoizedState!==null,t.mode&1?($t=(p=$t)||_,qn(e,t),$t=p):qn(e,t),hr(t),r&8192){if(p=t.memoizedState!==null,(t.stateNode.isHidden=p)&&!_&&t.mode&1)for(ie=t,_=t.child;_!==null;){for(v=ie=_;ie!==null;){switch(E=ie,k=E.child,E.tag){case 0:case 11:case 14:case 15:Yl(4,E,E.return);break;case 1:Jo(E,E.return);var P=E.stateNode;if(typeof P.componentWillUnmount=="function"){r=E,n=E.return;try{e=r,P.props=e.memoizedProps,P.state=e.memoizedState,P.componentWillUnmount()}catch(A){st(r,n,A)}}break;case 5:Jo(E,E.return);break;case 22:if(E.memoizedState!==null){Oy(v);continue}}k!==null?(k.return=E,ie=k):Oy(v)}_=_.sibling}e:for(_=null,v=t;;){if(v.tag===5){if(_===null){_=v;try{i=v.stateNode,p?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=v.stateNode,h=v.memoizedProps.style,a=h!=null&&h.hasOwnProperty("display")?h.display:null,u.style.display=iE("display",a))}catch(A){st(t,t.return,A)}}}else if(v.tag===6){if(_===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(A){st(t,t.return,A)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;_===v&&(_=null),v=v.return}_===v&&(_=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:qn(e,t),hr(t),r&4&&Ny(t);break;case 21:break;default:qn(e,t),hr(t)}}function hr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(bT(n)){var r=n;break e}n=n.return}throw Error(Y(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(cu(i,""),r.flags&=-33);var o=ky(t);_m(t,o,i);break;case 3:case 4:var a=r.stateNode.containerInfo,u=ky(t);gm(t,u,a);break;default:throw Error(Y(161))}}catch(h){st(t,t.return,h)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uR(t,e,n){ie=t,LT(t)}function LT(t,e,n){for(var r=(t.mode&1)!==0;ie!==null;){var i=ie,o=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||nh;if(!a){var u=i.alternate,h=u!==null&&u.memoizedState!==null||$t;u=nh;var p=$t;if(nh=a,($t=h)&&!p)for(ie=i;ie!==null;)a=ie,h=a.child,a.tag===22&&a.memoizedState!==null?Dy(i):h!==null?(h.return=a,ie=h):Dy(i);for(;o!==null;)ie=o,LT(o),o=o.sibling;ie=i,nh=u,$t=p}Ly(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ie=o):Ly(t)}}function Ly(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:$t||Hd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$t)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&_y(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}_y(e,a,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var h=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":h.autoFocus&&n.focus();break;case"img":h.src&&(n.src=h.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var p=e.alternate;if(p!==null){var _=p.memoizedState;if(_!==null){var v=_.dehydrated;v!==null&&pu(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}$t||e.flags&512&&mm(e)}catch(E){st(e,e.return,E)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Oy(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function Dy(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Hd(4,e)}catch(h){st(e,n,h)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(h){st(e,i,h)}}var o=e.return;try{mm(e)}catch(h){st(e,o,h)}break;case 5:var a=e.return;try{mm(e)}catch(h){st(e,a,h)}}}catch(h){st(e,e.return,h)}if(e===t){ie=null;break}var u=e.sibling;if(u!==null){u.return=e.return,ie=u;break}ie=e.return}}var cR=Math.ceil,cd=si.ReactCurrentDispatcher,Bg=si.ReactCurrentOwner,jn=si.ReactCurrentBatchConfig,Oe=0,Ct=null,mt=null,Ot=0,_n=0,Xo=rs(0),wt=0,Iu=null,Bs=0,Wd=0,$g=0,eu=null,sn=null,Hg=0,_a=1/0,zr=null,hd=!1,vm=null,Bi=null,rh=!1,Li=null,dd=0,tu=0,ym=null,Ph=-1,Ch=0;function Xt(){return Oe&6?ct():Ph!==-1?Ph:Ph=ct()}function $i(t){return t.mode&1?Oe&2&&Ot!==0?Ot&-Ot:GC.transition!==null?(Ch===0&&(Ch=_E()),Ch):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:xE(t.type)),t):1}function tr(t,e,n,r){if(50<tu)throw tu=0,ym=null,Error(Y(185));Uu(t,n,r),(!(Oe&2)||t!==Ct)&&(t===Ct&&(!(Oe&2)&&(Wd|=n),wt===4&&Ii(t,Ot)),un(t,r),n===1&&Oe===0&&!(e.mode&1)&&(_a=ct()+500,zd&&is()))}function un(t,e){var n=t.callbackNode;GP(t,e);var r=Zh(t,t===Ct?Ot:0);if(r===0)n!==null&&Hv(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Hv(n),e===1)t.tag===0?qC(My.bind(null,t)):$E(My.bind(null,t)),BC(function(){!(Oe&6)&&is()}),n=null;else{switch(vE(r)){case 1:n=gg;break;case 4:n=mE;break;case 16:n=Kh;break;case 536870912:n=gE;break;default:n=Kh}n=zT(n,OT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function OT(t,e){if(Ph=-1,Ch=0,Oe&6)throw Error(Y(327));var n=t.callbackNode;if(sa()&&t.callbackNode!==n)return null;var r=Zh(t,t===Ct?Ot:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=fd(t,r);else{e=r;var i=Oe;Oe|=2;var o=MT();(Ct!==t||Ot!==e)&&(zr=null,_a=ct()+500,Ns(t,e));do try{fR();break}catch(u){DT(t,u)}while(!0);Rg(),cd.current=o,Oe=i,mt!==null?e=0:(Ct=null,Ot=0,e=wt)}if(e!==0){if(e===2&&(i=qp(t),i!==0&&(r=i,e=wm(t,i))),e===1)throw n=Iu,Ns(t,0),Ii(t,r),un(t,ct()),n;if(e===6)Ii(t,r);else{if(i=t.current.alternate,!(r&30)&&!hR(i)&&(e=fd(t,r),e===2&&(o=qp(t),o!==0&&(r=o,e=wm(t,o))),e===1))throw n=Iu,Ns(t,0),Ii(t,r),un(t,ct()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Y(345));case 2:xs(t,sn,zr);break;case 3:if(Ii(t,r),(r&130023424)===r&&(e=Hg+500-ct(),10<e)){if(Zh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Xt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=em(xs.bind(null,t,sn,zr),e);break}xs(t,sn,zr);break;case 4:if(Ii(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-er(r);o=1<<a,a=e[a],a>i&&(i=a),r&=~o}if(r=i,r=ct()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cR(r/1960))-r,10<r){t.timeoutHandle=em(xs.bind(null,t,sn,zr),r);break}xs(t,sn,zr);break;case 5:xs(t,sn,zr);break;default:throw Error(Y(329))}}}return un(t,ct()),t.callbackNode===n?OT.bind(null,t):null}function wm(t,e){var n=eu;return t.current.memoizedState.isDehydrated&&(Ns(t,e).flags|=256),t=fd(t,e),t!==2&&(e=sn,sn=n,e!==null&&Em(e)),t}function Em(t){sn===null?sn=t:sn.push.apply(sn,t)}function hR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!rr(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ii(t,e){for(e&=~$g,e&=~Wd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-er(e),r=1<<n;t[n]=-1,e&=~r}}function My(t){if(Oe&6)throw Error(Y(327));sa();var e=Zh(t,0);if(!(e&1))return un(t,ct()),null;var n=fd(t,e);if(t.tag!==0&&n===2){var r=qp(t);r!==0&&(e=r,n=wm(t,r))}if(n===1)throw n=Iu,Ns(t,0),Ii(t,e),un(t,ct()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,xs(t,sn,zr),un(t,ct()),null}function Wg(t,e){var n=Oe;Oe|=1;try{return t(e)}finally{Oe=n,Oe===0&&(_a=ct()+500,zd&&is())}}function $s(t){Li!==null&&Li.tag===0&&!(Oe&6)&&sa();var e=Oe;Oe|=1;var n=jn.transition,r=Fe;try{if(jn.transition=null,Fe=1,t)return t()}finally{Fe=r,jn.transition=n,Oe=e,!(Oe&6)&&is()}}function qg(){_n=Xo.current,Ge(Xo)}function Ns(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zC(n)),mt!==null)for(n=mt.return;n!==null;){var r=n;switch(Ag(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ed();break;case 3:ma(),Ge(an),Ge(qt),Dg();break;case 5:Og(r);break;case 4:ma();break;case 13:Ge(Ye);break;case 19:Ge(Ye);break;case 10:bg(r.type._context);break;case 22:case 23:qg()}n=n.return}if(Ct=t,mt=t=Hi(t.current,null),Ot=_n=e,wt=0,Iu=null,$g=Wd=Bs=0,sn=eu=null,Cs!==null){for(e=0;e<Cs.length;e++)if(n=Cs[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=i,r.next=a}n.pending=r}Cs=null}return t}function DT(t,e){do{var n=mt;try{if(Rg(),xh.current=ud,ld){for(var r=et.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ld=!1}if(zs=0,Pt=vt=et=null,Xl=!1,Tu=0,Bg.current=null,n===null||n.return===null){wt=1,Iu=e,mt=null;break}e:{var o=t,a=n.return,u=n,h=e;if(e=Ot,u.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){var p=h,_=u,v=_.tag;if(!(_.mode&1)&&(v===0||v===11||v===15)){var E=_.alternate;E?(_.updateQueue=E.updateQueue,_.memoizedState=E.memoizedState,_.lanes=E.lanes):(_.updateQueue=null,_.memoizedState=null)}var k=Sy(a);if(k!==null){k.flags&=-257,xy(k,a,u,o,e),k.mode&1&&Ty(o,p,e),e=k,h=p;var P=e.updateQueue;if(P===null){var A=new Set;A.add(h),e.updateQueue=A}else P.add(h);break e}else{if(!(e&1)){Ty(o,p,e),Gg();break e}h=Error(Y(426))}}else if(Qe&&u.mode&1){var I=Sy(a);if(I!==null){!(I.flags&65536)&&(I.flags|=256),xy(I,a,u,o,e),Pg(ga(h,u));break e}}o=h=ga(h,u),wt!==4&&(wt=2),eu===null?eu=[o]:eu.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var b=vT(o,h,e);gy(o,b);break e;case 1:u=h;var T=o.type,x=o.stateNode;if(!(o.flags&128)&&(typeof T.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Bi===null||!Bi.has(x)))){o.flags|=65536,e&=-e,o.lanes|=e;var V=yT(o,u,e);gy(o,V);break e}}o=o.return}while(o!==null)}VT(n)}catch(G){e=G,mt===n&&n!==null&&(mt=n=n.return);continue}break}while(!0)}function MT(){var t=cd.current;return cd.current=ud,t===null?ud:t}function Gg(){(wt===0||wt===3||wt===2)&&(wt=4),Ct===null||!(Bs&268435455)&&!(Wd&268435455)||Ii(Ct,Ot)}function fd(t,e){var n=Oe;Oe|=2;var r=MT();(Ct!==t||Ot!==e)&&(zr=null,Ns(t,e));do try{dR();break}catch(i){DT(t,i)}while(!0);if(Rg(),Oe=n,cd.current=r,mt!==null)throw Error(Y(261));return Ct=null,Ot=0,wt}function dR(){for(;mt!==null;)jT(mt)}function fR(){for(;mt!==null&&!VP();)jT(mt)}function jT(t){var e=UT(t.alternate,t,_n);t.memoizedProps=t.pendingProps,e===null?VT(t):mt=e,Bg.current=null}function VT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oR(n,e),n!==null){n.flags&=32767,mt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,mt=null;return}}else if(n=sR(n,e,_n),n!==null){mt=n;return}if(e=e.sibling,e!==null){mt=e;return}mt=e=t}while(e!==null);wt===0&&(wt=5)}function xs(t,e,n){var r=Fe,i=jn.transition;try{jn.transition=null,Fe=1,pR(t,e,n,r)}finally{jn.transition=i,Fe=r}return null}function pR(t,e,n,r){do sa();while(Li!==null);if(Oe&6)throw Error(Y(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(KP(t,o),t===Ct&&(mt=Ct=null,Ot=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rh||(rh=!0,zT(Kh,function(){return sa(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=jn.transition,jn.transition=null;var a=Fe;Fe=1;var u=Oe;Oe|=4,Bg.current=null,lR(t,n),NT(n,t),OC(Xp),Qh=!!Jp,Xp=Jp=null,t.current=n,uR(n),FP(),Oe=u,Fe=a,jn.transition=o}else t.current=n;if(rh&&(rh=!1,Li=t,dd=i),o=t.pendingLanes,o===0&&(Bi=null),BP(n.stateNode),un(t,ct()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(hd)throw hd=!1,t=vm,vm=null,t;return dd&1&&t.tag!==0&&sa(),o=t.pendingLanes,o&1?t===ym?tu++:(tu=0,ym=t):tu=0,is(),null}function sa(){if(Li!==null){var t=vE(dd),e=jn.transition,n=Fe;try{if(jn.transition=null,Fe=16>t?16:t,Li===null)var r=!1;else{if(t=Li,Li=null,dd=0,Oe&6)throw Error(Y(331));var i=Oe;for(Oe|=4,ie=t.current;ie!==null;){var o=ie,a=o.child;if(ie.flags&16){var u=o.deletions;if(u!==null){for(var h=0;h<u.length;h++){var p=u[h];for(ie=p;ie!==null;){var _=ie;switch(_.tag){case 0:case 11:case 15:Yl(8,_,o)}var v=_.child;if(v!==null)v.return=_,ie=v;else for(;ie!==null;){_=ie;var E=_.sibling,k=_.return;if(RT(_),_===p){ie=null;break}if(E!==null){E.return=k,ie=E;break}ie=k}}}var P=o.alternate;if(P!==null){var A=P.child;if(A!==null){P.child=null;do{var I=A.sibling;A.sibling=null,A=I}while(A!==null)}}ie=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ie=a;else e:for(;ie!==null;){if(o=ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Yl(9,o,o.return)}var b=o.sibling;if(b!==null){b.return=o.return,ie=b;break e}ie=o.return}}var T=t.current;for(ie=T;ie!==null;){a=ie;var x=a.child;if(a.subtreeFlags&2064&&x!==null)x.return=a,ie=x;else e:for(a=T;ie!==null;){if(u=ie,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Hd(9,u)}}catch(G){st(u,u.return,G)}if(u===a){ie=null;break e}var V=u.sibling;if(V!==null){V.return=u.return,ie=V;break e}ie=u.return}}if(Oe=i,is(),_r&&typeof _r.onPostCommitFiberRoot=="function")try{_r.onPostCommitFiberRoot(Md,t)}catch{}r=!0}return r}finally{Fe=n,jn.transition=e}}return!1}function jy(t,e,n){e=ga(n,e),e=vT(t,e,1),t=zi(t,e,1),e=Xt(),t!==null&&(Uu(t,1,e),un(t,e))}function st(t,e,n){if(t.tag===3)jy(t,t,n);else for(;e!==null;){if(e.tag===3){jy(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Bi===null||!Bi.has(r))){t=ga(n,t),t=yT(e,t,1),e=zi(e,t,1),t=Xt(),e!==null&&(Uu(e,1,t),un(e,t));break}}e=e.return}}function mR(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Xt(),t.pingedLanes|=t.suspendedLanes&n,Ct===t&&(Ot&n)===n&&(wt===4||wt===3&&(Ot&130023424)===Ot&&500>ct()-Hg?Ns(t,0):$g|=n),un(t,e)}function FT(t,e){e===0&&(t.mode&1?(e=Gc,Gc<<=1,!(Gc&130023424)&&(Gc=4194304)):e=1);var n=Xt();t=Jr(t,e),t!==null&&(Uu(t,e,n),un(t,n))}function gR(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),FT(t,n)}function _R(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Y(314))}r!==null&&r.delete(e),FT(t,n)}var UT;UT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)on=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return on=!1,iR(t,e,n);on=!!(t.flags&131072)}else on=!1,Qe&&e.flags&1048576&&HE(e,rd,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ah(t,e),t=e.pendingProps;var i=da(e,qt.current);ia(e,n),i=jg(null,e,r,t,i,n);var o=Vg();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(o=!0,td(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ng(e),i.updater=$d,e.stateNode=i,i._reactInternals=e,am(e,r,t,n),e=cm(null,e,r,!0,o,n)):(e.tag=0,Qe&&o&&Ig(e),Jt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ah(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=yR(r),t=Zn(r,t),i){case 0:e=um(null,e,r,t,n);break e;case 1:e=Py(null,e,r,t,n);break e;case 11:e=Iy(null,e,r,t,n);break e;case 14:e=Ay(null,e,r,Zn(r.type,t),n);break e}throw Error(Y(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),um(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),Py(t,e,r,i,n);case 3:e:{if(ST(e),t===null)throw Error(Y(387));r=e.pendingProps,o=e.memoizedState,i=o.element,QE(t,e),od(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ga(Error(Y(423)),e),e=Cy(t,e,r,n,i);break e}else if(r!==i){i=ga(Error(Y(424)),e),e=Cy(t,e,r,n,i);break e}else for(vn=Ui(e.stateNode.containerInfo.firstChild),wn=e,Qe=!0,Jn=null,n=KE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fa(),r===i){e=Xr(t,e,n);break e}Jt(t,e,r,n)}e=e.child}return e;case 5:return JE(e),t===null&&im(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,a=i.children,Yp(r,i)?a=null:o!==null&&Yp(r,o)&&(e.flags|=32),TT(t,e),Jt(t,e,a,n),e.child;case 6:return t===null&&im(e),null;case 13:return xT(t,e,n);case 4:return Lg(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pa(e,null,r,n):Jt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),Iy(t,e,r,i,n);case 7:return Jt(t,e,e.pendingProps,n),e.child;case 8:return Jt(t,e,e.pendingProps.children,n),e.child;case 12:return Jt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,a=i.value,He(id,r._currentValue),r._currentValue=a,o!==null)if(rr(o.value,a)){if(o.children===i.children&&!an.current){e=Xr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var u=o.dependencies;if(u!==null){a=o.child;for(var h=u.firstContext;h!==null;){if(h.context===r){if(o.tag===1){h=Kr(-1,n&-n),h.tag=2;var p=o.updateQueue;if(p!==null){p=p.shared;var _=p.pending;_===null?h.next=h:(h.next=_.next,_.next=h),p.pending=h}}o.lanes|=n,h=o.alternate,h!==null&&(h.lanes|=n),sm(o.return,n,e),u.lanes|=n;break}h=h.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(Y(341));a.lanes|=n,u=a.alternate,u!==null&&(u.lanes|=n),sm(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}Jt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ia(e,n),i=Vn(i),r=r(i),e.flags|=1,Jt(t,e,r,n),e.child;case 14:return r=e.type,i=Zn(r,e.pendingProps),i=Zn(r.type,i),Ay(t,e,r,i,n);case 15:return wT(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Zn(r,i),Ah(t,e),e.tag=1,ln(r)?(t=!0,td(e)):t=!1,ia(e,n),_T(e,r,i),am(e,r,i,n),cm(null,e,r,!0,t,n);case 19:return IT(t,e,n);case 22:return ET(t,e,n)}throw Error(Y(156,e.tag))};function zT(t,e){return pE(t,e)}function vR(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,e,n,r){return new vR(t,e,n,r)}function Kg(t){return t=t.prototype,!(!t||!t.isReactComponent)}function yR(t){if(typeof t=="function")return Kg(t)?1:0;if(t!=null){if(t=t.$$typeof,t===fg)return 11;if(t===pg)return 14}return 2}function Hi(t,e){var n=t.alternate;return n===null?(n=Mn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rh(t,e,n,r,i,o){var a=2;if(r=t,typeof t=="function")Kg(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Bo:return Ls(n.children,i,o,e);case dg:a=8,i|=8;break;case kp:return t=Mn(12,n,e,i|2),t.elementType=kp,t.lanes=o,t;case Np:return t=Mn(13,n,e,i),t.elementType=Np,t.lanes=o,t;case Lp:return t=Mn(19,n,e,i),t.elementType=Lp,t.lanes=o,t;case J0:return qd(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Z0:a=10;break e;case Q0:a=9;break e;case fg:a=11;break e;case pg:a=14;break e;case Ti:a=16,r=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=Mn(a,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ls(t,e,n,r){return t=Mn(7,t,r,e),t.lanes=n,t}function qd(t,e,n,r){return t=Mn(22,t,r,e),t.elementType=J0,t.lanes=n,t.stateNode={isHidden:!1},t}function lp(t,e,n){return t=Mn(6,t,null,e),t.lanes=n,t}function up(t,e,n){return e=Mn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wR(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$f(0),this.expirationTimes=$f(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$f(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zg(t,e,n,r,i,o,a,u,h){return t=new wR(t,e,n,u,h),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Mn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ng(o),t}function ER(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function BT(t){if(!t)return Ji;t=t._reactInternals;e:{if(Ys(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(ln(n))return BE(t,n,e)}return e}function $T(t,e,n,r,i,o,a,u,h){return t=Zg(n,r,!0,t,i,o,a,u,h),t.context=BT(null),n=t.current,r=Xt(),i=$i(n),o=Kr(r,i),o.callback=e??null,zi(n,o,i),t.current.lanes=i,Uu(t,i,r),un(t,r),t}function Gd(t,e,n,r){var i=e.current,o=Xt(),a=$i(i);return n=BT(n),e.context===null?e.context=n:e.pendingContext=n,e=Kr(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zi(i,e,a),t!==null&&(tr(t,i,a,o),Sh(t,i,a)),a}function pd(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Qg(t,e){Vy(t,e),(t=t.alternate)&&Vy(t,e)}function TR(){return null}var HT=typeof reportError=="function"?reportError:function(t){console.error(t)};function Jg(t){this._internalRoot=t}Kd.prototype.render=Jg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Gd(t,e,null,null)};Kd.prototype.unmount=Jg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;$s(function(){Gd(null,t,null,null)}),e[Qr]=null}};function Kd(t){this._internalRoot=t}Kd.prototype.unstable_scheduleHydration=function(t){if(t){var e=EE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xi.length&&e!==0&&e<xi[n].priority;n++);xi.splice(n,0,t),n===0&&SE(t)}};function Xg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Zd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fy(){}function SR(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var p=pd(a);o.call(p)}}var a=$T(e,r,t,0,null,!1,!1,"",Fy);return t._reactRootContainer=a,t[Qr]=a.current,_u(t.nodeType===8?t.parentNode:t),$s(),a}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var p=pd(h);u.call(p)}}var h=Zg(t,0,!1,null,null,!1,!1,"",Fy);return t._reactRootContainer=h,t[Qr]=h.current,_u(t.nodeType===8?t.parentNode:t),$s(function(){Gd(e,h,n,r)}),h}function Qd(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if(typeof i=="function"){var u=i;i=function(){var h=pd(a);u.call(h)}}Gd(e,a,t,i)}else a=SR(n,e,t,i,r);return pd(a)}yE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fl(e.pendingLanes);n!==0&&(_g(e,n|1),un(e,ct()),!(Oe&6)&&(_a=ct()+500,is()))}break;case 13:$s(function(){var r=Jr(t,1);if(r!==null){var i=Xt();tr(r,t,1,i)}}),Qg(t,1)}};vg=function(t){if(t.tag===13){var e=Jr(t,134217728);if(e!==null){var n=Xt();tr(e,t,134217728,n)}Qg(t,134217728)}};wE=function(t){if(t.tag===13){var e=$i(t),n=Jr(t,e);if(n!==null){var r=Xt();tr(n,t,e,r)}Qg(t,e)}};EE=function(){return Fe};TE=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};$p=function(t,e,n){switch(e){case"input":if(Mp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ud(r);if(!i)throw Error(Y(90));Y0(r),Mp(r,i)}}}break;case"textarea":tE(t,n);break;case"select":e=n.value,e!=null&&ea(t,!!n.multiple,e,!1)}};lE=Wg;uE=$s;var xR={usingClientEntryPoint:!1,Events:[Bu,qo,Ud,oE,aE,Wg]},kl={findFiberByHostInstance:Ps,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IR={bundleType:kl.bundleType,version:kl.version,rendererPackageName:kl.rendererPackageName,rendererConfig:kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:si.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dE(t),t===null?null:t.stateNode},findFiberByHostInstance:kl.findFiberByHostInstance||TR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ih=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ih.isDisabled&&ih.supportsFiber)try{Md=ih.inject(IR),_r=ih}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xR;Tn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xg(e))throw Error(Y(200));return ER(t,e,null,n)};Tn.createRoot=function(t,e){if(!Xg(t))throw Error(Y(299));var n=!1,r="",i=HT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Zg(t,1,!1,null,null,n,!1,r,i),t[Qr]=e.current,_u(t.nodeType===8?t.parentNode:t),new Jg(e)};Tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=dE(e),t=t===null?null:t.stateNode,t};Tn.flushSync=function(t){return $s(t)};Tn.hydrate=function(t,e,n){if(!Zd(e))throw Error(Y(200));return Qd(null,t,e,!0,n)};Tn.hydrateRoot=function(t,e,n){if(!Xg(t))throw Error(Y(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",a=HT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=$T(e,null,t,1,n??null,i,!1,o,a),t[Qr]=e.current,_u(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Kd(e)};Tn.render=function(t,e,n){if(!Zd(e))throw Error(Y(200));return Qd(null,t,e,!1,n)};Tn.unmountComponentAtNode=function(t){if(!Zd(t))throw Error(Y(40));return t._reactRootContainer?($s(function(){Qd(null,null,t,!1,function(){t._reactRootContainer=null,t[Qr]=null})}),!0):!1};Tn.unstable_batchedUpdates=Wg;Tn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Zd(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Qd(t,e,n,!1,r)};Tn.version="18.3.1-next-f1338f8080-20240426";function WT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WT)}catch(t){console.error(t)}}WT(),W0.exports=Tn;var qT=W0.exports,Uy=qT;Rp.createRoot=Uy.createRoot,Rp.hydrateRoot=Uy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Au(){return Au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Au.apply(this,arguments)}var Oi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Oi||(Oi={}));const zy="popstate";function AR(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:a,hash:u}=r.location;return Tm("",{pathname:o,search:a,hash:u},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:md(i)}return CR(e,n,null,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function GT(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PR(){return Math.random().toString(36).substr(2,8)}function By(t,e){return{usr:t.state,key:t.key,idx:e}}function Tm(t,e,n,r){return n===void 0&&(n=null),Au({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ka(e):e,{state:n,key:e&&e.key||r||PR()})}function md(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ka(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function CR(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,u=Oi.Pop,h=null,p=_();p==null&&(p=0,a.replaceState(Au({},a.state,{idx:p}),""));function _(){return(a.state||{idx:null}).idx}function v(){u=Oi.Pop;let I=_(),b=I==null?null:I-p;p=I,h&&h({action:u,location:A.location,delta:b})}function E(I,b){u=Oi.Push;let T=Tm(A.location,I,b);p=_()+1;let x=By(T,p),V=A.createHref(T);try{a.pushState(x,"",V)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;i.location.assign(V)}o&&h&&h({action:u,location:A.location,delta:1})}function k(I,b){u=Oi.Replace;let T=Tm(A.location,I,b);p=_();let x=By(T,p),V=A.createHref(T);a.replaceState(x,"",V),o&&h&&h({action:u,location:A.location,delta:0})}function P(I){let b=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof I=="string"?I:md(I);return T=T.replace(/ $/,"%20"),tt(b,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,b)}let A={get action(){return u},get location(){return t(i,a)},listen(I){if(h)throw new Error("A history only accepts one active listener");return i.addEventListener(zy,v),h=I,()=>{i.removeEventListener(zy,v),h=null}},createHref(I){return e(i,I)},createURL:P,encodeLocation(I){let b=P(I);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:E,replace:k,go(I){return a.go(I)}};return A}var $y;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})($y||($y={}));function RR(t,e,n){return n===void 0&&(n="/"),bR(t,e,n)}function bR(t,e,n,r){let i=typeof e=="string"?ka(e):e,o=va(i.pathname||"/",n);if(o==null)return null;let a=KT(t);kR(a);let u=null;for(let h=0;u==null&&h<a.length;++h){let p=BR(o);u=UR(a[h],p)}return u}function KT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,a,u)=>{let h={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};h.relativePath.startsWith("/")&&(tt(h.relativePath.startsWith(r),'Absolute route path "'+h.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),h.relativePath=h.relativePath.slice(r.length));let p=Wi([r,h.relativePath]),_=n.concat(h);o.children&&o.children.length>0&&(tt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),KT(o.children,e,_,p)),!(o.path==null&&!o.index)&&e.push({path:p,score:VR(p,o.index),routesMeta:_})};return t.forEach((o,a)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))i(o,a);else for(let h of ZT(o.path))i(o,a,h)}),e}function ZT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let a=ZT(r.join("/")),u=[];return u.push(...a.map(h=>h===""?o:[o,h].join("/"))),i&&u.push(...a),u.map(h=>t.startsWith("/")&&h===""?"/":h)}function kR(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FR(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const NR=/^:[\w-]+$/,LR=3,OR=2,DR=1,MR=10,jR=-2,Hy=t=>t==="*";function VR(t,e){let n=t.split("/"),r=n.length;return n.some(Hy)&&(r+=jR),e&&(r+=OR),n.filter(i=>!Hy(i)).reduce((i,o)=>i+(NR.test(o)?LR:o===""?DR:MR),r)}function FR(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function UR(t,e,n){let{routesMeta:r}=t,i={},o="/",a=[];for(let u=0;u<r.length;++u){let h=r[u],p=u===r.length-1,_=o==="/"?e:e.slice(o.length)||"/",v=Sm({path:h.relativePath,caseSensitive:h.caseSensitive,end:p},_),E=h.route;if(!v)return null;Object.assign(i,v.params),a.push({params:i,pathname:Wi([o,v.pathname]),pathnameBase:qR(Wi([o,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(o=Wi([o,v.pathnameBase]))}return a}function Sm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=zR(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),u=i.slice(1);return{params:r.reduce((p,_,v)=>{let{paramName:E,isOptional:k}=_;if(E==="*"){let A=u[v]||"";a=o.slice(0,o.length-A.length).replace(/(.)\/+$/,"$1")}const P=u[v];return k&&!P?p[E]=void 0:p[E]=(P||"").replace(/%2F/g,"/"),p},{}),pathname:o,pathnameBase:a,pattern:t}}function zR(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),GT(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,u,h)=>(r.push({paramName:u,isOptional:h!=null}),h?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function BR(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return GT(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function va(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function $R(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ka(t):t;return{pathname:n?n.startsWith("/")?n:HR(n,e):e,search:GR(r),hash:KR(i)}}function HR(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function cp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WR(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Yg(t,e){let n=WR(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function e_(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ka(t):(i=Au({},t),tt(!i.pathname||!i.pathname.includes("?"),cp("?","pathname","search",i)),tt(!i.pathname||!i.pathname.includes("#"),cp("#","pathname","hash",i)),tt(!i.search||!i.search.includes("#"),cp("#","search","hash",i)));let o=t===""||i.pathname==="",a=o?"/":i.pathname,u;if(a==null)u=n;else{let v=e.length-1;if(!r&&a.startsWith("..")){let E=a.split("/");for(;E[0]==="..";)E.shift(),v-=1;i.pathname=E.join("/")}u=v>=0?e[v]:"/"}let h=$R(i,u),p=a&&a!=="/"&&a.endsWith("/"),_=(o||a===".")&&n.endsWith("/");return!h.pathname.endsWith("/")&&(p||_)&&(h.pathname+="/"),h}const Wi=t=>t.join("/").replace(/\/\/+/g,"/"),qR=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),GR=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KR=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZR(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const QT=["post","put","patch","delete"];new Set(QT);const QR=["get",...QT];new Set(QR);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pu(){return Pu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pu.apply(this,arguments)}const Jd=U.createContext(null),JT=U.createContext(null),oi=U.createContext(null),Xd=U.createContext(null),ss=U.createContext({outlet:null,matches:[],isDataRoute:!1}),XT=U.createContext(null);function JR(t,e){let{relative:n}=e===void 0?{}:e;Na()||tt(!1);let{basename:r,navigator:i}=U.useContext(oi),{hash:o,pathname:a,search:u}=Yd(t,{relative:n}),h=a;return r!=="/"&&(h=a==="/"?r:Wi([r,a])),i.createHref({pathname:h,search:u,hash:o})}function Na(){return U.useContext(Xd)!=null}function La(){return Na()||tt(!1),U.useContext(Xd).location}function YT(t){U.useContext(oi).static||U.useLayoutEffect(t)}function Un(){let{isDataRoute:t}=U.useContext(ss);return t?cb():XR()}function XR(){Na()||tt(!1);let t=U.useContext(Jd),{basename:e,future:n,navigator:r}=U.useContext(oi),{matches:i}=U.useContext(ss),{pathname:o}=La(),a=JSON.stringify(Yg(i,n.v7_relativeSplatPath)),u=U.useRef(!1);return YT(()=>{u.current=!0}),U.useCallback(function(p,_){if(_===void 0&&(_={}),!u.current)return;if(typeof p=="number"){r.go(p);return}let v=e_(p,JSON.parse(a),o,_.relative==="path");t==null&&e!=="/"&&(v.pathname=v.pathname==="/"?e:Wi([e,v.pathname])),(_.replace?r.replace:r.push)(v,_.state,_)},[e,r,a,o,t])}function Yd(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=U.useContext(oi),{matches:i}=U.useContext(ss),{pathname:o}=La(),a=JSON.stringify(Yg(i,r.v7_relativeSplatPath));return U.useMemo(()=>e_(t,JSON.parse(a),o,n==="path"),[t,a,o,n])}function YR(t,e){return eb(t,e)}function eb(t,e,n,r){Na()||tt(!1);let{navigator:i}=U.useContext(oi),{matches:o}=U.useContext(ss),a=o[o.length-1],u=a?a.params:{};a&&a.pathname;let h=a?a.pathnameBase:"/";a&&a.route;let p=La(),_;if(e){var v;let I=typeof e=="string"?ka(e):e;h==="/"||(v=I.pathname)!=null&&v.startsWith(h)||tt(!1),_=I}else _=p;let E=_.pathname||"/",k=E;if(h!=="/"){let I=h.replace(/^\//,"").split("/");k="/"+E.replace(/^\//,"").split("/").slice(I.length).join("/")}let P=RR(t,{pathname:k}),A=sb(P&&P.map(I=>Object.assign({},I,{params:Object.assign({},u,I.params),pathname:Wi([h,i.encodeLocation?i.encodeLocation(I.pathname).pathname:I.pathname]),pathnameBase:I.pathnameBase==="/"?h:Wi([h,i.encodeLocation?i.encodeLocation(I.pathnameBase).pathname:I.pathnameBase])})),o,n,r);return e&&A?U.createElement(Xd.Provider,{value:{location:Pu({pathname:"/",search:"",hash:"",state:null,key:"default"},_),navigationType:Oi.Pop}},A):A}function tb(){let t=ub(),e=ZR(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return U.createElement(U.Fragment,null,U.createElement("h2",null,"Unexpected Application Error!"),U.createElement("h3",{style:{fontStyle:"italic"}},e),n?U.createElement("pre",{style:i},n):null,null)}const nb=U.createElement(tb,null);class rb extends U.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?U.createElement(ss.Provider,{value:this.props.routeContext},U.createElement(XT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ib(t){let{routeContext:e,match:n,children:r}=t,i=U.useContext(Jd);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),U.createElement(ss.Provider,{value:e},r)}function sb(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,u=(i=n)==null?void 0:i.errors;if(u!=null){let _=a.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);_>=0||tt(!1),a=a.slice(0,Math.min(a.length,_+1))}let h=!1,p=-1;if(n&&r&&r.v7_partialHydration)for(let _=0;_<a.length;_++){let v=a[_];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=_),v.route.id){let{loaderData:E,errors:k}=n,P=v.route.loader&&E[v.route.id]===void 0&&(!k||k[v.route.id]===void 0);if(v.route.lazy||P){h=!0,p>=0?a=a.slice(0,p+1):a=[a[0]];break}}}return a.reduceRight((_,v,E)=>{let k,P=!1,A=null,I=null;n&&(k=u&&v.route.id?u[v.route.id]:void 0,A=v.route.errorElement||nb,h&&(p<0&&E===0?(hb("route-fallback"),P=!0,I=null):p===E&&(P=!0,I=v.route.hydrateFallbackElement||null)));let b=e.concat(a.slice(0,E+1)),T=()=>{let x;return k?x=A:P?x=I:v.route.Component?x=U.createElement(v.route.Component,null):v.route.element?x=v.route.element:x=_,U.createElement(ib,{match:v,routeContext:{outlet:_,matches:b,isDataRoute:n!=null},children:x})};return n&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?U.createElement(rb,{location:n.location,revalidation:n.revalidation,component:A,error:k,children:T(),routeContext:{outlet:null,matches:b,isDataRoute:!0}}):T()},null)}var eS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(eS||{}),tS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tS||{});function ob(t){let e=U.useContext(Jd);return e||tt(!1),e}function ab(t){let e=U.useContext(JT);return e||tt(!1),e}function lb(t){let e=U.useContext(ss);return e||tt(!1),e}function nS(t){let e=lb(),n=e.matches[e.matches.length-1];return n.route.id||tt(!1),n.route.id}function ub(){var t;let e=U.useContext(XT),n=ab(),r=nS();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function cb(){let{router:t}=ob(eS.UseNavigateStable),e=nS(tS.UseNavigateStable),n=U.useRef(!1);return YT(()=>{n.current=!0}),U.useCallback(function(i,o){o===void 0&&(o={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Pu({fromRouteId:e},o)))},[t,e])}const Wy={};function hb(t,e,n){Wy[t]||(Wy[t]=!0)}function db(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function sh(t){let{to:e,replace:n,state:r,relative:i}=t;Na()||tt(!1);let{future:o,static:a}=U.useContext(oi),{matches:u}=U.useContext(ss),{pathname:h}=La(),p=Un(),_=e_(e,Yg(u,o.v7_relativeSplatPath),h,i==="path"),v=JSON.stringify(_);return U.useEffect(()=>p(JSON.parse(v),{replace:n,state:r,relative:i}),[p,v,i,n,r]),null}function gn(t){tt(!1)}function fb(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Oi.Pop,navigator:o,static:a=!1,future:u}=t;Na()&&tt(!1);let h=e.replace(/^\/*/,"/"),p=U.useMemo(()=>({basename:h,navigator:o,static:a,future:Pu({v7_relativeSplatPath:!1},u)}),[h,u,o,a]);typeof r=="string"&&(r=ka(r));let{pathname:_="/",search:v="",hash:E="",state:k=null,key:P="default"}=r,A=U.useMemo(()=>{let I=va(_,h);return I==null?null:{location:{pathname:I,search:v,hash:E,state:k,key:P},navigationType:i}},[h,_,v,E,k,P,i]);return A==null?null:U.createElement(oi.Provider,{value:p},U.createElement(Xd.Provider,{children:n,value:A}))}function pb(t){let{children:e,location:n}=t;return YR(xm(e),n)}new Promise(()=>{});function xm(t,e){e===void 0&&(e=[]);let n=[];return U.Children.forEach(t,(r,i)=>{if(!U.isValidElement(r))return;let o=[...e,i];if(r.type===U.Fragment){n.push.apply(n,xm(r.props.children,o));return}r.type!==gn&&tt(!1),!r.props.index||!r.props.children||tt(!1);let a={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(a.children=xm(r.props.children,o)),n.push(a)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function gd(){return gd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gd.apply(this,arguments)}function rS(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function mb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function gb(t,e){return t.button===0&&(!e||e==="_self")&&!mb(t)}const _b=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],vb=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],yb="6";try{window.__reactRouterVersion=yb}catch{}const wb=U.createContext({isTransitioning:!1}),Eb="startTransition",qy=mP[Eb];function Tb(t){let{basename:e,children:n,future:r,window:i}=t,o=U.useRef();o.current==null&&(o.current=AR({window:i,v5Compat:!0}));let a=o.current,[u,h]=U.useState({action:a.action,location:a.location}),{v7_startTransition:p}=r||{},_=U.useCallback(v=>{p&&qy?qy(()=>h(v)):h(v)},[h,p]);return U.useLayoutEffect(()=>a.listen(_),[a,_]),U.useEffect(()=>db(r),[r]),U.createElement(fb,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:a,future:r})}const Sb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",xb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ib=U.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:o,replace:a,state:u,target:h,to:p,preventScrollReset:_,viewTransition:v}=e,E=rS(e,_b),{basename:k}=U.useContext(oi),P,A=!1;if(typeof p=="string"&&xb.test(p)&&(P=p,Sb))try{let x=new URL(window.location.href),V=p.startsWith("//")?new URL(x.protocol+p):new URL(p),G=va(V.pathname,k);V.origin===x.origin&&G!=null?p=G+V.search+V.hash:A=!0}catch{}let I=JR(p,{relative:i}),b=Pb(p,{replace:a,state:u,target:h,preventScrollReset:_,relative:i,viewTransition:v});function T(x){r&&r(x),x.defaultPrevented||b(x)}return U.createElement("a",gd({},E,{href:P||I,onClick:A||o?r:T,ref:n,target:h}))}),Xn=U.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:o="",end:a=!1,style:u,to:h,viewTransition:p,children:_}=e,v=rS(e,vb),E=Yd(h,{relative:v.relative}),k=La(),P=U.useContext(JT),{navigator:A,basename:I}=U.useContext(oi),b=P!=null&&Cb(E)&&p===!0,T=A.encodeLocation?A.encodeLocation(E).pathname:E.pathname,x=k.pathname,V=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;i||(x=x.toLowerCase(),V=V?V.toLowerCase():null,T=T.toLowerCase()),V&&I&&(V=va(V,I)||V);const G=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let Z=x===T||!a&&x.startsWith(T)&&x.charAt(G)==="/",N=V!=null&&(V===T||!a&&V.startsWith(T)&&V.charAt(T.length)==="/"),R={isActive:Z,isPending:N,isTransitioning:b},O=Z?r:void 0,D;typeof o=="function"?D=o(R):D=[o,Z?"active":null,N?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let F=typeof u=="function"?u(R):u;return U.createElement(Ib,gd({},v,{"aria-current":O,className:D,ref:n,style:F,to:h,viewTransition:p}),typeof _=="function"?_(R):_)});var Im;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Im||(Im={}));var Gy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gy||(Gy={}));function Ab(t){let e=U.useContext(Jd);return e||tt(!1),e}function Pb(t,e){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:u}=e===void 0?{}:e,h=Un(),p=La(),_=Yd(t,{relative:a});return U.useCallback(v=>{if(gb(v,n)){v.preventDefault();let E=r!==void 0?r:md(p)===md(_);h(t,{replace:E,state:i,preventScrollReset:o,relative:a,viewTransition:u})}},[p,h,_,r,i,n,t,o,a,u])}function Cb(t,e){e===void 0&&(e={});let n=U.useContext(wb);n==null&&tt(!1);let{basename:r}=Ab(Im.useViewTransitionState),i=Yd(t,{relative:e.relative});if(!n.isTransitioning)return!1;let o=va(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=va(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Sm(i.pathname,a)!=null||Sm(i.pathname,o)!=null}let Rb={data:""},bb=t=>typeof window=="object"?((t?t.querySelector("#_goober"):window._goober)||Object.assign((t||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:t||Rb,kb=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Nb=/\/\*[^]*?\*\/|  +/g,Ky=/\n+/g,Ai=(t,e)=>{let n="",r="",i="";for(let o in t){let a=t[o];o[0]=="@"?o[1]=="i"?n=o+" "+a+";":r+=o[1]=="f"?Ai(a,o):o+"{"+Ai(a,o[1]=="k"?"":e)+"}":typeof a=="object"?r+=Ai(a,e?e.replace(/([^,])+/g,u=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,h=>/&/.test(h)?h.replace(/&/g,u):u?u+" "+h:h)):o):a!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Ai.p?Ai.p(o,a):o+":"+a+";")}return n+(e&&i?e+"{"+i+"}":i)+r},Ur={},iS=t=>{if(typeof t=="object"){let e="";for(let n in t)e+=n+iS(t[n]);return e}return t},Lb=(t,e,n,r,i)=>{let o=iS(t),a=Ur[o]||(Ur[o]=(h=>{let p=0,_=11;for(;p<h.length;)_=101*_+h.charCodeAt(p++)>>>0;return"go"+_})(o));if(!Ur[a]){let h=o!==t?t:(p=>{let _,v,E=[{}];for(;_=kb.exec(p.replace(Nb,""));)_[4]?E.shift():_[3]?(v=_[3].replace(Ky," ").trim(),E.unshift(E[0][v]=E[0][v]||{})):E[0][_[1]]=_[2].replace(Ky," ").trim();return E[0]})(t);Ur[a]=Ai(i?{["@keyframes "+a]:h}:h,n?"":"."+a)}let u=n&&Ur.g?Ur.g:null;return n&&(Ur.g=Ur[a]),((h,p,_,v)=>{v?p.data=p.data.replace(v,h):p.data.indexOf(h)===-1&&(p.data=_?h+p.data:p.data+h)})(Ur[a],e,r,u),a},Ob=(t,e,n)=>t.reduce((r,i,o)=>{let a=e[o];if(a&&a.call){let u=a(n),h=u&&u.props&&u.props.className||/^go/.test(u)&&u;a=h?"."+h:u&&typeof u=="object"?u.props?"":Ai(u,""):u===!1?"":u}return r+i+(a??"")},"");function ef(t){let e=this||{},n=t.call?t(e.p):t;return Lb(n.unshift?n.raw?Ob(n,[].slice.call(arguments,1),e.p):n.reduce((r,i)=>Object.assign(r,i&&i.call?i(e.p):i),{}):n,bb(e.target),e.g,e.o,e.k)}let sS,Am,Pm;ef.bind({g:1});let Yr=ef.bind({k:1});function Db(t,e,n,r){Ai.p=e,sS=t,Am=n,Pm=r}function os(t,e){let n=this||{};return function(){let r=arguments;function i(o,a){let u=Object.assign({},o),h=u.className||i.className;n.p=Object.assign({theme:Am&&Am()},u),n.o=/ *go\d+/.test(h),u.className=ef.apply(n,r)+(h?" "+h:"");let p=t;return t[0]&&(p=u.as||t,delete u.as),Pm&&p[0]&&Pm(u),sS(p,u)}return i}}var Mb=t=>typeof t=="function",_d=(t,e)=>Mb(t)?t(e):t,jb=(()=>{let t=0;return()=>(++t).toString()})(),oS=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Vb=20,t_="default",aS=(t,e)=>{let{toastLimit:n}=t.settings;switch(e.type){case 0:return{...t,toasts:[e.toast,...t.toasts].slice(0,n)};case 1:return{...t,toasts:t.toasts.map(a=>a.id===e.toast.id?{...a,...e.toast}:a)};case 2:let{toast:r}=e;return aS(t,{type:t.toasts.find(a=>a.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=e;return{...t,toasts:t.toasts.map(a=>a.id===i||i===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==e.toastId)};case 5:return{...t,pausedAt:e.time};case 6:let o=e.time-(t.pausedAt||0);return{...t,pausedAt:void 0,toasts:t.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+o}))}}},bh=[],lS={toasts:[],pausedAt:void 0,settings:{toastLimit:Vb}},mr={},uS=(t,e=t_)=>{mr[e]=aS(mr[e]||lS,t),bh.forEach(([n,r])=>{n===e&&r(mr[e])})},cS=t=>Object.keys(mr).forEach(e=>uS(t,e)),Fb=t=>Object.keys(mr).find(e=>mr[e].toasts.some(n=>n.id===t)),tf=(t=t_)=>e=>{uS(e,t)},Ub={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},zb=(t={},e=t_)=>{let[n,r]=U.useState(mr[e]||lS),i=U.useRef(mr[e]);U.useEffect(()=>(i.current!==mr[e]&&r(mr[e]),bh.push([e,r]),()=>{let a=bh.findIndex(([u])=>u===e);a>-1&&bh.splice(a,1)}),[e]);let o=n.toasts.map(a=>{var u,h,p;return{...t,...t[a.type],...a,removeDelay:a.removeDelay||((u=t[a.type])==null?void 0:u.removeDelay)||(t==null?void 0:t.removeDelay),duration:a.duration||((h=t[a.type])==null?void 0:h.duration)||(t==null?void 0:t.duration)||Ub[a.type],style:{...t.style,...(p=t[a.type])==null?void 0:p.style,...a.style}}});return{...n,toasts:o}},Bb=(t,e="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...n,id:(n==null?void 0:n.id)||jb()}),Hu=t=>(e,n)=>{let r=Bb(e,t,n);return tf(r.toasterId||Fb(r.id))({type:2,toast:r}),r.id},yt=(t,e)=>Hu("blank")(t,e);yt.error=Hu("error");yt.success=Hu("success");yt.loading=Hu("loading");yt.custom=Hu("custom");yt.dismiss=(t,e)=>{let n={type:3,toastId:t};e?tf(e)(n):cS(n)};yt.dismissAll=t=>yt.dismiss(void 0,t);yt.remove=(t,e)=>{let n={type:4,toastId:t};e?tf(e)(n):cS(n)};yt.removeAll=t=>yt.remove(void 0,t);yt.promise=(t,e,n)=>{let r=yt.loading(e.loading,{...n,...n==null?void 0:n.loading});return typeof t=="function"&&(t=t()),t.then(i=>{let o=e.success?_d(e.success,i):void 0;return o?yt.success(o,{id:r,...n,...n==null?void 0:n.success}):yt.dismiss(r),i}).catch(i=>{let o=e.error?_d(e.error,i):void 0;o?yt.error(o,{id:r,...n,...n==null?void 0:n.error}):yt.dismiss(r)}),t};var $b=1e3,Hb=(t,e="default")=>{let{toasts:n,pausedAt:r}=zb(t,e),i=U.useRef(new Map).current,o=U.useCallback((v,E=$b)=>{if(i.has(v))return;let k=setTimeout(()=>{i.delete(v),a({type:4,toastId:v})},E);i.set(v,k)},[]);U.useEffect(()=>{if(r)return;let v=Date.now(),E=n.map(k=>{if(k.duration===1/0)return;let P=(k.duration||0)+k.pauseDuration-(v-k.createdAt);if(P<0){k.visible&&yt.dismiss(k.id);return}return setTimeout(()=>yt.dismiss(k.id,e),P)});return()=>{E.forEach(k=>k&&clearTimeout(k))}},[n,r,e]);let a=U.useCallback(tf(e),[e]),u=U.useCallback(()=>{a({type:5,time:Date.now()})},[a]),h=U.useCallback((v,E)=>{a({type:1,toast:{id:v,height:E}})},[a]),p=U.useCallback(()=>{r&&a({type:6,time:Date.now()})},[r,a]),_=U.useCallback((v,E)=>{let{reverseOrder:k=!1,gutter:P=8,defaultPosition:A}=E||{},I=n.filter(x=>(x.position||A)===(v.position||A)&&x.height),b=I.findIndex(x=>x.id===v.id),T=I.filter((x,V)=>V<b&&x.visible).length;return I.filter(x=>x.visible).slice(...k?[T+1]:[0,T]).reduce((x,V)=>x+(V.height||0)+P,0)},[n]);return U.useEffect(()=>{n.forEach(v=>{if(v.dismissed)o(v.id,v.removeDelay);else{let E=i.get(v.id);E&&(clearTimeout(E),i.delete(v.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:h,startPause:u,endPause:p,calculateOffset:_}}},Wb=Yr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,qb=Yr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Gb=Yr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Kb=os("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Wb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${qb} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${t=>t.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Gb} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Zb=Yr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Qb=os("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${t=>t.secondary||"#e0e0e0"};
  border-right-color: ${t=>t.primary||"#616161"};
  animation: ${Zb} 1s linear infinite;
`,Jb=Yr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Xb=Yr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Yb=os("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${t=>t.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Jb} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Xb} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${t=>t.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ek=os("div")`
  position: absolute;
`,tk=os("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,nk=Yr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rk=os("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${nk} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ik=({toast:t})=>{let{icon:e,type:n,iconTheme:r}=t;return e!==void 0?typeof e=="string"?U.createElement(rk,null,e):e:n==="blank"?null:U.createElement(tk,null,U.createElement(Qb,{...r}),n!=="loading"&&U.createElement(ek,null,n==="error"?U.createElement(Kb,{...r}):U.createElement(Yb,{...r})))},sk=t=>`
0% {transform: translate3d(0,${t*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ok=t=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${t*-150}%,-1px) scale(.6); opacity:0;}
`,ak="0%{opacity:0;} 100%{opacity:1;}",lk="0%{opacity:1;} 100%{opacity:0;}",uk=os("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,ck=os("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,hk=(t,e)=>{let n=t.includes("top")?1:-1,[r,i]=oS()?[ak,lk]:[sk(n),ok(n)];return{animation:e?`${Yr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Yr(i)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},dk=U.memo(({toast:t,position:e,style:n,children:r})=>{let i=t.height?hk(t.position||e||"top-center",t.visible):{opacity:0},o=U.createElement(ik,{toast:t}),a=U.createElement(ck,{...t.ariaProps},_d(t.message,t));return U.createElement(uk,{className:t.className,style:{...i,...n,...t.style}},typeof r=="function"?r({icon:o,message:a}):U.createElement(U.Fragment,null,o,a))});Db(U.createElement);var fk=({id:t,className:e,style:n,onHeightUpdate:r,children:i})=>{let o=U.useCallback(a=>{if(a){let u=()=>{let h=a.getBoundingClientRect().height;r(t,h)};u(),new MutationObserver(u).observe(a,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return U.createElement("div",{ref:o,className:e,style:n},i)},pk=(t,e)=>{let n=t.includes("top"),r=n?{top:0}:{bottom:0},i=t.includes("center")?{justifyContent:"center"}:t.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:oS()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(n?1:-1)}px)`,...r,...i}},mk=ef`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,oh=16,gk=({reverseOrder:t,position:e="top-center",toastOptions:n,gutter:r,children:i,toasterId:o,containerStyle:a,containerClassName:u})=>{let{toasts:h,handlers:p}=Hb(n,o);return U.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:oh,left:oh,right:oh,bottom:oh,pointerEvents:"none",...a},className:u,onMouseEnter:p.startPause,onMouseLeave:p.endPause},h.map(_=>{let v=_.position||e,E=p.calculateOffset(_,{reverseOrder:t,gutter:r,defaultPosition:e}),k=pk(v,E);return U.createElement(fk,{id:_.id,key:_.id,onHeightUpdate:p.updateHeight,className:_.visible?mk:"",style:k},_.type==="custom"?_d(_.message,_):i?i(_):U.createElement(dk,{toast:_,position:v}))}))},kt=yt;function hS(t,e){return function(){return t.apply(e,arguments)}}const{toString:_k}=Object.prototype,{getPrototypeOf:n_}=Object,{iterator:nf,toStringTag:dS}=Symbol,rf=(t=>e=>{const n=_k.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),sr=t=>(t=t.toLowerCase(),e=>rf(e)===t),sf=t=>e=>typeof e===t,{isArray:Oa}=Array,ya=sf("undefined");function Wu(t){return t!==null&&!ya(t)&&t.constructor!==null&&!ya(t.constructor)&&cn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const fS=sr("ArrayBuffer");function vk(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&fS(t.buffer),e}const yk=sf("string"),cn=sf("function"),pS=sf("number"),qu=t=>t!==null&&typeof t=="object",wk=t=>t===!0||t===!1,kh=t=>{if(rf(t)!=="object")return!1;const e=n_(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(dS in t)&&!(nf in t)},Ek=t=>{if(!qu(t)||Wu(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},Tk=sr("Date"),Sk=sr("File"),xk=sr("Blob"),Ik=sr("FileList"),Ak=t=>qu(t)&&cn(t.pipe),Pk=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||cn(t.append)&&((e=rf(t))==="formdata"||e==="object"&&cn(t.toString)&&t.toString()==="[object FormData]"))},Ck=sr("URLSearchParams"),[Rk,bk,kk,Nk]=["ReadableStream","Request","Response","Headers"].map(sr),Lk=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Gu(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Oa(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{if(Wu(t))return;const o=n?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let u;for(r=0;r<a;r++)u=o[r],e.call(null,t[u],u,t)}}function mS(t,e){if(Wu(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const bs=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gS=t=>!ya(t)&&t!==bs;function Cm(){const{caseless:t,skipUndefined:e}=gS(this)&&this||{},n={},r=(i,o)=>{const a=t&&mS(n,o)||o;kh(n[a])&&kh(i)?n[a]=Cm(n[a],i):kh(i)?n[a]=Cm({},i):Oa(i)?n[a]=i.slice():(!e||!ya(i))&&(n[a]=i)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Gu(arguments[i],r);return n}const Ok=(t,e,n,{allOwnKeys:r}={})=>(Gu(e,(i,o)=>{n&&cn(i)?t[o]=hS(i,n):t[o]=i},{allOwnKeys:r}),t),Dk=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Mk=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},jk=(t,e,n,r)=>{let i,o,a;const u={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)a=i[o],(!r||r(a,t,e))&&!u[a]&&(e[a]=t[a],u[a]=!0);t=n!==!1&&n_(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Vk=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},Fk=t=>{if(!t)return null;if(Oa(t))return t;let e=t.length;if(!pS(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Uk=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&n_(Uint8Array)),zk=(t,e)=>{const r=(t&&t[nf]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},Bk=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},$k=sr("HTMLFormElement"),Hk=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),Zy=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Wk=sr("RegExp"),_S=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Gu(n,(i,o)=>{let a;(a=e(i,o,t))!==!1&&(r[o]=a||i)}),Object.defineProperties(t,r)},qk=t=>{_S(t,(e,n)=>{if(cn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(cn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Gk=(t,e)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return Oa(t)?r(t):r(String(t).split(e)),n},Kk=()=>{},Zk=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function Qk(t){return!!(t&&cn(t.append)&&t[dS]==="FormData"&&t[nf])}const Jk=t=>{const e=new Array(10),n=(r,i)=>{if(qu(r)){if(e.indexOf(r)>=0)return;if(Wu(r))return r;if(!("toJSON"in r)){e[i]=r;const o=Oa(r)?[]:{};return Gu(r,(a,u)=>{const h=n(a,i+1);!ya(h)&&(o[u]=h)}),e[i]=void 0,o}}return r};return n(t,0)},Xk=sr("AsyncFunction"),Yk=t=>t&&(qu(t)||cn(t))&&cn(t.then)&&cn(t.catch),vS=((t,e)=>t?setImmediate:e?((n,r)=>(bs.addEventListener("message",({source:i,data:o})=>{i===bs&&o===n&&r.length&&r.shift()()},!1),i=>{r.push(i),bs.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",cn(bs.postMessage)),e1=typeof queueMicrotask<"u"?queueMicrotask.bind(bs):typeof process<"u"&&process.nextTick||vS,t1=t=>t!=null&&cn(t[nf]),W={isArray:Oa,isArrayBuffer:fS,isBuffer:Wu,isFormData:Pk,isArrayBufferView:vk,isString:yk,isNumber:pS,isBoolean:wk,isObject:qu,isPlainObject:kh,isEmptyObject:Ek,isReadableStream:Rk,isRequest:bk,isResponse:kk,isHeaders:Nk,isUndefined:ya,isDate:Tk,isFile:Sk,isBlob:xk,isRegExp:Wk,isFunction:cn,isStream:Ak,isURLSearchParams:Ck,isTypedArray:Uk,isFileList:Ik,forEach:Gu,merge:Cm,extend:Ok,trim:Lk,stripBOM:Dk,inherits:Mk,toFlatObject:jk,kindOf:rf,kindOfTest:sr,endsWith:Vk,toArray:Fk,forEachEntry:zk,matchAll:Bk,isHTMLForm:$k,hasOwnProperty:Zy,hasOwnProp:Zy,reduceDescriptors:_S,freezeMethods:qk,toObjectSet:Gk,toCamelCase:Hk,noop:Kk,toFiniteNumber:Zk,findKey:mS,global:bs,isContextDefined:gS,isSpecCompliantForm:Qk,toJSONObject:Jk,isAsyncFn:Xk,isThenable:Yk,setImmediate:vS,asap:e1,isIterable:t1};function Te(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}W.inherits(Te,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:W.toJSONObject(this.config),code:this.code,status:this.status}}});const yS=Te.prototype,wS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{wS[t]={value:t}});Object.defineProperties(Te,wS);Object.defineProperty(yS,"isAxiosError",{value:!0});Te.from=(t,e,n,r,i,o)=>{const a=Object.create(yS);W.toFlatObject(t,a,function(_){return _!==Error.prototype},p=>p!=="isAxiosError");const u=t&&t.message?t.message:"Error",h=e==null&&t?t.code:e;return Te.call(a,u,h,n,r,i),t&&a.cause==null&&Object.defineProperty(a,"cause",{value:t,configurable:!0}),a.name=t&&t.name||"Error",o&&Object.assign(a,o),a};const n1=null;function Rm(t){return W.isPlainObject(t)||W.isArray(t)}function ES(t){return W.endsWith(t,"[]")?t.slice(0,-2):t}function Qy(t,e,n){return t?t.concat(e).map(function(i,o){return i=ES(i),!n&&o?"["+i+"]":i}).join(n?".":""):e}function r1(t){return W.isArray(t)&&!t.some(Rm)}const i1=W.toFlatObject(W,{},null,function(e){return/^is[A-Z]/.test(e)});function of(t,e,n){if(!W.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=W.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,I){return!W.isUndefined(I[A])});const r=n.metaTokens,i=n.visitor||_,o=n.dots,a=n.indexes,h=(n.Blob||typeof Blob<"u"&&Blob)&&W.isSpecCompliantForm(e);if(!W.isFunction(i))throw new TypeError("visitor must be a function");function p(P){if(P===null)return"";if(W.isDate(P))return P.toISOString();if(W.isBoolean(P))return P.toString();if(!h&&W.isBlob(P))throw new Te("Blob is not supported. Use a Buffer instead.");return W.isArrayBuffer(P)||W.isTypedArray(P)?h&&typeof Blob=="function"?new Blob([P]):Buffer.from(P):P}function _(P,A,I){let b=P;if(P&&!I&&typeof P=="object"){if(W.endsWith(A,"{}"))A=r?A:A.slice(0,-2),P=JSON.stringify(P);else if(W.isArray(P)&&r1(P)||(W.isFileList(P)||W.endsWith(A,"[]"))&&(b=W.toArray(P)))return A=ES(A),b.forEach(function(x,V){!(W.isUndefined(x)||x===null)&&e.append(a===!0?Qy([A],V,o):a===null?A:A+"[]",p(x))}),!1}return Rm(P)?!0:(e.append(Qy(I,A,o),p(P)),!1)}const v=[],E=Object.assign(i1,{defaultVisitor:_,convertValue:p,isVisitable:Rm});function k(P,A){if(!W.isUndefined(P)){if(v.indexOf(P)!==-1)throw Error("Circular reference detected in "+A.join("."));v.push(P),W.forEach(P,function(b,T){(!(W.isUndefined(b)||b===null)&&i.call(e,b,W.isString(T)?T.trim():T,A,E))===!0&&k(b,A?A.concat(T):[T])}),v.pop()}}if(!W.isObject(t))throw new TypeError("data must be an object");return k(t),e}function Jy(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function r_(t,e){this._pairs=[],t&&of(t,this,e)}const TS=r_.prototype;TS.append=function(e,n){this._pairs.push([e,n])};TS.toString=function(e){const n=e?function(r){return e.call(this,r,Jy)}:Jy;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function s1(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function SS(t,e,n){if(!e)return t;const r=n&&n.encode||s1;W.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let o;if(i?o=i(e,n):o=W.isURLSearchParams(e)?e.toString():new r_(e,n).toString(r),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class Xy{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){W.forEach(this.handlers,function(r){r!==null&&e(r)})}}const xS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},o1=typeof URLSearchParams<"u"?URLSearchParams:r_,a1=typeof FormData<"u"?FormData:null,l1=typeof Blob<"u"?Blob:null,u1={isBrowser:!0,classes:{URLSearchParams:o1,FormData:a1,Blob:l1},protocols:["http","https","file","blob","url","data"]},i_=typeof window<"u"&&typeof document<"u",bm=typeof navigator=="object"&&navigator||void 0,c1=i_&&(!bm||["ReactNative","NativeScript","NS"].indexOf(bm.product)<0),h1=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",d1=i_&&window.location.href||"http://localhost",f1=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:i_,hasStandardBrowserEnv:c1,hasStandardBrowserWebWorkerEnv:h1,navigator:bm,origin:d1},Symbol.toStringTag,{value:"Module"})),Wt={...f1,...u1};function p1(t,e){return of(t,new Wt.classes.URLSearchParams,{visitor:function(n,r,i,o){return Wt.isNode&&W.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function m1(t){return W.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function g1(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}function IS(t){function e(n,r,i,o){let a=n[o++];if(a==="__proto__")return!0;const u=Number.isFinite(+a),h=o>=n.length;return a=!a&&W.isArray(i)?i.length:a,h?(W.hasOwnProp(i,a)?i[a]=[i[a],r]:i[a]=r,!u):((!i[a]||!W.isObject(i[a]))&&(i[a]=[]),e(n,r,i[a],o)&&W.isArray(i[a])&&(i[a]=g1(i[a])),!u)}if(W.isFormData(t)&&W.isFunction(t.entries)){const n={};return W.forEachEntry(t,(r,i)=>{e(m1(r),i,n,0)}),n}return null}function _1(t,e,n){if(W.isString(t))try{return(e||JSON.parse)(t),W.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Ku={transitional:xS,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=W.isObject(e);if(o&&W.isHTMLForm(e)&&(e=new FormData(e)),W.isFormData(e))return i?JSON.stringify(IS(e)):e;if(W.isArrayBuffer(e)||W.isBuffer(e)||W.isStream(e)||W.isFile(e)||W.isBlob(e)||W.isReadableStream(e))return e;if(W.isArrayBufferView(e))return e.buffer;if(W.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let u;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return p1(e,this.formSerializer).toString();if((u=W.isFileList(e))||r.indexOf("multipart/form-data")>-1){const h=this.env&&this.env.FormData;return of(u?{"files[]":e}:e,h&&new h,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),_1(e)):e}],transformResponse:[function(e){const n=this.transitional||Ku.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(W.isResponse(e)||W.isReadableStream(e))return e;if(e&&W.isString(e)&&(r&&!this.responseType||i)){const a=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e,this.parseReviver)}catch(u){if(a)throw u.name==="SyntaxError"?Te.from(u,Te.ERR_BAD_RESPONSE,this,null,this.response):u}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wt.classes.FormData,Blob:Wt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};W.forEach(["delete","get","head","post","put","patch"],t=>{Ku.headers[t]={}});const v1=W.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),y1=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(a){i=a.indexOf(":"),n=a.substring(0,i).trim().toLowerCase(),r=a.substring(i+1).trim(),!(!n||e[n]&&v1[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},Yy=Symbol("internals");function Nl(t){return t&&String(t).trim().toLowerCase()}function Nh(t){return t===!1||t==null?t:W.isArray(t)?t.map(Nh):String(t)}function w1(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const E1=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function hp(t,e,n,r,i){if(W.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!W.isString(e)){if(W.isString(r))return e.indexOf(r)!==-1;if(W.isRegExp(r))return r.test(e)}}function T1(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function S1(t,e){const n=W.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,o,a){return this[r].call(this,e,i,o,a)},configurable:!0})})}let hn=class{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function o(u,h,p){const _=Nl(h);if(!_)throw new Error("header name must be a non-empty string");const v=W.findKey(i,_);(!v||i[v]===void 0||p===!0||p===void 0&&i[v]!==!1)&&(i[v||h]=Nh(u))}const a=(u,h)=>W.forEach(u,(p,_)=>o(p,_,h));if(W.isPlainObject(e)||e instanceof this.constructor)a(e,n);else if(W.isString(e)&&(e=e.trim())&&!E1(e))a(y1(e),n);else if(W.isObject(e)&&W.isIterable(e)){let u={},h,p;for(const _ of e){if(!W.isArray(_))throw TypeError("Object iterator must return a key-value pair");u[p=_[0]]=(h=u[p])?W.isArray(h)?[...h,_[1]]:[h,_[1]]:_[1]}a(u,n)}else e!=null&&o(n,e,r);return this}get(e,n){if(e=Nl(e),e){const r=W.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return w1(i);if(W.isFunction(n))return n.call(this,i,r);if(W.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Nl(e),e){const r=W.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||hp(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function o(a){if(a=Nl(a),a){const u=W.findKey(r,a);u&&(!n||hp(r,r[u],u,n))&&(delete r[u],i=!0)}}return W.isArray(e)?e.forEach(o):o(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!e||hp(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const n=this,r={};return W.forEach(this,(i,o)=>{const a=W.findKey(r,o);if(a){n[a]=Nh(i),delete n[o];return}const u=e?T1(o):String(o).trim();u!==o&&delete n[o],n[u]=Nh(i),r[u]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return W.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&W.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[Yy]=this[Yy]={accessors:{}}).accessors,i=this.prototype;function o(a){const u=Nl(a);r[u]||(S1(i,a),r[u]=!0)}return W.isArray(e)?e.forEach(o):o(e),this}};hn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);W.reduceDescriptors(hn.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});W.freezeMethods(hn);function dp(t,e){const n=this||Ku,r=e||n,i=hn.from(r.headers);let o=r.data;return W.forEach(t,function(u){o=u.call(n,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function AS(t){return!!(t&&t.__CANCEL__)}function Da(t,e,n){Te.call(this,t??"canceled",Te.ERR_CANCELED,e,n),this.name="CanceledError"}W.inherits(Da,Te,{__CANCEL__:!0});function PS(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Te("Request failed with status code "+n.status,[Te.ERR_BAD_REQUEST,Te.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function x1(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function I1(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,o=0,a;return e=e!==void 0?e:1e3,function(h){const p=Date.now(),_=r[o];a||(a=p),n[i]=h,r[i]=p;let v=o,E=0;for(;v!==i;)E+=n[v++],v=v%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),p-a<e)return;const k=_&&p-_;return k?Math.round(E*1e3/k):void 0}}function A1(t,e){let n=0,r=1e3/e,i,o;const a=(p,_=Date.now())=>{n=_,i=null,o&&(clearTimeout(o),o=null),t(...p)};return[(...p)=>{const _=Date.now(),v=_-n;v>=r?a(p,_):(i=p,o||(o=setTimeout(()=>{o=null,a(i)},r-v)))},()=>i&&a(i)]}const vd=(t,e,n=3)=>{let r=0;const i=I1(50,250);return A1(o=>{const a=o.loaded,u=o.lengthComputable?o.total:void 0,h=a-r,p=i(h),_=a<=u;r=a;const v={loaded:a,total:u,progress:u?a/u:void 0,bytes:h,rate:p||void 0,estimated:p&&u&&_?(u-a)/p:void 0,event:o,lengthComputable:u!=null,[e?"download":"upload"]:!0};t(v)},n)},ew=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},tw=t=>(...e)=>W.asap(()=>t(...e)),P1=Wt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Wt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Wt.origin),Wt.navigator&&/(msie|trident)/i.test(Wt.navigator.userAgent)):()=>!0,C1=Wt.hasStandardBrowserEnv?{write(t,e,n,r,i,o){const a=[t+"="+encodeURIComponent(e)];W.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),W.isString(r)&&a.push("path="+r),W.isString(i)&&a.push("domain="+i),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function R1(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function b1(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function CS(t,e,n){let r=!R1(e);return t&&(r||n==!1)?b1(t,e):e}const nw=t=>t instanceof hn?{...t}:t;function Hs(t,e){e=e||{};const n={};function r(p,_,v,E){return W.isPlainObject(p)&&W.isPlainObject(_)?W.merge.call({caseless:E},p,_):W.isPlainObject(_)?W.merge({},_):W.isArray(_)?_.slice():_}function i(p,_,v,E){if(W.isUndefined(_)){if(!W.isUndefined(p))return r(void 0,p,v,E)}else return r(p,_,v,E)}function o(p,_){if(!W.isUndefined(_))return r(void 0,_)}function a(p,_){if(W.isUndefined(_)){if(!W.isUndefined(p))return r(void 0,p)}else return r(void 0,_)}function u(p,_,v){if(v in e)return r(p,_);if(v in t)return r(void 0,p)}const h={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:u,headers:(p,_,v)=>i(nw(p),nw(_),v,!0)};return W.forEach(Object.keys({...t,...e}),function(_){const v=h[_]||i,E=v(t[_],e[_],_);W.isUndefined(E)&&v!==u||(n[_]=E)}),n}const RS=t=>{const e=Hs({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:u}=e;if(e.headers=a=hn.from(a),e.url=SS(CS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),u&&a.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),W.isFormData(n)){if(Wt.hasStandardBrowserEnv||Wt.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(W.isFunction(n.getHeaders)){const h=n.getHeaders(),p=["content-type","content-length"];Object.entries(h).forEach(([_,v])=>{p.includes(_.toLowerCase())&&a.set(_,v)})}}if(Wt.hasStandardBrowserEnv&&(r&&W.isFunction(r)&&(r=r(e)),r||r!==!1&&P1(e.url))){const h=i&&o&&C1.read(o);h&&a.set(i,h)}return e},k1=typeof XMLHttpRequest<"u",N1=k1&&function(t){return new Promise(function(n,r){const i=RS(t);let o=i.data;const a=hn.from(i.headers).normalize();let{responseType:u,onUploadProgress:h,onDownloadProgress:p}=i,_,v,E,k,P;function A(){k&&k(),P&&P(),i.cancelToken&&i.cancelToken.unsubscribe(_),i.signal&&i.signal.removeEventListener("abort",_)}let I=new XMLHttpRequest;I.open(i.method.toUpperCase(),i.url,!0),I.timeout=i.timeout;function b(){if(!I)return;const x=hn.from("getAllResponseHeaders"in I&&I.getAllResponseHeaders()),G={data:!u||u==="text"||u==="json"?I.responseText:I.response,status:I.status,statusText:I.statusText,headers:x,config:t,request:I};PS(function(N){n(N),A()},function(N){r(N),A()},G),I=null}"onloadend"in I?I.onloadend=b:I.onreadystatechange=function(){!I||I.readyState!==4||I.status===0&&!(I.responseURL&&I.responseURL.indexOf("file:")===0)||setTimeout(b)},I.onabort=function(){I&&(r(new Te("Request aborted",Te.ECONNABORTED,t,I)),I=null)},I.onerror=function(V){const G=V&&V.message?V.message:"Network Error",Z=new Te(G,Te.ERR_NETWORK,t,I);Z.event=V||null,r(Z),I=null},I.ontimeout=function(){let V=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const G=i.transitional||xS;i.timeoutErrorMessage&&(V=i.timeoutErrorMessage),r(new Te(V,G.clarifyTimeoutError?Te.ETIMEDOUT:Te.ECONNABORTED,t,I)),I=null},o===void 0&&a.setContentType(null),"setRequestHeader"in I&&W.forEach(a.toJSON(),function(V,G){I.setRequestHeader(G,V)}),W.isUndefined(i.withCredentials)||(I.withCredentials=!!i.withCredentials),u&&u!=="json"&&(I.responseType=i.responseType),p&&([E,P]=vd(p,!0),I.addEventListener("progress",E)),h&&I.upload&&([v,k]=vd(h),I.upload.addEventListener("progress",v),I.upload.addEventListener("loadend",k)),(i.cancelToken||i.signal)&&(_=x=>{I&&(r(!x||x.type?new Da(null,t,I):x),I.abort(),I=null)},i.cancelToken&&i.cancelToken.subscribe(_),i.signal&&(i.signal.aborted?_():i.signal.addEventListener("abort",_)));const T=x1(i.url);if(T&&Wt.protocols.indexOf(T)===-1){r(new Te("Unsupported protocol "+T+":",Te.ERR_BAD_REQUEST,t));return}I.send(o||null)})},L1=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,i;const o=function(p){if(!i){i=!0,u();const _=p instanceof Error?p:this.reason;r.abort(_ instanceof Te?_:new Da(_ instanceof Error?_.message:_))}};let a=e&&setTimeout(()=>{a=null,o(new Te(`timeout ${e} of ms exceeded`,Te.ETIMEDOUT))},e);const u=()=>{t&&(a&&clearTimeout(a),a=null,t.forEach(p=>{p.unsubscribe?p.unsubscribe(o):p.removeEventListener("abort",o)}),t=null)};t.forEach(p=>p.addEventListener("abort",o));const{signal:h}=r;return h.unsubscribe=()=>W.asap(u),h}},O1=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,i;for(;r<n;)i=r+e,yield t.slice(r,i),r=i},D1=async function*(t,e){for await(const n of M1(t))yield*O1(n,e)},M1=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},rw=(t,e,n,r)=>{const i=D1(t,e);let o=0,a,u=h=>{a||(a=!0,r&&r(h))};return new ReadableStream({async pull(h){try{const{done:p,value:_}=await i.next();if(p){u(),h.close();return}let v=_.byteLength;if(n){let E=o+=v;n(E)}h.enqueue(new Uint8Array(_))}catch(p){throw u(p),p}},cancel(h){return u(h),i.return()}},{highWaterMark:2})},iw=64*1024,{isFunction:ah}=W,j1=(({Request:t,Response:e})=>({Request:t,Response:e}))(W.global),{ReadableStream:sw,TextEncoder:ow}=W.global,aw=(t,...e)=>{try{return!!t(...e)}catch{return!1}},V1=t=>{t=W.merge.call({skipUndefined:!0},j1,t);const{fetch:e,Request:n,Response:r}=t,i=e?ah(e):typeof fetch=="function",o=ah(n),a=ah(r);if(!i)return!1;const u=i&&ah(sw),h=i&&(typeof ow=="function"?(P=>A=>P.encode(A))(new ow):async P=>new Uint8Array(await new n(P).arrayBuffer())),p=o&&u&&aw(()=>{let P=!1;const A=new n(Wt.origin,{body:new sw,method:"POST",get duplex(){return P=!0,"half"}}).headers.has("Content-Type");return P&&!A}),_=a&&u&&aw(()=>W.isReadableStream(new r("").body)),v={stream:_&&(P=>P.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(P=>{!v[P]&&(v[P]=(A,I)=>{let b=A&&A[P];if(b)return b.call(A);throw new Te(`Response type '${P}' is not supported`,Te.ERR_NOT_SUPPORT,I)})});const E=async P=>{if(P==null)return 0;if(W.isBlob(P))return P.size;if(W.isSpecCompliantForm(P))return(await new n(Wt.origin,{method:"POST",body:P}).arrayBuffer()).byteLength;if(W.isArrayBufferView(P)||W.isArrayBuffer(P))return P.byteLength;if(W.isURLSearchParams(P)&&(P=P+""),W.isString(P))return(await h(P)).byteLength},k=async(P,A)=>{const I=W.toFiniteNumber(P.getContentLength());return I??E(A)};return async P=>{let{url:A,method:I,data:b,signal:T,cancelToken:x,timeout:V,onDownloadProgress:G,onUploadProgress:Z,responseType:N,headers:R,withCredentials:O="same-origin",fetchOptions:D}=RS(P),F=e||fetch;N=N?(N+"").toLowerCase():"text";let z=L1([T,x&&x.toAbortSignal()],V),M=null;const Me=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let xn;try{if(Z&&p&&I!=="get"&&I!=="head"&&(xn=await k(R,b))!==0){let le=new n(A,{method:"POST",body:b,duplex:"half"}),de;if(W.isFormData(b)&&(de=le.headers.get("content-type"))&&R.setContentType(de),le.body){const[xe,be]=ew(xn,vd(tw(Z)));b=rw(le.body,iw,xe,be)}}W.isString(O)||(O=O?"include":"omit");const je=o&&"credentials"in n.prototype,Tt={...D,signal:z,method:I.toUpperCase(),headers:R.normalize().toJSON(),body:b,duplex:"half",credentials:je?O:void 0};M=o&&new n(A,Tt);let K=await(o?F(M,D):F(A,Tt));const ce=_&&(N==="stream"||N==="response");if(_&&(G||ce&&Me)){const le={};["status","statusText","headers"].forEach(Se=>{le[Se]=K[Se]});const de=W.toFiniteNumber(K.headers.get("content-length")),[xe,be]=G&&ew(de,vd(tw(G),!0))||[];K=new r(rw(K.body,iw,xe,()=>{be&&be(),Me&&Me()}),le)}N=N||"text";let ee=await v[W.findKey(v,N)||"text"](K,P);return!ce&&Me&&Me(),await new Promise((le,de)=>{PS(le,de,{data:ee,headers:hn.from(K.headers),status:K.status,statusText:K.statusText,config:P,request:M})})}catch(je){throw Me&&Me(),je&&je.name==="TypeError"&&/Load failed|fetch/i.test(je.message)?Object.assign(new Te("Network Error",Te.ERR_NETWORK,P,M),{cause:je.cause||je}):Te.from(je,je&&je.code,P,M)}}},F1=new Map,bS=t=>{let e=t?t.env:{};const{fetch:n,Request:r,Response:i}=e,o=[r,i,n];let a=o.length,u=a,h,p,_=F1;for(;u--;)h=o[u],p=_.get(h),p===void 0&&_.set(h,p=u?new Map:V1(e)),_=p;return p};bS();const km={http:n1,xhr:N1,fetch:{get:bS}};W.forEach(km,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const lw=t=>`- ${t}`,U1=t=>W.isFunction(t)||t===null||t===!1,kS={getAdapter:(t,e)=>{t=W.isArray(t)?t:[t];const{length:n}=t;let r,i;const o={};for(let a=0;a<n;a++){r=t[a];let u;if(i=r,!U1(r)&&(i=km[(u=String(r)).toLowerCase()],i===void 0))throw new Te(`Unknown adapter '${u}'`);if(i&&(W.isFunction(i)||(i=i.get(e))))break;o[u||"#"+a]=i}if(!i){const a=Object.entries(o).map(([h,p])=>`adapter ${h} `+(p===!1?"is not supported by the environment":"is not available in the build"));let u=n?a.length>1?`since :
`+a.map(lw).join(`
`):" "+lw(a[0]):"as no adapter specified";throw new Te("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i},adapters:km};function fp(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Da(null,t)}function uw(t){return fp(t),t.headers=hn.from(t.headers),t.data=dp.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),kS.getAdapter(t.adapter||Ku.adapter,t)(t).then(function(r){return fp(t),r.data=dp.call(t,t.transformResponse,r),r.headers=hn.from(r.headers),r},function(r){return AS(r)||(fp(t),r&&r.response&&(r.response.data=dp.call(t,t.transformResponse,r.response),r.response.headers=hn.from(r.response.headers))),Promise.reject(r)})}const NS="1.12.2",af={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{af[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const cw={};af.transitional=function(e,n,r){function i(o,a){return"[Axios v"+NS+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,u)=>{if(e===!1)throw new Te(i(a," has been removed"+(n?" in "+n:"")),Te.ERR_DEPRECATED);return n&&!cw[a]&&(cw[a]=!0,console.warn(i(a," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,a,u):!0}};af.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function z1(t,e,n){if(typeof t!="object")throw new Te("options must be an object",Te.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],a=e[o];if(a){const u=t[o],h=u===void 0||a(u,o,t);if(h!==!0)throw new Te("option "+o+" must be "+h,Te.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Te("Unknown option "+o,Te.ERR_BAD_OPTION)}}const Lh={assertOptions:z1,validators:af},dr=Lh.validators;let Os=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Xy,response:new Xy}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const o=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Hs(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&Lh.assertOptions(r,{silentJSONParsing:dr.transitional(dr.boolean),forcedJSONParsing:dr.transitional(dr.boolean),clarifyTimeoutError:dr.transitional(dr.boolean)},!1),i!=null&&(W.isFunction(i)?n.paramsSerializer={serialize:i}:Lh.assertOptions(i,{encode:dr.function,serialize:dr.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Lh.assertOptions(n,{baseUrl:dr.spelling("baseURL"),withXsrfToken:dr.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let a=o&&W.merge(o.common,o[n.method]);o&&W.forEach(["delete","get","head","post","put","patch","common"],P=>{delete o[P]}),n.headers=hn.concat(a,o);const u=[];let h=!0;this.interceptors.request.forEach(function(A){typeof A.runWhen=="function"&&A.runWhen(n)===!1||(h=h&&A.synchronous,u.unshift(A.fulfilled,A.rejected))});const p=[];this.interceptors.response.forEach(function(A){p.push(A.fulfilled,A.rejected)});let _,v=0,E;if(!h){const P=[uw.bind(this),void 0];for(P.unshift(...u),P.push(...p),E=P.length,_=Promise.resolve(n);v<E;)_=_.then(P[v++],P[v++]);return _}E=u.length;let k=n;for(;v<E;){const P=u[v++],A=u[v++];try{k=P(k)}catch(I){A.call(this,I);break}}try{_=uw.call(this,k)}catch(P){return Promise.reject(P)}for(v=0,E=p.length;v<E;)_=_.then(p[v++],p[v++]);return _}getUri(e){e=Hs(this.defaults,e);const n=CS(e.baseURL,e.url,e.allowAbsoluteUrls);return SS(n,e.params,e.paramsSerializer)}};W.forEach(["delete","get","head","options"],function(e){Os.prototype[e]=function(n,r){return this.request(Hs(r||{},{method:e,url:n,data:(r||{}).data}))}});W.forEach(["post","put","patch"],function(e){function n(r){return function(o,a,u){return this.request(Hs(u||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}Os.prototype[e]=n(),Os.prototype[e+"Form"]=n(!0)});let B1=class LS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const a=new Promise(u=>{r.subscribe(u),o=u}).then(i);return a.cancel=function(){r.unsubscribe(o)},a},e(function(o,a,u){r.reason||(r.reason=new Da(o,a,u),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new LS(function(i){e=i}),cancel:e}}};function $1(t){return function(n){return t.apply(null,n)}}function H1(t){return W.isObject(t)&&t.isAxiosError===!0}const Nm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Nm).forEach(([t,e])=>{Nm[e]=t});function OS(t){const e=new Os(t),n=hS(Os.prototype.request,e);return W.extend(n,Os.prototype,e,{allOwnKeys:!0}),W.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return OS(Hs(t,i))},n}const he=OS(Ku);he.Axios=Os;he.CanceledError=Da;he.CancelToken=B1;he.isCancel=AS;he.VERSION=NS;he.toFormData=of;he.AxiosError=Te;he.Cancel=he.CanceledError;he.all=function(e){return Promise.all(e)};he.spread=$1;he.isAxiosError=H1;he.mergeConfig=Hs;he.AxiosHeaders=hn;he.formToJSON=t=>IS(W.isHTMLForm(t)?new FormData(t):t);he.getAdapter=kS.getAdapter;he.HttpStatusCode=Nm;he.default=he;const{Axios:RF,AxiosError:bF,CanceledError:kF,isCancel:NF,CancelToken:LF,VERSION:OF,all:DF,Cancel:MF,isAxiosError:jF,spread:VF,toFormData:FF,AxiosHeaders:UF,HttpStatusCode:zF,formToJSON:BF,getAdapter:$F,mergeConfig:HF}=he,Mo="/api",hw={"admin@oceanhazard.com":{id:"demo_admin",email:"admin@oceanhazard.com",fullName:"Admin User",role:"admin",phone:"+91 9876543210",location:{state:"Tamil Nadu",district:"Chennai",coastalArea:"Marina Beach"},permissions:["all"]},"analyst@oceanhazard.com":{id:"demo_analyst",email:"analyst@oceanhazard.com",fullName:"Data Analyst",role:"analyst",phone:"+91 9876543211",location:{state:"Kerala",district:"Kochi",coastalArea:"Fort Kochi"},permissions:["analytics","reports","social_media"]},"official@oceanhazard.com":{id:"demo_official",email:"official@oceanhazard.com",fullName:"Emergency Official",role:"official",phone:"+91 9876543212",location:{state:"Gujarat",district:"Surat",coastalArea:"Dumas Beach"},permissions:["official","donations","reports","alerts"]},"citizen@oceanhazard.com":{id:"demo_citizen",email:"citizen@oceanhazard.com",fullName:"Citizen User",role:"citizen",phone:"+91 9876543214",location:{state:"Maharashtra",district:"Mumbai",coastalArea:"Juhu Beach"},permissions:["reports","alerts"]}},W1="demo123",Ll={async register(t){var e,n;try{const r={id:t.userId||`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,email:t.email,fullName:t.fullName,role:t.role,phone:t.phone,location:t.location,preferences:t.preferences,registrationDate:t.registrationDate,status:t.status||"active",permissions:this.getRolePermissions(t.role)},i=`user_token_${r.id}_${Date.now()}`;return localStorage.setItem("authToken",i),localStorage.setItem("user",JSON.stringify(r)),{user:r,token:i,success:!0}}catch(r){throw console.error("Registration error:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Registration failed")}},getRolePermissions(t){return{admin:["all","analytics","official","social_media","donations","reports","alerts"],analyst:["analytics","social_media","reports","alerts"],official:["official","donations","reports","alerts"],citizen:["reports","alerts"]}[t]||["reports","alerts"]},async login(t,e){var n,r;try{if(hw[t]&&e===W1){const o=hw[t],a=`demo_token_${o.id}_${Date.now()}`;return localStorage.setItem("authToken",a),localStorage.setItem("user",JSON.stringify(o)),{user:o,token:a,success:!0}}const i=await he.post(`${Mo}/auth/login`,{email:t,password:e,rememberMe:!0});return i.data.token&&(localStorage.setItem("authToken",i.data.token),localStorage.setItem("user",JSON.stringify(i.data.user))),{user:i.data.user,token:i.data.token,success:!0}}catch(i){throw console.error("Login error:",i),new Error(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.error)||"Invalid email or password")}},async logout(){try{const t=localStorage.getItem("authToken");return t&&await he.post(`${Mo}/auth/logout`,{},{headers:{Authorization:`Bearer ${t}`}}),localStorage.removeItem("authToken"),localStorage.removeItem("user"),{success:!0}}catch(t){throw console.error("Logout error:",t),localStorage.removeItem("authToken"),localStorage.removeItem("user"),t}},getCurrentUser(){try{const t=localStorage.getItem("user");return t?JSON.parse(t):null}catch(t){return console.error("Error getting current user:",t),null}},getToken(){return localStorage.getItem("authToken")},isAuthenticated(){const t=this.getToken(),e=this.getCurrentUser();return!!(t&&e)},onAuthStateChange(t){const e=()=>{const r=this.isAuthenticated();t(r?this.getCurrentUser():null)};e();const n=setInterval(e,1e3);return()=>clearInterval(n)},async getUserProfile(){var t,e;try{const n=this.getToken();if(!n)throw new Error("No authentication token");const r=await he.get(`${Mo}/auth/profile`,{headers:{Authorization:`Bearer ${n}`}});return localStorage.setItem("user",JSON.stringify(r.data.user)),r.data.user}catch(n){throw console.error("Error getting user profile:",n),new Error(((e=(t=n.response)==null?void 0:t.data)==null?void 0:e.error)||"Failed to get profile")}},async getUserData(t){try{return this.getCurrentUser()||await this.getUserProfile()}catch(e){return console.error("Error getting user data:",e),this.getCurrentUser()}},async updateProfile(t){var e,n;try{const r=this.getToken();if(!r)throw new Error("No authentication token");const i=await he.put(`${Mo}/auth/profile`,t,{headers:{Authorization:`Bearer ${r}`}});return localStorage.setItem("user",JSON.stringify(i.data.user)),i.data.user}catch(r){throw console.error("Error updating profile:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to update profile")}},async changePassword(t,e){var n,r;try{const i=this.getToken();if(!i)throw new Error("No authentication token");return{success:!0,message:(await he.post(`${Mo}/auth/change-password`,{currentPassword:t,newPassword:e},{headers:{Authorization:`Bearer ${i}`}})).data.message}}catch(i){throw console.error("Error changing password:",i),new Error(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.error)||"Failed to change password")}},async verifyToken(){try{const t=this.getToken();return t?(await he.get(`${Mo}/auth/verify-token`,{headers:{Authorization:`Bearer ${t}`}})).data:{valid:!1}}catch(t){return console.error("Error verifying token:",t),{valid:!1}}},async refreshToken(){try{if(!this.getToken())throw new Error("No authentication token");const e=await this.verifyToken();if(!e.valid)throw localStorage.removeItem("authToken"),localStorage.removeItem("user"),new Error("Token expired");return e}catch(t){throw console.error("Error refreshing token:",t),t}}};var dw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},q1=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],a=t[n++],u=t[n++],h=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},MS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],a=i+1<t.length,u=a?t[i+1]:0,h=i+2<t.length,p=h?t[i+2]:0,_=o>>2,v=(o&3)<<4|u>>4;let E=(u&15)<<2|p>>6,k=p&63;h||(k=64,a||(E=64)),r.push(n[_],n[v],n[E],n[k])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(DS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):q1(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],u=i<t.length?n[t.charAt(i)]:0;++i;const p=i<t.length?n[t.charAt(i)]:64;++i;const v=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||u==null||p==null||v==null)throw new G1;const E=o<<2|u>>4;if(r.push(E),p!==64){const k=u<<4&240|p>>2;if(r.push(k),v!==64){const P=p<<6&192|v;r.push(P)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class G1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K1=function(t){const e=DS(t);return MS.encodeByteArray(e,!0)},yd=function(t){return K1(t).replace(/\./g,"")},jS=function(t){try{return MS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=()=>Z1().__FIREBASE_DEFAULTS__,J1=()=>{if(typeof process>"u"||typeof dw>"u")return;const t=dw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},X1=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&jS(t[1]);return e&&JSON.parse(e)},lf=()=>{try{return Q1()||J1()||X1()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},VS=t=>{var e,n;return(n=(e=lf())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FS=t=>{const e=VS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},US=()=>{var t;return(t=lf())===null||t===void 0?void 0:t.config},zS=t=>{var e;return(e=lf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yd(JSON.stringify(n)),yd(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function eN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Gt())}function tN(){var t;const e=(t=lf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function nN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function iN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function sN(){const t=Gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function oN(){return!tN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aN(){try{return typeof indexedDB=="object"}catch{return!1}}function lN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN="FirebaseError";class Ar extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uN,Object.setPrototypeOf(this,Ar.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zu.prototype.create)}}class Zu{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?cN(o,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new Ar(i,u,r)}}function cN(t,e){return t.replace(hN,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const hN=/\{\$([^}]+)}/g;function dN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wd(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],a=e[i];if(fw(o)&&fw(a)){if(!wd(o,a))return!1}else if(o!==a)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function fw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function fN(t,e){const n=new pN(t,e);return n.subscribe.bind(n)}class pN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mN(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=pp),i.error===void 0&&(i.error=pp),i.complete===void 0&&(i.complete=pp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function pp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jt(t){return t&&t._delegate?t._delegate:t}class Xi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Y1;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vN(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:_N(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function _N(t){return t===Is?void 0:t}function vN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ke||(ke={}));const wN={debug:ke.DEBUG,verbose:ke.VERBOSE,info:ke.INFO,warn:ke.WARN,error:ke.ERROR,silent:ke.SILENT},EN=ke.INFO,TN={[ke.DEBUG]:"log",[ke.VERBOSE]:"log",[ke.INFO]:"info",[ke.WARN]:"warn",[ke.ERROR]:"error"},SN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=TN[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class s_{constructor(e){this.name=e,this._logLevel=EN,this._logHandler=SN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ke.DEBUG,...e),this._logHandler(this,ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ke.VERBOSE,...e),this._logHandler(this,ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ke.INFO,...e),this._logHandler(this,ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ke.WARN,...e),this._logHandler(this,ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ke.ERROR,...e),this._logHandler(this,ke.ERROR,...e)}}const xN=(t,e)=>e.some(n=>t instanceof n);let pw,mw;function IN(){return pw||(pw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function AN(){return mw||(mw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $S=new WeakMap,Lm=new WeakMap,HS=new WeakMap,mp=new WeakMap,o_=new WeakMap;function PN(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(qi(t.result)),i()},a=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&$S.set(n,t)}).catch(()=>{}),o_.set(e,t),e}function CN(t){if(Lm.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),i()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Lm.set(t,e)}let Om={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Lm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RN(t){Om=t(Om)}function bN(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(gp(this),e,...n);return HS.set(r,e.sort?e.sort():[e]),qi(r)}:AN().includes(t)?function(...e){return t.apply(gp(this),e),qi($S.get(this))}:function(...e){return qi(t.apply(gp(this),e))}}function kN(t){return typeof t=="function"?bN(t):(t instanceof IDBTransaction&&CN(t),xN(t,IN())?new Proxy(t,Om):t)}function qi(t){if(t instanceof IDBRequest)return PN(t);if(mp.has(t))return mp.get(t);const e=kN(t);return e!==t&&(mp.set(t,e),o_.set(e,t)),e}const gp=t=>o_.get(t);function NN(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(t,e),u=qi(a);return r&&a.addEventListener("upgradeneeded",h=>{r(qi(a.result),h.oldVersion,h.newVersion,qi(a.transaction),h)}),n&&a.addEventListener("blocked",h=>n(h.oldVersion,h.newVersion,h)),u.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",p=>i(p.oldVersion,p.newVersion,p))}).catch(()=>{}),u}const LN=["get","getKey","getAll","getAllKeys","count"],ON=["put","add","delete","clear"],_p=new Map;function gw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(_p.get(e))return _p.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ON.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LN.includes(n)))return;const o=async function(a,...u){const h=this.transaction(a,i?"readwrite":"readonly");let p=h.store;return r&&(p=p.index(u.shift())),(await Promise.all([p[n](...u),i&&h.done]))[0]};return _p.set(e,o),o}RN(t=>({...t,get:(e,n,r)=>gw(e,n)||t.get(e,n,r),has:(e,n)=>!!gw(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MN(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function MN(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dm="@firebase/app",_w="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new s_("@firebase/app"),jN="@firebase/app-compat",VN="@firebase/analytics-compat",FN="@firebase/analytics",UN="@firebase/app-check-compat",zN="@firebase/app-check",BN="@firebase/auth",$N="@firebase/auth-compat",HN="@firebase/database",WN="@firebase/data-connect",qN="@firebase/database-compat",GN="@firebase/functions",KN="@firebase/functions-compat",ZN="@firebase/installations",QN="@firebase/installations-compat",JN="@firebase/messaging",XN="@firebase/messaging-compat",YN="@firebase/performance",eL="@firebase/performance-compat",tL="@firebase/remote-config",nL="@firebase/remote-config-compat",rL="@firebase/storage",iL="@firebase/storage-compat",sL="@firebase/firestore",oL="@firebase/vertexai-preview",aL="@firebase/firestore-compat",lL="firebase",uL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mm="[DEFAULT]",cL={[Dm]:"fire-core",[jN]:"fire-core-compat",[FN]:"fire-analytics",[VN]:"fire-analytics-compat",[zN]:"fire-app-check",[UN]:"fire-app-check-compat",[BN]:"fire-auth",[$N]:"fire-auth-compat",[HN]:"fire-rtdb",[WN]:"fire-data-connect",[qN]:"fire-rtdb-compat",[GN]:"fire-fn",[KN]:"fire-fn-compat",[ZN]:"fire-iid",[QN]:"fire-iid-compat",[JN]:"fire-fcm",[XN]:"fire-fcm-compat",[YN]:"fire-perf",[eL]:"fire-perf-compat",[tL]:"fire-rc",[nL]:"fire-rc-compat",[rL]:"fire-gcs",[iL]:"fire-gcs-compat",[sL]:"fire-fst",[aL]:"fire-fst-compat",[oL]:"fire-vertex","fire-js":"fire-js",[lL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new Map,hL=new Map,jm=new Map;function vw(t,e){try{t.container.addComponent(e)}catch(n){ei.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ws(t){const e=t.name;if(jm.has(e))return ei.debug(`There were multiple attempts to register component ${e}.`),!1;jm.set(e,t);for(const n of Ed.values())vw(n,t);for(const n of hL.values())vw(n,t);return!0}function uf(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Di(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Gi=new Zu("app","Firebase",dL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo=uL;function WS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Mm,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Gi.create("bad-app-name",{appName:String(i)});if(n||(n=US()),!n)throw Gi.create("no-options");const o=Ed.get(i);if(o){if(wd(n,o.options)&&wd(r,o.config))return o;throw Gi.create("duplicate-app",{appName:i})}const a=new yN(i);for(const h of jm.values())a.addComponent(h);const u=new fL(n,r,a);return Ed.set(i,u),u}function a_(t=Mm){const e=Ed.get(t);if(!e&&t===Mm&&US())return WS();if(!e)throw Gi.create("no-app",{appName:t});return e}function yr(t,e,n){var r;let i=(r=cL[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ei.warn(u.join(" "));return}Ws(new Xi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL="firebase-heartbeat-database",mL=1,Cu="firebase-heartbeat-store";let vp=null;function qS(){return vp||(vp=NN(pL,mL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Cu)}catch(n){console.warn(n)}}}}).catch(t=>{throw Gi.create("idb-open",{originalErrorMessage:t.message})})),vp}async function gL(t){try{const n=(await qS()).transaction(Cu),r=await n.objectStore(Cu).get(GS(t));return await n.done,r}catch(e){if(e instanceof Ar)ei.warn(e.message);else{const n=Gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ei.warn(n.message)}}}async function yw(t,e){try{const r=(await qS()).transaction(Cu,"readwrite");await r.objectStore(Cu).put(e,GS(t)),await r.done}catch(n){if(n instanceof Ar)ei.warn(n.message);else{const r=Gi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ei.warn(r.message)}}}function GS(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=1024,vL=30*24*60*60*1e3;class yL{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new EL(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ww();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{const u=new Date(a.date).valueOf();return Date.now()-u<=vL}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ei.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ww(),{heartbeatsToSend:r,unsentEntries:i}=wL(this._heartbeatsCache.heartbeats),o=yd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ei.warn(n),""}}}function ww(){return new Date().toISOString().substring(0,10)}function wL(t,e=_L){const n=[];let r=t.slice();for(const i of t){const o=n.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),Ew(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ew(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class EL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aN()?lN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gL(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return yw(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ew(t){return yd(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(t){Ws(new Xi("platform-logger",e=>new DN(e),"PRIVATE")),Ws(new Xi("heartbeat",e=>new yL(e),"PRIVATE")),yr(Dm,_w,t),yr(Dm,_w,"esm2017"),yr("fire-js","")}TL("");var Tw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ds,KS;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,R){function O(){}O.prototype=R.prototype,N.D=R.prototype,N.prototype=new O,N.prototype.constructor=N,N.C=function(D,F,z){for(var M=Array(arguments.length-2),Me=2;Me<arguments.length;Me++)M[Me-2]=arguments[Me];return R.prototype[F].apply(D,M)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(N,R,O){O||(O=0);var D=Array(16);if(typeof R=="string")for(var F=0;16>F;++F)D[F]=R.charCodeAt(O++)|R.charCodeAt(O++)<<8|R.charCodeAt(O++)<<16|R.charCodeAt(O++)<<24;else for(F=0;16>F;++F)D[F]=R[O++]|R[O++]<<8|R[O++]<<16|R[O++]<<24;R=N.g[0],O=N.g[1],F=N.g[2];var z=N.g[3],M=R+(z^O&(F^z))+D[0]+3614090360&4294967295;R=O+(M<<7&4294967295|M>>>25),M=z+(F^R&(O^F))+D[1]+3905402710&4294967295,z=R+(M<<12&4294967295|M>>>20),M=F+(O^z&(R^O))+D[2]+606105819&4294967295,F=z+(M<<17&4294967295|M>>>15),M=O+(R^F&(z^R))+D[3]+3250441966&4294967295,O=F+(M<<22&4294967295|M>>>10),M=R+(z^O&(F^z))+D[4]+4118548399&4294967295,R=O+(M<<7&4294967295|M>>>25),M=z+(F^R&(O^F))+D[5]+1200080426&4294967295,z=R+(M<<12&4294967295|M>>>20),M=F+(O^z&(R^O))+D[6]+2821735955&4294967295,F=z+(M<<17&4294967295|M>>>15),M=O+(R^F&(z^R))+D[7]+4249261313&4294967295,O=F+(M<<22&4294967295|M>>>10),M=R+(z^O&(F^z))+D[8]+1770035416&4294967295,R=O+(M<<7&4294967295|M>>>25),M=z+(F^R&(O^F))+D[9]+2336552879&4294967295,z=R+(M<<12&4294967295|M>>>20),M=F+(O^z&(R^O))+D[10]+4294925233&4294967295,F=z+(M<<17&4294967295|M>>>15),M=O+(R^F&(z^R))+D[11]+2304563134&4294967295,O=F+(M<<22&4294967295|M>>>10),M=R+(z^O&(F^z))+D[12]+1804603682&4294967295,R=O+(M<<7&4294967295|M>>>25),M=z+(F^R&(O^F))+D[13]+4254626195&4294967295,z=R+(M<<12&4294967295|M>>>20),M=F+(O^z&(R^O))+D[14]+2792965006&4294967295,F=z+(M<<17&4294967295|M>>>15),M=O+(R^F&(z^R))+D[15]+1236535329&4294967295,O=F+(M<<22&4294967295|M>>>10),M=R+(F^z&(O^F))+D[1]+4129170786&4294967295,R=O+(M<<5&4294967295|M>>>27),M=z+(O^F&(R^O))+D[6]+3225465664&4294967295,z=R+(M<<9&4294967295|M>>>23),M=F+(R^O&(z^R))+D[11]+643717713&4294967295,F=z+(M<<14&4294967295|M>>>18),M=O+(z^R&(F^z))+D[0]+3921069994&4294967295,O=F+(M<<20&4294967295|M>>>12),M=R+(F^z&(O^F))+D[5]+3593408605&4294967295,R=O+(M<<5&4294967295|M>>>27),M=z+(O^F&(R^O))+D[10]+38016083&4294967295,z=R+(M<<9&4294967295|M>>>23),M=F+(R^O&(z^R))+D[15]+3634488961&4294967295,F=z+(M<<14&4294967295|M>>>18),M=O+(z^R&(F^z))+D[4]+3889429448&4294967295,O=F+(M<<20&4294967295|M>>>12),M=R+(F^z&(O^F))+D[9]+568446438&4294967295,R=O+(M<<5&4294967295|M>>>27),M=z+(O^F&(R^O))+D[14]+3275163606&4294967295,z=R+(M<<9&4294967295|M>>>23),M=F+(R^O&(z^R))+D[3]+4107603335&4294967295,F=z+(M<<14&4294967295|M>>>18),M=O+(z^R&(F^z))+D[8]+1163531501&4294967295,O=F+(M<<20&4294967295|M>>>12),M=R+(F^z&(O^F))+D[13]+2850285829&4294967295,R=O+(M<<5&4294967295|M>>>27),M=z+(O^F&(R^O))+D[2]+4243563512&4294967295,z=R+(M<<9&4294967295|M>>>23),M=F+(R^O&(z^R))+D[7]+1735328473&4294967295,F=z+(M<<14&4294967295|M>>>18),M=O+(z^R&(F^z))+D[12]+2368359562&4294967295,O=F+(M<<20&4294967295|M>>>12),M=R+(O^F^z)+D[5]+4294588738&4294967295,R=O+(M<<4&4294967295|M>>>28),M=z+(R^O^F)+D[8]+2272392833&4294967295,z=R+(M<<11&4294967295|M>>>21),M=F+(z^R^O)+D[11]+1839030562&4294967295,F=z+(M<<16&4294967295|M>>>16),M=O+(F^z^R)+D[14]+4259657740&4294967295,O=F+(M<<23&4294967295|M>>>9),M=R+(O^F^z)+D[1]+2763975236&4294967295,R=O+(M<<4&4294967295|M>>>28),M=z+(R^O^F)+D[4]+1272893353&4294967295,z=R+(M<<11&4294967295|M>>>21),M=F+(z^R^O)+D[7]+4139469664&4294967295,F=z+(M<<16&4294967295|M>>>16),M=O+(F^z^R)+D[10]+3200236656&4294967295,O=F+(M<<23&4294967295|M>>>9),M=R+(O^F^z)+D[13]+681279174&4294967295,R=O+(M<<4&4294967295|M>>>28),M=z+(R^O^F)+D[0]+3936430074&4294967295,z=R+(M<<11&4294967295|M>>>21),M=F+(z^R^O)+D[3]+3572445317&4294967295,F=z+(M<<16&4294967295|M>>>16),M=O+(F^z^R)+D[6]+76029189&4294967295,O=F+(M<<23&4294967295|M>>>9),M=R+(O^F^z)+D[9]+3654602809&4294967295,R=O+(M<<4&4294967295|M>>>28),M=z+(R^O^F)+D[12]+3873151461&4294967295,z=R+(M<<11&4294967295|M>>>21),M=F+(z^R^O)+D[15]+530742520&4294967295,F=z+(M<<16&4294967295|M>>>16),M=O+(F^z^R)+D[2]+3299628645&4294967295,O=F+(M<<23&4294967295|M>>>9),M=R+(F^(O|~z))+D[0]+4096336452&4294967295,R=O+(M<<6&4294967295|M>>>26),M=z+(O^(R|~F))+D[7]+1126891415&4294967295,z=R+(M<<10&4294967295|M>>>22),M=F+(R^(z|~O))+D[14]+2878612391&4294967295,F=z+(M<<15&4294967295|M>>>17),M=O+(z^(F|~R))+D[5]+4237533241&4294967295,O=F+(M<<21&4294967295|M>>>11),M=R+(F^(O|~z))+D[12]+1700485571&4294967295,R=O+(M<<6&4294967295|M>>>26),M=z+(O^(R|~F))+D[3]+2399980690&4294967295,z=R+(M<<10&4294967295|M>>>22),M=F+(R^(z|~O))+D[10]+4293915773&4294967295,F=z+(M<<15&4294967295|M>>>17),M=O+(z^(F|~R))+D[1]+2240044497&4294967295,O=F+(M<<21&4294967295|M>>>11),M=R+(F^(O|~z))+D[8]+1873313359&4294967295,R=O+(M<<6&4294967295|M>>>26),M=z+(O^(R|~F))+D[15]+4264355552&4294967295,z=R+(M<<10&4294967295|M>>>22),M=F+(R^(z|~O))+D[6]+2734768916&4294967295,F=z+(M<<15&4294967295|M>>>17),M=O+(z^(F|~R))+D[13]+1309151649&4294967295,O=F+(M<<21&4294967295|M>>>11),M=R+(F^(O|~z))+D[4]+4149444226&4294967295,R=O+(M<<6&4294967295|M>>>26),M=z+(O^(R|~F))+D[11]+3174756917&4294967295,z=R+(M<<10&4294967295|M>>>22),M=F+(R^(z|~O))+D[2]+718787259&4294967295,F=z+(M<<15&4294967295|M>>>17),M=O+(z^(F|~R))+D[9]+3951481745&4294967295,N.g[0]=N.g[0]+R&4294967295,N.g[1]=N.g[1]+(F+(M<<21&4294967295|M>>>11))&4294967295,N.g[2]=N.g[2]+F&4294967295,N.g[3]=N.g[3]+z&4294967295}r.prototype.u=function(N,R){R===void 0&&(R=N.length);for(var O=R-this.blockSize,D=this.B,F=this.h,z=0;z<R;){if(F==0)for(;z<=O;)i(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<R;)if(D[F++]=N.charCodeAt(z++),F==this.blockSize){i(this,D),F=0;break}}else for(;z<R;)if(D[F++]=N[z++],F==this.blockSize){i(this,D),F=0;break}}this.h=F,this.o+=R},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var R=1;R<N.length-8;++R)N[R]=0;var O=8*this.o;for(R=N.length-8;R<N.length;++R)N[R]=O&255,O/=256;for(this.u(N),N=Array(16),R=O=0;4>R;++R)for(var D=0;32>D;D+=8)N[O++]=this.g[R]>>>D&255;return N};function o(N,R){var O=u;return Object.prototype.hasOwnProperty.call(O,N)?O[N]:O[N]=R(N)}function a(N,R){this.h=R;for(var O=[],D=!0,F=N.length-1;0<=F;F--){var z=N[F]|0;D&&z==R||(O[F]=z,D=!1)}this.g=O}var u={};function h(N){return-128<=N&&128>N?o(N,function(R){return new a([R|0],0>R?-1:0)}):new a([N|0],0>N?-1:0)}function p(N){if(isNaN(N)||!isFinite(N))return v;if(0>N)return I(p(-N));for(var R=[],O=1,D=0;N>=O;D++)R[D]=N/O|0,O*=4294967296;return new a(R,0)}function _(N,R){if(N.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N.charAt(0)=="-")return I(_(N.substring(1),R));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var O=p(Math.pow(R,8)),D=v,F=0;F<N.length;F+=8){var z=Math.min(8,N.length-F),M=parseInt(N.substring(F,F+z),R);8>z?(z=p(Math.pow(R,z)),D=D.j(z).add(p(M))):(D=D.j(O),D=D.add(p(M)))}return D}var v=h(0),E=h(1),k=h(16777216);t=a.prototype,t.m=function(){if(A(this))return-I(this).m();for(var N=0,R=1,O=0;O<this.g.length;O++){var D=this.i(O);N+=(0<=D?D:4294967296+D)*R,R*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(P(this))return"0";if(A(this))return"-"+I(this).toString(N);for(var R=p(Math.pow(N,6)),O=this,D="";;){var F=V(O,R).g;O=b(O,F.j(R));var z=((0<O.g.length?O.g[0]:O.h)>>>0).toString(N);if(O=F,P(O))return z+D;for(;6>z.length;)z="0"+z;D=z+D}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function P(N){if(N.h!=0)return!1;for(var R=0;R<N.g.length;R++)if(N.g[R]!=0)return!1;return!0}function A(N){return N.h==-1}t.l=function(N){return N=b(this,N),A(N)?-1:P(N)?0:1};function I(N){for(var R=N.g.length,O=[],D=0;D<R;D++)O[D]=~N.g[D];return new a(O,~N.h).add(E)}t.abs=function(){return A(this)?I(this):this},t.add=function(N){for(var R=Math.max(this.g.length,N.g.length),O=[],D=0,F=0;F<=R;F++){var z=D+(this.i(F)&65535)+(N.i(F)&65535),M=(z>>>16)+(this.i(F)>>>16)+(N.i(F)>>>16);D=M>>>16,z&=65535,M&=65535,O[F]=M<<16|z}return new a(O,O[O.length-1]&-2147483648?-1:0)};function b(N,R){return N.add(I(R))}t.j=function(N){if(P(this)||P(N))return v;if(A(this))return A(N)?I(this).j(I(N)):I(I(this).j(N));if(A(N))return I(this.j(I(N)));if(0>this.l(k)&&0>N.l(k))return p(this.m()*N.m());for(var R=this.g.length+N.g.length,O=[],D=0;D<2*R;D++)O[D]=0;for(D=0;D<this.g.length;D++)for(var F=0;F<N.g.length;F++){var z=this.i(D)>>>16,M=this.i(D)&65535,Me=N.i(F)>>>16,xn=N.i(F)&65535;O[2*D+2*F]+=M*xn,T(O,2*D+2*F),O[2*D+2*F+1]+=z*xn,T(O,2*D+2*F+1),O[2*D+2*F+1]+=M*Me,T(O,2*D+2*F+1),O[2*D+2*F+2]+=z*Me,T(O,2*D+2*F+2)}for(D=0;D<R;D++)O[D]=O[2*D+1]<<16|O[2*D];for(D=R;D<2*R;D++)O[D]=0;return new a(O,0)};function T(N,R){for(;(N[R]&65535)!=N[R];)N[R+1]+=N[R]>>>16,N[R]&=65535,R++}function x(N,R){this.g=N,this.h=R}function V(N,R){if(P(R))throw Error("division by zero");if(P(N))return new x(v,v);if(A(N))return R=V(I(N),R),new x(I(R.g),I(R.h));if(A(R))return R=V(N,I(R)),new x(I(R.g),R.h);if(30<N.g.length){if(A(N)||A(R))throw Error("slowDivide_ only works with positive integers.");for(var O=E,D=R;0>=D.l(N);)O=G(O),D=G(D);var F=Z(O,1),z=Z(D,1);for(D=Z(D,2),O=Z(O,2);!P(D);){var M=z.add(D);0>=M.l(N)&&(F=F.add(O),z=M),D=Z(D,1),O=Z(O,1)}return R=b(N,F.j(R)),new x(F,R)}for(F=v;0<=N.l(R);){for(O=Math.max(1,Math.floor(N.m()/R.m())),D=Math.ceil(Math.log(O)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),z=p(O),M=z.j(R);A(M)||0<M.l(N);)O-=D,z=p(O),M=z.j(R);P(z)&&(z=E),F=F.add(z),N=b(N,M)}return new x(F,N)}t.A=function(N){return V(this,N).h},t.and=function(N){for(var R=Math.max(this.g.length,N.g.length),O=[],D=0;D<R;D++)O[D]=this.i(D)&N.i(D);return new a(O,this.h&N.h)},t.or=function(N){for(var R=Math.max(this.g.length,N.g.length),O=[],D=0;D<R;D++)O[D]=this.i(D)|N.i(D);return new a(O,this.h|N.h)},t.xor=function(N){for(var R=Math.max(this.g.length,N.g.length),O=[],D=0;D<R;D++)O[D]=this.i(D)^N.i(D);return new a(O,this.h^N.h)};function G(N){for(var R=N.g.length+1,O=[],D=0;D<R;D++)O[D]=N.i(D)<<1|N.i(D-1)>>>31;return new a(O,N.h)}function Z(N,R){var O=R>>5;R%=32;for(var D=N.g.length-O,F=[],z=0;z<D;z++)F[z]=0<R?N.i(z+O)>>>R|N.i(z+O+1)<<32-R:N.i(z+O);return new a(F,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,KS=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=p,a.fromString=_,Ds=a}).apply(typeof Tw<"u"?Tw:typeof self<"u"?self:typeof window<"u"?window:{});var lh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZS,zl,QS,Oh,Vm,JS,XS,YS;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,g,w){return c==Array.prototype||c==Object.prototype||(c[g]=w.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof lh=="object"&&lh];for(var g=0;g<c.length;++g){var w=c[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function i(c,g){if(g)e:{var w=r;c=c.split(".");for(var C=0;C<c.length-1;C++){var B=c[C];if(!(B in w))break e;w=w[B]}c=c[c.length-1],C=w[c],g=g(C),g!=C&&g!=null&&e(w,c,{configurable:!0,writable:!0,value:g})}}function o(c,g){c instanceof String&&(c+="");var w=0,C=!1,B={next:function(){if(!C&&w<c.length){var q=w++;return{value:g(q,c[q]),done:!1}}return C=!0,{done:!0,value:void 0}}};return B[Symbol.iterator]=function(){return B},B}i("Array.prototype.values",function(c){return c||function(){return o(this,function(g,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},u=this||self;function h(c){var g=typeof c;return g=g!="object"?g:c?Array.isArray(c)?"array":g:"null",g=="array"||g=="object"&&typeof c.length=="number"}function p(c){var g=typeof c;return g=="object"&&c!=null||g=="function"}function _(c,g,w){return c.call.apply(c.bind,arguments)}function v(c,g,w){if(!c)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var B=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(B,C),c.apply(g,B)}}return function(){return c.apply(g,arguments)}}function E(c,g,w){return E=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:v,E.apply(null,arguments)}function k(c,g){var w=Array.prototype.slice.call(arguments,1);return function(){var C=w.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function P(c,g){function w(){}w.prototype=g.prototype,c.aa=g.prototype,c.prototype=new w,c.prototype.constructor=c,c.Qb=function(C,B,q){for(var te=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)te[Ve-2]=arguments[Ve];return g.prototype[B].apply(C,te)}}function A(c){const g=c.length;if(0<g){const w=Array(g);for(let C=0;C<g;C++)w[C]=c[C];return w}return[]}function I(c,g){for(let w=1;w<arguments.length;w++){const C=arguments[w];if(h(C)){const B=c.length||0,q=C.length||0;c.length=B+q;for(let te=0;te<q;te++)c[B+te]=C[te]}else c.push(C)}}class b{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function T(c){return/^[\s\xa0]*$/.test(c)}function x(){var c=u.navigator;return c&&(c=c.userAgent)?c:""}function V(c){return V[" "](c),c}V[" "]=function(){};var G=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function Z(c,g,w){for(const C in c)g.call(w,c[C],C,c)}function N(c,g){for(const w in c)g.call(void 0,c[w],w,c)}function R(c){const g={};for(const w in c)g[w]=c[w];return g}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(c,g){let w,C;for(let B=1;B<arguments.length;B++){C=arguments[B];for(w in C)c[w]=C[w];for(let q=0;q<O.length;q++)w=O[q],Object.prototype.hasOwnProperty.call(C,w)&&(c[w]=C[w])}}function F(c){var g=1;c=c.split(":");const w=[];for(;0<g&&c.length;)w.push(c.shift()),g--;return c.length&&w.push(c.join(":")),w}function z(c){u.setTimeout(()=>{throw c},0)}function M(){var c=ce;let g=null;return c.g&&(g=c.g,c.g=c.g.next,c.g||(c.h=null),g.next=null),g}class Me{constructor(){this.h=this.g=null}add(g,w){const C=xn.get();C.set(g,w),this.h?this.h.next=C:this.g=C,this.h=C}}var xn=new b(()=>new je,c=>c.reset());class je{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Tt,K=!1,ce=new Me,ee=()=>{const c=u.Promise.resolve(void 0);Tt=()=>{c.then(le)}};var le=()=>{for(var c;c=M();){try{c.h.call(c.g)}catch(w){z(w)}var g=xn;g.j(c),100>g.h&&(g.h++,c.next=g.g,g.g=c)}K=!1};function de(){this.s=this.s,this.C=this.C}de.prototype.s=!1,de.prototype.ma=function(){this.s||(this.s=!0,this.N())},de.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function xe(c,g){this.type=c,this.g=this.target=g,this.defaultPrevented=!1}xe.prototype.h=function(){this.defaultPrevented=!0};var be=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var c=!1,g=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const w=()=>{};u.addEventListener("test",w,g),u.removeEventListener("test",w,g)}catch{}return c}();function Se(c,g){if(xe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var w=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=g,g=c.relatedTarget){if(G){e:{try{V(g.nodeName);var B=!0;break e}catch{}B=!1}B||(g=null)}}else w=="mouseover"?g=c.fromElement:w=="mouseout"&&(g=c.toElement);this.relatedTarget=g,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ve[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Se.aa.h.call(this)}}P(Se,xe);var ve={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var _t="closure_listenable_"+(1e6*Math.random()|0),or=0;function oc(c,g,w,C,B){this.listener=c,this.proxy=null,this.src=g,this.type=w,this.capture=!!C,this.ha=B,this.key=++or,this.da=this.fa=!1}function li(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ui(c){this.src=c,this.g={},this.h=0}ui.prototype.add=function(c,g,w,C,B){var q=c.toString();c=this.g[q],c||(c=this.g[q]=[],this.h++);var te=ls(c,g,C,B);return-1<te?(g=c[te],w||(g.fa=!1)):(g=new oc(g,this.src,q,!!C,B),g.fa=w,c.push(g)),g};function Cr(c,g){var w=g.type;if(w in c.g){var C=c.g[w],B=Array.prototype.indexOf.call(C,g,void 0),q;(q=0<=B)&&Array.prototype.splice.call(C,B,1),q&&(li(g),c.g[w].length==0&&(delete c.g[w],c.h--))}}function ls(c,g,w,C){for(var B=0;B<c.length;++B){var q=c[B];if(!q.da&&q.listener==g&&q.capture==!!w&&q.ha==C)return B}return-1}var Ba="closure_lm_"+(1e6*Math.random()|0),ro={};function $a(c,g,w,C,B){if(Array.isArray(g)){for(var q=0;q<g.length;q++)$a(c,g[q],w,C,B);return null}return w=uc(w),c&&c[_t]?c.K(g,w,p(C)?!!C.capture:!1,B):Ha(c,g,w,!1,C,B)}function Ha(c,g,w,C,B,q){if(!g)throw Error("Invalid event type");var te=p(B)?!!B.capture:!!B,Ve=ao(c);if(Ve||(c[Ba]=Ve=new ui(c)),w=Ve.add(g,w,C,te,q),w.proxy)return w;if(C=io(),w.proxy=C,C.src=c,C.listener=w,c.addEventListener)be||(B=te),B===void 0&&(B=!1),c.addEventListener(g.toString(),C,B);else if(c.attachEvent)c.attachEvent(oo(g.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return w}function io(){function c(w){return g.call(c.src,c.listener,w)}const g=lc;return c}function ac(c,g,w,C,B){if(Array.isArray(g))for(var q=0;q<g.length;q++)ac(c,g[q],w,C,B);else C=p(C)?!!C.capture:!!C,w=uc(w),c&&c[_t]?(c=c.i,g=String(g).toString(),g in c.g&&(q=c.g[g],w=ls(q,w,C,B),-1<w&&(li(q[w]),Array.prototype.splice.call(q,w,1),q.length==0&&(delete c.g[g],c.h--)))):c&&(c=ao(c))&&(g=c.g[g.toString()],c=-1,g&&(c=ls(g,w,C,B)),(w=-1<c?g[c]:null)&&so(w))}function so(c){if(typeof c!="number"&&c&&!c.da){var g=c.src;if(g&&g[_t])Cr(g.i,c);else{var w=c.type,C=c.proxy;g.removeEventListener?g.removeEventListener(w,C,c.capture):g.detachEvent?g.detachEvent(oo(w),C):g.addListener&&g.removeListener&&g.removeListener(C),(w=ao(g))?(Cr(w,c),w.h==0&&(w.src=null,g[Ba]=null)):li(c)}}}function oo(c){return c in ro?ro[c]:ro[c]="on"+c}function lc(c,g){if(c.da)c=!0;else{g=new Se(g,this);var w=c.listener,C=c.ha||c.src;c.fa&&so(c),c=w.call(C,g)}return c}function ao(c){return c=c[Ba],c instanceof ui?c:null}var Wa="__closure_events_fn_"+(1e9*Math.random()>>>0);function uc(c){return typeof c=="function"?c:(c[Wa]||(c[Wa]=function(g){return c.handleEvent(g)}),c[Wa])}function ht(){de.call(this),this.i=new ui(this),this.M=this,this.F=null}P(ht,de),ht.prototype[_t]=!0,ht.prototype.removeEventListener=function(c,g,w,C){ac(this,c,g,w,C)};function St(c,g){var w,C=c.F;if(C)for(w=[];C;C=C.F)w.push(C);if(c=c.M,C=g.type||g,typeof g=="string")g=new xe(g,c);else if(g instanceof xe)g.target=g.target||c;else{var B=g;g=new xe(C,c),D(g,B)}if(B=!0,w)for(var q=w.length-1;0<=q;q--){var te=g.g=w[q];B=us(te,C,!0,g)&&B}if(te=g.g=c,B=us(te,C,!0,g)&&B,B=us(te,C,!1,g)&&B,w)for(q=0;q<w.length;q++)te=g.g=w[q],B=us(te,C,!1,g)&&B}ht.prototype.N=function(){if(ht.aa.N.call(this),this.i){var c=this.i,g;for(g in c.g){for(var w=c.g[g],C=0;C<w.length;C++)li(w[C]);delete c.g[g],c.h--}}this.F=null},ht.prototype.K=function(c,g,w,C){return this.i.add(String(c),g,!1,w,C)},ht.prototype.L=function(c,g,w,C){return this.i.add(String(c),g,!0,w,C)};function us(c,g,w,C){if(g=c.i.g[String(g)],!g)return!0;g=g.concat();for(var B=!0,q=0;q<g.length;++q){var te=g[q];if(te&&!te.da&&te.capture==w){var Ve=te.listener,dt=te.ha||te.src;te.fa&&Cr(c.i,te),B=Ve.call(dt,C)!==!1&&B}}return B&&!C.defaultPrevented}function cc(c,g,w){if(typeof c=="function")w&&(c=E(c,w));else if(c&&typeof c.handleEvent=="function")c=E(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:u.setTimeout(c,g||0)}function qa(c){c.g=cc(()=>{c.g=null,c.i&&(c.i=!1,qa(c))},c.l);const g=c.h;c.h=null,c.m.apply(null,g)}class hc extends de{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:qa(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cs(c){de.call(this),this.h=c,this.g={}}P(cs,de);var Ga=[];function lo(c){Z(c.g,function(g,w){this.g.hasOwnProperty(w)&&so(g)},c),c.g={}}cs.prototype.N=function(){cs.aa.N.call(this),lo(this)},cs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uo=u.JSON.stringify,bf=u.JSON.parse,hs=class{stringify(c){return u.JSON.stringify(c,void 0)}parse(c){return u.JSON.parse(c,void 0)}};function Ka(){}Ka.prototype.h=null;function dc(c){return c.h||(c.h=c.i())}function Za(){}var ci={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function co(){xe.call(this,"d")}P(co,xe);function Qa(){xe.call(this,"c")}P(Qa,xe);var Rr={},fc=null;function ho(){return fc=fc||new ht}Rr.La="serverreachability";function pc(c){xe.call(this,Rr.La,c)}P(pc,xe);function ds(c){const g=ho();St(g,new pc(g))}Rr.STAT_EVENT="statevent";function fo(c,g){xe.call(this,Rr.STAT_EVENT,c),this.stat=g}P(fo,xe);function Rt(c){const g=ho();St(g,new fo(g,c))}Rr.Ma="timingevent";function mc(c,g){xe.call(this,Rr.Ma,c),this.size=g}P(mc,xe);function fs(c,g){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){c()},g)}function ps(){this.g=!0}ps.prototype.xa=function(){this.g=!1};function In(c,g,w,C,B,q){c.info(function(){if(c.g)if(q)for(var te="",Ve=q.split("&"),dt=0;dt<Ve.length;dt++){var Ne=Ve[dt].split("=");if(1<Ne.length){var Be=Ne[0];Ne=Ne[1];var Xe=Be.split("_");te=2<=Xe.length&&Xe[1]=="type"?te+(Be+"="+Ne+"&"):te+(Be+"=redacted&")}}else te=null;else te=q;return"XMLHTTP REQ ("+C+") [attempt "+B+"]: "+g+`
`+w+`
`+te})}function ae(c,g,w,C,B,q,te){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+B+"]: "+g+`
`+w+`
`+q+" "+te})}function br(c,g,w,C){c.info(function(){return"XMLHTTP TEXT ("+g+"): "+_c(c,w)+(C?" "+C:"")})}function gc(c,g){c.info(function(){return"TIMEOUT: "+g})}ps.prototype.info=function(){};function _c(c,g){if(!c.g)return g;if(!g)return null;try{var w=JSON.parse(g);if(w){for(c=0;c<w.length;c++)if(Array.isArray(w[c])){var C=w[c];if(!(2>C.length)){var B=C[1];if(Array.isArray(B)&&!(1>B.length)){var q=B[0];if(q!="noop"&&q!="stop"&&q!="close")for(var te=1;te<B.length;te++)B[te]=""}}}}return uo(w)}catch{return g}}var ms={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},po={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},mo;function zn(){}P(zn,Ka),zn.prototype.g=function(){return new XMLHttpRequest},zn.prototype.i=function(){return{}},mo=new zn;function Bn(c,g,w,C){this.j=c,this.i=g,this.l=w,this.R=C||1,this.U=new cs(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vc}function vc(){this.i=null,this.g="",this.h=!1}var yc={},Ja={};function Xa(c,g,w){c.L=1,c.v=Pn(it(g)),c.m=w,c.P=!0,Ya(c,null)}function Ya(c,g){c.F=Date.now(),_o(c),c.A=it(c.v);var w=c.A,C=c.R;Array.isArray(C)||(C=[String(C)]),Tc(w.i,"t",C),c.C=0,w=c.j.J,c.h=new vc,c.g=Rc(c.j,w?g:null,!c.m),0<c.O&&(c.M=new hc(E(c.Y,c,c.g),c.O)),g=c.U,w=c.g,C=c.ca;var B="readystatechange";Array.isArray(B)||(B&&(Ga[0]=B.toString()),B=Ga);for(var q=0;q<B.length;q++){var te=$a(w,B[q],C||g.handleEvent,!1,g.h||g);if(!te)break;g.g[te.key]=te}g=c.H?R(c.H):{},c.m?(c.u||(c.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,g)):(c.u="GET",c.g.ea(c.A,c.u,null,g)),ds(),In(c.i,c.u,c.A,c.l,c.R,c.m)}Bn.prototype.ca=function(c){c=c.target;const g=this.M;g&&Kt(c)==3?g.j():this.Y(c)},Bn.prototype.Y=function(c){try{if(c==this.g)e:{const Xe=Kt(this.g);var g=this.g.Ba();const _i=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||ml(this.g)))){this.J||Xe!=4||g==7||(g==8||0>=_i?ds(3):ds(2)),el(this);var w=this.g.Z();this.X=w;t:if(wc(this)){var C=ml(this.g);c="";var B=C.length,q=Kt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){kr(this),gs(this);var te="";break t}this.h.i=new u.TextDecoder}for(g=0;g<B;g++)this.h.h=!0,c+=this.h.i.decode(C[g],{stream:!(q&&g==B-1)});C.length=0,this.h.g+=c,this.C=0,te=this.h.g}else te=this.g.oa();if(this.o=w==200,ae(this.i,this.u,this.A,this.l,this.R,Xe,w),this.o){if(this.T&&!this.K){t:{if(this.g){var Ve,dt=this.g;if((Ve=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(Ve)){var Ne=Ve;break t}}Ne=null}if(w=Ne)br(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,_s(this,w);else{this.o=!1,this.s=3,Rt(12),kr(this),gs(this);break e}}if(this.P){w=!0;let lt;for(;!this.J&&this.C<te.length;)if(lt=go(this,te),lt==Ja){Xe==4&&(this.s=4,Rt(14),w=!1),br(this.i,this.l,null,"[Incomplete Response]");break}else if(lt==yc){this.s=4,Rt(15),br(this.i,this.l,te,"[Invalid Chunk]"),w=!1;break}else br(this.i,this.l,lt,null),_s(this,lt);if(wc(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||te.length!=0||this.h.h||(this.s=1,Rt(16),w=!1),this.o=this.o&&w,!w)br(this.i,this.l,te,"[Invalid Chunked Response]"),kr(this),gs(this);else if(0<te.length&&!this.W){this.W=!0;var Be=this.j;Be.g==this&&Be.ba&&!Be.M&&(Be.j.info("Great, no buffering proxy detected. Bytes received: "+te.length),Ao(Be),Be.M=!0,Rt(11))}}else br(this.i,this.l,te,null),_s(this,te);Xe==4&&kr(this),this.o&&!this.J&&(Xe==4?_l(this.j,this):(this.o=!1,_o(this)))}else kf(this.g),w==400&&0<te.indexOf("Unknown SID")?(this.s=3,Rt(12)):(this.s=0,Rt(13)),kr(this),gs(this)}}}catch{}finally{}};function wc(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function go(c,g){var w=c.C,C=g.indexOf(`
`,w);return C==-1?Ja:(w=Number(g.substring(w,C)),isNaN(w)?yc:(C+=1,C+w>g.length?Ja:(g=g.slice(C,C+w),c.C=C+w,g)))}Bn.prototype.cancel=function(){this.J=!0,kr(this)};function _o(c){c.S=Date.now()+c.I,Ec(c,c.I)}function Ec(c,g){if(c.B!=null)throw Error("WatchDog timer not null");c.B=fs(E(c.ba,c),g)}function el(c){c.B&&(u.clearTimeout(c.B),c.B=null)}Bn.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(gc(this.i,this.A),this.L!=2&&(ds(),Rt(17)),kr(this),this.s=2,gs(this)):Ec(this,this.S-c)};function gs(c){c.j.G==0||c.J||_l(c.j,c)}function kr(c){el(c);var g=c.M;g&&typeof g.ma=="function"&&g.ma(),c.M=null,lo(c.U),c.g&&(g=c.g,c.g=null,g.abort(),g.ma())}function _s(c,g){try{var w=c.j;if(w.G!=0&&(w.g==c||Ce(w.h,c))){if(!c.K&&Ce(w.h,c)&&w.G==3){try{var C=w.Da.g.parse(g)}catch{C=null}if(Array.isArray(C)&&C.length==3){var B=C;if(B[0]==0){e:if(!w.u){if(w.g)if(w.g.F+3e3<c.F)Co(w),xo(w);else break e;Io(w),Rt(18)}}else w.za=B[1],0<w.za-w.T&&37500>B[2]&&w.F&&w.v==0&&!w.C&&(w.C=fs(E(w.Za,w),6e3));if(1>=hi(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Mr(w,11)}else if((c.K||w.g==c)&&Co(w),!T(g))for(B=w.Da.g.parse(g),g=0;g<B.length;g++){let Ne=B[g];if(w.T=Ne[0],Ne=Ne[1],w.G==2)if(Ne[0]=="c"){w.K=Ne[1],w.ia=Ne[2];const Be=Ne[3];Be!=null&&(w.la=Be,w.j.info("VER="+w.la));const Xe=Ne[4];Xe!=null&&(w.Aa=Xe,w.j.info("SVER="+w.Aa));const _i=Ne[5];_i!=null&&typeof _i=="number"&&0<_i&&(C=1.5*_i,w.L=C,w.j.info("backChannelRequestTimeoutMs_="+C)),C=w;const lt=c.g;if(lt){const bo=lt.g?lt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bo){var q=C.h;q.g||bo.indexOf("spdy")==-1&&bo.indexOf("quic")==-1&&bo.indexOf("h2")==-1||(q.j=q.l,q.g=new Set,q.h&&($e(q,q.h),q.h=null))}if(C.D){const ur=lt.g?lt.g.getResponseHeader("X-HTTP-Session-Id"):null;ur&&(C.ya=ur,me(C.I,C.D,ur))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-c.F,w.j.info("Handshake RTT: "+w.R+"ms")),C=w;var te=c;if(C.qa=Ro(C,C.J?C.ia:null,C.W),te.K){ys(C.h,te);var Ve=te,dt=C.L;dt&&(Ve.I=dt),Ve.B&&(el(Ve),_o(Ve)),C.g=te}else Wn(C);0<w.i.length&&gi(w)}else Ne[0]!="stop"&&Ne[0]!="close"||Mr(w,7);else w.G==3&&(Ne[0]=="stop"||Ne[0]=="close"?Ne[0]=="stop"?Mr(w,7):So(w):Ne[0]!="noop"&&w.l&&w.l.ta(Ne),w.v=0)}}ds(4)}catch{}}var vs=class{constructor(c,g){this.g=c,this.map=g}};function tl(c){this.l=c||10,u.PerformanceNavigationTiming?(c=u.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function nl(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function hi(c){return c.h?1:c.g?c.g.size:0}function Ce(c,g){return c.h?c.h==g:c.g?c.g.has(g):!1}function $e(c,g){c.g?c.g.add(g):c.h=g}function ys(c,g){c.h&&c.h==g?c.h=null:c.g&&c.g.has(g)&&c.g.delete(g)}tl.prototype.cancel=function(){if(this.i=Nr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Nr(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let g=c.i;for(const w of c.g.values())g=g.concat(w.D);return g}return A(c.i)}function di(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(h(c)){for(var g=[],w=c.length,C=0;C<w;C++)g.push(c[C]);return g}g=[],w=0;for(C in c)g[w++]=c[C];return g}function rl(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(h(c)||typeof c=="string"){var g=[];c=c.length;for(var w=0;w<c;w++)g.push(w);return g}g=[],w=0;for(const C in c)g[w++]=C;return g}}}function Ee(c,g){if(c.forEach&&typeof c.forEach=="function")c.forEach(g,void 0);else if(h(c)||typeof c=="string")Array.prototype.forEach.call(c,g,void 0);else for(var w=rl(c),C=di(c),B=C.length,q=0;q<B;q++)g.call(void 0,C[q],w&&w[q],c)}var Ke=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function il(c,g){if(c){c=c.split("&");for(var w=0;w<c.length;w++){var C=c[w].indexOf("="),B=null;if(0<=C){var q=c[w].substring(0,C);B=c[w].substring(C+1)}else q=c[w];g(q,B?decodeURIComponent(B.replace(/\+/g," ")):"")}}}function An(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof An){this.h=c.h,vo(this,c.j),this.o=c.o,this.g=c.g,Lr(this,c.s),this.l=c.l;var g=c.i,w=new Or;w.i=g.i,g.g&&(w.g=new Map(g.g),w.h=g.h),ar(this,w),this.m=c.m}else c&&(g=String(c).match(Ke))?(this.h=!1,vo(this,g[1]||"",!0),this.o=$n(g[2]||""),this.g=$n(g[3]||"",!0),Lr(this,g[4]),this.l=$n(g[5]||"",!0),ar(this,g[6]||"",!0),this.m=$n(g[7]||"")):(this.h=!1,this.i=new Or(null,this.h))}An.prototype.toString=function(){var c=[],g=this.j;g&&c.push(Hn(g,fi,!0),":");var w=this.g;return(w||g=="file")&&(c.push("//"),(g=this.o)&&c.push(Hn(g,fi,!0),"@"),c.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&c.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&c.push("/"),c.push(Hn(w,w.charAt(0)=="/"?al:ol,!0))),(w=this.i.toString())&&c.push("?",w),(w=this.m)&&c.push("#",Hn(w,ll)),c.join("")};function it(c){return new An(c)}function vo(c,g,w){c.j=w?$n(g,!0):g,c.j&&(c.j=c.j.replace(/:$/,""))}function Lr(c,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);c.s=g}else c.s=null}function ar(c,g,w){g instanceof Or?(c.i=g,Cn(c.i,c.h)):(w||(g=Hn(g,yo)),c.i=new Or(g,c.h))}function me(c,g,w){c.i.set(g,w)}function Pn(c){return me(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function $n(c,g){return c?g?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Hn(c,g,w){return typeof c=="string"?(c=encodeURI(c).replace(g,sl),w&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function sl(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var fi=/[#\/\?@]/g,ol=/[#\?:]/g,al=/[#\?]/g,yo=/[#\?@]/g,ll=/#/g;function Or(c,g){this.h=this.g=null,this.i=c||null,this.j=!!g}function fn(c){c.g||(c.g=new Map,c.h=0,c.i&&il(c.i,function(g,w){c.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}t=Or.prototype,t.add=function(c,g){fn(this),this.i=null,c=fe(this,c);var w=this.g.get(c);return w||this.g.set(c,w=[]),w.push(g),this.h+=1,this};function ul(c,g){fn(c),g=fe(c,g),c.g.has(g)&&(c.i=null,c.h-=c.g.get(g).length,c.g.delete(g))}function wo(c,g){return fn(c),g=fe(c,g),c.g.has(g)}t.forEach=function(c,g){fn(this),this.g.forEach(function(w,C){w.forEach(function(B){c.call(g,B,C,this)},this)},this)},t.na=function(){fn(this);const c=Array.from(this.g.values()),g=Array.from(this.g.keys()),w=[];for(let C=0;C<g.length;C++){const B=c[C];for(let q=0;q<B.length;q++)w.push(g[C])}return w},t.V=function(c){fn(this);let g=[];if(typeof c=="string")wo(this,c)&&(g=g.concat(this.g.get(fe(this,c))));else{c=Array.from(this.g.values());for(let w=0;w<c.length;w++)g=g.concat(c[w])}return g},t.set=function(c,g){return fn(this),this.i=null,c=fe(this,c),wo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[g]),this.h+=1,this},t.get=function(c,g){return c?(c=this.V(c),0<c.length?String(c[0]):g):g};function Tc(c,g,w){ul(c,g),0<w.length&&(c.i=null,c.g.set(fe(c,g),A(w)),c.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],g=Array.from(this.g.keys());for(var w=0;w<g.length;w++){var C=g[w];const q=encodeURIComponent(String(C)),te=this.V(C);for(C=0;C<te.length;C++){var B=q;te[C]!==""&&(B+="="+encodeURIComponent(String(te[C]))),c.push(B)}}return this.i=c.join("&")};function fe(c,g){return g=String(g),c.j&&(g=g.toLowerCase()),g}function Cn(c,g){g&&!c.j&&(fn(c),c.i=null,c.g.forEach(function(w,C){var B=C.toLowerCase();C!=B&&(ul(this,C),Tc(this,B,w))},c)),c.j=g}function ze(c,g){const w=new ps;if(u.Image){const C=new Image;C.onload=k(Rn,w,"TestLoadImage: loaded",!0,g,C),C.onerror=k(Rn,w,"TestLoadImage: error",!1,g,C),C.onabort=k(Rn,w,"TestLoadImage: abort",!1,g,C),C.ontimeout=k(Rn,w,"TestLoadImage: timeout",!1,g,C),u.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else g(!1)}function Sc(c,g){const w=new ps,C=new AbortController,B=setTimeout(()=>{C.abort(),Rn(w,"TestPingServer: timeout",!1,g)},1e4);fetch(c,{signal:C.signal}).then(q=>{clearTimeout(B),q.ok?Rn(w,"TestPingServer: ok",!0,g):Rn(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(B),Rn(w,"TestPingServer: error",!1,g)})}function Rn(c,g,w,C,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),C(w)}catch{}}function cl(){this.g=new hs}function hl(c,g,w){const C=w||"";try{Ee(c,function(B,q){let te=B;p(B)&&(te=uo(B)),g.push(C+q+"="+encodeURIComponent(te))})}catch(B){throw g.push(C+"type="+encodeURIComponent("_badmap")),B}}function bn(c){this.l=c.Ub||null,this.j=c.eb||!1}P(bn,Ka),bn.prototype.g=function(){return new pi(this.l,this.j)},bn.prototype.i=function(c){return function(){return c}}({});function pi(c,g){ht.call(this),this.D=c,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}P(pi,ht),t=pi.prototype,t.open=function(c,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=g,this.readyState=1,pn(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(g.body=c),(this.D||u).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Je(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,pn(this)),this.g&&(this.readyState=3,pn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;mi(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function mi(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var g=c.value?c.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!c.done}))&&(this.response=this.responseText+=g)}c.done?Je(this):pn(this),this.readyState==3&&mi(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Je(this))},t.Qa=function(c){this.g&&(this.response=c,Je(this))},t.ga=function(){this.g&&Je(this)};function Je(c){c.readyState=4,c.l=null,c.j=null,c.v=null,pn(c)}t.setRequestHeader=function(c,g){this.u.append(c,g)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,c.push(w[0]+": "+w[1]),w=g.next();return c.join(`\r
`)};function pn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(pi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function dl(c){let g="";return Z(c,function(w,C){g+=C,g+=":",g+=w,g+=`\r
`}),g}function Eo(c,g,w){e:{for(C in w){var C=!1;break e}C=!0}C||(w=dl(w),typeof c=="string"?w!=null&&encodeURIComponent(String(w)):me(c,g,w))}function Ze(c){ht.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}P(Ze,ht);var xc=/^https?$/i,fl=["POST","PUT"];t=Ze.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,g,w,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);g=g?g.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():mo.g(),this.v=this.o?dc(this.o):dc(mo),this.g.onreadystatechange=E(this.Ea,this);try{this.B=!0,this.g.open(g,String(c),!0),this.B=!1}catch(q){Ic(this,q);return}if(c=w||"",w=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var B in C)w.set(B,C[B]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const q of C.keys())w.set(q,C.get(q));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(w.keys()).find(q=>q.toLowerCase()=="content-type"),B=u.FormData&&c instanceof u.FormData,!(0<=Array.prototype.indexOf.call(fl,g,void 0))||C||B||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[q,te]of w)this.g.setRequestHeader(q,te);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{tn(this),this.u=!0,this.g.send(c),this.u=!1}catch(q){Ic(this,q)}};function Ic(c,g){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=g,c.m=5,pl(c),To(c)}function pl(c){c.A||(c.A=!0,St(c,"complete"),St(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,St(this,"complete"),St(this,"abort"),To(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),To(this,!0)),Ze.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ae(this):this.bb())},t.bb=function(){Ae(this)};function Ae(c){if(c.h&&typeof a<"u"&&(!c.v[1]||Kt(c)!=4||c.Z()!=2)){if(c.u&&Kt(c)==4)cc(c.Ea,0,c);else if(St(c,"readystatechange"),Kt(c)==4){c.h=!1;try{const te=c.Z();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var C;if(C=te===0){var B=String(c.D).match(Ke)[1]||null;!B&&u.self&&u.self.location&&(B=u.self.location.protocol.slice(0,-1)),C=!xc.test(B?B.toLowerCase():"")}w=C}if(w)St(c,"complete"),St(c,"success");else{c.m=6;try{var q=2<Kt(c)?c.g.statusText:""}catch{q=""}c.l=q+" ["+c.Z()+"]",pl(c)}}finally{To(c)}}}}function To(c,g){if(c.g){tn(c);const w=c.g,C=c.v[0]?()=>{}:null;c.g=null,c.v=null,g||St(c,"ready");try{w.onreadystatechange=C}catch{}}}function tn(c){c.I&&(u.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Kt(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Kt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var g=this.g.responseText;return c&&g.indexOf(c)==0&&(g=g.substring(c.length)),bf(g)}};function ml(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function kf(c){const g={};c=(c.g&&2<=Kt(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(T(c[C]))continue;var w=F(c[C]);const B=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const q=g[B]||[];g[B]=q,q.push(w)}N(g,function(C){return C.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Dr(c,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[c]||g}function Ac(c){this.Aa=0,this.i=[],this.j=new ps,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Dr("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Dr("baseRetryDelayMs",5e3,c),this.cb=Dr("retryDelaySeedMs",1e4,c),this.Wa=Dr("forwardChannelMaxRetries",2,c),this.wa=Dr("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new tl(c&&c.concurrentRequestLimit),this.Da=new cl,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Ac.prototype,t.la=8,t.G=1,t.connect=function(c,g,w,C){Rt(0),this.W=c,this.H=g||{},w&&C!==void 0&&(this.H.OSID=w,this.H.OAID=C),this.F=this.X,this.I=Ro(this,null,this.W),gi(this)};function So(c){if(Pc(c),c.G==3){var g=c.U++,w=it(c.I);if(me(w,"SID",c.K),me(w,"RID",g),me(w,"TYPE","terminate"),ws(c,w),g=new Bn(c,c.j,g),g.L=2,g.v=Pn(it(w)),w=!1,u.navigator&&u.navigator.sendBeacon)try{w=u.navigator.sendBeacon(g.v.toString(),"")}catch{}!w&&u.Image&&(new Image().src=g.v,w=!0),w||(g.g=Rc(g.j,null),g.g.ea(g.v)),g.F=Date.now(),_o(g)}Cc(c)}function xo(c){c.g&&(Ao(c),c.g.cancel(),c.g=null)}function Pc(c){xo(c),c.u&&(u.clearTimeout(c.u),c.u=null),Co(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&u.clearTimeout(c.s),c.s=null)}function gi(c){if(!nl(c.h)&&!c.s){c.s=!0;var g=c.Ga;Tt||ee(),K||(Tt(),K=!0),ce.add(g,c),c.B=0}}function Nf(c,g){return hi(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=g.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=fs(E(c.Ga,c,g),vl(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const B=new Bn(this,this.j,c);let q=this.o;if(this.S&&(q?(q=R(q),D(q,this.S)):q=this.S),this.m!==null||this.O||(B.H=q,q=null),this.P)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var C=this.i[w];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(g+=C,4096<g){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=gl(this,B,g),w=it(this.I),me(w,"RID",c),me(w,"CVER",22),this.D&&me(w,"X-HTTP-Session-Id",this.D),ws(this,w),q&&(this.O?g="headers="+encodeURIComponent(String(dl(q)))+"&"+g:this.m&&Eo(w,this.m,q)),$e(this.h,B),this.Ua&&me(w,"TYPE","init"),this.P?(me(w,"$req",g),me(w,"SID","null"),B.T=!0,Xa(B,w,null)):Xa(B,w,g),this.G=2}}else this.G==3&&(c?mn(this,c):this.i.length==0||nl(this.h)||mn(this))};function mn(c,g){var w;g?w=g.l:w=c.U++;const C=it(c.I);me(C,"SID",c.K),me(C,"RID",w),me(C,"AID",c.T),ws(c,C),c.m&&c.o&&Eo(C,c.m,c.o),w=new Bn(c,c.j,w,c.B+1),c.m===null&&(w.H=c.o),g&&(c.i=g.D.concat(c.i)),g=gl(c,w,1e3),w.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),$e(c.h,w),Xa(w,C,g)}function ws(c,g){c.H&&Z(c.H,function(w,C){me(g,C,w)}),c.l&&Ee({},function(w,C){me(g,C,w)})}function gl(c,g,w){w=Math.min(c.i.length,w);var C=c.l?E(c.l.Na,c.l,c):null;e:{var B=c.i;let q=-1;for(;;){const te=["count="+w];q==-1?0<w?(q=B[0].g,te.push("ofs="+q)):q=0:te.push("ofs="+q);let Ve=!0;for(let dt=0;dt<w;dt++){let Ne=B[dt].g;const Be=B[dt].map;if(Ne-=q,0>Ne)q=Math.max(0,B[dt].g-100),Ve=!1;else try{hl(Be,te,"req"+Ne+"_")}catch{C&&C(Be)}}if(Ve){C=te.join("&");break e}}}return c=c.i.splice(0,w),g.D=c,C}function Wn(c){if(!c.g&&!c.u){c.Y=1;var g=c.Fa;Tt||ee(),K||(Tt(),K=!0),ce.add(g,c),c.v=0}}function Io(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=fs(E(c.Fa,c),vl(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Po(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=fs(E(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Rt(10),xo(this),Po(this))};function Ao(c){c.A!=null&&(u.clearTimeout(c.A),c.A=null)}function Po(c){c.g=new Bn(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var g=it(c.qa);me(g,"RID","rpc"),me(g,"SID",c.K),me(g,"AID",c.T),me(g,"CI",c.F?"0":"1"),!c.F&&c.ja&&me(g,"TO",c.ja),me(g,"TYPE","xmlhttp"),ws(c,g),c.m&&c.o&&Eo(g,c.m,c.o),c.L&&(c.g.I=c.L);var w=c.g;c=c.ia,w.L=1,w.v=Pn(it(g)),w.m=null,w.P=!0,Ya(w,c)}t.Za=function(){this.C!=null&&(this.C=null,xo(this),Io(this),Rt(19))};function Co(c){c.C!=null&&(u.clearTimeout(c.C),c.C=null)}function _l(c,g){var w=null;if(c.g==g){Co(c),Ao(c),c.g=null;var C=2}else if(Ce(c.h,g))w=g.D,ys(c.h,g),C=1;else return;if(c.G!=0){if(g.o)if(C==1){w=g.m?g.m.length:0,g=Date.now()-g.F;var B=c.B;C=ho(),St(C,new mc(C,w)),gi(c)}else Wn(c);else if(B=g.s,B==3||B==0&&0<g.X||!(C==1&&Nf(c,g)||C==2&&Io(c)))switch(w&&0<w.length&&(g=c.h,g.i=g.i.concat(w)),B){case 1:Mr(c,5);break;case 4:Mr(c,10);break;case 3:Mr(c,6);break;default:Mr(c,2)}}}function vl(c,g){let w=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(w*=2),w*g}function Mr(c,g){if(c.j.info("Error code "+g),g==2){var w=E(c.fb,c),C=c.Xa;const B=!C;C=new An(C||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||vo(C,"https"),Pn(C),B?ze(C.toString(),w):Sc(C.toString(),w)}else Rt(2);c.G=0,c.l&&c.l.sa(g),Cc(c),Pc(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Rt(2)):(this.j.info("Failed to ping google.com"),Rt(1))};function Cc(c){if(c.G=0,c.ka=[],c.l){const g=Nr(c.h);(g.length!=0||c.i.length!=0)&&(I(c.ka,g),I(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function Ro(c,g,w){var C=w instanceof An?it(w):new An(w);if(C.g!="")g&&(C.g=g+"."+C.g),Lr(C,C.s);else{var B=u.location;C=B.protocol,g=g?g+"."+B.hostname:B.hostname,B=+B.port;var q=new An(null);C&&vo(q,C),g&&(q.g=g),B&&Lr(q,B),w&&(q.l=w),C=q}return w=c.D,g=c.ya,w&&g&&me(C,w,g),me(C,"VER",c.la),ws(c,C),C}function Rc(c,g,w){if(g&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=c.Ca&&!c.pa?new Ze(new bn({eb:w})):new Ze(c.pa),g.Ha(c.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function yl(){}t=yl.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Es(){}Es.prototype.g=function(c,g){return new xt(c,g)};function xt(c,g){ht.call(this),this.g=new Ac(g),this.l=c,this.h=g&&g.messageUrlParams||null,c=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(c?c["X-WebChannel-Content-Type"]=g.messageContentType:c={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(c?c["X-WebChannel-Client-Profile"]=g.va:c={"X-WebChannel-Client-Profile":g.va}),this.g.S=c,(c=g&&g.Sb)&&!T(c)&&(this.g.m=c),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!T(g)&&(this.g.D=g,c=this.h,c!==null&&g in c&&(c=this.h,g in c&&delete c[g])),this.j=new kn(this)}P(xt,ht),xt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xt.prototype.close=function(){So(this.g)},xt.prototype.o=function(c){var g=this.g;if(typeof c=="string"){var w={};w.__data__=c,c=w}else this.u&&(w={},w.__data__=uo(c),c=w);g.i.push(new vs(g.Ya++,c)),g.G==3&&gi(g)},xt.prototype.N=function(){this.g.l=null,delete this.j,So(this.g),delete this.g,xt.aa.N.call(this)};function lr(c){co.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var g=c.__sm__;if(g){e:{for(const w in g){c=w;break e}c=void 0}(this.i=c)&&(c=this.i,g=g!==null&&c in g?g[c]:void 0),this.data=g}else this.data=c}P(lr,co);function bc(){Qa.call(this),this.status=1}P(bc,Qa);function kn(c){this.g=c}P(kn,yl),kn.prototype.ua=function(){St(this.g,"a")},kn.prototype.ta=function(c){St(this.g,new lr(c))},kn.prototype.sa=function(c){St(this.g,new bc)},kn.prototype.ra=function(){St(this.g,"b")},Es.prototype.createWebChannel=Es.prototype.g,xt.prototype.send=xt.prototype.o,xt.prototype.open=xt.prototype.m,xt.prototype.close=xt.prototype.close,YS=function(){return new Es},XS=function(){return ho()},JS=Rr,Vm={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ms.NO_ERROR=0,ms.TIMEOUT=8,ms.HTTP_ERROR=6,Oh=ms,po.COMPLETE="complete",QS=po,Za.EventType=ci,ci.OPEN="a",ci.CLOSE="b",ci.ERROR="c",ci.MESSAGE="d",ht.prototype.listen=ht.prototype.K,zl=Za,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,ZS=Ze}).apply(typeof lh<"u"?lh:typeof self<"u"?self:typeof window<"u"?window:{});const Sw="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bt.UNAUTHENTICATED=new Bt(null),Bt.GOOGLE_CREDENTIALS=new Bt("google-credentials-uid"),Bt.FIRST_PARTY=new Bt("first-party-uid"),Bt.MOCK_USER=new Bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ma="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=new s_("@firebase/firestore");function Ol(){return qs.logLevel}function oe(t,...e){if(qs.logLevel<=ke.DEBUG){const n=e.map(l_);qs.debug(`Firestore (${Ma}): ${t}`,...n)}}function ti(t,...e){if(qs.logLevel<=ke.ERROR){const n=e.map(l_);qs.error(`Firestore (${Ma}): ${t}`,...n)}}function wa(t,...e){if(qs.logLevel<=ke.WARN){const n=e.map(l_);qs.warn(`Firestore (${Ma}): ${t}`,...n)}}function l_(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t="Unexpected state"){const e=`FIRESTORE (${Ma}) INTERNAL ASSERTION FAILED: `+t;throw ti(e),new Error(e)}function Ue(t,e){t||_e()}function we(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends Ar{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Bt.UNAUTHENTICATED))}shutdown(){}}class xL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class IL{constructor(e){this.t=e,this.currentUser=Bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ue(this.o===void 0);let r=this.i;const i=h=>this.i!==r?(r=this.i,n(h)):Promise.resolve();let o=new Ki;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ki,e.enqueueRetryable(()=>i(this.currentUser))};const a=()=>{const h=o;e.enqueueRetryable(async()=>{await h.promise,await i(this.currentUser)})},u=h=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(h=>u(h)),setTimeout(()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?u(h):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ki)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ue(typeof r.accessToken=="string"),new ex(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ue(e===null||typeof e=="string"),new Bt(e)}}class AL{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class PL{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new AL(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class CL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class RL{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ue(this.o===void 0);const r=o=>{o.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,oe("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ue(typeof n.token=="string"),this.R=n.token,new CL(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=bL(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function De(t,e){return t<e?-1:t>e?1:0}function Ea(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new se(Q.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(Q.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Et.fromMillis(Date.now())}static fromDate(e){return Et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ye(e)}static min(){return new ye(new Et(0,0))}static max(){return new ye(new Et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e,n,r){n===void 0?n=0:n>e.length&&_e(),r===void 0?r=e.length-n:r>e.length-n&&_e(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ru.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ru?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),a=n.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class qe extends Ru{construct(e,n,r){return new qe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(Q.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new qe(n)}static emptyPath(){return new qe([])}}const kL=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Lt extends Ru{construct(e,n,r){return new Lt(e,n,r)}static isValidIdentifier(e){return kL.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Lt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Lt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;i<e.length;){const u=e[i];if(u==="\\"){if(i+1===e.length)throw new se(Q.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new se(Q.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new se(Q.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Lt(n)}static emptyPath(){return new Lt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ue{constructor(e){this.path=e}static fromPath(e){return new ue(qe.fromString(e))}static fromName(e){return new ue(qe.fromString(e).popFirst(5))}static empty(){return new ue(qe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&qe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return qe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ue(new qe(e.slice()))}}function NL(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ye.fromTimestamp(r===1e9?new Et(n+1,0):new Et(n,r));return new Yi(i,ue.empty(),e)}function LL(t){return new Yi(t.readTime,t.key,-1)}class Yi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Yi(ye.min(),ue.empty(),-1)}static max(){return new Yi(ye.max(),ue.empty(),-1)}}function OL(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ue.comparator(t.documentKey,e.documentKey),n!==0?n:De(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ML{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ju(t){if(t.code!==Q.FAILED_PRECONDITION||t.message!==DL)throw t;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&_e(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new X((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof X?n:X.resolve(n)}catch(n){return X.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):X.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):X.reject(n)}static resolve(e){return new X((n,r)=>{n(e)})}static reject(e){return new X((n,r)=>{r(e)})}static waitFor(e){return new X((n,r)=>{let i=0,o=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++o,a&&o===i&&n()},h=>r(h))}),a=!0,o===i&&n()})}static or(e){let n=X.resolve(!1);for(const r of e)n=n.next(i=>i?X.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new X((r,i)=>{const o=e.length,a=new Array(o);let u=0;for(let h=0;h<o;h++){const p=h;n(e[p]).next(_=>{a[p]=_,++u,u===o&&r(a)},_=>i(_))}})}static doWhile(e,n){return new X((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function jL(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}u_.oe=-1;function cf(t){return t==null}function Td(t){return t===0&&1/t==-1/0}function VL(t){return typeof t=="number"&&Number.isInteger(t)&&!Td(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ja(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function nx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e,n){this.comparator=e,this.root=n||Nt.EMPTY}insert(e,n){return new rt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new rt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uh(this.root,e,this.comparator,!1)}getReverseIterator(){return new uh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uh(this.root,e,this.comparator,!0)}}class uh{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Nt.RED,this.left=i??Nt.EMPTY,this.right=o??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Nt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Nt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw _e();const e=this.left.check();if(e!==this.right.check())throw _e();return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw _e()}get value(){throw _e()}get color(){throw _e()}get left(){throw _e()}get right(){throw _e()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.comparator=e,this.data=new rt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Iw(this.data.getIterator())}getIteratorFrom(e){return new Iw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Dt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Dt(this.comparator);return n.data=e,n}}class Iw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.fields=e,e.sort(Lt.comparator)}static empty(){return new Yn([])}unionWith(e){let n=new Dt(Lt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Yn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ea(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new rx("Invalid base64 string: "+o):o}}(e);return new Vt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new Vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Vt.EMPTY_BYTE_STRING=new Vt("");const FL=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function es(t){if(Ue(!!t),typeof t=="string"){let e=0;const n=FL.exec(t);if(Ue(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ut(t.seconds),nanos:ut(t.nanos)}}function ut(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Gs(t){return typeof t=="string"?Vt.fromBase64String(t):Vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c_(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function h_(t){const e=t.mapValue.fields.__previous_value__;return c_(e)?h_(e):e}function bu(t){const e=es(t.mapValue.fields.__local_write_time__.timestampValue);return new Et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UL{constructor(e,n,r,i,o,a,u,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=h,this.useFetchStreams=p}}class ku{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ku("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ku&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ch={mapValue:{}};function Ks(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?c_(t)?4:BL(t)?9007199254740991:zL(t)?10:11:_e()}function Ir(t,e){if(t===e)return!0;const n=Ks(t);if(n!==Ks(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bu(t).isEqual(bu(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const a=es(i.timestampValue),u=es(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return Gs(i.bytesValue).isEqual(Gs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return ut(i.geoPointValue.latitude)===ut(o.geoPointValue.latitude)&&ut(i.geoPointValue.longitude)===ut(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ut(i.integerValue)===ut(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const a=ut(i.doubleValue),u=ut(o.doubleValue);return a===u?Td(a)===Td(u):isNaN(a)&&isNaN(u)}return!1}(t,e);case 9:return Ea(t.arrayValue.values||[],e.arrayValue.values||[],Ir);case 10:case 11:return function(i,o){const a=i.mapValue.fields||{},u=o.mapValue.fields||{};if(xw(a)!==xw(u))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(u[h]===void 0||!Ir(a[h],u[h])))return!1;return!0}(t,e);default:return _e()}}function Nu(t,e){return(t.values||[]).find(n=>Ir(n,e))!==void 0}function Ta(t,e){if(t===e)return 0;const n=Ks(t),r=Ks(e);if(n!==r)return De(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(o,a){const u=ut(o.integerValue||o.doubleValue),h=ut(a.integerValue||a.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(t,e);case 3:return Aw(t.timestampValue,e.timestampValue);case 4:return Aw(bu(t),bu(e));case 5:return De(t.stringValue,e.stringValue);case 6:return function(o,a){const u=Gs(o),h=Gs(a);return u.compareTo(h)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const u=o.split("/"),h=a.split("/");for(let p=0;p<u.length&&p<h.length;p++){const _=De(u[p],h[p]);if(_!==0)return _}return De(u.length,h.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const u=De(ut(o.latitude),ut(a.latitude));return u!==0?u:De(ut(o.longitude),ut(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Pw(t.arrayValue,e.arrayValue);case 10:return function(o,a){var u,h,p,_;const v=o.fields||{},E=a.fields||{},k=(u=v.value)===null||u===void 0?void 0:u.arrayValue,P=(h=E.value)===null||h===void 0?void 0:h.arrayValue,A=De(((p=k==null?void 0:k.values)===null||p===void 0?void 0:p.length)||0,((_=P==null?void 0:P.values)===null||_===void 0?void 0:_.length)||0);return A!==0?A:Pw(k,P)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===ch.mapValue&&a===ch.mapValue)return 0;if(o===ch.mapValue)return 1;if(a===ch.mapValue)return-1;const u=o.fields||{},h=Object.keys(u),p=a.fields||{},_=Object.keys(p);h.sort(),_.sort();for(let v=0;v<h.length&&v<_.length;++v){const E=De(h[v],_[v]);if(E!==0)return E;const k=Ta(u[h[v]],p[_[v]]);if(k!==0)return k}return De(h.length,_.length)}(t.mapValue,e.mapValue);default:throw _e()}}function Aw(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);const n=es(t),r=es(e),i=De(n.seconds,r.seconds);return i!==0?i:De(n.nanos,r.nanos)}function Pw(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const o=Ta(n[i],r[i]);if(o)return o}return De(n.length,r.length)}function Sa(t){return Fm(t)}function Fm(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=es(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Gs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ue.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Fm(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const a of r)o?o=!1:i+=",",i+=`${a}:${Fm(n.fields[a])}`;return i+"}"}(t.mapValue):_e()}function Cw(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Um(t){return!!t&&"integerValue"in t}function d_(t){return!!t&&"arrayValue"in t}function Rw(t){return!!t&&"nullValue"in t}function bw(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Dh(t){return!!t&&"mapValue"in t}function zL(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function nu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ja(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=nu(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=nu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function BL(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Dh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=nu(n)}setAll(e){let n=Lt.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!n.isImmediateParentOf(u)){const h=this.getFieldsMap(n);this.applyChanges(h,r,i),r={},i=[],n=u.popLast()}a?r[u.lastSegment()]=nu(a):i.push(u.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Dh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ir(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Dh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ja(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Dn(nu(this.value))}}function ix(t){const e=[];return ja(t.fields,(n,r)=>{const i=new Lt([n]);if(Dh(r)){const o=ix(r.mapValue).fields;if(o.length===0)e.push(i);else for(const a of o)e.push(i.child(a))}else e.push(i)}),new Yn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e,n,r,i,o,a,u){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new Ht(e,0,ye.min(),ye.min(),ye.min(),Dn.empty(),0)}static newFoundDocument(e,n,r,i){return new Ht(e,1,n,ye.min(),r,i,0)}static newNoDocument(e,n){return new Ht(e,2,n,ye.min(),ye.min(),Dn.empty(),0)}static newUnknownDocument(e,n){return new Ht(e,3,n,ye.min(),ye.min(),Dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ye.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ye.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(e,n){this.position=e,this.inclusive=n}}function kw(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],a=t.position[i];if(o.field.isKeyField()?r=ue.comparator(ue.fromName(a.referenceValue),n.key):r=Ta(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Nw(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ir(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n="asc"){this.field=e,this.dir=n}}function $L(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{}class gt extends sx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new WL(e,n,r):n==="array-contains"?new KL(e,r):n==="in"?new ZL(e,r):n==="not-in"?new QL(e,r):n==="array-contains-any"?new JL(e,r):new gt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new qL(e,r):new GL(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ta(n,this.value)):n!==null&&Ks(this.value)===Ks(n)&&this.matchesComparison(Ta(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ir extends sx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new ir(e,n)}matches(e){return ox(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function ox(t){return t.op==="and"}function ax(t){return HL(t)&&ox(t)}function HL(t){for(const e of t.filters)if(e instanceof ir)return!1;return!0}function zm(t){if(t instanceof gt)return t.field.canonicalString()+t.op.toString()+Sa(t.value);if(ax(t))return t.filters.map(e=>zm(e)).join(",");{const e=t.filters.map(n=>zm(n)).join(",");return`${t.op}(${e})`}}function lx(t,e){return t instanceof gt?function(r,i){return i instanceof gt&&r.op===i.op&&r.field.isEqual(i.field)&&Ir(r.value,i.value)}(t,e):t instanceof ir?function(r,i){return i instanceof ir&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,u)=>o&&lx(a,i.filters[u]),!0):!1}(t,e):void _e()}function ux(t){return t instanceof gt?function(n){return`${n.field.canonicalString()} ${n.op} ${Sa(n.value)}`}(t):t instanceof ir?function(n){return n.op.toString()+" {"+n.getFilters().map(ux).join(" ,")+"}"}(t):"Filter"}class WL extends gt{constructor(e,n,r){super(e,n,r),this.key=ue.fromName(r.referenceValue)}matches(e){const n=ue.comparator(e.key,this.key);return this.matchesComparison(n)}}class qL extends gt{constructor(e,n){super(e,"in",n),this.keys=cx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class GL extends gt{constructor(e,n){super(e,"not-in",n),this.keys=cx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function cx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>ue.fromName(r.referenceValue))}class KL extends gt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return d_(n)&&Nu(n.arrayValue,this.value)}}class ZL extends gt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Nu(this.value.arrayValue,n)}}class QL extends gt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Nu(this.value.arrayValue,n)}}class JL extends gt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!d_(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Nu(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,n=null,r=[],i=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}}function Lw(t,e=null,n=[],r=[],i=null,o=null,a=null){return new XL(t,e,n,r,i,o,a)}function f_(t){const e=we(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>zm(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),cf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Sa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Sa(r)).join(",")),e.ue=n}return e.ue}function p_(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!$L(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!lx(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Nw(t.startAt,e.startAt)&&Nw(t.endAt,e.endAt)}function Bm(t){return ue.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n=null,r=[],i=[],o=null,a="F",u=null,h=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function YL(t,e,n,r,i,o,a,u){return new Va(t,e,n,r,i,o,a,u)}function m_(t){return new Va(t)}function Ow(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hx(t){return t.collectionGroup!==null}function ru(t){const e=we(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Dt(Lt.comparator);return a.filters.forEach(h=>{h.getFlattenedFilters().forEach(p=>{p.isInequality()&&(u=u.add(p.field))})}),u})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Lu(o,r))}),n.has(Lt.keyField().canonicalString())||e.ce.push(new Lu(Lt.keyField(),r))}return e.ce}function wr(t){const e=we(t);return e.le||(e.le=eO(e,ru(t))),e.le}function eO(t,e){if(t.limitType==="F")return Lw(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new Lu(i.field,o)});const n=t.endAt?new Sd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Sd(t.startAt.position,t.startAt.inclusive):null;return Lw(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function $m(t,e){const n=t.filters.concat([e]);return new Va(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function xd(t,e,n){return new Va(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function hf(t,e){return p_(wr(t),wr(e))&&t.limitType===e.limitType}function dx(t){return`${f_(wr(t))}|lt:${t.limitType}`}function jo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>ux(i)).join(", ")}]`),cf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Sa(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Sa(i)).join(",")),`Target(${r})`}(wr(t))}; limitType=${t.limitType})`}function df(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):ue.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of ru(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(a,u,h){const p=kw(a,u,h);return a.inclusive?p<=0:p<0}(r.startAt,ru(r),i)||r.endAt&&!function(a,u,h){const p=kw(a,u,h);return a.inclusive?p>=0:p>0}(r.endAt,ru(r),i))}(t,e)}function tO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function fx(t){return(e,n)=>{let r=!1;for(const i of ru(t)){const o=nO(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function nO(t,e,n){const r=t.field.isKeyField()?ue.comparator(e.key,n.key):function(o,a,u){const h=a.data.field(o),p=u.data.field(o);return h!==null&&p!==null?Ta(h,p):_e()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return _e()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ja(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return nx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=new rt(ue.comparator);function ni(){return rO}const px=new rt(ue.comparator);function Bl(...t){let e=px;for(const n of t)e=e.insert(n.key,n);return e}function mx(t){let e=px;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ks(){return iu()}function gx(){return iu()}function iu(){return new Fa(t=>t.toString(),(t,e)=>t.isEqual(e))}const iO=new rt(ue.comparator),sO=new Dt(ue.comparator);function Re(...t){let e=sO;for(const n of t)e=e.add(n);return e}const oO=new Dt(De);function aO(){return oO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Td(e)?"-0":e}}function _x(t){return{integerValue:""+t}}function lO(t,e){return VL(e)?_x(e):g_(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(){this._=void 0}}function uO(t,e,n){return t instanceof Ou?function(i,o){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&c_(o)&&(o=h_(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(n,e):t instanceof Du?yx(t,e):t instanceof Mu?wx(t,e):function(i,o){const a=vx(i,o),u=Dw(a)+Dw(i.Pe);return Um(a)&&Um(i.Pe)?_x(u):g_(i.serializer,u)}(t,e)}function cO(t,e,n){return t instanceof Du?yx(t,e):t instanceof Mu?wx(t,e):n}function vx(t,e){return t instanceof Id?function(r){return Um(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Ou extends ff{}class Du extends ff{constructor(e){super(),this.elements=e}}function yx(t,e){const n=Ex(e);for(const r of t.elements)n.some(i=>Ir(i,r))||n.push(r);return{arrayValue:{values:n}}}class Mu extends ff{constructor(e){super(),this.elements=e}}function wx(t,e){let n=Ex(e);for(const r of t.elements)n=n.filter(i=>!Ir(i,r));return{arrayValue:{values:n}}}class Id extends ff{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Dw(t){return ut(t.integerValue||t.doubleValue)}function Ex(t){return d_(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e,n){this.field=e,this.transform=n}}function dO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Du&&i instanceof Du||r instanceof Mu&&i instanceof Mu?Ea(r.elements,i.elements,Ir):r instanceof Id&&i instanceof Id?Ir(r.Pe,i.Pe):r instanceof Ou&&i instanceof Ou}(t.transform,e.transform)}class fO{constructor(e,n){this.version=e,this.transformResults=n}}class nr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new nr}static exists(e){return new nr(void 0,e)}static updateTime(e){return new nr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class pf{}function Tx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new __(t.key,nr.none()):new Yu(t.key,t.data,nr.none());{const n=t.data,r=Dn.empty();let i=new Dt(Lt.comparator);for(let o of e.fields)if(!i.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new to(t.key,r,new Yn(i.toArray()),nr.none())}}function pO(t,e,n){t instanceof Yu?function(i,o,a){const u=i.value.clone(),h=jw(i.fieldTransforms,o,a.transformResults);u.setAll(h),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,n):t instanceof to?function(i,o,a){if(!Mh(i.precondition,o))return void o.convertToUnknownDocument(a.version);const u=jw(i.fieldTransforms,o,a.transformResults),h=o.data;h.setAll(Sx(i)),h.setAll(u),o.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(t,e,n):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function su(t,e,n,r){return t instanceof Yu?function(o,a,u,h){if(!Mh(o.precondition,a))return u;const p=o.value.clone(),_=Vw(o.fieldTransforms,h,a);return p.setAll(_),a.convertToFoundDocument(a.version,p).setHasLocalMutations(),null}(t,e,n,r):t instanceof to?function(o,a,u,h){if(!Mh(o.precondition,a))return u;const p=Vw(o.fieldTransforms,h,a),_=a.data;return _.setAll(Sx(o)),_.setAll(p),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(v=>v.field))}(t,e,n,r):function(o,a,u){return Mh(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(t,e,n)}function mO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=vx(r.transform,i||null);o!=null&&(n===null&&(n=Dn.empty()),n.set(r.field,o))}return n||null}function Mw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Ea(r,i,(o,a)=>dO(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Yu extends pf{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class to extends pf{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function Sx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function jw(t,e,n){const r=new Map;Ue(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],a=o.transform,u=e.data.field(o.field);r.set(o.field,cO(a,u,n[i]))}return r}function Vw(t,e,n){const r=new Map;for(const i of t){const o=i.transform,a=n.data.field(i.field);r.set(i.field,uO(o,a,e))}return r}class __ extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gO extends pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _O{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&pO(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=su(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=gx();return this.mutations.forEach(i=>{const o=e.get(i.key),a=o.overlayedDocument;let u=this.applyToLocalView(a,o.mutatedFields);u=n.has(i.key)?null:u;const h=Tx(a,u);h!==null&&r.set(i.key,h),a.isValidDocument()||a.convertToNoDocument(ye.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&Ea(this.mutations,e.mutations,(n,r)=>Mw(n,r))&&Ea(this.baseMutations,e.baseMutations,(n,r)=>Mw(n,r))}}class v_{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ue(e.mutations.length===r.length);let i=function(){return iO}();const o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new v_(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vO{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,Le;function wO(t){switch(t){default:return _e();case Q.CANCELLED:case Q.UNKNOWN:case Q.DEADLINE_EXCEEDED:case Q.RESOURCE_EXHAUSTED:case Q.INTERNAL:case Q.UNAVAILABLE:case Q.UNAUTHENTICATED:return!1;case Q.INVALID_ARGUMENT:case Q.NOT_FOUND:case Q.ALREADY_EXISTS:case Q.PERMISSION_DENIED:case Q.FAILED_PRECONDITION:case Q.ABORTED:case Q.OUT_OF_RANGE:case Q.UNIMPLEMENTED:case Q.DATA_LOSS:return!0}}function xx(t){if(t===void 0)return ti("GRPC error has no .code"),Q.UNKNOWN;switch(t){case pt.OK:return Q.OK;case pt.CANCELLED:return Q.CANCELLED;case pt.UNKNOWN:return Q.UNKNOWN;case pt.DEADLINE_EXCEEDED:return Q.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return Q.RESOURCE_EXHAUSTED;case pt.INTERNAL:return Q.INTERNAL;case pt.UNAVAILABLE:return Q.UNAVAILABLE;case pt.UNAUTHENTICATED:return Q.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return Q.INVALID_ARGUMENT;case pt.NOT_FOUND:return Q.NOT_FOUND;case pt.ALREADY_EXISTS:return Q.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return Q.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return Q.FAILED_PRECONDITION;case pt.ABORTED:return Q.ABORTED;case pt.OUT_OF_RANGE:return Q.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return Q.UNIMPLEMENTED;case pt.DATA_LOSS:return Q.DATA_LOSS;default:return _e()}}(Le=pt||(pt={}))[Le.OK=0]="OK",Le[Le.CANCELLED=1]="CANCELLED",Le[Le.UNKNOWN=2]="UNKNOWN",Le[Le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Le[Le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Le[Le.NOT_FOUND=5]="NOT_FOUND",Le[Le.ALREADY_EXISTS=6]="ALREADY_EXISTS",Le[Le.PERMISSION_DENIED=7]="PERMISSION_DENIED",Le[Le.UNAUTHENTICATED=16]="UNAUTHENTICATED",Le[Le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Le[Le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Le[Le.ABORTED=10]="ABORTED",Le[Le.OUT_OF_RANGE=11]="OUT_OF_RANGE",Le[Le.UNIMPLEMENTED=12]="UNIMPLEMENTED",Le[Le.INTERNAL=13]="INTERNAL",Le[Le.UNAVAILABLE=14]="UNAVAILABLE",Le[Le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO=new Ds([4294967295,4294967295],0);function Fw(t){const e=EO().encode(t),n=new KS;return n.update(e),new Uint8Array(n.digest())}function Uw(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Ds([n,r],0),new Ds([i,o],0)]}class y_{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $l(`Invalid padding: ${n}`);if(r<0)throw new $l(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new $l(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Ds.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(Ds.fromNumber(r)));return i.compare(TO)===1&&(i=new Ds([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Fw(e),[r,i]=Uw(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);if(!this.de(a))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new y_(o,i,n);return r.forEach(u=>a.insert(u)),a}insert(e){if(this.Ie===0)return;const n=Fw(e),[r,i]=Uw(n);for(let o=0;o<this.hashCount;o++){const a=this.Ee(r,i,o);this.Ae(a)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mf{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ec.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new mf(ye.min(),i,new rt(De),ni(),Re())}}class ec{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ec(r,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}}class Ix{constructor(e,n){this.targetId=e,this.me=n}}class Ax{constructor(e,n,r=Vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class zw{constructor(){this.fe=0,this.ge=$w(),this.pe=Vt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Re(),n=Re(),r=Re();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:_e()}}),new ec(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=$w()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ue(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class SO{constructor(e){this.Le=e,this.Be=new Map,this.ke=ni(),this.qe=Bw(),this.Qe=new rt(De)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:_e()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){const n=e.targetId,r=e.me.count,i=this.Je(n);if(i){const o=i.target;if(Bm(o))if(r===0){const a=new ue(o.path);this.Ue(n,a,Ht.newNoDocument(a,ye.min()))}else Ue(r===1);else{const a=this.Ye(n);if(a!==r){const u=this.Ze(e),h=u?this.Xe(u,e,a):1;if(h!==0){this.je(n);const p=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,p)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let a,u;try{a=Gs(r).toUint8Array()}catch(h){if(h instanceof rx)return wa("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{u=new y_(a,i,o)}catch(h){return wa(h instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const a=this.Le.tt(),u=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,o,null),i++)}),i}rt(e){const n=new Map;this.Be.forEach((o,a)=>{const u=this.Je(a);if(u){if(o.current&&Bm(u.target)){const h=new ue(u.target.path);this.ke.get(h)!==null||this.it(a,h)||this.Ue(a,h,Ht.newNoDocument(h,e))}o.be&&(n.set(a,o.ve()),o.Ce())}});let r=Re();this.qe.forEach((o,a)=>{let u=!0;a.forEachWhile(h=>{const p=this.Je(h);return!p||p.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(o))}),this.ke.forEach((o,a)=>a.setReadTime(e));const i=new mf(e,n,this.Qe,this.ke,r);return this.ke=ni(),this.qe=Bw(),this.Qe=new rt(De),i}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new zw,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Dt(De),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||oe("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new zw),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Bw(){return new rt(ue.comparator)}function $w(){return new rt(ue.comparator)}const xO={asc:"ASCENDING",desc:"DESCENDING"},IO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AO={and:"AND",or:"OR"};class PO{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Hm(t,e){return t.useProto3Json||cf(e)?e:{value:e}}function Ad(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Px(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CO(t,e){return Ad(t,e.toTimestamp())}function Er(t){return Ue(!!t),ye.fromTimestamp(function(n){const r=es(n);return new Et(r.seconds,r.nanos)}(t))}function w_(t,e){return Wm(t,e).canonicalString()}function Wm(t,e){const n=function(i){return new qe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Cx(t){const e=qe.fromString(t);return Ue(Lx(e)),e}function qm(t,e){return w_(t.databaseId,e.path)}function yp(t,e){const n=Cx(e);if(n.get(1)!==t.databaseId.projectId)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new se(Q.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ue(bx(n))}function Rx(t,e){return w_(t.databaseId,e)}function RO(t){const e=Cx(t);return e.length===4?qe.emptyPath():bx(e)}function Gm(t){return new qe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function bx(t){return Ue(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Hw(t,e,n){return{name:qm(t,e),fields:n.value.mapValue.fields}}function bO(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:_e()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(p,_){return p.useProto3Json?(Ue(_===void 0||typeof _=="string"),Vt.fromBase64String(_||"")):(Ue(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),Vt.fromUint8Array(_||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,u=a&&function(p){const _=p.code===void 0?Q.UNKNOWN:xx(p.code);return new se(_,p.message||"")}(a);n=new Ax(r,i,o,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=yp(t,r.document.name),o=Er(r.document.updateTime),a=r.document.createTime?Er(r.document.createTime):ye.min(),u=new Dn({mapValue:{fields:r.document.fields}}),h=Ht.newFoundDocument(i,o,a,u),p=r.targetIds||[],_=r.removedTargetIds||[];n=new jh(p,_,h.key,h)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=yp(t,r.document),o=r.readTime?Er(r.readTime):ye.min(),a=Ht.newNoDocument(i,o),u=r.removedTargetIds||[];n=new jh([],u,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=yp(t,r.document),o=r.removedTargetIds||[];n=new jh([],o,i,null)}else{if(!("filter"in e))return _e();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,a=new yO(i,o),u=r.targetId;n=new Ix(u,a)}}return n}function kO(t,e){let n;if(e instanceof Yu)n={update:Hw(t,e.key,e.value)};else if(e instanceof __)n={delete:qm(t,e.key)};else if(e instanceof to)n={update:Hw(t,e.key,e.data),updateMask:UO(e.fieldMask)};else{if(!(e instanceof gO))return _e();n={verify:qm(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const u=a.transform;if(u instanceof Ou)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Du)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Mu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Id)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw _e()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:CO(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:_e()}(t,e.precondition)),n}function NO(t,e){return t&&t.length>0?(Ue(e!==void 0),t.map(n=>function(i,o){let a=i.updateTime?Er(i.updateTime):Er(o);return a.isEqual(ye.min())&&(a=Er(o)),new fO(a,i.transformResults||[])}(n,e))):[]}function LO(t,e){return{documents:[Rx(t,e.path)]}}function OO(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Rx(t,i);const o=function(p){if(p.length!==0)return Nx(ir.create(p,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(p){if(p.length!==0)return p.map(_=>function(E){return{field:Vo(E.field),direction:jO(E.dir)}}(_))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const u=Hm(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(p){return{before:p.inclusive,values:p.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(p){return{before:!p.inclusive,values:p.position}}(e.endAt)),{_t:n,parent:i}}function DO(t){let e=RO(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ue(r===1);const _=n.from[0];_.allDescendants?i=_.collectionId:e=e.child(_.collectionId)}let o=[];n.where&&(o=function(v){const E=kx(v);return E instanceof ir&&ax(E)?E.getFilters():[E]}(n.where));let a=[];n.orderBy&&(a=function(v){return v.map(E=>function(P){return new Lu(Fo(P.field),function(I){switch(I){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction))}(E))}(n.orderBy));let u=null;n.limit&&(u=function(v){let E;return E=typeof v=="object"?v.value:v,cf(E)?null:E}(n.limit));let h=null;n.startAt&&(h=function(v){const E=!!v.before,k=v.values||[];return new Sd(k,E)}(n.startAt));let p=null;return n.endAt&&(p=function(v){const E=!v.before,k=v.values||[];return new Sd(k,E)}(n.endAt)),YL(e,i,a,o,u,"F",h,p)}function MO(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function kx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Fo(n.unaryFilter.field);return gt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Fo(n.unaryFilter.field);return gt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Fo(n.unaryFilter.field);return gt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Fo(n.unaryFilter.field);return gt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return _e()}}(t):t.fieldFilter!==void 0?function(n){return gt.create(Fo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return _e()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return ir.create(n.compositeFilter.filters.map(r=>kx(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return _e()}}(n.compositeFilter.op))}(t):_e()}function jO(t){return xO[t]}function VO(t){return IO[t]}function FO(t){return AO[t]}function Vo(t){return{fieldPath:t.canonicalString()}}function Fo(t){return Lt.fromServerFormat(t.fieldPath)}function Nx(t){return t instanceof gt?function(n){if(n.op==="=="){if(bw(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NAN"}};if(Rw(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(bw(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NAN"}};if(Rw(n.value))return{unaryFilter:{field:Vo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(n.field),op:VO(n.op),value:n.value}}}(t):t instanceof ir?function(n){const r=n.getFilters().map(i=>Nx(i));return r.length===1?r[0]:{compositeFilter:{op:FO(n.op),filters:r}}}(t):_e()}function UO(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Lx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n,r,i,o=ye.min(),a=ye.min(),u=Vt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u,this.expectedCount=h}withSequenceNumber(e){return new Mi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Mi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.ct=e}}function BO(t){const e=DO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?xd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(){this.un=new HO}addToCollectionParentIndex(e,n){return this.un.add(n),X.resolve()}getCollectionParents(e,n){return X.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return X.resolve()}deleteFieldIndex(e,n){return X.resolve()}deleteAllFieldIndexes(e){return X.resolve()}createTargetIndexes(e,n){return X.resolve()}getDocumentsMatchingTarget(e,n){return X.resolve(null)}getIndexType(e,n){return X.resolve(0)}getFieldIndexes(e,n){return X.resolve([])}getNextCollectionGroupToUpdate(e){return X.resolve(null)}getMinOffset(e,n){return X.resolve(Yi.min())}getMinOffsetFromCollectionGroup(e,n){return X.resolve(Yi.min())}updateCollectionGroup(e,n,r){return X.resolve()}updateIndexEntries(e,n){return X.resolve()}}class HO{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Dt(qe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Dt(qe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new xa(0)}static kn(){return new xa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WO{constructor(){this.changes=new Fa(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?X.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GO{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&su(r.mutation,i,Yn.empty(),Et.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Re()){const i=ks();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let a=Bl();return o.forEach((u,h)=>{a=a.insert(u,h.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=ks();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Re()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,u)=>{n.set(a,u)})})}computeViews(e,n,r,i){let o=ni();const a=iu(),u=function(){return iu()}();return n.forEach((h,p)=>{const _=r.get(p.key);i.has(p.key)&&(_===void 0||_.mutation instanceof to)?o=o.insert(p.key,p):_!==void 0?(a.set(p.key,_.mutation.getFieldMask()),su(_.mutation,p,_.mutation.getFieldMask(),Et.now())):a.set(p.key,Yn.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((p,_)=>a.set(p,_)),n.forEach((p,_)=>{var v;return u.set(p,new qO(_,(v=a.get(p))!==null&&v!==void 0?v:null))}),u))}recalculateAndSaveOverlays(e,n){const r=iu();let i=new rt((a,u)=>a-u),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const u of a)u.keys().forEach(h=>{const p=n.get(h);if(p===null)return;let _=r.get(h)||Yn.empty();_=u.applyToLocalView(p,_),r.set(h,_);const v=(i.get(u.batchId)||Re()).add(h);i=i.insert(u.batchId,v)})}).next(()=>{const a=[],u=i.getReverseIterator();for(;u.hasNext();){const h=u.getNext(),p=h.key,_=h.value,v=gx();_.forEach(E=>{if(!o.has(E)){const k=Tx(n.get(E),r.get(E));k!==null&&v.set(E,k),o=o.add(E)}}),a.push(this.documentOverlayCache.saveOverlays(e,p,v))}return X.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(a){return ue.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):X.resolve(ks());let u=-1,h=o;return a.next(p=>X.forEach(p,(_,v)=>(u<v.largestBatchId&&(u=v.largestBatchId),o.get(_)?X.resolve():this.remoteDocumentCache.getEntry(e,_).next(E=>{h=h.insert(_,E)}))).next(()=>this.populateOverlays(e,p,o)).next(()=>this.computeViews(e,h,p,Re())).next(_=>({batchId:u,changes:mx(_)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ue(n)).next(r=>{let i=Bl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let a=Bl();return this.indexManager.getCollectionParents(e,o).next(u=>X.forEach(u,h=>{const p=function(v,E){return new Va(E,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)}(n,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,p,r,i).next(_=>{_.forEach((v,E)=>{a=a.insert(v,E)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(a=>{o.forEach((h,p)=>{const _=p.getKey();a.get(_)===null&&(a=a.insert(_,Ht.newInvalidDocument(_)))});let u=Bl();return a.forEach((h,p)=>{const _=o.get(h);_!==void 0&&su(_.mutation,p,Yn.empty(),Et.now()),df(n,p)&&(u=u.insert(h,p))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return X.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Er(i.createTime)}}(n)),X.resolve()}getNamedQuery(e,n){return X.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(i){return{name:i.name,query:BO(i.bundledQuery),readTime:Er(i.readTime)}}(n)),X.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZO{constructor(){this.overlays=new rt(ue.comparator),this.Ir=new Map}getOverlay(e,n){return X.resolve(this.overlays.get(n))}getOverlays(e,n){const r=ks();return X.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),X.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),X.resolve()}getOverlaysForCollection(e,n,r){const i=ks(),o=n.length+1,a=new ue(n.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){const h=u.getNext().value,p=h.getKey();if(!n.isPrefixOf(p.path))break;p.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return X.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new rt((p,_)=>p-_);const a=this.overlays.getIterator();for(;a.hasNext();){const p=a.getNext().value;if(p.getKey().getCollectionGroup()===n&&p.largestBatchId>r){let _=o.get(p.largestBatchId);_===null&&(_=ks(),o=o.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const u=ks(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((p,_)=>u.set(p,_)),!(u.size()>=i)););return X.resolve(u)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new vO(n,r));let o=this.Ir.get(n);o===void 0&&(o=Re(),this.Ir.set(n,o)),this.Ir.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(){this.sessionToken=Vt.EMPTY_BYTE_STRING}getSessionToken(e){return X.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,X.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(){this.Tr=new Dt(At.Er),this.dr=new Dt(At.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new At(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new At(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new ue(new qe([])),r=new At(n,e),i=new At(n,e+1),o=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new ue(new qe([])),r=new At(n,e),i=new At(n,e+1);let o=Re();return this.dr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new At(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class At{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return ue.comparator(e.key,n.key)||De(e.wr,n.wr)}static Ar(e,n){return De(e.wr,n.wr)||ue.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Dt(At.Er)}checkEmpty(e){return X.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new _O(o,n,r,i);this.mutationQueue.push(a);for(const u of i)this.br=this.br.add(new At(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return X.resolve(a)}lookupMutationBatch(e,n){return X.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.vr(r),o=i<0?0:i;return X.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return X.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return X.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new At(n,0),i=new At(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],a=>{const u=this.Dr(a.wr);o.push(u)}),X.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Dt(De);return n.forEach(i=>{const o=new At(i,0),a=new At(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],u=>{r=r.add(u.wr)})}),X.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;ue.isDocumentKey(o)||(o=o.child(""));const a=new At(new ue(o),0);let u=new Dt(De);return this.br.forEachWhile(h=>{const p=h.key.path;return!!r.isPrefixOf(p)&&(p.length===i&&(u=u.add(h.wr)),!0)},a),X.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const i=this.Dr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ue(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return X.forEach(n.mutations,i=>{const o=new At(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new At(n,0),i=this.br.firstAfterOrEqual(r);return X.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,X.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e){this.Mr=e,this.docs=function(){return new rt(ue.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,a=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return X.resolve(r?r.document.mutableCopy():Ht.newInvalidDocument(n))}getEntries(e,n){let r=ni();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ht.newInvalidDocument(i))}),X.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ni();const a=n.path,u=new ue(a.child("")),h=this.docs.getIteratorFrom(u);for(;h.hasNext();){const{key:p,value:{document:_}}=h.getNext();if(!a.isPrefixOf(p.path))break;p.path.length>a.length+1||OL(LL(_),r)<=0||(i.has(_.key)||df(n,_))&&(o=o.insert(_.key,_.mutableCopy()))}return X.resolve(o)}getAllFromCollectionGroup(e,n,r,i){_e()}Or(e,n){return X.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new YO(this)}getSize(e){return X.resolve(this.size)}}class YO extends WO{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),X.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.persistence=e,this.Nr=new Fa(n=>f_(n),p_),this.lastRemoteSnapshotVersion=ye.min(),this.highestTargetId=0,this.Lr=0,this.Br=new E_,this.targetCount=0,this.kr=xa.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,i)=>n(i)),X.resolve()}getLastRemoteSnapshotVersion(e){return X.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return X.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),X.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),X.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new xa(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,X.resolve()}updateTargetData(e,n){return this.Kn(n),X.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,X.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),X.waitFor(o).next(()=>i)}getTargetCount(e){return X.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return X.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),X.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),X.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),X.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return X.resolve(r)}containsKey(e,n){return X.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new u_(0),this.Kr=!1,this.Kr=!0,this.$r=new QO,this.referenceDelegate=e(this),this.Ur=new eD(this),this.indexManager=new $O,this.remoteDocumentCache=function(i){return new XO(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new zO(n),this.Gr=new KO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new ZO,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new JO(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){oe("MemoryPersistence","Starting transaction:",e);const i=new nD(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,n){return X.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class nD extends ML{constructor(e){super(),this.currentSequenceNumber=e}}class T_{constructor(e){this.persistence=e,this.Jr=new E_,this.Yr=null}static Zr(e){return new T_(e)}get Xr(){if(this.Yr)return this.Yr;throw _e()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),X.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),X.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),X.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(i=>this.Xr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return X.forEach(this.Xr,r=>{const i=ue.fromPath(r);return this.ei(e,i).next(o=>{o||n.removeEntry(i,ye.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return X.or([()=>X.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=i}static Wi(e,n){let r=Re(),i=Re();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new S_(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return oN()?8:jL(Gt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.Yi(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,n,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new rD;return this.Xi(e,n,a).next(u=>{if(o.result=u,this.zi)return this.es(e,n,a,u.size)})}).next(()=>o.result)}es(e,n,r,i){return r.documentReadCount<this.ji?(Ol()<=ke.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),X.resolve()):(Ol()<=ke.DEBUG&&oe("QueryEngine","Query:",jo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Ol()<=ke.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wr(n))):X.resolve())}Yi(e,n){if(Ow(n))return X.resolve(null);let r=wr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=xd(n,null,"F"),r=wr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=Re(...o);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(h=>{const p=this.ts(n,u);return this.ns(n,p,a,h.readTime)?this.Yi(e,xd(n,null,"F")):this.rs(e,p,n,h)}))})))}Zi(e,n,r,i){return Ow(n)||i.isEqual(ye.min())?X.resolve(null):this.Ji.getDocuments(e,r).next(o=>{const a=this.ts(n,o);return this.ns(n,a,r,i)?X.resolve(null):(Ol()<=ke.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jo(n)),this.rs(e,a,n,NL(i,-1)).next(u=>u))})}ts(e,n){let r=new Dt(fx(e));return n.forEach((i,o)=>{df(e,o)&&(r=r.add(o))}),r}ns(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,n,r){return Ol()<=ke.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",jo(n)),this.Ji.getDocumentsMatchingQuery(e,n,Yi.min(),r)}rs(e,n,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD{constructor(e,n,r,i){this.persistence=e,this.ss=n,this.serializer=i,this.os=new rt(De),this._s=new Fa(o=>f_(o),p_),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function oD(t,e,n,r){return new sD(t,e,n,r)}async function Ox(t,e){const n=we(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],u=[];let h=Re();for(const p of i){a.push(p.batchId);for(const _ of p.mutations)h=h.add(_.key)}for(const p of o){u.push(p.batchId);for(const _ of p.mutations)h=h.add(_.key)}return n.localDocuments.getDocuments(r,h).next(p=>({hs:p,removedBatchIds:a,addedBatchIds:u}))})})}function aD(t,e){const n=we(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,h,p,_){const v=p.batch,E=v.keys();let k=X.resolve();return E.forEach(P=>{k=k.next(()=>_.getEntry(h,P)).next(A=>{const I=p.docVersions.get(P);Ue(I!==null),A.version.compareTo(I)<0&&(v.applyToRemoteDocument(A,p),A.isValidDocument()&&(A.setReadTime(p.commitVersion),_.addEntry(A)))})}),k.next(()=>u.mutationQueue.removeMutationBatch(h,v))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=Re();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(h=h.add(u.batch.mutations[p].key));return h}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Dx(t){const e=we(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function lD(t,e){const n=we(t),r=e.snapshotVersion;let i=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.cs.newChangeBuffer({trackRemovals:!0});i=n.os;const u=[];e.targetChanges.forEach((_,v)=>{const E=i.get(v);if(!E)return;u.push(n.Ur.removeMatchingKeys(o,_.removedDocuments,v).next(()=>n.Ur.addMatchingKeys(o,_.addedDocuments,v)));let k=E.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(v)!==null?k=k.withResumeToken(Vt.EMPTY_BYTE_STRING,ye.min()).withLastLimboFreeSnapshotVersion(ye.min()):_.resumeToken.approximateByteSize()>0&&(k=k.withResumeToken(_.resumeToken,r)),i=i.insert(v,k),function(A,I,b){return A.resumeToken.approximateByteSize()===0||I.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(E,k,_)&&u.push(n.Ur.updateTargetData(o,k))});let h=ni(),p=Re();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(o,_))}),u.push(uD(o,a,e.documentUpdates).next(_=>{h=_.Ps,p=_.Is})),!r.isEqual(ye.min())){const _=n.Ur.getLastRemoteSnapshotVersion(o).next(v=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));u.push(_)}return X.waitFor(u).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,h,p)).next(()=>h)}).then(o=>(n.os=i,o))}function uD(t,e,n){let r=Re(),i=Re();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=ni();return n.forEach((u,h)=>{const p=o.get(u);h.isFoundDocument()!==p.isFoundDocument()&&(i=i.add(u)),h.isNoDocument()&&h.version.isEqual(ye.min())?(e.removeEntry(u,h.readTime),a=a.insert(u,h)):!p.isValidDocument()||h.version.compareTo(p.version)>0||h.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(h),a=a.insert(u,h)):oe("LocalStore","Ignoring outdated watch update for ",u,". Current version:",p.version," Watch version:",h.version)}),{Ps:a,Is:i}})}function cD(t,e){const n=we(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function hD(t,e){const n=we(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Ur.getTargetData(r,e).next(o=>o?(i=o,X.resolve(i)):n.Ur.allocateTargetId(r).next(a=>(i=new Mi(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Km(t,e,n){const r=we(t),i=r.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,i))}catch(a){if(!Xu(a))throw a;oe("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}r.os=r.os.remove(e),r._s.delete(i.target)}function Ww(t,e,n){const r=we(t);let i=ye.min(),o=Re();return r.persistence.runTransaction("Execute query","readwrite",a=>function(h,p,_){const v=we(h),E=v._s.get(_);return E!==void 0?X.resolve(v.os.get(E)):v.Ur.getTargetData(p,_)}(r,a,wr(e)).next(u=>{if(u)return i=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(a,u.targetId).next(h=>{o=h})}).next(()=>r.ss.getDocumentsMatchingQuery(a,e,n?i:ye.min(),n?o:Re())).next(u=>(dD(r,tO(e),u),{documents:u,Ts:o})))}function dD(t,e,n){let r=t.us.get(e)||ye.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.us.set(e,r)}class qw{constructor(){this.activeTargetIds=aO()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fD{constructor(){this.so=new qw,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new qw,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){oe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){oe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hh=null;function wp(){return hh===null?hh=function(){return 268435456+Math.round(2147483648*Math.random())}():hh++,"0x"+hh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zt="WebChannelConnection";class _D extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(n,r,i,o,a){const u=wp(),h=this.xo(n,r.toUriEncodedString());oe("RestConnection",`Sending RPC '${n}' ${u}:`,h,i);const p={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(p,o,a),this.No(n,h,p,i).then(_=>(oe("RestConnection",`Received RPC '${n}' ${u}: `,_),_),_=>{throw wa("RestConnection",`RPC '${n}' ${u} failed with error: `,_,"url: ",h,"request:",i),_})}Lo(n,r,i,o,a,u){return this.Mo(n,r,i,o,a)}Oo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ma}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>n[a]=o),i&&i.headers.forEach((o,a)=>n[a]=o)}xo(n,r){const i=mD[n];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,i){const o=wp();return new Promise((a,u)=>{const h=new ZS;h.setWithCredentials(!0),h.listenOnce(QS.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Oh.NO_ERROR:const _=h.getResponseJson();oe(zt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(_)),a(_);break;case Oh.TIMEOUT:oe(zt,`RPC '${e}' ${o} timed out`),u(new se(Q.DEADLINE_EXCEEDED,"Request time out"));break;case Oh.HTTP_ERROR:const v=h.getStatus();if(oe(zt,`RPC '${e}' ${o} failed with status:`,v,"response text:",h.getResponseText()),v>0){let E=h.getResponseJson();Array.isArray(E)&&(E=E[0]);const k=E==null?void 0:E.error;if(k&&k.status&&k.message){const P=function(I){const b=I.toLowerCase().replace(/_/g,"-");return Object.values(Q).indexOf(b)>=0?b:Q.UNKNOWN}(k.status);u(new se(P,k.message))}else u(new se(Q.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new se(Q.UNAVAILABLE,"Connection failed."));break;default:_e()}}finally{oe(zt,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);oe(zt,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",p,r,15)})}Bo(e,n,r){const i=wp(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=YS(),u=XS(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(h.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(h.useFetchStreams=!0),this.Oo(h.initMessageHeaders,n,r),h.encodeInitMessageHeaders=!0;const _=o.join("");oe(zt,`Creating RPC '${e}' stream ${i}: ${_}`,h);const v=a.createWebChannel(_,h);let E=!1,k=!1;const P=new gD({Io:I=>{k?oe(zt,`Not sending because RPC '${e}' stream ${i} is closed:`,I):(E||(oe(zt,`Opening RPC '${e}' stream ${i} transport.`),v.open(),E=!0),oe(zt,`RPC '${e}' stream ${i} sending:`,I),v.send(I))},To:()=>v.close()}),A=(I,b,T)=>{I.listen(b,x=>{try{T(x)}catch(V){setTimeout(()=>{throw V},0)}})};return A(v,zl.EventType.OPEN,()=>{k||(oe(zt,`RPC '${e}' stream ${i} transport opened.`),P.yo())}),A(v,zl.EventType.CLOSE,()=>{k||(k=!0,oe(zt,`RPC '${e}' stream ${i} transport closed`),P.So())}),A(v,zl.EventType.ERROR,I=>{k||(k=!0,wa(zt,`RPC '${e}' stream ${i} transport errored:`,I),P.So(new se(Q.UNAVAILABLE,"The operation could not be completed")))}),A(v,zl.EventType.MESSAGE,I=>{var b;if(!k){const T=I.data[0];Ue(!!T);const x=T,V=x.error||((b=x[0])===null||b===void 0?void 0:b.error);if(V){oe(zt,`RPC '${e}' stream ${i} received error:`,V);const G=V.status;let Z=function(O){const D=pt[O];if(D!==void 0)return xx(D)}(G),N=V.message;Z===void 0&&(Z=Q.INTERNAL,N="Unknown error status: "+G+" with message "+V.message),k=!0,P.So(new se(Z,N)),v.close()}else oe(zt,`RPC '${e}' stream ${i} received:`,T),P.bo(T)}}),A(u,JS.STAT_EVENT,I=>{I.stat===Vm.PROXY?oe(zt,`RPC '${e}' stream ${i} detected buffering proxy`):I.stat===Vm.NOPROXY&&oe(zt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{P.wo()},0),P}}function Ep(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(t){return new PO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(e,n,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,n-r);i>0&&oe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e,n,r,i,o,a,u,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Mx(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===Q.RESOURCE_EXHAUSTED?(ti(n.toString()),ti("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===Q.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===n&&this.P_(r,i)},r=>{e(()=>{const i=new se(Q.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return oe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(oe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class vD extends jx{constructor(e,n,r,i,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=bO(this.serializer,e),r=function(o){if(!("targetChange"in o))return ye.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?ye.min():a.readTime?Er(a.readTime):ye.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Gm(this.serializer),n.addTarget=function(o,a){let u;const h=a.target;if(u=Bm(h)?{documents:LO(o,h)}:{query:OO(o,h)._t},u.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){u.resumeToken=Px(o,a.resumeToken);const p=Hm(o,a.expectedCount);p!==null&&(u.expectedCount=p)}else if(a.snapshotVersion.compareTo(ye.min())>0){u.readTime=Ad(o,a.snapshotVersion.toTimestamp());const p=Hm(o,a.expectedCount);p!==null&&(u.expectedCount=p)}return u}(this.serializer,e);const r=MO(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Gm(this.serializer),n.removeTarget=e,this.a_(n)}}class yD extends jx{constructor(e,n,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,Ue(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ue(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=NO(e.writeResults,e.commitTime),r=Er(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Gm(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>kO(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,Wm(n,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new se(Q.UNKNOWN,o.toString())})}Lo(e,n,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,Wm(n,r),i,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===Q.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new se(Q.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class ED{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ti(n),this.D_=!1):oe("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(async()=>{no(this)&&(oe("RemoteStore","Restarting streams for network reachability change."),await async function(h){const p=we(h);p.L_.add(4),await tc(p),p.q_.set("Unknown"),p.L_.delete(4),await _f(p)}(this))})}),this.q_=new ED(r,i)}}async function _f(t){if(no(t))for(const e of t.B_)await e(!0)}async function tc(t){for(const e of t.B_)await e(!1)}function Vx(t,e){const n=we(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),P_(n)?A_(n):Ua(n).r_()&&I_(n,e))}function x_(t,e){const n=we(t),r=Ua(n);n.N_.delete(e),r.r_()&&Fx(n,e),n.N_.size===0&&(r.r_()?r.o_():no(n)&&n.q_.set("Unknown"))}function I_(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ye.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ua(t).A_(e)}function Fx(t,e){t.Q_.xe(e),Ua(t).R_(e)}function A_(t){t.Q_=new SO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ua(t).start(),t.q_.v_()}function P_(t){return no(t)&&!Ua(t).n_()&&t.N_.size>0}function no(t){return we(t).L_.size===0}function Ux(t){t.Q_=void 0}async function SD(t){t.q_.set("Online")}async function xD(t){t.N_.forEach((e,n)=>{I_(t,e)})}async function ID(t,e){Ux(t),P_(t)?(t.q_.M_(e),A_(t)):t.q_.set("Unknown")}async function AD(t,e,n){if(t.q_.set("Online"),e instanceof Ax&&e.state===2&&e.cause)try{await async function(i,o){const a=o.cause;for(const u of o.targetIds)i.N_.has(u)&&(await i.remoteSyncer.rejectListen(u,a),i.N_.delete(u),i.Q_.removeTarget(u))}(t,e)}catch(r){oe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Pd(t,r)}else if(e instanceof jh?t.Q_.Ke(e):e instanceof Ix?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ye.min()))try{const r=await Dx(t.localStore);n.compareTo(r)>=0&&await function(o,a){const u=o.Q_.rt(a);return u.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const _=o.N_.get(p);_&&o.N_.set(p,_.withResumeToken(h.resumeToken,a))}}),u.targetMismatches.forEach((h,p)=>{const _=o.N_.get(h);if(!_)return;o.N_.set(h,_.withResumeToken(Vt.EMPTY_BYTE_STRING,_.snapshotVersion)),Fx(o,h);const v=new Mi(_.target,h,p,_.sequenceNumber);I_(o,v)}),o.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){oe("RemoteStore","Failed to raise snapshot:",r),await Pd(t,r)}}async function Pd(t,e,n){if(!Xu(e))throw e;t.L_.add(1),await tc(t),t.q_.set("Offline"),n||(n=()=>Dx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{oe("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await _f(t)})}function zx(t,e){return e().catch(n=>Pd(t,n,e))}async function vf(t){const e=we(t),n=ts(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;PD(e);)try{const i=await cD(e.localStore,r);if(i===null){e.O_.length===0&&n.o_();break}r=i.batchId,CD(e,i)}catch(i){await Pd(e,i)}Bx(e)&&$x(e)}function PD(t){return no(t)&&t.O_.length<10}function CD(t,e){t.O_.push(e);const n=ts(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Bx(t){return no(t)&&!ts(t).n_()&&t.O_.length>0}function $x(t){ts(t).start()}async function RD(t){ts(t).p_()}async function bD(t){const e=ts(t);for(const n of t.O_)e.m_(n.mutations)}async function kD(t,e,n){const r=t.O_.shift(),i=v_.from(r,e,n);await zx(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await vf(t)}async function ND(t,e){e&&ts(t).V_&&await async function(r,i){if(function(a){return wO(a)&&a!==Q.ABORTED}(i.code)){const o=r.O_.shift();ts(r).s_(),await zx(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await vf(r)}}(t,e),Bx(t)&&$x(t)}async function Kw(t,e){const n=we(t);n.asyncQueue.verifyOperationInProgress(),oe("RemoteStore","RemoteStore received new credentials");const r=no(n);n.L_.add(3),await tc(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await _f(n)}async function LD(t,e){const n=we(t);e?(n.L_.delete(2),await _f(n)):e||(n.L_.add(2),await tc(n),n.q_.set("Unknown"))}function Ua(t){return t.K_||(t.K_=function(n,r,i){const o=we(n);return o.w_(),new vD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:SD.bind(null,t),Ro:xD.bind(null,t),mo:ID.bind(null,t),d_:AD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),P_(t)?A_(t):t.q_.set("Unknown")):(await t.K_.stop(),Ux(t))})),t.K_}function ts(t){return t.U_||(t.U_=function(n,r,i){const o=we(n);return o.w_(),new yD(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:RD.bind(null,t),mo:ND.bind(null,t),f_:bD.bind(null,t),g_:kD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await vf(t)):(await t.U_.stop(),t.O_.length>0&&(oe("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C_{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new Ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const a=Date.now()+r,u=new C_(e,n,a,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(Q.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function R_(t,e){if(ti("AsyncQueue",`${e}: ${t}`),Xu(t))return new se(Q.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e){this.comparator=e?(n,r)=>e(n,r)||ue.comparator(n.key,r.key):(n,r)=>ue.comparator(n.key,r.key),this.keyedMap=Bl(),this.sortedSet=new rt(this.comparator)}static emptySet(e){return new oa(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oa)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new oa;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zw{constructor(){this.W_=new rt(ue.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):_e():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ia{constructor(e,n,r,i,o,a,u,h,p){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=h,this.hasCachedResults=p}static fromInitialDocuments(e,n,r,i,o){const a=[];return n.forEach(u=>{a.push({type:0,doc:u})}),new Ia(e,n,oa.emptySet(n),a,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class DD{constructor(){this.queries=Qw(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const i=we(n),o=i.queries;i.queries=Qw(),o.forEach((a,u)=>{for(const h of u.j_)h.onError(r)})})(this,new se(Q.ABORTED,"Firestore shutting down"))}}function Qw(){return new Fa(t=>dx(t),hf)}async function Hx(t,e){const n=we(t);let r=3;const i=e.query;let o=n.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new OD,r=e.J_()?0:1);try{switch(r){case 0:o.z_=await n.onListen(i,!0);break;case 1:o.z_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(a){const u=R_(a,`Initialization of query '${jo(e.query)}' failed`);return void e.onError(u)}n.queries.set(i,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&b_(n)}async function Wx(t,e){const n=we(t),r=e.query;let i=3;const o=n.queries.get(r);if(o){const a=o.j_.indexOf(e);a>=0&&(o.j_.splice(a,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function MD(t,e){const n=we(t);let r=!1;for(const i of e){const o=i.query,a=n.queries.get(o);if(a){for(const u of a.j_)u.X_(i)&&(r=!0);a.z_=i}}r&&b_(n)}function jD(t,e,n){const r=we(t),i=r.queries.get(e);if(i)for(const o of i.j_)o.onError(n);r.queries.delete(e)}function b_(t){t.Y_.forEach(e=>{e.next()})}var Zm,Jw;(Jw=Zm||(Zm={})).ea="default",Jw.Cache="cache";class qx{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Ia(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ia.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Zm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.key=e}}class Kx{constructor(e){this.key=e}}class VD{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Re(),this.mutatedKeys=Re(),this.Aa=fx(e),this.Ra=new oa(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Zw,i=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,a=i,u=!1;const h=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,p=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((_,v)=>{const E=i.get(_),k=df(this.query,v)?v:null,P=!!E&&this.mutatedKeys.has(E.key),A=!!k&&(k.hasLocalMutations||this.mutatedKeys.has(k.key)&&k.hasCommittedMutations);let I=!1;E&&k?E.data.isEqual(k.data)?P!==A&&(r.track({type:3,doc:k}),I=!0):this.ga(E,k)||(r.track({type:2,doc:k}),I=!0,(h&&this.Aa(k,h)>0||p&&this.Aa(k,p)<0)&&(u=!0)):!E&&k?(r.track({type:0,doc:k}),I=!0):E&&!k&&(r.track({type:1,doc:E}),I=!0,(h||p)&&(u=!0)),I&&(k?(a=a.add(k),o=A?o.add(_):o.delete(_)):(a=a.delete(_),o=o.delete(_)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const _=this.query.limitType==="F"?a.last():a.first();a=a.delete(_.key),o=o.delete(_.key),r.track({type:1,doc:_})}return{Ra:a,fa:r,ns:u,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const a=e.fa.G_();a.sort((_,v)=>function(k,P){const A=I=>{switch(I){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e()}};return A(k)-A(P)}(_.type,v.type)||this.Aa(_.doc,v.doc)),this.pa(r),i=i!=null&&i;const u=n&&!i?this.ya():[],h=this.da.size===0&&this.current&&!i?1:0,p=h!==this.Ea;return this.Ea=h,a.length!==0||p?{snapshot:new Ia(this.query,e.Ra,o,a,e.mutatedKeys,h===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Zw,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Kx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Gx(r))}),n}ba(e){this.Ta=e.Ts,this.da=Re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ia.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class FD{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class UD{constructor(e){this.key=e,this.va=!1}}class zD{constructor(e,n,r,i,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Fa(u=>dx(u),hf),this.Ma=new Map,this.xa=new Set,this.Oa=new rt(ue.comparator),this.Na=new Map,this.La=new E_,this.Ba={},this.ka=new Map,this.qa=xa.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function BD(t,e,n=!0){const r=eI(t);let i;const o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=await Zx(r,e,n,!0),i}async function $D(t,e){const n=eI(t);await Zx(n,e,!0,!1)}async function Zx(t,e,n,r){const i=await hD(t.localStore,wr(e)),o=i.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let u;return r&&(u=await HD(t,e,o,a==="current",i.resumeToken)),t.isPrimaryClient&&n&&Vx(t.remoteStore,i),u}async function HD(t,e,n,r,i){t.Ka=(v,E,k)=>async function(A,I,b,T){let x=I.view.ma(b);x.ns&&(x=await Ww(A.localStore,I.query,!1).then(({documents:N})=>I.view.ma(N,x)));const V=T&&T.targetChanges.get(I.targetId),G=T&&T.targetMismatches.get(I.targetId)!=null,Z=I.view.applyChanges(x,A.isPrimaryClient,V,G);return Yw(A,I.targetId,Z.wa),Z.snapshot}(t,v,E,k);const o=await Ww(t.localStore,e,!0),a=new VD(e,o.Ts),u=a.ma(o.documents),h=ec.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),p=a.applyChanges(u,t.isPrimaryClient,h);Yw(t,n,p.wa);const _=new FD(e,n,a);return t.Fa.set(e,_),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),p.snapshot}async function WD(t,e,n){const r=we(t),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(a=>!hf(a,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await Km(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&x_(r.remoteStore,i.targetId),Qm(r,i.targetId)}).catch(Ju)):(Qm(r,i.targetId),await Km(r.localStore,i.targetId,!0))}async function qD(t,e){const n=we(t),r=n.Fa.get(e),i=n.Ma.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),x_(n.remoteStore,r.targetId))}async function GD(t,e,n){const r=eM(t);try{const i=await function(a,u){const h=we(a),p=Et.now(),_=u.reduce((k,P)=>k.add(P.key),Re());let v,E;return h.persistence.runTransaction("Locally write mutations","readwrite",k=>{let P=ni(),A=Re();return h.cs.getEntries(k,_).next(I=>{P=I,P.forEach((b,T)=>{T.isValidDocument()||(A=A.add(b))})}).next(()=>h.localDocuments.getOverlayedDocuments(k,P)).next(I=>{v=I;const b=[];for(const T of u){const x=mO(T,v.get(T.key).overlayedDocument);x!=null&&b.push(new to(T.key,x,ix(x.value.mapValue),nr.exists(!0)))}return h.mutationQueue.addMutationBatch(k,p,b,u)}).next(I=>{E=I;const b=I.applyToLocalDocumentSet(v,A);return h.documentOverlayCache.saveOverlays(k,I.batchId,b)})}).then(()=>({batchId:E.batchId,changes:mx(v)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,h){let p=a.Ba[a.currentUser.toKey()];p||(p=new rt(De)),p=p.insert(u,h),a.Ba[a.currentUser.toKey()]=p}(r,i.batchId,n),await nc(r,i.changes),await vf(r.remoteStore)}catch(i){const o=R_(i,"Failed to persist write");n.reject(o)}}async function Qx(t,e){const n=we(t);try{const r=await lD(n.localStore,e);e.targetChanges.forEach((i,o)=>{const a=n.Na.get(o);a&&(Ue(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?a.va=!0:i.modifiedDocuments.size>0?Ue(a.va):i.removedDocuments.size>0&&(Ue(a.va),a.va=!1))}),await nc(n,r,e)}catch(r){await Ju(r)}}function Xw(t,e,n){const r=we(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Fa.forEach((o,a)=>{const u=a.view.Z_(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){const h=we(a);h.onlineState=u;let p=!1;h.queries.forEach((_,v)=>{for(const E of v.j_)E.Z_(u)&&(p=!0)}),p&&b_(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function KD(t,e,n){const r=we(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Na.get(e),o=i&&i.key;if(o){let a=new rt(ue.comparator);a=a.insert(o,Ht.newNoDocument(o,ye.min()));const u=Re().add(o),h=new mf(ye.min(),new Map,new rt(De),a,u);await Qx(r,h),r.Oa=r.Oa.remove(o),r.Na.delete(e),k_(r)}else await Km(r.localStore,e,!1).then(()=>Qm(r,e,n)).catch(Ju)}async function ZD(t,e){const n=we(t),r=e.batch.batchId;try{const i=await aD(n.localStore,e);Xx(n,r,null),Jx(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await nc(n,i)}catch(i){await Ju(i)}}async function QD(t,e,n){const r=we(t);try{const i=await function(a,u){const h=we(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return h.mutationQueue.lookupMutationBatch(p,u).next(v=>(Ue(v!==null),_=v.keys(),h.mutationQueue.removeMutationBatch(p,v))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,_,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>h.localDocuments.getDocuments(p,_))})}(r.localStore,e);Xx(r,e,n),Jx(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await nc(r,i)}catch(i){await Ju(i)}}function Jx(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Xx(t,e,n){const r=we(t);let i=r.Ba[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Qm(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||Yx(t,r)})}function Yx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(x_(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),k_(t))}function Yw(t,e,n){for(const r of n)r instanceof Gx?(t.La.addReference(r.key,e),JD(t,r)):r instanceof Kx?(oe("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||Yx(t,r.key)):_e()}function JD(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(oe("SyncEngine","New document in limbo: "+n),t.xa.add(r),k_(t))}function k_(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new ue(qe.fromString(e)),r=t.qa.next();t.Na.set(r,new UD(n)),t.Oa=t.Oa.insert(n,r),Vx(t.remoteStore,new Mi(wr(m_(n.path)),r,"TargetPurposeLimboResolution",u_.oe))}}async function nc(t,e,n){const r=we(t),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((u,h)=>{a.push(r.Ka(h,e,n).then(p=>{var _;if((p||n)&&r.isPrimaryClient){const v=p?!p.fromCache:(_=n==null?void 0:n.targetChanges.get(h.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(h.targetId,v?"current":"not-current")}if(p){i.push(p);const v=S_.Wi(h.targetId,p);o.push(v)}}))}),await Promise.all(a),r.Ca.d_(i),await async function(h,p){const _=we(h);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",v=>X.forEach(p,E=>X.forEach(E.$i,k=>_.persistence.referenceDelegate.addReference(v,E.targetId,k)).next(()=>X.forEach(E.Ui,k=>_.persistence.referenceDelegate.removeReference(v,E.targetId,k)))))}catch(v){if(!Xu(v))throw v;oe("LocalStore","Failed to update sequence numbers: "+v)}for(const v of p){const E=v.targetId;if(!v.fromCache){const k=_.os.get(E),P=k.snapshotVersion,A=k.withLastLimboFreeSnapshotVersion(P);_.os=_.os.insert(E,A)}}}(r.localStore,o))}async function XD(t,e){const n=we(t);if(!n.currentUser.isEqual(e)){oe("SyncEngine","User change. New user:",e.toKey());const r=await Ox(n.localStore,e);n.currentUser=e,function(o,a){o.ka.forEach(u=>{u.forEach(h=>{h.reject(new se(Q.CANCELLED,a))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await nc(n,r.hs)}}function YD(t,e){const n=we(t),r=n.Na.get(e);if(r&&r.va)return Re().add(r.key);{let i=Re();const o=n.Ma.get(e);if(!o)return i;for(const a of o){const u=n.Fa.get(a);i=i.unionWith(u.view.Va)}return i}}function eI(t){const e=we(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=YD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=KD.bind(null,e),e.Ca.d_=MD.bind(null,e.eventManager),e.Ca.$a=jD.bind(null,e.eventManager),e}function eM(t){const e=we(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=QD.bind(null,e),e}class Cd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=gf(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return oD(this.persistence,new iD,e.initialUser,this.serializer)}Ga(e){return new tD(T_.Zr,this.serializer)}Wa(e){return new fD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cd.provider={build:()=>new Cd};class Jm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=XD.bind(null,this.syncEngine),await LD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new DD}()}createDatastore(e){const n=gf(e.databaseInfo.databaseId),r=function(o){return new _D(o)}(e.databaseInfo);return function(o,a,u,h){return new wD(o,a,u,h)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,a,u){return new TD(r,i,o,a,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Xw(this.syncEngine,n,0),function(){return Gw.D()?new Gw:new pD}())}createSyncEngine(e,n){return function(i,o,a,u,h,p,_){const v=new zD(i,o,a,u,h,p);return _&&(v.Qa=!0),v}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const o=we(i);oe("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await tc(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Jm.provider={build:()=>new Jm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ti("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Bt.UNAUTHENTICATED,this.clientId=tx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{oe("FirestoreClient","Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(oe("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=R_(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Tp(t,e){t.asyncQueue.verifyOperationInProgress(),oe("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Ox(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function e0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await nM(t);oe("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Kw(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Kw(e.remoteStore,i)),t._onlineComponents=e}async function nM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){oe("FirestoreClient","Using user provided OfflineComponentProvider");try{await Tp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===Q.FAILED_PRECONDITION||i.code===Q.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;wa("Error using user provided cache. Falling back to memory cache: "+n),await Tp(t,new Cd)}}else oe("FirestoreClient","Using default OfflineComponentProvider"),await Tp(t,new Cd);return t._offlineComponents}async function nI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(oe("FirestoreClient","Using user provided OnlineComponentProvider"),await e0(t,t._uninitializedComponentsProvider._online)):(oe("FirestoreClient","Using default OnlineComponentProvider"),await e0(t,new Jm))),t._onlineComponents}function rM(t){return nI(t).then(e=>e.syncEngine)}async function Xm(t){const e=await nI(t),n=e.eventManager;return n.onListen=BD.bind(null,e.syncEngine),n.onUnlisten=WD.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=$D.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=qD.bind(null,e.syncEngine),n}function iM(t,e,n={}){const r=new Ki;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,u,h,p){const _=new tI({next:E=>{_.Za(),a.enqueueAndForget(()=>Wx(o,v)),E.fromCache&&h.source==="server"?p.reject(new se(Q.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(E)},error:E=>p.reject(E)}),v=new qx(u,_,{includeMetadataChanges:!0,_a:!0});return Hx(o,v)}(await Xm(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(t,e,n){if(!n)throw new se(Q.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function sM(t,e,n,r){if(e===!0&&r===!0)throw new se(Q.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function n0(t){if(!ue.isDocumentKey(t))throw new se(Q.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function r0(t){if(ue.isDocumentKey(t))throw new se(Q.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function yf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":_e()}function Tr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new se(Q.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=yf(t);throw new se(Q.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function oM(t,e){if(e<=0)throw new se(Q.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(Q.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new se(Q.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}sM("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=rI((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new se(Q.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wf{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(Q.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(Q.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new SL;switch(r.type){case"firstParty":return new PL(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(Q.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=t0.get(n);r&&(oe("ComponentProvider","Removing Datastore"),t0.delete(n),r.terminate())}(this),Promise.resolve()}}function aM(t,e,n,r={}){var i;const o=(t=Tr(t,wf))._getSettings(),a=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&wa("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let u,h;if(typeof r.mockUserToken=="string")u=r.mockUserToken,h=Bt.MOCK_USER;else{u=BS(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new se(Q.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Bt(p)}t._authCredentials=new xL(new ex(u,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ai(this.firestore,e,this._query)}}class dn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new dn(this.firestore,e,this._key)}}class Zi extends ai{constructor(e,n,r){super(e,n,m_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new ue(e))}withConverter(e){return new Zi(this.firestore,e,this._path)}}function As(t,e,...n){if(t=jt(t),iI("collection","path",e),t instanceof wf){const r=qe.fromString(e,...n);return r0(r),new Zi(t,null,r)}{if(!(t instanceof dn||t instanceof Zi))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return r0(r),new Zi(t.firestore,null,r)}}function Hl(t,e,...n){if(t=jt(t),arguments.length===1&&(e=tx.newId()),iI("doc","path",e),t instanceof wf){const r=qe.fromString(e,...n);return n0(r),new dn(t,null,new ue(r))}{if(!(t instanceof dn||t instanceof Zi))throw new se(Q.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(qe.fromString(e,...n));return n0(r),new dn(t.firestore,t instanceof Zi?t.converter:null,new ue(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Mx(this,"async_queue_retry"),this.Vu=()=>{const r=Ep();r&&oe("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Ep();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Ep();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ki;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xu(e))throw e;oe("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const i=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(r);throw ti("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const i=C_.createAndSchedule(this,e,n,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&_e()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function o0(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Zs extends wf{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new s0,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s0(e),this._firestoreClient=void 0,await e}}}function lM(t,e){const n=typeof t=="object"?t:a_(),r=typeof t=="string"?t:"(default)",i=uf(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=FS("firestore");o&&aM(i,...o)}return i}function N_(t){if(t._terminated)throw new se(Q.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uM(t),t._firestoreClient}function uM(t){var e,n,r;const i=t._freezeSettings(),o=function(u,h,p,_){return new UL(u,h,p,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,rI(_.experimentalLongPollingOptions),_.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),t._firestoreClient=new tM(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Aa(Vt.fromBase64String(e))}catch(n){throw new se(Q.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Aa(Vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new se(Q.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Lt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new se(Q.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new se(Q.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cM=/^__.*__$/;class hM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new to(e,this.data,this.fieldMask,n,this.fieldTransforms):new Yu(e,this.data,n,this.fieldTransforms)}}function sI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e()}}class M_{constructor(e,n,r,i,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new M_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Rd(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(sI(this.Cu)&&cM.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class dM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||gf(e)}Qu(e,n,r,i=!1){return new M_({Cu:e,methodName:n,qu:r,path:Lt.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function j_(t){const e=t._freezeSettings(),n=gf(t._databaseId);return new dM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function oI(t,e,n,r,i,o={}){const a=t.Qu(o.merge||o.mergeFields?2:0,e,n,i);uI("Data must be an object, but it was:",a,r);const u=aI(r,a);let h,p;if(o.merge)h=new Yn(a.fieldMask),p=a.fieldTransforms;else if(o.mergeFields){const _=[];for(const v of o.mergeFields){const E=pM(e,v,n);if(!a.contains(E))throw new se(Q.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);gM(_,E)||_.push(E)}h=new Yn(_),p=a.fieldTransforms.filter(v=>h.covers(v.field))}else h=null,p=a.fieldTransforms;return new hM(new Dn(u),h,p)}class V_ extends O_{_toFieldTransform(e){return new hO(e.path,new Ou)}isEqual(e){return e instanceof V_}}function fM(t,e,n,r=!1){return F_(n,t.Qu(r?4:3,e))}function F_(t,e){if(lI(t=jt(t)))return uI("Unsupported field value:",e,t),aI(t,e);if(t instanceof O_)return function(r,i){if(!sI(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){const o=[];let a=0;for(const u of r){let h=F_(u,i.Lu(a));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=jt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Et.fromDate(r);return{timestampValue:Ad(i.serializer,o)}}if(r instanceof Et){const o=new Et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ad(i.serializer,o)}}if(r instanceof Ef)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Aa)return{bytesValue:Px(i.serializer,r._byteString)};if(r instanceof dn){const o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:w_(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof D_)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(h=>{if(typeof h!="number")throw u.Bu("VectorValues must only contain numeric values.");return g_(u.serializer,h)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${yf(r)}`)}(t,e)}function aI(t,e){const n={};return nx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ja(t,(r,i)=>{const o=F_(i,e.Mu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function lI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Et||t instanceof Ef||t instanceof Aa||t instanceof dn||t instanceof O_||t instanceof D_)}function uI(t,e,n){if(!lI(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=yf(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function pM(t,e,n){if((e=jt(e))instanceof L_)return e._internalPath;if(typeof e=="string")return cI(t,e);throw Rd("Field path arguments must be of type string or ",t,!1,void 0,n)}const mM=new RegExp("[~\\*/\\[\\]]");function cI(t,e,n){if(e.search(mM)>=0)throw Rd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new L_(...e.split("."))._internalPath}catch{throw Rd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Rd(t,e,n,r,i){const o=r&&!r.isEmpty(),a=i!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let h="";return(o||a)&&(h+=" (found",o&&(h+=` in field ${r}`),a&&(h+=` in document ${i}`),h+=")"),new se(Q.INVALID_ARGUMENT,u+t+h)}function gM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _M(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Tf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _M extends hI{data(){return super.data()}}function Tf(t,e){return typeof e=="string"?cI(t,e):e instanceof L_?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new se(Q.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class U_{}class z_ extends U_{}function Uo(t,e,...n){let r=[];e instanceof U_&&r.push(e),r=r.concat(n),function(o){const a=o.filter(h=>h instanceof B_).length,u=o.filter(h=>h instanceof Sf).length;if(a>1||a>0&&u>0)throw new se(Q.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Sf extends z_{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Sf(e,n,r)}_apply(e){const n=this._parse(e);return fI(e._query,n),new ai(e.firestore,e.converter,$m(e._query,n))}_parse(e){const n=j_(e.firestore);return function(o,a,u,h,p,_,v){let E;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new se(Q.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){l0(v,_);const k=[];for(const P of v)k.push(a0(h,o,P));E={arrayValue:{values:k}}}else E=a0(h,o,v)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||l0(v,_),E=fM(u,a,v,_==="in"||_==="not-in");return gt.create(p,_,E)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function rn(t,e,n){const r=e,i=Tf("where",t);return Sf._create(i,r,n)}class B_ extends U_{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new B_(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:ir.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let a=i;const u=o.getFlattenedFilters();for(const h of u)fI(a,h),a=$m(a,h)}(e._query,n),new ai(e.firestore,e.converter,$m(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class $_ extends z_{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new $_(e,n)}_apply(e){const n=function(i,o,a){if(i.startAt!==null)throw new se(Q.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new se(Q.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Lu(o,a)}(e._query,this._field,this._direction);return new ai(e.firestore,e.converter,function(i,o){const a=i.explicitOrderBy.concat([o]);return new Va(i.path,i.collectionGroup,a,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Vh(t,e="asc"){const n=e,r=Tf("orderBy",t);return $_._create(r,n)}class H_ extends z_{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new H_(e,n,r)}_apply(e){return new ai(e.firestore,e.converter,xd(e._query,this._limit,this._limitType))}}function Fh(t){return oM("limit",t),H_._create("limit",t,"F")}function a0(t,e,n){if(typeof(n=jt(n))=="string"){if(n==="")throw new se(Q.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!hx(e)&&n.indexOf("/")!==-1)throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(qe.fromString(n));if(!ue.isDocumentKey(r))throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Cw(t,new ue(r))}if(n instanceof dn)return Cw(t,n._key);throw new se(Q.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yf(n)}.`)}function l0(t,e){if(!Array.isArray(t)||t.length===0)throw new se(Q.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function fI(t,e){const n=function(i,o){for(const a of i)for(const u of a.getFlattenedFilters())if(o.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(Q.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class vM{convertValue(e,n="none"){switch(Ks(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ut(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw _e()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return ja(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){var n,r,i;const o=(i=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(a=>ut(a.doubleValue));return new D_(o)}convertGeoPoint(e){return new Ef(ut(e.latitude),ut(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=h_(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(bu(e));default:return null}}convertTimestamp(e){const n=es(e);return new Et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=qe.fromString(e);Ue(Lx(r));const i=new ku(r.get(1),r.get(3)),o=new ue(r.popFirst(5));return i.isEqual(n)||ti(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mI extends hI{constructor(e,n,r,i,o,a){super(e,n,r,i,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Uh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Tf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Uh extends mI{data(e={}){return super.data(e)}}class gI{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Wl(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Uh(this._firestore,this._userDataWriter,r.key,r,new Wl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new se(Q.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let a=0;return i._snapshot.docChanges.map(u=>{const h=new Uh(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Wl(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);return u.doc,{type:"added",doc:h,oldIndex:-1,newIndex:a++}})}{let a=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(u=>o||u.type!==3).map(u=>{const h=new Uh(i._firestore,i._userDataWriter,u.doc.key,u.doc,new Wl(i._snapshot.mutatedKeys.has(u.doc.key),i._snapshot.fromCache),i.query.converter);let p=-1,_=-1;return u.type!==0&&(p=a.indexOf(u.doc.key),a=a.delete(u.doc.key)),u.type!==1&&(a=a.add(u.doc),_=a.indexOf(u.doc.key)),{type:yM(u.type),doc:h,oldIndex:p,newIndex:_}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e()}}class W_ extends vM{constructor(e){super(),this.firestore=e}convertBytes(e){return new Aa(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,n)}}function ql(t){t=Tr(t,ai);const e=Tr(t.firestore,Zs),n=N_(e),r=new W_(e);return dI(t._query),iM(n,t._query).then(i=>new gI(e,r,t,i))}function u0(t,e,n){t=Tr(t,dn);const r=Tr(t.firestore,Zs),i=pI(t.converter,e);return q_(r,[oI(j_(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,nr.none())])}function c0(t){return q_(Tr(t.firestore,Zs),[new __(t._key,nr.none())])}function wM(t,e){const n=Tr(t.firestore,Zs),r=Hl(t),i=pI(t.converter,e);return q_(n,[oI(j_(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,nr.exists(!1))]).then(()=>r)}function EM(t,...e){var n,r,i;t=jt(t);let o={includeMetadataChanges:!1,source:"default"},a=0;typeof e[a]!="object"||o0(e[a])||(o=e[a],a++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(o0(e[a])){const v=e[a];e[a]=(n=v.next)===null||n===void 0?void 0:n.bind(v),e[a+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[a+2]=(i=v.complete)===null||i===void 0?void 0:i.bind(v)}let h,p,_;if(t instanceof dn)p=Tr(t.firestore,Zs),_=m_(t._key.path),h={next:v=>{e[a]&&e[a](TM(p,t,v))},error:e[a+1],complete:e[a+2]};else{const v=Tr(t,ai);p=Tr(v.firestore,Zs),_=v._query;const E=new W_(p);h={next:k=>{e[a]&&e[a](new gI(p,E,v,k))},error:e[a+1],complete:e[a+2]},dI(t._query)}return function(E,k,P,A){const I=new tI(A),b=new qx(k,I,P);return E.asyncQueue.enqueueAndForget(async()=>Hx(await Xm(E),b)),()=>{I.Za(),E.asyncQueue.enqueueAndForget(async()=>Wx(await Xm(E),b))}}(N_(p),_,u,h)}function q_(t,e){return function(r,i){const o=new Ki;return r.asyncQueue.enqueueAndForget(async()=>GD(await rM(r),i,o)),o.promise}(N_(t),e)}function TM(t,e,n){const r=n.docs.get(e._key),i=new W_(t);return new mI(t,i,e._key,r,new Wl(n.hasPendingWrites,n.fromCache),e.converter)}function SM(){return new V_("serverTimestamp")}(function(e,n=!0){(function(i){Ma=i})(eo),Ws(new Xi("firestore",(r,{instanceIdentifier:i,options:o})=>{const a=r.getProvider("app").getImmediate(),u=new Zs(new IL(r.getProvider("auth-internal")),new RL(r.getProvider("app-check-internal")),function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new se(Q.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ku(p.options.projectId,_)}(a,i),a);return o=Object.assign({useFetchStreams:n},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),yr(Sw,"4.7.3",e),yr(Sw,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _I="firebasestorage.googleapis.com",vI="storageBucket",xM=2*60*1e3,IM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at extends Ar{constructor(e,n,r=0){super(Sp(e),`Firebase Storage: ${n} (${Sp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,at.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ot;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ot||(ot={}));function Sp(t){return"storage/"+t}function G_(){const t="An unknown error occurred, please check the error payload for server response.";return new at(ot.UNKNOWN,t)}function AM(t){return new at(ot.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function PM(t){return new at(ot.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function CM(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new at(ot.UNAUTHENTICATED,t)}function RM(){return new at(ot.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function bM(t){return new at(ot.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function kM(){return new at(ot.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function NM(){return new at(ot.CANCELED,"User canceled the upload/download.")}function LM(t){return new at(ot.INVALID_URL,"Invalid URL '"+t+"'.")}function OM(t){return new at(ot.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function DM(){return new at(ot.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+vI+"' property when initializing the app?")}function MM(){return new at(ot.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jM(){return new at(ot.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function VM(t){return new at(ot.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ym(t){return new at(ot.INVALID_ARGUMENT,t)}function yI(){return new at(ot.APP_DELETED,"The Firebase app was deleted.")}function FM(t){return new at(ot.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ou(t,e){return new at(ot.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Dl(t){throw new at(ot.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=yn.makeFromUrl(e,n)}catch{return new yn(e,"")}if(r.path==="")return r;throw OM(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const a="(/(.*))?$",u=new RegExp("^gs://"+i+a,"i"),h={bucket:1,path:3};function p(V){V.path_=decodeURIComponent(V.path)}const _="v[A-Za-z0-9_]+",v=n.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",k=new RegExp(`^https?://${v}/${_}/b/${i}/o${E}`,"i"),P={bucket:1,path:3},A=n===_I?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",b=new RegExp(`^https?://${A}/${i}/${I}`,"i"),x=[{regex:u,indices:h,postModify:o},{regex:k,indices:P,postModify:p},{regex:b,indices:{bucket:1,path:2},postModify:p}];for(let V=0;V<x.length;V++){const G=x[V],Z=G.regex.exec(e);if(Z){const N=Z[G.indices.bucket];let R=Z[G.indices.path];R||(R=""),r=new yn(N,R),G.postModify(r);break}}if(r==null)throw LM(e);return r}}class UM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zM(t,e,n){let r=1,i=null,o=null,a=!1,u=0;function h(){return u===2}let p=!1;function _(...I){p||(p=!0,e.apply(null,I))}function v(I){i=setTimeout(()=>{i=null,t(k,h())},I)}function E(){o&&clearTimeout(o)}function k(I,...b){if(p){E();return}if(I){E(),_.call(null,I,...b);return}if(h()||a){E(),_.call(null,I,...b);return}r<64&&(r*=2);let x;u===1?(u=2,x=0):x=(r+Math.random())*1e3,v(x)}let P=!1;function A(I){P||(P=!0,E(),!p&&(i!==null?(I||(u=2),clearTimeout(i),v(0)):I||(u=1)))}return v(0),o=setTimeout(()=>{a=!0,A(!0)},n),A}function BM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(t){return t!==void 0}function HM(t){return typeof t=="object"&&!Array.isArray(t)}function K_(t){return typeof t=="string"||t instanceof String}function h0(t){return Z_()&&t instanceof Blob}function Z_(){return typeof Blob<"u"}function d0(t,e,n,r){if(r<e)throw Ym(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ym(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function wI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var Ms;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Ms||(Ms={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WM(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,n,r,i,o,a,u,h,p,_,v,E=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=h,this.timeout_=p,this.progressCallback_=_,this.connectionFactory_=v,this.retry=E,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((k,P)=>{this.resolve_=k,this.reject_=P,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new dh(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=u=>{const h=u.loaded,p=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(h,p)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const u=o.getErrorCode()===Ms.NO_ERROR,h=o.getStatus();if(!u||WM(h,this.additionalRetryCodes_)&&this.retry){const _=o.getErrorCode()===Ms.ABORT;r(!1,new dh(!1,null,_));return}const p=this.successCodes_.indexOf(h)!==-1;r(!0,new dh(p,o))})},n=(r,i)=>{const o=this.resolve_,a=this.reject_,u=i.connection;if(i.wasSuccessCode)try{const h=this.callback_(u,u.getResponse());$M(h)?o(h):o()}catch(h){a(h)}else if(u!==null){const h=G_();h.serverResponse=u.getErrorText(),this.errorCallback_?a(this.errorCallback_(u,h)):a(h)}else if(i.canceled){const h=this.appDelete_?yI():NM();a(h)}else{const h=kM();a(h)}};this.canceled_?n(!1,new dh(!1,null,!0)):this.backoffId_=zM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&BM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class dh{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function GM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function KM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ZM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function QM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function JM(t,e,n,r,i,o,a=!0){const u=wI(t.urlParams),h=t.url+u,p=Object.assign({},t.headers);return ZM(p,e),GM(p,n),KM(p,o),QM(p,r),new qM(h,t.method,p,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XM(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function YM(...t){const e=XM();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Z_())return new Blob(t);throw new at(ot.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function e2(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t2(t){if(typeof atob>"u")throw VM("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class xp{constructor(e,n){this.data=e,this.contentType=n||null}}function n2(t,e){switch(t){case gr.RAW:return new xp(EI(e));case gr.BASE64:case gr.BASE64URL:return new xp(TI(t,e));case gr.DATA_URL:return new xp(i2(e),s2(e))}throw G_()}function EI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,a=t.charCodeAt(++n);r=65536|(o&1023)<<10|a&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function r2(t){let e;try{e=decodeURIComponent(t)}catch{throw ou(gr.DATA_URL,"Malformed data URL.")}return EI(e)}function TI(t,e){switch(t){case gr.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw ou(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case gr.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw ou(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=t2(e)}catch(i){throw i.message.includes("polyfill")?i:ou(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class SI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ou(gr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=o2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function i2(t){const e=new SI(t);return e.base64?TI(gr.BASE64,e.rest):r2(e.rest)}function s2(t){return new SI(t).contentType}function o2(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e,n){let r=0,i="";h0(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(h0(this.data_)){const r=this.data_,i=e2(r,e,n);return i===null?null:new Pi(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Pi(r,!0)}}static getBlob(...e){if(Z_()){const n=e.map(r=>r instanceof Pi?r.data_:r);return new Pi(YM.apply(null,n))}else{const n=e.map(a=>K_(a)?n2(gr.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(a=>{for(let u=0;u<a.length;u++)i[o++]=a[u]}),new Pi(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){let e;try{e=JSON.parse(t)}catch{return null}return HM(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function l2(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function II(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t,e){return e}class Qt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||u2}}let fh=null;function c2(t){return!K_(t)||t.length<2?t:II(t)}function AI(){if(fh)return fh;const t=[];t.push(new Qt("bucket")),t.push(new Qt("generation")),t.push(new Qt("metageneration")),t.push(new Qt("name","fullPath",!0));function e(o,a){return c2(a)}const n=new Qt("name");n.xform=e,t.push(n);function r(o,a){return a!==void 0?Number(a):a}const i=new Qt("size");return i.xform=r,t.push(i),t.push(new Qt("timeCreated")),t.push(new Qt("updated")),t.push(new Qt("md5Hash",null,!0)),t.push(new Qt("cacheControl",null,!0)),t.push(new Qt("contentDisposition",null,!0)),t.push(new Qt("contentEncoding",null,!0)),t.push(new Qt("contentLanguage",null,!0)),t.push(new Qt("contentType",null,!0)),t.push(new Qt("metadata","customMetadata",!0)),fh=t,fh}function h2(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new yn(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function d2(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const a=n[o];r[a.local]=a.xform(r,e[a.server])}return h2(r,t),r}function PI(t,e,n){const r=xI(e);return r===null?null:d2(t,r,n)}function f2(t,e,n,r){const i=xI(e);if(i===null||!K_(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(p=>{const _=t.bucket,v=t.fullPath,E="/b/"+a(_)+"/o/"+a(v),k=Q_(E,n,r),P=wI({alt:"media",token:p});return k+P})[0]}function p2(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}class CI{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t){if(!t)throw G_()}function m2(t,e){function n(r,i){const o=PI(t,i,e);return RI(o!==null),o}return n}function g2(t,e){function n(r,i){const o=PI(t,i,e);return RI(o!==null),f2(o,i,t.host,t._protocol)}return n}function bI(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=RM():i=CM():n.getStatus()===402?i=PM(t.bucket):n.getStatus()===403?i=bM(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function _2(t){const e=bI(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=AM(t.path)),o.serverResponse=i.serverResponse,o}return n}function v2(t,e,n){const r=e.fullServerUrl(),i=Q_(r,t.host,t._protocol),o="GET",a=t.maxOperationRetryTime,u=new CI(i,o,g2(t,n),a);return u.errorHandler=_2(e),u}function y2(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function w2(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=y2(null,e)),r}function E2(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function u(){let x="";for(let V=0;V<2;V++)x=x+Math.random().toString().slice(2);return x}const h=u();a["Content-Type"]="multipart/related; boundary="+h;const p=w2(e,r,i),_=p2(p,n),v="--"+h+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+h+`\r
Content-Type: `+p.contentType+`\r
\r
`,E=`\r
--`+h+"--",k=Pi.getBlob(v,r,E);if(k===null)throw MM();const P={name:p.fullPath},A=Q_(o,t.host,t._protocol),I="POST",b=t.maxUploadRetryTime,T=new CI(A,I,m2(t,n),b);return T.urlParams=P,T.headers=a,T.body=k.uploadData(),T.errorHandler=bI(e),T}class T2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Ms.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Ms.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Ms.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Dl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Dl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Dl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Dl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Dl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class S2 extends T2{initXhr(){this.xhr_.responseType="text"}}function kI(){return new S2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qs{constructor(e,n){this._service=e,n instanceof yn?this._location=n:this._location=yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qs(e,n)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return II(this._location.path)}get storage(){return this._service}get parent(){const e=a2(this._location.path);if(e===null)return null;const n=new yn(this._location.bucket,e);return new Qs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw FM(e)}}function x2(t,e,n){t._throwIfRoot("uploadBytes");const r=E2(t.storage,t._location,AI(),new Pi(e,!0),n);return t.storage.makeRequestWithTokens(r,kI).then(i=>({metadata:i,ref:t}))}function I2(t){t._throwIfRoot("getDownloadURL");const e=v2(t.storage,t._location,AI());return t.storage.makeRequestWithTokens(e,kI).then(n=>{if(n===null)throw jM();return n})}function A2(t,e){const n=l2(t._location.path,e),r=new yn(t._location.bucket,n);return new Qs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P2(t){return/^[A-Za-z]+:\/\//.test(t)}function C2(t,e){return new Qs(t,e)}function NI(t,e){if(t instanceof J_){const n=t;if(n._bucket==null)throw DM();const r=new Qs(n,n._bucket);return e!=null?NI(r,e):r}else return e!==void 0?A2(t,e):t}function R2(t,e){if(e&&P2(e)){if(t instanceof J_)return C2(t,e);throw Ym("To use ref(service, url), the first argument must be a Storage instance.")}else return NI(t,e)}function f0(t,e){const n=e==null?void 0:e[vI];return n==null?null:yn.makeFromBucketSpec(n,t)}function b2(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:BS(i,t.app.options.projectId))}class J_{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=_I,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=xM,this._maxUploadRetryTime=IM,this._requests=new Set,i!=null?this._bucket=yn.makeFromBucketSpec(i,this._host):this._bucket=f0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=f0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){d0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){d0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qs(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new UM(yI());{const a=JM(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const p0="@firebase/storage",m0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI="storage";function k2(t,e,n){return t=jt(t),x2(t,e,n)}function N2(t){return t=jt(t),I2(t)}function L2(t,e){return t=jt(t),R2(t,e)}function O2(t=a_(),e){t=jt(t);const r=uf(t,LI).getImmediate({identifier:e}),i=FS("storage");return i&&D2(r,...i),r}function D2(t,e,n,r={}){b2(t,e,n,r)}function M2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new J_(n,r,i,e,eo)}function j2(){Ws(new Xi(LI,M2,"PUBLIC").setMultipleInstances(!0)),yr(p0,m0,""),yr(p0,m0,"esm2017")}j2();var V2="firebase",F2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yr(V2,F2,"app");function X_(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function OI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const U2=OI,DI=new Zu("auth","Firebase",OI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new s_("@firebase/auth");function z2(t,...e){bd.logLevel<=ke.WARN&&bd.warn(`Auth (${eo}): ${t}`,...e)}function zh(t,...e){bd.logLevel<=ke.ERROR&&bd.error(`Auth (${eo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(t,...e){throw Y_(t,...e)}function Sr(t,...e){return Y_(t,...e)}function MI(t,e,n){const r=Object.assign(Object.assign({},U2()),{[e]:n});return new Zu("auth","Firebase",r).create(e,{appName:t.name})}function js(t){return MI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Y_(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return DI.create(t,...e)}function ge(t,e,...n){if(!t)throw Y_(e,...n)}function Wr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zh(e),new Error(e)}function ii(t,e){t||Wr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function B2(){return g0()==="http:"||g0()==="https:"}function g0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(B2()||rN()||"connection"in navigator)?navigator.onLine:!0}function H2(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n){this.shortDelay=e,this.longDelay=n,ii(n>e,"Short delay should be less than long delay!"),this.isMobile=eN()||iN()}get(){return $2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ev(t,e){ii(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=new rc(3e4,6e4);function tv(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function za(t,e,n,r,i={}){return VI(t,i,async()=>{let o={},a={};r&&(e==="GET"?a=r:o={body:JSON.stringify(r)});const u=Qu(Object.assign({key:t.config.apiKey},a)).slice(1),h=await t._getAdditionalHeaders();h["Content-Type"]="application/json",t.languageCode&&(h["X-Firebase-Locale"]=t.languageCode);const p=Object.assign({method:e,headers:h},o);return nN()||(p.referrerPolicy="no-referrer"),jI.fetch()(FI(t,t.config.apiHost,n,u),p)})}async function VI(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},W2),e);try{const i=new K2(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw ph(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const u=o.ok?a.errorMessage:a.error.message,[h,p]=u.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ph(t,"credential-already-in-use",a);if(h==="EMAIL_EXISTS")throw ph(t,"email-already-in-use",a);if(h==="USER_DISABLED")throw ph(t,"user-disabled",a);const _=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw MI(t,_,p);ri(t,_)}}catch(i){if(i instanceof Ar)throw i;ri(t,"network-request-failed",{message:String(i)})}}async function G2(t,e,n,r,i={}){const o=await za(t,e,n,r,i);return"mfaPendingCredential"in o&&ri(t,"multi-factor-auth-required",{_serverResponse:o}),o}function FI(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?ev(t.config,i):`${t.config.apiScheme}://${i}`}class K2{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Sr(this.auth,"network-request-failed")),q2.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function ph(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Sr(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z2(t,e){return za(t,"POST","/v1/accounts:delete",e)}async function UI(t,e){return za(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Q2(t,e=!1){const n=jt(t),r=await n.getIdToken(e),i=nv(r);ge(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:au(Ip(i.auth_time)),issuedAtTime:au(Ip(i.iat)),expirationTime:au(Ip(i.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ip(t){return Number(t)*1e3}function nv(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zh("JWT malformed, contained fewer than 3 sections"),null;try{const i=jS(n);return i?JSON.parse(i):(zh("Failed to decode base64 JWT payload"),null)}catch(i){return zh("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function _0(t){const e=nv(t);return ge(e,"internal-error"),ge(typeof e.exp<"u","internal-error"),ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Ar&&J2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function J2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=au(this.lastLoginAt),this.creationTime=au(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kd(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ju(t,UI(n,{idToken:r}));ge(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?zI(o.providerUserInfo):[],u=ej(t.providerData,a),h=t.isAnonymous,p=!(t.email&&o.passwordHash)&&!(u!=null&&u.length),_=h?p:!1,v={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new tg(o.createdAt,o.lastLoginAt),isAnonymous:_};Object.assign(t,v)}async function Y2(t){const e=jt(t);await kd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ej(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function zI(t){return t.map(e=>{var{providerId:n}=e,r=X_(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tj(t,e){const n=await VI(t,{},async()=>{const r=Qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,a=FI(t,i,"/v1/token",`key=${o}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",jI.fetch()(a,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function nj(t,e){return za(t,"POST","/v2/accounts:revokeToken",tv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ge(e.idToken,"internal-error"),ge(typeof e.idToken<"u","internal-error"),ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):_0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ge(e.length!==0,"internal-error");const n=_0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await tj(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,a=new aa;return r&&(ge(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(ge(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(ge(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new aa,this.toJSON())}_performRefresh(){return Wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wi(t,e){ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qr{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=X_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new X2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new tg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await ju(this,this.stsTokenManager.getToken(this.auth,e));return ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Q2(this,e)}reload(){return Y2(this)}_assign(e){this!==e&&(ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await kd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Di(this.auth.app))return Promise.reject(js(this.auth));const e=await this.getIdToken();return await ju(this,Z2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,a,u,h,p,_;const v=(r=n.displayName)!==null&&r!==void 0?r:void 0,E=(i=n.email)!==null&&i!==void 0?i:void 0,k=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,P=(a=n.photoURL)!==null&&a!==void 0?a:void 0,A=(u=n.tenantId)!==null&&u!==void 0?u:void 0,I=(h=n._redirectEventId)!==null&&h!==void 0?h:void 0,b=(p=n.createdAt)!==null&&p!==void 0?p:void 0,T=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:x,emailVerified:V,isAnonymous:G,providerData:Z,stsTokenManager:N}=n;ge(x&&N,e,"internal-error");const R=aa.fromJSON(this.name,N);ge(typeof x=="string",e,"internal-error"),wi(v,e.name),wi(E,e.name),ge(typeof V=="boolean",e,"internal-error"),ge(typeof G=="boolean",e,"internal-error"),wi(k,e.name),wi(P,e.name),wi(A,e.name),wi(I,e.name),wi(b,e.name),wi(T,e.name);const O=new qr({uid:x,auth:e,email:E,emailVerified:V,displayName:v,isAnonymous:G,photoURL:P,phoneNumber:k,tenantId:A,stsTokenManager:R,createdAt:b,lastLoginAt:T});return Z&&Array.isArray(Z)&&(O.providerData=Z.map(D=>Object.assign({},D))),I&&(O._redirectEventId=I),O}static async _fromIdTokenResponse(e,n,r=!1){const i=new aa;i.updateFromServerResponse(n);const o=new qr({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await kd(o),o}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];ge(i.localId!==void 0,"internal-error");const o=i.providerUserInfo!==void 0?zI(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!(o!=null&&o.length),u=new aa;u.updateFromIdToken(r);const h=new qr({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new tg(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(o!=null&&o.length)};return Object.assign(h,p),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v0=new Map;function Gr(t){ii(t instanceof Function,"Expected a class definition");let e=v0.get(t);return e?(ii(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,v0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}BI.type="NONE";const y0=BI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(t,e,n){return`firebase:${t}:${e}:${n}`}class la{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Bh(this.userKey,i.apiKey,o),this.fullPersistenceKey=Bh("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new la(Gr(y0),e,r);const i=(await Promise.all(n.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let o=i[0]||Gr(y0);const a=Bh(r,e.config.apiKey,e.name);let u=null;for(const p of n)try{const _=await p._get(a);if(_){const v=qr._fromJSON(e,_);p!==o&&(u=v),o=p;break}}catch{}const h=i.filter(p=>p._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new la(o,e,r):(o=h[0],u&&await o._set(a,u.toJSON()),await Promise.all(n.map(async p=>{if(p!==o)try{await p._remove(a)}catch{}})),new la(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(qI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($I(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(KI(e))return"Blackberry";if(ZI(e))return"Webos";if(HI(e))return"Safari";if((e.includes("chrome/")||WI(e))&&!e.includes("edge/"))return"Chrome";if(GI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function $I(t=Gt()){return/firefox\//i.test(t)}function HI(t=Gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function WI(t=Gt()){return/crios\//i.test(t)}function qI(t=Gt()){return/iemobile/i.test(t)}function GI(t=Gt()){return/android/i.test(t)}function KI(t=Gt()){return/blackberry/i.test(t)}function ZI(t=Gt()){return/webos/i.test(t)}function rv(t=Gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rj(t=Gt()){var e;return rv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ij(){return sN()&&document.documentMode===10}function QI(t=Gt()){return rv(t)||GI(t)||ZI(t)||KI(t)||/windows phone/i.test(t)||qI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JI(t,e=[]){let n;switch(t){case"Browser":n=w0(Gt());break;case"Worker":n=`${w0(Gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${eo}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((a,u)=>{try{const h=e(o);a(h)}catch(h){u(h)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oj(t,e={}){return za(t,"GET","/v2/passwordPolicy",tv(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=6;class lj{constructor(e){var n,r,i,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=a.minPasswordLength)!==null&&n!==void 0?n:aj,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,a,u;const h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(n=h.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(a=h.containsNumericCharacter)!==null&&a!==void 0?a:!0),h.isValid&&(h.isValid=(u=h.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),h}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uj{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new E0(this),this.idTokenSubscription=new E0(this),this.beforeStateQueue=new sj(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=DI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await la.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await UI(this,{idToken:e}),r=await qr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Di(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!a||a===u)&&(h!=null&&h.user)&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=H2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Di(this.app))return Promise.reject(js(this));const n=e?jt(e):null;return n&&ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Di(this.app)?Promise.reject(js(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Di(this.app)?Promise.reject(js(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oj(this),n=new lj(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zu("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await nj(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gr(e)||this._popupRedirectResolver;ge(n,this,"argument-error"),this.redirectPersistenceManager=await la.create(this,[Gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(ge(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const h=e.addObserver(n,r,i);return()=>{a=!0,h()}}else{const h=e.addObserver(n);return()=>{a=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=JI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&z2(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function iv(t){return jt(t)}class E0{constructor(e){this.auth=e,this.observer=null,this.addObserver=fN(n=>this.observer=n)}get next(){return ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sv={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cj(t){sv=t}function hj(t){return sv.loadJS(t)}function dj(){return sv.gapiScript}function fj(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pj(t,e){const n=uf(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(wd(o,e??{}))return i;ri(i,"already-initialized")}return n.initialize({options:e})}function mj(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function gj(t,e,n){const r=iv(t);ge(r._canInitEmulator,r,"emulator-config-failed"),ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,o=XI(e),{host:a,port:u}=_j(e),h=u===null?"":`:${u}`;r.config.emulator={url:`${o}//${a}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:u,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),vj()}function XI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _j(t){const e=XI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:T0(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:T0(a)}}}function T0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function vj(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wr("not implemented")}_getIdTokenResponse(e){return Wr("not implemented")}_linkToIdToken(e,n){return Wr("not implemented")}_getReauthenticationResolver(e){return Wr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ua(t,e){return G2(t,"POST","/v1/accounts:signInWithIdp",tv(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj="http://localhost";class Js extends YI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Js(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ri("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=X_(n,["providerId","signInMethod"]);if(!r||!i)return null;const a=new Js(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return ua(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ua(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ua(e,n)}buildRequest(){const e={requestUri:yj,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qu(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic extends eA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends ic{constructor(){super("facebook.com")}static credential(e){return Js._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ci.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri extends ic{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Js._fromParams({providerId:Ri.PROVIDER_ID,signInMethod:Ri.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Ri.credentialFromTaggedObject(e)}static credentialFromError(e){return Ri.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Ri.credential(n,r)}catch{return null}}}Ri.GOOGLE_SIGN_IN_METHOD="google.com";Ri.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends ic{constructor(){super("github.com")}static credential(e){return Js._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.GITHUB_SIGN_IN_METHOD="github.com";bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends ic{constructor(){super("twitter.com")}static credential(e,n){return Js._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return ki.credential(n,r)}catch{return null}}}ki.TWITTER_SIGN_IN_METHOD="twitter.com";ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await qr._fromIdTokenResponse(e,r,i),a=S0(r);return new Pa({user:o,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=S0(r);return new Pa({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function S0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd extends Ar{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Nd.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Nd(e,n,r,i)}}function tA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Nd._fromErrorAndOperation(t,o,e,r):o})}async function wj(t,e,n=!1){const r=await ju(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pa._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ej(t,e,n=!1){const{auth:r}=t;if(Di(r.app))return Promise.reject(js(r));const i="reauthenticate";try{const o=await ju(t,tA(r,i,e,t),n);ge(o.idToken,r,"internal-error");const a=nv(o.idToken);ge(a,r,"internal-error");const{sub:u}=a;return ge(t.uid===u,r,"user-mismatch"),Pa._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&ri(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tj(t,e,n=!1){if(Di(t.app))return Promise.reject(js(t));const r="signIn",i=await tA(t,r,e),o=await Pa._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}function Sj(t,e,n,r){return jt(t).onIdTokenChanged(e,n,r)}function xj(t,e,n){return jt(t).beforeAuthStateChanged(e,n)}const Ld="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ld,"1"),this.storage.removeItem(Ld),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij=1e3,Aj=10;class rA extends nA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=QI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,u,h)=>{this.notifyListeners(a,h)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);ij()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Aj):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ij)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rA.type="LOCAL";const Pj=rA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA extends nA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}iA.type="SESSION";const sA=iA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new xf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,a=this.handlersMap[i];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const u=Array.from(a).map(async p=>p(n.origin,o)),h=await Cj(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:h})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ov(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,a;return new Promise((u,h)=>{const p=ov("",20);i.port1.start();const _=setTimeout(()=>{h(new Error("unsupported_event"))},r);a={messageChannel:i,onMessage(v){const E=v;if(E.data.eventId===p)switch(E.data.status){case"ack":clearTimeout(_),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),u(E.data.response);break;default:clearTimeout(_),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(a),i.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:p,data:n},[i.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(){return window}function bj(t){xr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(){return typeof xr().WorkerGlobalScope<"u"&&typeof xr().importScripts=="function"}async function kj(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Nj(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Lj(){return oA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aA="firebaseLocalStorageDb",Oj=1,Od="firebaseLocalStorage",lA="fbase_key";class sc{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function If(t,e){return t.transaction([Od],e?"readwrite":"readonly").objectStore(Od)}function Dj(){const t=indexedDB.deleteDatabase(aA);return new sc(t).toPromise()}function ng(){const t=indexedDB.open(aA,Oj);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Od,{keyPath:lA})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Od)?e(r):(r.close(),await Dj(),e(await ng()))})})}async function x0(t,e,n){const r=If(t,!0).put({[lA]:e,value:n});return new sc(r).toPromise()}async function Mj(t,e){const n=If(t,!1).get(e),r=await new sc(n).toPromise();return r===void 0?null:r.value}function I0(t,e){const n=If(t,!0).delete(e);return new sc(n).toPromise()}const jj=800,Vj=3;class uA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ng(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Vj)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return oA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xf._getInstance(Lj()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await kj(),!this.activeServiceWorker)return;this.sender=new Rj(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Nj()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ng();return await x0(e,Ld,"1"),await I0(e,Ld),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>x0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Mj(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>I0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=If(i,!1).getAll();return new sc(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),jj)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}uA.type="LOCAL";const Fj=uA;new rc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t,e){return e?Gr(e):(ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av extends YI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ua(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ua(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ua(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function zj(t){return Tj(t.auth,new av(t),t.bypassAuthState)}function Bj(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),Ej(n,new av(t),t.bypassAuthState)}async function $j(t){const{auth:e,user:n}=t;return ge(n,e,"internal-error"),wj(n,new av(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:a,type:u}=e;if(a){this.reject(a);return}const h={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(h))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zj;case"linkViaPopup":case"linkViaRedirect":return $j;case"reauthViaPopup":case"reauthViaRedirect":return Bj;default:ri(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hj=new rc(2e3,1e4);class Yo extends cA{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Yo.currentPopupAction&&Yo.currentPopupAction.cancel(),Yo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ge(e,this.auth,"internal-error"),e}async onExecution(){ii(this.filter.length===1,"Popup operations only handle one event");const e=ov();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Sr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Sr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Yo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Sr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Hj.get())};e()}}Yo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wj="pendingRedirect",$h=new Map;class qj extends cA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$h.get(this.auth._key());if(!e){try{const r=await Gj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$h.set(this.auth._key(),e)}return this.bypassAuthState||$h.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Gj(t,e){const n=Qj(e),r=Zj(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Kj(t,e){$h.set(t._key(),e)}function Zj(t){return Gr(t._redirectPersistence)}function Qj(t){return Bh(Wj,t.config.apiKey,t.name)}async function Jj(t,e,n=!1){if(Di(t.app))return Promise.reject(js(t));const r=iv(t),i=Uj(r,e),a=await new qj(r,i,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xj=10*60*1e3;class Yj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eV(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!hA(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Sr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Xj&&this.cachedEventUids.clear(),this.cachedEventUids.has(A0(e))}saveEventToCache(e){this.cachedEventUids.add(A0(e)),this.lastProcessedEventTime=Date.now()}}function A0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function hA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eV(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tV(t,e={}){return za(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rV=/^https?/;async function iV(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tV(t);for(const n of e)try{if(sV(n))return}catch{}ri(t,"unauthorized-domain")}function sV(t){const e=eg(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!rV.test(n))return!1;if(nV.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oV=new rc(3e4,6e4);function P0(){const t=xr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aV(t){return new Promise((e,n)=>{var r,i,o;function a(){P0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{P0(),n(Sr(t,"network-request-failed"))},timeout:oV.get()})}if(!((i=(r=xr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=xr().gapi)===null||o===void 0)&&o.load)a();else{const u=fj("iframefcb");return xr()[u]=()=>{gapi.load?a():n(Sr(t,"network-request-failed"))},hj(`${dj()}?onload=${u}`).catch(h=>n(h))}}).catch(e=>{throw Hh=null,e})}let Hh=null;function lV(t){return Hh=Hh||aV(t),Hh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uV=new rc(5e3,15e3),cV="__/auth/iframe",hV="emulator/auth/iframe",dV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pV(t){const e=t.config;ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?ev(e,hV):`https://${t.config.authDomain}/${cV}`,r={apiKey:e.apiKey,appName:t.name,v:eo},i=fV.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Qu(r).slice(1)}`}async function mV(t){const e=await lV(t),n=xr().gapi;return ge(n,t,"internal-error"),e.open({where:document.body,url:pV(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dV,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const a=Sr(t,"network-request-failed"),u=xr().setTimeout(()=>{o(a)},uV.get());function h(){xr().clearTimeout(u),i(r)}r.ping(h).then(h,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gV={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_V=500,vV=600,yV="_blank",wV="http://localhost";class C0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EV(t,e,n,r=_V,i=vV){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const h=Object.assign(Object.assign({},gV),{width:r.toString(),height:i.toString(),top:o,left:a}),p=Gt().toLowerCase();n&&(u=WI(p)?yV:n),$I(p)&&(e=e||wV,h.scrollbars="yes");const _=Object.entries(h).reduce((E,[k,P])=>`${E}${k}=${P},`,"");if(rj(p)&&u!=="_self")return TV(e||"",u),new C0(null);const v=window.open(e||"",u,_);ge(v,t,"popup-blocked");try{v.focus()}catch{}return new C0(v)}function TV(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SV="__/auth/handler",xV="emulator/auth/handler",IV=encodeURIComponent("fac");async function R0(t,e,n,r,i,o){ge(t.config.authDomain,t,"auth-domain-config-required"),ge(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:eo,eventId:i};if(e instanceof eA){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",dN(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,v]of Object.entries({}))a[_]=v}if(e instanceof ic){const _=e.getScopes().filter(v=>v!=="");_.length>0&&(a.scopes=_.join(","))}t.tenantId&&(a.tid=t.tenantId);const u=a;for(const _ of Object.keys(u))u[_]===void 0&&delete u[_];const h=await t._getAppCheckToken(),p=h?`#${IV}=${encodeURIComponent(h)}`:"";return`${AV(t)}?${Qu(u).slice(1)}${p}`}function AV({config:t}){return t.emulator?ev(t,xV):`https://${t.authDomain}/${SV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ap="webStorageSupport";class PV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sA,this._completeRedirectFn=Jj,this._overrideRedirectResult=Kj}async _openPopup(e,n,r,i){var o;ii((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await R0(e,n,r,eg(),i);return EV(e,a,ov())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await R0(e,n,r,eg(),i);return bj(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(ii(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mV(e),r=new Yj(e);return n.register("authEvent",i=>(ge(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ap,{type:Ap},i=>{var o;const a=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Ap];a!==void 0&&n(!!a),ri(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iV(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return QI()||HI()||rv()}}const CV=PV;var b0="@firebase/auth",k0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bV(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kV(t){Ws(new Xi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;ge(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const h={apiKey:a,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:JI(t)},p=new uj(r,i,o,h);return mj(p,n),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ws(new Xi("auth-internal",e=>{const n=iv(e.getProvider("auth").getImmediate());return(r=>new RV(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),yr(b0,k0,bV(t)),yr(b0,k0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=5*60,LV=zS("authIdTokenMaxAge")||NV;let N0=null;const OV=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LV)return;const i=n==null?void 0:n.token;N0!==i&&(N0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function DV(t=a_()){const e=uf(t,"auth");if(e.isInitialized())return e.getImmediate();const n=pj(t,{popupRedirectResolver:CV,persistence:[Fj,Pj,sA]}),r=zS("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=OV(o.toString());xj(n,a,()=>a(n.currentUser)),Sj(n,u=>a(u))}}const i=VS("auth");return i&&gj(n,`http://${i}`),n}function MV(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cj({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Sr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",MV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kV("Browser");const jV={apiKey:"AIzaSyDpMc5FqjK_tTqGIheS8LNZIXyL9-rufqo",authDomain:"taranga-ocean-hazard-monitor.firebaseapp.com",projectId:"taranga-ocean-hazard-monitor",storageBucket:"taranga-ocean-hazard-monitor.firebasestorage.app",messagingSenderId:"663332665279",appId:"1:663332665279:web:19fa3ae9129668d941d30a"},lv=WS(jV);DV(lv);const Kn=lM(lv),VV=O2(lv),Vs=[{id:"hr_2025_punjab",title:"Catastrophic Flooding in Punjab",type:"flood",severity:"critical",status:"active",location:{latitude:31.53,longitude:75.92,address:"Over 1,400 villages submerged, Punjab",district:"State-wide",state:"Punjab"},description:"Unprecedented monsoon rains led to catastrophic floods, submerging over 1,400 villages. Mass evacuations are underway. Caused by dam overflow and unregulated development.",reportedBy:{id:"gov_punjab_dma",name:"Punjab Disaster Management Authority",type:"official"},reportedAt:new Date(Date.now()-1*60*60*1e3).toISOString(),verifiedAt:new Date(Date.now()-30*60*1e3).toISOString(),verifiedBy:"admin@oceanhazard.com",affectedArea:"1,400 villages",estimatedAffectedPopulation:25e5,emergencyContacts:["1077","112"],images:[],weatherConditions:{windSpeed:"25 km/h",waveHeight:"N/A",temperature:"24C",visibility:"Poor"},tags:["critical","flooding","evacuation_mandatory","monsoon_disaster"]},{id:"hr_2025_hp",title:"Flash Floods & Landslides in Himachal Pradesh",type:"landslide",severity:"high",status:"active",location:{latitude:31.83,longitude:77,address:"Multiple districts, Himachal Pradesh",district:"State-wide",state:"Himachal Pradesh"},description:"Relentless monsoon downpours triggered severe flash floods and landslides, resulting in loss of life and destruction of key transportation networks.",reportedBy:{id:"gov_hp_dma",name:"Himachal Pradesh DMA",type:"official"},reportedAt:new Date(Date.now()-3*60*60*1e3).toISOString(),verifiedAt:new Date(Date.now()-2*60*60*1e3).toISOString(),verifiedBy:"admin@oceanhazard.com",tags:["high","flash_flood","landslide","monsoon"]},{id:"hr_2025_mumbai",title:"Severe Urban & Coastal Flooding in Mumbai",type:"flood",severity:"high",status:"active",location:{latitude:19.07,longitude:72.87,address:"Coastal and low-lying areas, Mumbai",district:"Mumbai",state:"Maharashtra"},description:"Extreme urban and coastal flooding due to tidal surges and poor drainage after intense rainfall. Major disruptions to transport and daily life.",reportedBy:{id:"citizen_mumbai_01",name:"Mumbai Resident",type:"citizen"},reportedAt:new Date(Date.now()-2*60*60*1e3).toISOString(),verifiedAt:new Date(Date.now()-1*60*60*1e3).toISOString(),verifiedBy:"officer@oceanhazard.com",tags:["high","urban_flooding","tidal_surge","mumbai_rains"]},{id:"hr_2025_chennai",title:"Extreme Coastal Flooding in Chennai",type:"flood",severity:"high",status:"active",location:{latitude:13.08,longitude:80.27,address:"Low-lying coastal regions, Chennai",district:"Chennai",state:"Tamil Nadu"},description:"Tidal surges combined with heavy rainfall have caused extreme coastal flooding, revealing the city's vulnerability.",reportedBy:{id:"gov_chennai_corp",name:"Greater Chennai Corporation",type:"official"},reportedAt:new Date(Date.now()-4*60*60*1e3).toISOString(),verifiedAt:new Date(Date.now()-3*60*60*1e3).toISOString(),verifiedBy:"admin@oceanhazard.com",tags:["high","coastal_flooding","chennai_rains"]},{id:"hr_2025_bihar",title:"Ganga River Breaches Danger Mark in Bihar",type:"flood",severity:"high",status:"active",location:{latitude:25.61,longitude:85.15,address:"Riverbanks along Ganga, Bihar",district:"State-wide",state:"Bihar"},description:"The Ganga River has breached danger marks in multiple locations, causing severe crop damage and threatening embankments.",reportedBy:{id:"gov_bihar_wrd",name:"Bihar Water Resource Dept.",type:"official"},reportedAt:new Date(Date.now()-8*60*60*1e3).toISOString(),verifiedAt:new Date(Date.now()-7*60*60*1e3).toISOString(),verifiedBy:"admin@oceanhazard.com",tags:["high","river_flood","ganga","agriculture_loss"]},{id:"hr_001",title:"High Tide Alert - Marina Beach",type:"tidal_surge",severity:"high",status:"active",location:{latitude:13.0499,longitude:80.2824,address:"Marina Beach, Chennai, Tamil Nadu",district:"Chennai",state:"Tamil Nadu"},description:"Unusually high tides observed with potential flooding risk in low-lying areas. Water levels 1.5m above normal.",reportedBy:{id:"user_001",name:"Coastal Observer",type:"citizen"},reportedAt:new Date(Date.now()-2*60*60*1e3).toISOString(),verifiedAt:new Date(Date.now()-1*60*60*1e3).toISOString(),verifiedBy:"officer@oceanhazard.com",affectedArea:"2.5 km stretch",estimatedAffectedPopulation:15e3,emergencyContacts:["+91-044-25361721","+91-044-25361722"],images:["marina_hightide_001.jpg","marina_flooding_002.jpg"],weatherConditions:{windSpeed:"45 km/h",waveHeight:"3.2m",temperature:"28C",visibility:"Moderate"},tags:["urgent","flooding","evacuation_advisory"]},{id:"hr_002",title:"Cyclone Warning - Visakhapatnam Coast",type:"cyclone",severity:"critical",status:"active",location:{latitude:17.7231,longitude:83.3012,address:"Visakhapatnam Beach, Andhra Pradesh",district:"Visakhapatnam",state:"Andhra Pradesh"},description:"Severe cyclonic storm approaching coast. Expected landfall in 8-12 hours. Immediate evacuation recommended.",reportedBy:{id:"user_002",name:"Meteorological Station",type:"official"},reportedAt:new Date(Date.now()-4*60*60*1e3).toISOString(),verifiedAt:new Date(Date.now()-3*60*60*1e3).toISOString(),verifiedBy:"admin@oceanhazard.com",affectedArea:"50 km radius",estimatedAffectedPopulation:5e5,emergencyContacts:["+91-891-2560037","+91-891-2560038"],images:["cyclone_satellite_001.jpg","coastal_preparation_002.jpg"],weatherConditions:{windSpeed:"120 km/h",waveHeight:"8.5m",temperature:"26C",visibility:"Poor"},tags:["critical","evacuation_mandatory","cyclone","red_alert"]},{id:"hr_003",title:"Oil Spill Detected - Kochi Harbor",type:"pollution",severity:"medium",status:"investigating",location:{latitude:9.9312,longitude:76.2673,address:"Kochi Harbor, Fort Kochi, Kerala",district:"Ernakulam",state:"Kerala"},description:"Oil spill detected near harbor area. Marine life at risk. Cleanup operations initiated.",reportedBy:{id:"user_003",name:"Fisherman Association",type:"citizen"},reportedAt:new Date(Date.now()-6*60*60*1e3).toISOString(),verifiedAt:new Date(Date.now()-5*60*60*1e3).toISOString(),verifiedBy:"analyst@oceanhazard.com",affectedArea:"1.2 km",estimatedAffectedPopulation:5e3,emergencyContacts:["+91-484-2668001","+91-484-2668002"],images:["oil_spill_001.jpg","affected_marine_002.jpg"],weatherConditions:{windSpeed:"15 km/h",waveHeight:"1.1m",temperature:"30C",visibility:"Good"},tags:["pollution","marine_life","cleanup_required"]},{id:"hr_004",title:"Rough Sea Warning - Goa Beaches",type:"rough_sea",severity:"medium",status:"active",location:{latitude:15.2993,longitude:74.124,address:"Calangute Beach, Goa",district:"North Goa",state:"Goa"},description:"Rough sea conditions with strong currents. Swimming and water sports prohibited.",reportedBy:{id:"user_004",name:"Lifeguard Team",type:"official"},reportedAt:new Date(Date.now()-3*60*60*1e3).toISOString(),verifiedAt:new Date(Date.now()-2*60*60*1e3).toISOString(),verifiedBy:"officer@oceanhazard.com",affectedArea:"15 km coastline",estimatedAffectedPopulation:25e3,emergencyContacts:["+91-832-2419132","+91-832-2419133"],images:["rough_waves_001.jpg","warning_signs_002.jpg"],weatherConditions:{windSpeed:"35 km/h",waveHeight:"2.8m",temperature:"32C",visibility:"Good"},tags:["swimming_prohibited","tourist_advisory","rough_sea"]},{id:"hr_005",title:"Coastal Erosion Alert - Puducherry",type:"erosion",severity:"low",status:"monitoring",location:{latitude:11.9139,longitude:79.8145,address:"Promenade Beach, Puducherry",district:"Puducherry",state:"Puducherry"},description:"Gradual coastal erosion observed. Protective measures being evaluated.",reportedBy:{id:"user_005",name:"Coastal Research Station",type:"researcher"},reportedAt:new Date(Date.now()-24*60*60*1e3).toISOString(),verifiedAt:new Date(Date.now()-20*60*60*1e3).toISOString(),verifiedBy:"analyst@oceanhazard.com",affectedArea:"800m coastline",estimatedAffectedPopulation:2e3,emergencyContacts:["+91-413-2334791","+91-413-2334792"],images:["erosion_001.jpg","baseline_comparison_002.jpg"],weatherConditions:{windSpeed:"20 km/h",waveHeight:"1.5m",temperature:"29C",visibility:"Excellent"},tags:["monitoring","erosion","research"]}],dA=(t=Vs)=>{const e=[],n={};return t.forEach(r=>{const i=`${Math.round(r.location.latitude*10)/10}_${Math.round(r.location.longitude*10)/10}`;n[i]||(n[i]=[]),n[i].push(r)}),Object.values(n).forEach(r=>{if(r.length>=2){const i=r.reduce((_,v)=>_+v.location.latitude,0)/r.length,o=r.reduce((_,v)=>_+v.location.longitude,0)/r.length,a=r.filter(_=>_.severity==="critical").length,u=r.filter(_=>_.severity==="high").length,h=r.filter(_=>_.status==="active").length;let p="low";a>0||u>=2?p="high":(u>0||h>=3)&&(p="medium"),e.push({id:`hotspot_${Math.random().toString(36).substr(2,9)}`,center:[i,o],intensity:p,reportCount:r.length,radius:Math.min(5e4,r.length*15e3),reports:r.map(_=>_.id),dominantTypes:[...new Set(r.map(_=>_.type))],lastUpdated:new Date().toISOString()})}}),e},FV=(t=Vs)=>{const e=new Date,n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(n.getTime()-7*24*60*60*1e3),i=new Date(n.getTime()-30*24*60*60*1e3);return{total:t.length,active:t.filter(o=>o.status==="active").length,critical:t.filter(o=>o.severity==="critical").length,today:t.filter(o=>new Date(o.reportedAt)>=n).length,thisWeek:t.filter(o=>new Date(o.reportedAt)>=r).length,thisMonth:t.filter(o=>new Date(o.reportedAt)>=i).length,byType:t.reduce((o,a)=>(o[a.type]=(o[a.type]||0)+1,o),{}),bySeverity:t.reduce((o,a)=>(o[a.severity]=(o[a.severity]||0)+1,o),{}),byState:t.reduce((o,a)=>(o[a.location.state]=(o[a.location.state]||0)+1,o),{})}},Vu={getAuthHeaders(){const t=localStorage.getItem("authToken");return t?{Authorization:`Bearer ${t}`}:{}},async submitReport(t){var e,n,r,i,o,a,u,h,p,_,v;try{console.log("Submitting report:",t);const E=[];if(t.mediaFiles&&t.mediaFiles.length>0)for(const A of t.mediaFiles){const I=L2(VV,`hazard-reports/${Date.now()}_${A.name}`),b=await k2(I,A),T=await N2(b.ref);E.push(T)}const k={title:t.title||"Ocean Hazard Report",description:t.description||"",type:t.type||"other",severity:t.severity||"medium",location:{latitude:((e=t.coordinates)==null?void 0:e.lat)||((n=t.location)==null?void 0:n.latitude)||0,longitude:((r=t.coordinates)==null?void 0:r.lng)||((i=t.location)==null?void 0:i.longitude)||0,address:((o=t.location)==null?void 0:o.address)||"Unknown location",state:((a=t.location)==null?void 0:a.state)||"",district:((u=t.location)==null?void 0:u.district)||"",geopoint:new Ef(((h=t.coordinates)==null?void 0:h.lat)||((p=t.location)==null?void 0:p.latitude)||0,((_=t.coordinates)==null?void 0:_.lng)||((v=t.location)==null?void 0:v.longitude)||0)},reportedBy:{userId:t.userId,name:t.reporterName||"Anonymous",phone:t.reporterPhone||"",email:t.reporterEmail||""},images:E,status:"unverified",verified:!1,timestamp:SM(),reportedAt:new Date().toISOString(),metadata:{source:"citizen_report",deviceType:"web",userAgent:navigator.userAgent}},P=await wM(As(Kn,"hazardReports"),k);return console.log("Report submitted successfully:",P.id),{success:!0,reportId:P.id,data:{id:P.id,...k}}}catch(E){throw console.error("Error submitting report to Firebase:",E),new Error("Failed to submit report: "+E.message)}},async getReports(t={}){try{console.log("Getting reports with filters:",t);let e=As(Kn,"hazardReports");const n=[];t.status&&n.push(rn("status","==",t.status)),t.severity&&n.push(rn("severity","==",t.severity)),t.type&&n.push(rn("type","==",t.type)),t.userId&&n.push(rn("reportedBy.userId","==",t.userId)),n.push(Vh("timestamp","desc")),t.limit&&n.push(Fh(t.limit)),n.length>0&&(e=Uo(e,...n));const r=await ql(e),i=[];return r.forEach(o=>{const a=o.data();i.push({id:o.id,...a,coordinates:{lat:a.location.latitude,lng:a.location.longitude},createdAt:a.reportedAt,userInfo:a.reportedBy})}),console.log(`Found ${i.length} reports`),i}catch(e){console.error("Error getting reports from Firebase:",e),console.log("Falling back to sample data");let n=[...Vs];return n=n.map(r=>({...r,coordinates:{lat:r.location.latitude,lng:r.location.longitude},createdAt:r.reportedAt,userInfo:r.reportedBy})),n.slice(0,t.limit||50)}},async getReportById(t){var e,n;try{return(await axios.get(`${API_BASE_URL}/hazards/${t}`,{headers:this.getAuthHeaders()})).data.report}catch(r){throw console.error("Error getting report:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to get report")}},async updateReportStatus(t,e,n={}){var r,i;try{return{success:!0,message:(await axios.put(`${API_BASE_URL}/hazards/${t}/verify`,{verified:e==="verified",newStatus:e,verificationNotes:n.notes||"",...n},{headers:this.getAuthHeaders()})).data.message}}catch(o){throw console.error("Error updating report status:",o),new Error(((i=(r=o.response)==null?void 0:r.data)==null?void 0:i.error)||"Failed to update report status")}},async getReportsByLocation(t,e,n=25,r=50){var i,o;try{return(await axios.get(`${API_BASE_URL}/hazards/nearby/${t}/${e}`,{params:{radius:n,limit:r},headers:this.getAuthHeaders()})).data.reports||[]}catch(a){throw console.error("Error getting reports by location:",a),new Error(((o=(i=a.response)==null?void 0:i.data)==null?void 0:o.error)||"Failed to get nearby reports")}},subscribeToReports(t,e={}){const n=async()=>{try{const i=await this.getReports(e);t(i)}catch(i){console.error("Error polling reports:",i)}};n();const r=setInterval(n,3e4);return()=>clearInterval(r)},async getHazardStats(){try{const t=FV(Vs);return await new Promise(e=>setTimeout(e,300)),t}catch(t){throw console.error("Error getting hazard stats:",t),t}},async getHotspots(){try{const t=dA(Vs);return await new Promise(e=>setTimeout(e,400)),t}catch(t){throw console.error("Error getting hotspots:",t),t}},calculateDistance(t,e,n,r){const o=this.deg2rad(n-t),a=this.deg2rad(r-e),u=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.deg2rad(t))*Math.cos(this.deg2rad(n))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u)))},deg2rad(t){return t*(Math.PI/180)},getHazardTypes(){return["tsunami","earthquake","flood","storm","oil_spill","fire","landslide","drought","other"]},getSeverityLevels(){return[{value:"low",label:"Low",color:"#10b981"},{value:"medium",label:"Medium",color:"#f59e0b"},{value:"high",label:"High",color:"#ef4444"},{value:"critical",label:"Critical",color:"#7c2d12"}]}};class UV{constructor(){this.isGenerating=!1,this.generationInterval=null,this.reportCount=0,this.config={platforms:["twitter","facebook","instagram","youtube"],hazardTypes:["cyclone","tsunami","flood","storm","high_waves","coastal_erosion"],locations:[{name:"Chennai",lat:13.0827,lng:80.2707,radius:.5},{name:"Mumbai",lat:19.076,lng:72.8777,radius:.5},{name:"Kochi",lat:9.9312,lng:76.2673,radius:.5},{name:"Visakhapatnam",lat:17.6868,lng:83.2185,radius:.5},{name:"Goa",lat:15.2993,lng:74.124,radius:.5},{name:"Puducherry",lat:11.9139,lng:79.8145,radius:.5},{name:"Kolkata",lat:22.5726,lng:88.3639,radius:.5},{name:"Thiruvananthapuram",lat:8.5241,lng:76.9366,radius:.5}],authors:["CoastalWatch","WeatherAlert","OceanSafety","MarineGuard","BeachPatrol","StormTracker","TideMonitor","CoastGuardOfficial","FishermanAlert","MarineWeather","CoastalResident","WeatherWatcher2024"]}}generateSyntheticPost(e={}){const{hazardType:n=this.getRandomItem(this.config.hazardTypes),location:r=this.getRandomItem(this.config.locations),platform:i=this.getRandomItem(this.config.platforms),author:o=this.getRandomItem(this.config.authors),severity:a=this.getRandomSeverity(),sentiment:u=this.getRandomSentiment()}=e,h=this.generateCoordinatesInRadius(r.lat,r.lng,r.radius),p=this.generateContent(n,r.name,u,a),_=this.calculateSentimentScore(p,u),v=this.extractKeywords(p,n),E=this.generateEngagement(u,a);return{id:`synthetic_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,platform:i,content:p,author:o,timestamp:new Date(Date.now()-Math.random()*24*60*60*1e3).toISOString(),sentiment:{label:u,score:_},keywords:v,isHazardRelated:!0,location:{name:r.name,lat:h.lat,lng:h.lng},relevanceScore:this.calculateRelevanceScore(v,u,a),engagement:E,isSynthetic:!0,generatedAt:new Date().toISOString(),hazardType:n,severity:a}}generateMultiplePosts(e=5,n={}){const r=[];for(let i=0;i<e;i++)r.push(this.generateSyntheticPost(n));return r}startGeneration(e=5,n=3,r){if(this.isGenerating){console.warn("Synthetic report generation is already running");return}return this.isGenerating=!0,console.log(`Starting synthetic report generation: ${n} posts every ${e} minutes`),this.generationInterval=setInterval(()=>{const i=this.generateMultiplePosts(n);this.reportCount+=i.length,r&&typeof r=="function"&&r(i),console.log(`Generated ${i.length} synthetic reports. Total: ${this.reportCount}`)},e*60*1e3),this.generationInterval}stopGeneration(){this.generationInterval&&(clearInterval(this.generationInterval),this.generationInterval=null),this.isGenerating=!1,console.log(`Stopped synthetic report generation. Total generated: ${this.reportCount}`)}getStatus(){return{isGenerating:this.isGenerating,reportCount:this.reportCount,intervalId:this.generationInterval}}getRandomItem(e){return e[Math.floor(Math.random()*e.length)]}getRandomSeverity(){const e=["low","medium","high","critical"],n=[.3,.4,.2,.1],r=Math.random();let i=0;for(let o=0;o<e.length;o++)if(i+=n[o],r<=i)return e[o];return"medium"}getRandomSentiment(){const e=["positive","neutral","negative"],n=[.1,.3,.6],r=Math.random();let i=0;for(let o=0;o<e.length;o++)if(i+=n[o],r<=i)return e[o];return"negative"}generateCoordinatesInRadius(e,n,r){const i=r/111.32,o=Math.random(),a=Math.random(),u=i*Math.sqrt(o),h=2*Math.PI*a,p=u*Math.cos(h),_=u*Math.sin(h);return{lat:e+_,lng:n+p}}generateContent(e,n,r,i){const o={cyclone:{negative:[`Cyclone warning issued for ${n} coast. Strong winds and heavy rainfall expected. Stay indoors and follow safety guidelines. #CycloneAlert`,`Emergency alert: Cyclone approaching ${n}. Fishermen advised to return to shore immediately. Coastal areas on high alert. #WeatherEmergency`,`Severe cyclonic storm developing near ${n}. Expected to make landfall in next 24 hours. Evacuation preparations underway. #CycloneWarning`],neutral:[`Weather update: Cyclonic conditions developing near ${n}. Monitoring the situation closely. #WeatherUpdate`,`Cyclone watch issued for ${n} coastal region. Residents advised to stay informed. #WeatherAlert`],positive:[`Cyclone threat for ${n} appears to be weakening. Weather conditions improving. #WeatherUpdate`]},tsunami:{negative:[`TSUNAMI WARNING: ${n} coast under threat. Move to higher ground immediately. Emergency services activated. #TsunamiAlert`,`Earthquake detected - Tsunami watch issued for ${n}. Coastal evacuation in progress. #EmergencyAlert`,`URGENT: Tsunami waves approaching ${n}. Height estimated at 3-5 meters. Seek immediate shelter inland. #TsunamiWarning`],neutral:[`Tsunami advisory issued for ${n} following seismic activity. Monitoring wave patterns. #TsunamiWatch`,`Seismic event detected near ${n}. Tsunami evaluation in progress. #EarthquakeAlert`],positive:[`Tsunami threat for ${n} has been cancelled. All clear signal given. #AllClear`]},flood:{negative:[`FLOOD WARNING: ${n} experiencing heavy flooding. Low-lying areas underwater. Emergency response teams deployed. #FloodAlert`,`Flash flood emergency in ${n}. Rivers overflowing, roads impassable. Stay away from water bodies. #WeatherEmergency`,`Coastal flooding reported in ${n}. Storm surge causing significant water rise. Evacuation recommended. #CoastalFlood`],neutral:[`Flood watch issued for ${n} area. Heavy rainfall expected. Monitor local conditions. #WeatherWatch`,`Rising water levels observed in ${n}. Flood preparations advised. #FloodWatch`],positive:[`Flood waters in ${n} are receding. Situation improving gradually. #WeatherUpdate`]},storm:{negative:[`Severe storm warning for ${n}. Gale force winds and heavy rain expected. Secure loose objects and stay indoors. #StormAlert`,`Dangerous storm conditions in ${n}. Power outages reported, fallen trees blocking roads. Emergency services responding. #StormWarning`,`Storm emergency: ${n} under attack from severe weather. Lightning strikes and strong winds causing damage. #SevereWeather`],neutral:[`Storm watch issued for ${n} region. Thunderstorms possible in coming hours. #WeatherWatch`,`Weather advisory: Storm developing near ${n}. Monitor for updates. #StormWatch`],positive:[`Storm over ${n} has passed. Weather conditions returning to normal. #WeatherUpdate`]}},a=o[e]||o.cyclone,u=a[r]||a.negative;return this.getRandomItem(u)}calculateSentimentScore(e,n){const r=["warning","alert","emergency","danger","flood","storm","cyclone","tsunami","evacuation","damage"],i=["clear","safe","improving","normal","passed","receding","cancelled"];let o=0;const a=e.toLowerCase();return r.forEach(u=>{a.includes(u)&&(o-=2)}),i.forEach(u=>{a.includes(u)&&(o+=1)}),n==="negative"?o-=3:n==="positive"&&(o+=2),Math.max(-10,Math.min(10,o))}extractKeywords(e,n){const r=["tsunami","cyclone","storm","flood","wave","surge","tide","coastal","marine","ocean","sea","beach","erosion","current","warning","alert","emergency","evacuation","rescue","safety","fishermen","vessel","boat","harbor","port","coast guard","imd","incois","meteorological","weather","wind","pressure"],i=[n],o=e.toLowerCase();return r.forEach(a=>{o.includes(a)&&!i.includes(a)&&i.push(a)}),i}generateEngagement(e,n){let r=Math.floor(Math.random()*100)+50,i=Math.floor(Math.random()*50)+10,o=Math.floor(Math.random()*30)+5;return e==="negative"&&(r*=2,i*=3,o*=2),(n==="critical"||n==="high")&&(r*=1.5,i*=2,o*=1.5),{likes:Math.floor(r),shares:Math.floor(i),comments:Math.floor(o)}}calculateRelevanceScore(e,n,r){let i=e.length*15;return n==="negative"&&(i+=20),r==="critical"?i+=30:r==="high"?i+=20:r==="medium"&&(i+=10),Math.min(100,Math.round(i))}}const Pp=new UV;class zV{constructor(){this.collectionName="syntheticReports",this.socialMediaCollection="socialMediaPosts",this.listeners=new Map}async saveSyntheticReport(e){try{const n=`synthetic_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,r={id:n,...e,savedAt:new Date().toISOString(),isSynthetic:!0,source:"synthetic_generator"};await u0(Hl(Kn,this.collectionName,n),r);const i={...r,content:r.content,platform:r.platform,author:r.author,timestamp:r.timestamp,processedAt:new Date().toISOString(),sentiment:r.sentiment,keywords:r.keywords,relevanceScore:r.relevanceScore,isHazardRelated:!0,engagement:r.engagement,location:r.location,isSynthetic:!0,syntheticMetadata:{hazardType:r.hazardType,severity:r.severity,generatedAt:r.generatedAt}};return await u0(Hl(Kn,this.socialMediaCollection,n),i),console.log(` Synthetic report saved to database: ${n}`),{reportId:n,dbReport:r,socialMediaReport:i}}catch(n){throw console.error(" Error saving synthetic report:",n),new Error(`Failed to save synthetic report: ${n.message}`)}}async saveMultipleSyntheticReports(e){try{const n=[];console.log(` Saving ${e.length} synthetic reports to database...`);for(const r of e){const i=await this.saveSyntheticReport(r);n.push(i)}return console.log(` Successfully saved ${n.length} synthetic reports`),n}catch(n){throw console.error(" Error saving multiple synthetic reports:",n),new Error(`Failed to save multiple synthetic reports: ${n.message}`)}}async getSyntheticReports(e={}){try{let n=As(Kn,this.collectionName);const r=[];e.hazardType&&r.push(rn("hazardType","==",e.hazardType)),e.severity&&r.push(rn("severity","==",e.severity)),e.platform&&r.push(rn("platform","==",e.platform)),e.location&&r.push(rn("location.name","==",e.location)),e.startDate&&r.push(rn("generatedAt",">=",e.startDate)),e.endDate&&r.push(rn("generatedAt","<=",e.endDate)),r.push(Vh("generatedAt","desc")),e.limit&&r.push(Fh(e.limit)),n=Uo(n,...r);const i=await ql(n),o=[];return i.forEach(a=>{o.push({id:a.id,...a.data()})}),o}catch(n){throw console.error(" Error fetching synthetic reports:",n),new Error(`Failed to fetch synthetic reports: ${n.message}`)}}async getSyntheticReportStats(e="24h"){try{const n=new Date,r=new Date;switch(e){case"1h":r.setHours(n.getHours()-1);break;case"24h":r.setDate(n.getDate()-1);break;case"7d":r.setDate(n.getDate()-7);break;case"30d":r.setDate(n.getDate()-30);break;default:r.setDate(n.getDate()-1)}const i=Uo(As(Kn,this.collectionName),rn("generatedAt",">=",r.toISOString()),Vh("generatedAt","desc")),o=await ql(i),a=[];o.forEach(h=>a.push(h.data()));const u={total:a.length,byHazardType:{},bySeverity:{},byPlatform:{},bySentiment:{},timeRange:e,generatedAt:new Date().toISOString()};return a.forEach(h=>{var k;const p=h.hazardType||"unknown";u.byHazardType[p]=(u.byHazardType[p]||0)+1;const _=h.severity||"unknown";u.bySeverity[_]=(u.bySeverity[_]||0)+1;const v=h.platform||"unknown";u.byPlatform[v]=(u.byPlatform[v]||0)+1;const E=((k=h.sentiment)==null?void 0:k.label)||"unknown";u.bySentiment[E]=(u.bySentiment[E]||0)+1}),u}catch(n){throw console.error(" Error fetching synthetic report stats:",n),new Error(`Failed to fetch synthetic report stats: ${n.message}`)}}async deleteSyntheticReport(e){try{return await c0(Hl(Kn,this.collectionName,e)),await c0(Hl(Kn,this.socialMediaCollection,e)),console.log(` Synthetic report deleted: ${e}`),!0}catch(n){throw console.error(" Error deleting synthetic report:",n),new Error(`Failed to delete synthetic report: ${n.message}`)}}async cleanupOldReports(e=30){try{const n=new Date;n.setDate(n.getDate()-e);const r=Uo(As(Kn,this.collectionName),rn("generatedAt","<",n.toISOString())),i=await ql(r),o=[];i.forEach(a=>{o.push({id:a.id,data:a.data()})}),console.log(` Found ${o.length} old synthetic reports to clean up`);for(const a of o)await this.deleteSyntheticReport(a.id);return{deleted:o.length,cutoffDate:n.toISOString()}}catch(n){throw console.error(" Error cleaning up old reports:",n),new Error(`Failed to cleanup old reports: ${n.message}`)}}subscribeToSyntheticReports(e,n={}){try{let r=As(Kn,this.collectionName);const i=[];n.hazardType&&i.push(rn("hazardType","==",n.hazardType)),n.severity&&i.push(rn("severity","==",n.severity)),i.push(Vh("generatedAt","desc")),n.limit&&i.push(Fh(n.limit)),r=Uo(r,...i);const o=EM(r,u=>{const h=[];u.forEach(p=>{h.push({id:p.id,...p.data()})}),e(h)},u=>{console.error(" Error in synthetic reports subscription:",u)}),a=`synthetic_reports_${Date.now()}`;return this.listeners.set(a,o),a}catch(r){throw console.error(" Error subscribing to synthetic reports:",r),new Error(`Failed to subscribe to synthetic reports: ${r.message}`)}}unsubscribeFromSyntheticReports(e){try{const n=this.listeners.get(e);return n?(n(),this.listeners.delete(e),console.log(` Unsubscribed from synthetic reports: ${e}`),!0):!1}catch(n){throw console.error(" Error unsubscribing from synthetic reports:",n),new Error(`Failed to unsubscribe from synthetic reports: ${n.message}`)}}async getConnectionStatus(){try{const e=Uo(As(Kn,this.collectionName),Fh(1));return await ql(e),{connected:!0,collection:this.collectionName,timestamp:new Date().toISOString()}}catch(e){return{connected:!1,error:e.message,timestamp:new Date().toISOString()}}}}const Ml=new zV,mh="/api",ca={getAuthHeaders(){const t=localStorage.getItem("authToken");return t?{Authorization:`Bearer ${t}`}:{}},async getSocialMediaPosts(t={}){try{const e=new URLSearchParams;return Object.keys(t).forEach(r=>{t[r]!==void 0&&t[r]!==null&&e.append(r,t[r])}),(await he.get(`${mh}/social-media/posts?${e}`,{headers:this.getAuthHeaders()})).data.posts||[]}catch(e){return console.warn("API not available, using simulated data:",e.message),await this.fetchSimulatedSocialMediaData()}},async monitorTwitter(){return console.warn("Twitter bearer token not found. Skipping Twitter monitoring."),[]},async getTrendingTopics(t=10){try{return(await he.get(`${mh}/social-media/trending`,{params:{limit:t},headers:this.getAuthHeaders()})).data.trending||[]}catch(e){return console.warn("API not available, generating trending topics from simulated data:",e.message),await this.getSimulatedTrendingTopics(t)}},async getSentimentStats(){try{return(await he.get(`${mh}/social-media/sentiment-stats`,{headers:this.getAuthHeaders()})).data.stats||{positive:0,negative:0,neutral:0,total:0}}catch(t){return console.warn("API not available, calculating sentiment from simulated data:",t.message),await this.getSimulatedSentimentStats()}},async getAnalytics(t="24h"){var e,n;try{return(await he.get(`${mh}/social-media/analytics`,{params:{timeRange:t},headers:this.getAuthHeaders()})).data.analytics||{}}catch(r){throw console.error("Error getting social media analytics:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to get analytics")}},analyzeSentiment(t){const e=["good","safe","fine","okay","normal","clear","calm"],n=["danger","warning","alert","storm","flood","tsunami","cyclone","emergency"],r=t.toLowerCase();let i=0;e.forEach(a=>{r.includes(a)&&(i+=1)}),n.forEach(a=>{r.includes(a)&&(i-=2)});let o="neutral";return i>1?o="positive":i<-1&&(o="negative"),{score:i,label:o,words:[...e.filter(a=>r.includes(a)),...n.filter(a=>r.includes(a))]}},extractHazardKeywords(t){const e=["tsunami","cyclone","storm","flood","wave","surge","tide","coastal","marine","ocean","sea","beach","erosion","current","warning","alert","emergency","evacuation","rescue","safety","fishermen","vessel","boat","harbor","port","coast guard","IMD","INCOIS","meteorological","weather","wind","pressure"],n=[],r=t.toLowerCase();return e.forEach(i=>{r.includes(i)&&n.push(i)}),n},async fetchSimulatedSocialMediaData(){const t=[{platform:"@NDRFHQ",author:"NDRF",content:"Massive flooding in Punjab. Over 1,400 villages inundated. Rescue operations are in full swing. Stay safe, follow evacuation orders. #PunjabFloods #Monsoon2025",timestamp:new Date(Date.now()-54e5).toISOString(),engagement:{likes:1200,shares:800,comments:250},verified:!0},{platform:"@PunjabGovtIndia",author:"Government of Punjab",content:"Catastrophic floods have hit Punjab. Emergency services are deployed. Control rooms are active. Call 1077 for assistance. #PunjabFloods #DisasterAlert",timestamp:new Date(Date.now()-72e5).toISOString(),engagement:{likes:950,shares:600,comments:180},verified:!0},{platform:"@TimesofIndia",author:"The Times of India",content:"Mumbai battles severe urban flooding after unprecedented rainfall and tidal surges. Public transport affected. #MumbaiRains #MumbaiFloods",timestamp:new Date(Date.now()-108e5).toISOString(),engagement:{likes:780,shares:450,comments:120},verified:!0},{platform:"@HPTourism",author:"Himachal Tourism",content:"Tourists are advised to postpone travel to Himachal Pradesh due to flash floods and landslides. Many roads are blocked. #HimachalFloods #TravelAdvisory",timestamp:new Date(Date.now()-18e6).toISOString(),engagement:{likes:550,shares:300,comments:90},verified:!0},{platform:"@CitizenJournalist",author:"Concerned Citizen",content:"My village in Punjab is completely underwater. We are awaiting rescue. Need help urgently! #PunjabFloods",timestamp:new Date(Date.now()-216e5).toISOString(),engagement:{likes:250,shares:150,comments:50},verified:!1}],e=[];for(const n of t)try{const r=await this.processSocialMediaPost(n);e.push(r)}catch(r){console.error("Error processing simulated post:",r)}return e},async getTrendingTopics(t=10){try{const e=await this.getSocialMediaPosts({isHazardRelated:!0,limit:100}),n={};return e.forEach(i=>{i.keywords.forEach(o=>{n[o]=(n[o]||0)+1})}),Object.entries(n).sort(([,i],[,o])=>o-i).slice(0,t).map(([i,o])=>({name:i,count:o,posts:o+" posts",sentiment:this.getKeywordSentiment(i,e)}))}catch(e){return console.error("Error getting trending topics:",e),[]}},getKeywordSentiment(t,e){const n=e.filter(i=>i.keywords.includes(t));if(n.length===0)return"neutral";const r=n.reduce((i,o)=>i+o.sentiment.score,0)/n.length;return r>1?"positive":r<-1?"negative":"neutral"},syntheticReports:{isEnabled:!1,generationInterval:null,reportCount:0,startGeneration(t=5,e=3){if(this.isEnabled){console.warn("Synthetic report generation is already enabled");return}return this.isEnabled=!0,console.log(`Starting synthetic report generation: ${e} posts every ${t} minutes`),this.generationInterval=setInterval(()=>{const n=Pp.generateMultiplePosts(e);this.reportCount+=n.length,window.socket&&n.forEach(r=>{window.socket.emit("synthetic-social-media-post",r)}),console.log(`Generated ${n.length} synthetic reports. Total: ${this.reportCount}`)},t*60*1e3),this.generationInterval},stopGeneration(){this.generationInterval&&(clearInterval(this.generationInterval),this.generationInterval=null),this.isEnabled=!1,console.log(`Stopped synthetic report generation. Total generated: ${this.reportCount}`)},async generateReports(t=5,e={}){try{const n=Pp.generateMultiplePosts(t,e);return this.reportCount+=n.length,await Ml.saveMultipleSyntheticReports(n),window.socket&&n.forEach(r=>{window.socket.emit("synthetic-social-media-post",r)}),console.log(` Generated and saved ${n.length} synthetic reports to database`),n}catch(n){throw console.error(" Error generating synthetic reports:",n),n}},getStats(){return{isEnabled:this.isEnabled,reportCount:this.reportCount,isGenerating:this.generationInterval!==null}},async generateHazardScenario(t,e,n="high",r=3){const i={hazardType:t,severity:n,location:typeof e=="string"?Pp.config.locations.find(o=>o.name.toLowerCase()===e.toLowerCase()):e};return await this.generateReports(r,i)},async getSyntheticReportsFromDatabase(t={}){try{return await Ml.getSyntheticReports(t)}catch(e){throw console.error(" Error fetching synthetic reports from database:",e),e}},async getSyntheticReportStatsFromDatabase(t="24h"){try{return await Ml.getSyntheticReportStats(t)}catch(e){throw console.error(" Error fetching synthetic report stats from database:",e),e}},async cleanupOldSyntheticReports(t=30){try{return await Ml.cleanupOldReports(t)}catch(e){throw console.error(" Error cleaning up old synthetic reports:",e),e}},async getDatabaseConnectionStatus(){try{return await Ml.getConnectionStatus()}catch(t){return console.error(" Error checking database connection:",t),{connected:!1,error:t.message}}}}},Ei="/api",gh={getAuthHeaders(){const t=localStorage.getItem("authToken");return t?{Authorization:`Bearer ${t}`}:{}},async processDonation(t){var e,n;try{const r=await he.post(`${Ei}/donations`,t,{headers:this.getAuthHeaders()});return{success:!0,donationId:r.data.donation.id,data:r.data.donation,paymentResult:r.data.paymentResult}}catch(r){throw console.error("Error processing donation:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to process donation")}},async getDonations(t={}){var e,n;try{const r=new URLSearchParams;return Object.keys(t).forEach(o=>{t[o]!==void 0&&t[o]!==null&&r.append(o,t[o])}),(await he.get(`${Ei}/donations?${r}`,{headers:this.getAuthHeaders()})).data.donations||[]}catch(r){throw console.error("Error getting donations:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to get donations")}},async getDonation(t){var e,n;try{return(await he.get(`${Ei}/donations/${t}`,{headers:this.getAuthHeaders()})).data.donation}catch(r){throw console.error("Error getting donation:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to get donation")}},async getDonationStats(){try{return(await he.get(`${Ei}/donations/stats`,{headers:this.getAuthHeaders()})).data.stats||{totalAmount:0,totalDonations:0,uniqueDonors:0,thisMonth:0,byType:{monetary:0,supplies:0,services:0}}}catch(t){return console.error("Error getting donation stats:",t),{totalAmount:0,totalDonations:0,uniqueDonors:0,thisMonth:0,byType:{monetary:0,supplies:0,services:0}}}},async createResourceRequest(t){var e,n;try{const r=await he.post(`${Ei}/donations/resource-requests`,t,{headers:this.getAuthHeaders()});return{success:!0,requestId:r.data.request.id,data:r.data.request}}catch(r){throw console.error("Error creating resource request:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to create resource request")}},async getResourceRequests(t={}){var e,n;try{const r=new URLSearchParams;return Object.keys(t).forEach(o=>{t[o]!==void 0&&t[o]!==null&&r.append(o,t[o])}),(await he.get(`${Ei}/donations/resource-requests?${r}`,{headers:this.getAuthHeaders()})).data.requests||[]}catch(r){throw console.error("Error getting resource requests:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to get resource requests")}},async updateResourceRequest(t,e){var n,r;try{const i=await he.put(`${Ei}/donations/resource-requests/${t}`,e,{headers:this.getAuthHeaders()});return{success:!0,message:i.data.message,data:i.data.request}}catch(i){throw console.error("Error updating resource request:",i),new Error(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.error)||"Failed to update resource request")}},async generateReceipt(t){var e,n;try{return(await he.post(`${Ei}/donations/${t}/receipt`,{},{headers:this.getAuthHeaders()})).data.receipt}catch(r){throw console.error("Error generating receipt:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to generate receipt")}},getPaymentMethods(){return[{value:"online",label:"Online Payment"},{value:"upi",label:"UPI"},{value:"card",label:"Credit/Debit Card"},{value:"netbanking",label:"Net Banking"},{value:"wallet",label:"Digital Wallet"}]},getDonationTypes(){return[{value:"monetary",label:"Monetary Donation"},{value:"supplies",label:"Supplies & Equipment"},{value:"services",label:"Services & Support"},{value:"volunteer",label:"Volunteer Time"}]},getCurrencies(){return[{value:"INR",label:"Indian Rupee (INR)"},{value:"USD",label:"US Dollar (USD)"},{value:"EUR",label:"Euro (EUR)"},{value:"GBP",label:"British Pound (GBP)"}]}},Gn="/api",_h={getAuthHeaders(){const t=localStorage.getItem("authToken");return t?{Authorization:`Bearer ${t}`}:{}},async registerVolunteer(t){var e,n;try{const r=await he.post(`${Gn}/volunteers/register`,t,{headers:this.getAuthHeaders()});return{success:!0,volunteerId:r.data.volunteer.id,data:r.data.volunteer}}catch(r){throw console.error("Error registering volunteer:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to register volunteer")}},async getVolunteers(t={}){var e,n;try{const r=new URLSearchParams;return Object.keys(t).forEach(o=>{t[o]!==void 0&&t[o]!==null&&r.append(o,t[o])}),(await he.get(`${Gn}/volunteers?${r}`,{headers:this.getAuthHeaders()})).data.volunteers||[]}catch(r){throw console.error("Error getting volunteers:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to get volunteers")}},async getVolunteer(t){var e,n;try{return(await he.get(`${Gn}/volunteers/${t}`,{headers:this.getAuthHeaders()})).data.volunteer}catch(r){throw console.error("Error getting volunteer:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to get volunteer")}},async createTask(t){var e,n;try{const r=await he.post(`${Gn}/volunteers/tasks`,t,{headers:this.getAuthHeaders()});return{success:!0,taskId:r.data.task.id,data:r.data.task}}catch(r){throw console.error("Error creating task:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to create task")}},async getTasks(t={}){var e,n;try{const r=new URLSearchParams;return Object.keys(t).forEach(o=>{t[o]!==void 0&&t[o]!==null&&r.append(o,t[o])}),(await he.get(`${Gn}/volunteers/tasks?${r}`,{headers:this.getAuthHeaders()})).data.tasks||[]}catch(r){throw console.error("Error getting tasks:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to get tasks")}},async getTask(t){var e,n;try{return(await he.get(`${Gn}/volunteers/tasks/${t}`,{headers:this.getAuthHeaders()})).data.task}catch(r){throw console.error("Error getting task:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to get task")}},async assignTask(t,e){var n,r;try{return{success:!0,message:(await he.post(`${Gn}/volunteers/tasks/${t}/assign`,{volunteerId:e},{headers:this.getAuthHeaders()})).data.message}}catch(i){throw console.error("Error assigning task:",i),new Error(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.error)||"Failed to assign task")}},async completeTask(t,e={}){var n,r;try{return{success:!0,message:(await he.post(`${Gn}/volunteers/tasks/${t}/complete`,e,{headers:this.getAuthHeaders()})).data.message}}catch(i){throw console.error("Error completing task:",i),new Error(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.error)||"Failed to complete task")}},async updateVolunteer(t,e){var n,r;try{const i=await he.put(`${Gn}/volunteers/${t}`,e,{headers:this.getAuthHeaders()});return{success:!0,message:i.data.message,data:i.data.volunteer}}catch(i){throw console.error("Error updating volunteer:",i),new Error(((r=(n=i.response)==null?void 0:n.data)==null?void 0:r.error)||"Failed to update volunteer")}},async getVolunteerStats(){try{return(await he.get(`${Gn}/volunteers/stats`,{headers:this.getAuthHeaders()})).data.stats||{totalVolunteers:0,activeVolunteers:0,pendingVerification:0,totalTasks:0,openTasks:0,assignedTasks:0,completedTasks:0,availabilityBreakdown:{weekends:0,weekdays:0,fullTime:0,emergency:0}}}catch(t){return console.error("Error getting volunteer stats:",t),{totalVolunteers:0,activeVolunteers:0,pendingVerification:0,totalTasks:0,openTasks:0,assignedTasks:0,completedTasks:0,availabilityBreakdown:{weekends:0,weekdays:0,fullTime:0,emergency:0}}}},async findSuitableVolunteers(t){var e,n;try{return(await he.post(`${Gn}/volunteers/find-suitable`,t,{headers:this.getAuthHeaders()})).data.volunteers||[]}catch(r){throw console.error("Error finding suitable volunteers:",r),new Error(((n=(e=r.response)==null?void 0:e.data)==null?void 0:n.error)||"Failed to find suitable volunteers")}},getAvailabilityOptions(){return[{value:"weekends",label:"Weekends Only"},{value:"weekdays",label:"Weekdays Only"},{value:"fullTime",label:"Full Time"},{value:"emergency",label:"Emergency Only"},{value:"flexible",label:"Flexible"}]},getSkillsOptions(){return["First Aid","Search & Rescue","Communication","Logistics","Medical Support","Technical Support","Translation","Driving","Boating","Cooking","Counseling","Photography","Writing","Data Entry"]},getTaskPriorityOptions(){return[{value:"low",label:"Low Priority"},{value:"medium",label:"Medium Priority"},{value:"high",label:"High Priority"},{value:"critical",label:"Critical Priority"}]},getTaskStatusOptions(){return[{value:"open",label:"Open"},{value:"assigned",label:"Assigned"},{value:"in_progress",label:"In Progress"},{value:"completed",label:"Completed"},{value:"cancelled",label:"Cancelled"}]}},fA={user:null,isAuthenticated:!1,loading:!0,reports:[],reportsLoading:!1,socialMediaPosts:[],socialMediaLoading:!1,sentimentStats:{positive:0,negative:0,neutral:0,total:0},trendingTopics:[],donations:[],donationStats:{totalAmount:0,totalDonations:0,uniqueDonors:0,thisMonth:0},notifications:[],unreadCount:0,volunteers:[],volunteerTasks:[],volunteerStats:{totalVolunteers:0,activeVolunteers:0,totalTasks:0,openTasks:0},error:null,successMessage:null},re={SET_USER:"SET_USER",SET_LOADING:"SET_LOADING",LOGOUT:"LOGOUT",SET_REPORTS:"SET_REPORTS",ADD_REPORT:"ADD_REPORT",UPDATE_REPORT:"UPDATE_REPORT",SET_REPORTS_LOADING:"SET_REPORTS_LOADING",SET_SOCIAL_MEDIA_POSTS:"SET_SOCIAL_MEDIA_POSTS",SET_SOCIAL_MEDIA_LOADING:"SET_SOCIAL_MEDIA_LOADING",SET_SENTIMENT_STATS:"SET_SENTIMENT_STATS",SET_TRENDING_TOPICS:"SET_TRENDING_TOPICS",SET_DONATIONS:"SET_DONATIONS",ADD_DONATION:"ADD_DONATION",SET_DONATION_STATS:"SET_DONATION_STATS",SET_NOTIFICATIONS:"SET_NOTIFICATIONS",ADD_NOTIFICATION:"ADD_NOTIFICATION",MARK_NOTIFICATION_READ:"MARK_NOTIFICATION_READ",SET_UNREAD_COUNT:"SET_UNREAD_COUNT",SET_VOLUNTEERS:"SET_VOLUNTEERS",ADD_VOLUNTEER:"ADD_VOLUNTEER",SET_VOLUNTEER_TASKS:"SET_VOLUNTEER_TASKS",ADD_VOLUNTEER_TASK:"ADD_VOLUNTEER_TASK",SET_VOLUNTEER_STATS:"SET_VOLUNTEER_STATS",SET_ERROR:"SET_ERROR",SET_SUCCESS_MESSAGE:"SET_SUCCESS_MESSAGE",CLEAR_MESSAGES:"CLEAR_MESSAGES"},BV=(t,e)=>{switch(e.type){case re.SET_USER:return{...t,user:e.payload,isAuthenticated:!!e.payload,loading:!1};case re.SET_LOADING:return{...t,loading:e.payload};case re.LOGOUT:return{...fA,loading:!1};case re.SET_REPORTS:return{...t,reports:e.payload};case re.ADD_REPORT:return{...t,reports:[e.payload,...t.reports]};case re.UPDATE_REPORT:return{...t,reports:t.reports.map(n=>n.id===e.payload.id?e.payload:n)};case re.SET_REPORTS_LOADING:return{...t,reportsLoading:e.payload};case re.SET_SOCIAL_MEDIA_POSTS:return{...t,socialMediaPosts:e.payload};case re.SET_SOCIAL_MEDIA_LOADING:return{...t,socialMediaLoading:e.payload};case re.SET_SENTIMENT_STATS:return{...t,sentimentStats:e.payload};case re.SET_TRENDING_TOPICS:return{...t,trendingTopics:e.payload};case re.SET_DONATIONS:return{...t,donations:e.payload};case re.ADD_DONATION:return{...t,donations:[e.payload,...t.donations]};case re.SET_DONATION_STATS:return{...t,donationStats:e.payload};case re.SET_NOTIFICATIONS:return{...t,notifications:e.payload};case re.ADD_NOTIFICATION:return{...t,notifications:[e.payload,...t.notifications],unreadCount:t.unreadCount+1};case re.MARK_NOTIFICATION_READ:return{...t,notifications:t.notifications.map(n=>n.id===e.payload?{...n,read:!0}:n),unreadCount:Math.max(0,t.unreadCount-1)};case re.SET_UNREAD_COUNT:return{...t,unreadCount:e.payload};case re.SET_VOLUNTEERS:return{...t,volunteers:e.payload};case re.ADD_VOLUNTEER:return{...t,volunteers:[e.payload,...t.volunteers]};case re.SET_VOLUNTEER_TASKS:return{...t,volunteerTasks:e.payload};case re.ADD_VOLUNTEER_TASK:return{...t,volunteerTasks:[e.payload,...t.volunteerTasks]};case re.SET_VOLUNTEER_STATS:return{...t,volunteerStats:e.payload};case re.SET_ERROR:return{...t,error:e.payload};case re.SET_SUCCESS_MESSAGE:return{...t,successMessage:e.payload};case re.CLEAR_MESSAGES:return{...t,error:null,successMessage:null};default:return t}},pA=U.createContext(),$V=({children:t})=>{const[e,n]=U.useReducer(BV,fA),r=async(A,I)=>{try{n({type:re.SET_LOADING,payload:!0});const b=await Ll.login(A,I);return n({type:re.SET_USER,payload:b.user}),n({type:re.SET_SUCCESS_MESSAGE,payload:"Login successful!"}),b}catch(b){throw n({type:re.SET_ERROR,payload:b.message}),n({type:re.SET_LOADING,payload:!1}),b}},i=async A=>{try{n({type:re.SET_LOADING,payload:!0});const I=await Ll.register(A);return n({type:re.SET_USER,payload:I.user}),n({type:re.SET_SUCCESS_MESSAGE,payload:"Registration successful!"}),I}catch(I){throw n({type:re.SET_ERROR,payload:I.message}),n({type:re.SET_LOADING,payload:!1}),I}},o=async()=>{try{await Ll.logout(),n({type:re.LOGOUT})}catch(A){n({type:re.SET_ERROR,payload:A.message})}},a=async(A={})=>{try{n({type:re.SET_REPORTS_LOADING,payload:!0});const I=await Vu.getReports(A);n({type:re.SET_REPORTS,payload:I})}catch{n({type:re.SET_ERROR,payload:"Failed to load reports"})}finally{n({type:re.SET_REPORTS_LOADING,payload:!1})}},u=async A=>{var I,b;try{const T=await Vu.submitReport({...A,userId:((I=e.user)==null?void 0:I.uid)||((b=e.user)==null?void 0:b.id)});return n({type:re.ADD_REPORT,payload:T.data}),n({type:re.SET_SUCCESS_MESSAGE,payload:"Report submitted successfully!"}),T}catch(T){throw n({type:re.SET_ERROR,payload:"Failed to submit report"}),T}},h=async()=>{try{n({type:re.SET_SOCIAL_MEDIA_LOADING,payload:!0});const A=await ca.fetchSimulatedSocialMediaData(),I=await ca.getSentimentStats(),b=await ca.getTrendingTopics();n({type:re.SET_SOCIAL_MEDIA_POSTS,payload:A}),n({type:re.SET_SENTIMENT_STATS,payload:I}),n({type:re.SET_TRENDING_TOPICS,payload:b})}catch{n({type:re.SET_ERROR,payload:"Failed to load social media data"})}finally{n({type:re.SET_SOCIAL_MEDIA_LOADING,payload:!1})}},p=async()=>{try{const A=await gh.getDonations(),I=await gh.getDonationStats();n({type:re.SET_DONATIONS,payload:A}),n({type:re.SET_DONATION_STATS,payload:I})}catch{n({type:re.SET_ERROR,payload:"Failed to load donations"})}},_=async A=>{var I,b;try{const T=await gh.processDonation({...A,userId:((I=e.user)==null?void 0:I.uid)||((b=e.user)==null?void 0:b.id)});n({type:re.ADD_DONATION,payload:T.data}),n({type:re.SET_SUCCESS_MESSAGE,payload:"Donation processed successfully!"});const x=await gh.getDonationStats();return n({type:re.SET_DONATION_STATS,payload:x}),T}catch(T){throw n({type:re.SET_ERROR,payload:"Failed to process donation"}),T}},v=async()=>{try{const A=await _h.getVolunteers(),I=await _h.getTasks(),b=await _h.getVolunteerStats();n({type:re.SET_VOLUNTEERS,payload:A}),n({type:re.SET_VOLUNTEER_TASKS,payload:I}),n({type:re.SET_VOLUNTEER_STATS,payload:b})}catch{n({type:re.SET_ERROR,payload:"Failed to load volunteer data"})}},E=async A=>{var I,b;try{const T=await _h.registerVolunteer({...A,userId:((I=e.user)==null?void 0:I.uid)||((b=e.user)==null?void 0:b.id)});return n({type:re.ADD_VOLUNTEER,payload:T.data}),n({type:re.SET_SUCCESS_MESSAGE,payload:"Volunteer registration successful!"}),T}catch(T){throw n({type:re.SET_ERROR,payload:"Failed to register volunteer"}),T}},k=()=>{n({type:re.CLEAR_MESSAGES})};U.useEffect(()=>Ll.onAuthStateChange(async I=>{if(I){const b=I.uid||I.id,T=await Ll.getUserData(b);n({type:re.SET_USER,payload:{...I,...T}})}else n({type:re.SET_USER,payload:null})}),[]),U.useEffect(()=>{e.isAuthenticated&&(a(),h(),p(),v())},[e.isAuthenticated]);const P={...e,login:r,register:i,logout:o,loadReports:a,submitReport:u,loadSocialMediaData:h,loadDonations:p,processDonation:_,loadVolunteers:v,registerVolunteer:E,clearMessages:k};return f.jsx(pA.Provider,{value:P,children:t})},Pr=()=>{const t=U.useContext(pA);if(!t)throw new Error("useApp must be used within an AppProvider");return t},HV=()=>{const{user:t,logout:e}=Pr(),n=Un(),r=async()=>{await e(),n("/")};return f.jsx("nav",{className:"navbar",children:f.jsxs("div",{className:"navbar-container",children:[f.jsx(Xn,{to:"/",className:"navbar-logo",children:" Tarang"}),f.jsxs("ul",{className:"nav-menu",children:[f.jsx("li",{className:"nav-item",children:f.jsx(Xn,{to:"/",className:"nav-links",end:!0,children:"Home"})}),t?f.jsxs(f.Fragment,{children:[f.jsx("li",{className:"nav-item",children:f.jsx(Xn,{to:`/${t.role}/dashboard`,className:"nav-links",children:"Dashboard"})}),f.jsx("li",{className:"nav-item",children:f.jsx("button",{className:"nav-links-button",onClick:r,children:"Logout"})})]}):f.jsxs(f.Fragment,{children:[f.jsx("li",{className:"nav-item",children:f.jsx(Xn,{to:"/donations",className:"nav-links",children:"Donate"})}),f.jsx("li",{className:"nav-item",children:f.jsx(Xn,{to:"/login",className:"nav-links",children:"Login"})}),f.jsx("li",{className:"nav-item",children:f.jsx(Xn,{to:"/register",className:"nav-links-button",children:"Register"})})]})]})]})})},mA=({role:t})=>f.jsx("div",{className:"sidenav",children:f.jsxs("ul",{children:[t==="officer"&&f.jsxs(f.Fragment,{children:[f.jsx("li",{children:f.jsx(Xn,{to:"/official/dashboard",children:"Dashboard"})}),f.jsx("li",{children:f.jsx(Xn,{to:"/official/reports",children:"Reports"})}),f.jsx("li",{children:f.jsx(Xn,{to:"/official/users",children:"Users"})})]}),t==="citizen"&&f.jsxs(f.Fragment,{children:[f.jsx("li",{children:f.jsx(Xn,{to:"/citizen/dashboard",children:"Dashboard"})}),f.jsx("li",{children:f.jsx(Xn,{to:"/citizen/report",children:"Report Hazard"})})]})]})}),WV=()=>{const[t,e]=U.useState([]),[n,r]=U.useState(!0),[i,o]=U.useState(null),[a,u]=U.useState(0),[h,p]=U.useState(!0),_=async()=>{try{r(!0);const A=await he.get("/api/notifications/flash-bulletins");e(A.data.bulletins||[]),o(null)}catch(A){console.error("Error fetching flash bulletins:",A),o("Failed to load safety bulletins")}finally{r(!1)}};if(U.useEffect(()=>{if(t.length<=1||!h)return;const A=setInterval(()=>{u(I=>(I+1)%t.length)},5e3);return()=>clearInterval(A)},[t.length,h]),U.useEffect(()=>{_();const A=setInterval(_,2*60*1e3);return()=>clearInterval(A)},[]),n)return f.jsx("div",{className:"flash-bulletin-container loading",children:f.jsxs("div",{className:"bulletin-loading",children:[f.jsx("div",{className:"loading-spinner",children:""}),f.jsx("span",{children:"Loading safety bulletins..."})]})});if(i&&t.length===0)return f.jsx("div",{className:"flash-bulletin-container error",children:f.jsxs("div",{className:"bulletin-error",children:[f.jsx("span",{className:"error-icon",children:""}),f.jsx("span",{children:"Unable to load safety bulletins"}),f.jsx("button",{onClick:_,className:"retry-button",children:"Retry"})]})});if(t.length===0)return null;const v=t[a],E=()=>{p(!1),u(A=>A===0?t.length-1:A-1)},k=()=>{p(!1),u(A=>(A+1)%t.length)},P=A=>{p(!1),u(A)};return f.jsx("div",{className:"flash-bulletin-container",children:f.jsxs("div",{className:`flash-bulletin ${v.severity}`,style:{"--bulletin-color":v.color},children:[f.jsxs("div",{className:"bulletin-header",children:[f.jsx("div",{className:"bulletin-icon",children:v.icon}),f.jsxs("div",{className:"bulletin-title-section",children:[f.jsx("h3",{className:"bulletin-title",children:v.title}),f.jsx("span",{className:"bulletin-area",children:v.affectedAreas})]}),f.jsx("div",{className:"bulletin-severity",children:f.jsx("span",{className:`severity-badge ${v.severity}`,children:v.severity.toUpperCase()})})]}),f.jsx("div",{className:"bulletin-message",children:f.jsx("p",{children:v.message})}),v.actionItems&&v.actionItems.length>0&&f.jsxs("div",{className:"bulletin-actions",children:[f.jsx("h4",{children:"Safety Guidelines:"}),f.jsx("ul",{children:v.actionItems.slice(0,3).map((A,I)=>f.jsx("li",{children:A},I))})]}),f.jsxs("div",{className:"bulletin-footer",children:[f.jsxs("div",{className:"bulletin-timestamp",children:["Last updated: ",new Date(v.timestamp).toLocaleTimeString()]}),f.jsxs("div",{className:"bulletin-expires",children:["Valid until: ",new Date(v.expiresAt).toLocaleTimeString()]})]}),t.length>1&&f.jsxs("div",{className:"bulletin-controls",children:[f.jsx("button",{className:"bulletin-nav prev",onClick:E,"aria-label":"Previous bulletin",children:""}),f.jsx("div",{className:"bulletin-indicators",children:t.map((A,I)=>f.jsx("button",{className:`indicator ${I===a?"active":""}`,onClick:()=>P(I),"aria-label":`Go to bulletin ${I+1}`},I))}),f.jsx("button",{className:"bulletin-nav next",onClick:k,"aria-label":"Next bulletin",children:""})]}),t.length>1&&h&&f.jsx("div",{className:"auto-scroll-indicator",children:f.jsx("div",{className:"auto-scroll-progress"})})]})})},qV=()=>{const t=Un(),{user:e,isAuthenticated:n}=Pr(),r=u=>{if(!n||!e)return!1;switch(u){case"citizen":return!0;case"official":return e.role==="admin"||e.role==="official";case"analyst":return e.role==="admin"||e.role==="analyst";default:return!1}},i=[{id:"social-media",title:"Social Media",subtitle:"Analytics & Monitoring",color:"#6366f1",icon:"",onClick:()=>t("/social-media")},{id:"dashboard",title:"My Dashboard",subtitle:"Control Panel",color:"#ef4444",icon:"",onClick:()=>t("/analyst")},{id:"reports",title:"Reports",subtitle:"Hazard Reports",color:"#06b6d4",icon:"",onClick:()=>t("/citizen")},{id:"map",title:"Map View",subtitle:"Interactive View",color:"#ec4899",icon:"",onClick:()=>t("/map")},{id:"support",title:"Support Relief",subtitle:"Resources & Donations",color:"#10b981",icon:"",onClick:()=>t("/donations")}],o=[{id:"citizens",title:"Citizens",subtitle:"Report hazards, view alerts",features:["Report Ocean Hazards","Receive Real-time Alerts","Community Updates","Emergency Contacts"],buttonText:n?"Enter as Citizen":"Enter as Citizen (Requires Login)",color:"#6366f1",icon:"",disabled:!n,onClick:()=>t(n?"/citizen":"/login")},{id:"officials",title:"Officials",subtitle:"Manage responses, monitor dashboards",features:["Response Management","Emergency Coordination","Resource Allocation","Public Communications"],buttonText:r("official")?"Enter as Officer":"Enter as Officer (Requires Login)",color:"#f59e0b",icon:"",disabled:!r("official"),onClick:()=>r("official")?t("/official"):t("/login")},{id:"analysts",title:"Analysts",subtitle:"Access data insights, trends, and reports",features:["Data Analytics","Trend Analysis","Predictive Models","Research Reports"],buttonText:r("analyst")?"Enter as Analyst":"Enter as Analyst (Requires Login)",color:"#8b5cf6",icon:"",disabled:!r("analyst"),onClick:()=>r("analyst")?t("/analyst"):t("/login")}],a=[{id:"maps",title:"Interactive Maps",subtitle:"Real-time hazard visualization with dynamic hotspots",icon:"",color:"#ef4444"},{id:"alerts",title:"Smart Alerts",subtitle:"AI-powered notifications for immediate response",icon:"",color:"#f59e0b"},{id:"community",title:"Community Driven",subtitle:"Collaborative reporting and volunteer coordination",icon:"",color:"#8b5cf6"},{id:"insights",title:"Data Insights",subtitle:"Advanced analytics for informed decision making",icon:"",color:"#06b6d4"}];return f.jsx("div",{className:"homepage",children:f.jsxs("main",{className:"homepage-main",children:[f.jsx("section",{className:"hero-section",children:f.jsxs("div",{className:"hero-content",children:[f.jsxs("h1",{className:"hero-title",children:["Your Ocean Hazard ",f.jsx("span",{className:"highlight",children:"Command Center"})]}),f.jsx("p",{className:"hero-subtitle",children:"Welcome to your personalized dashboard. Access real-time hazard data, social media analytics, and manage your ocean safety monitoring activities all in one place."})]})}),f.jsx(WV,{}),f.jsx("section",{className:"quick-actions-section",children:f.jsx("div",{className:"quick-actions-grid",children:i.map(u=>f.jsxs("div",{className:"quick-action-card",style:{"--action-color":u.color},onClick:u.onClick,children:[f.jsx("div",{className:"action-icon",children:u.icon}),f.jsxs("div",{className:"action-content",children:[f.jsx("h3",{className:"action-title",children:u.title}),f.jsx("p",{className:"action-subtitle",children:u.subtitle})]})]},u.id))})}),f.jsx("section",{className:"user-roles-section",children:f.jsx("div",{className:"roles-grid",children:o.map(u=>f.jsxs("div",{className:"role-card",children:[f.jsxs("div",{className:"role-header",children:[f.jsx("div",{className:"role-icon",style:{color:u.color},children:u.icon}),f.jsxs("div",{className:"role-info",children:[f.jsx("h3",{className:"role-title",children:u.title}),f.jsx("p",{className:"role-subtitle",children:u.subtitle})]})]}),f.jsx("ul",{className:"role-features",children:u.features.map((h,p)=>f.jsxs("li",{className:"role-feature",children:[" ",h]},p))}),f.jsx("button",{className:`role-button ${u.disabled?"disabled":""}`,style:{backgroundColor:u.disabled?"#94a3b8":u.color},onClick:u.onClick,disabled:u.disabled,children:u.buttonText})]},u.id))})}),f.jsx("section",{className:"features-section",children:f.jsx("div",{className:"features-grid",children:a.map(u=>f.jsxs("div",{className:"feature-card",children:[f.jsx("div",{className:"feature-icon",style:{color:u.color},children:u.icon}),f.jsxs("div",{className:"feature-content",children:[f.jsx("h3",{className:"feature-title",children:u.title}),f.jsx("p",{className:"feature-subtitle",children:u.subtitle})]})]},u.id))})}),f.jsx("section",{className:"cta-section",children:f.jsxs("div",{className:"cta-card",children:[f.jsx("h2",{className:"cta-title",children:"Volunteer Registration"}),f.jsx("p",{className:"cta-subtitle",children:"Join our volunteer network to help with ocean hazard monitoring, emergency response, and community safety initiatives."}),f.jsx("div",{className:"cta-buttons",children:f.jsx("button",{className:"cta-button primary",onClick:()=>t("/volunteer-registration"),children:" Volunteer Registration"})})]})})]})})},gA=({onClose:t,onSuccess:e,initialLocation:n=null})=>{const{user:r}=Pr(),[i,o]=U.useState(!1),[a,u]=U.useState(!1),[h,p]=U.useState({title:"",description:"",type:"other",severity:"medium",coordinates:n||null,locationAddress:"",mediaFiles:[]});U.useEffect(()=>{n&&n.lat&&n.lng&&(p(T=>({...T,coordinates:n})),E(n))},[n]);const _=[{value:"tsunami",label:"Tsunami"},{value:"high_waves",label:"High Waves"},{value:"storm",label:"Storm/Cyclone"},{value:"flood",label:"Coastal Flood"},{value:"erosion",label:"Coastal Erosion"},{value:"oil_spill",label:"Oil Spill"},{value:"debris",label:"Marine Debris"},{value:"pollution",label:"Water Pollution"},{value:"wildlife",label:"Marine Wildlife Distress"},{value:"other",label:"Other"}],v=[{value:"low",label:"Low Risk",color:"#10b981"},{value:"medium",label:"Medium Risk",color:"#f59e0b"},{value:"high",label:"High Risk",color:"#ef4444"},{value:"critical",label:"Critical/Emergency",color:"#7c2d12"}],E=async T=>{try{const V=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${T.lat}&lon=${T.lng}`)).json();V.display_name&&p(G=>({...G,locationAddress:V.display_name}))}catch(x){console.warn("Could not get address for coords:",x)}},k=()=>{u(!0),navigator.geolocation?navigator.geolocation.getCurrentPosition(async T=>{const x={lat:T.coords.latitude,lng:T.coords.longitude};p(V=>({...V,coordinates:x})),await E(x),u(!1),kt.success("Location captured!")},T=>{console.error("Error getting location:",T),kt.error("Unable to get your location. Please select it on the map or enter details manually."),u(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):(kt.error("Geolocation is not supported by this browser."),u(!1))},P=T=>{const{name:x,value:V}=T.target;p(G=>({...G,[x]:V}))},A=T=>{const x=Array.from(T.target.files);p(V=>({...V,mediaFiles:x}))},I=async T=>{var x,V;if(!T)return{state:"",district:""};try{const Z=await(await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${T.lat}&lon=${T.lng}`)).json();return{state:((x=Z.address)==null?void 0:x.state)||"",district:((V=Z.address)==null?void 0:V.state_district)||""}}catch(G){return console.error("Error getting location details from coords:",G),{state:"",district:""}}},b=async T=>{if(T.preventDefault(),!h.coordinates||typeof h.coordinates.lat>"u"||typeof h.coordinates.lng>"u"){kt.error('Location is missing. Please use "Use Current Location" or click on the map to set a location.');return}if(!h.description.trim()){kt.error("Please provide a description of the hazard.");return}o(!0);const x=kt.loading("Submitting your report...");try{const V=await I(h.coordinates),G={...h,userId:(r==null?void 0:r.uid)||"anonymous",reporterName:(r==null?void 0:r.displayName)||"Anonymous User",reporterEmail:(r==null?void 0:r.email)||"",location:{latitude:h.coordinates.lat,longitude:h.coordinates.lng,address:h.locationAddress,state:V.state,district:V.district}},Z=await Vu.submitReport(G);if(Z.success)kt.success("Report submitted successfully!",{id:x}),e&&e(Z.data),t&&t();else throw new Error("Submission failed for an unknown reason.")}catch(V){console.error("Error submitting report:",V),kt.error(`Submission failed: ${V.message}. Please try again.`,{id:x})}finally{o(!1)}};return f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"modal-overlay",onClick:t}),f.jsx("div",{className:"modal-container",children:f.jsxs("div",{className:"modal-content",children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h2",{children:"Report Ocean Hazard"}),f.jsx("button",{className:"close-button",onClick:t,children:""})]}),f.jsxs("form",{onSubmit:b,className:"report-form",children:[f.jsxs("div",{className:"form-section",children:[f.jsx("h3",{children:"Basic Information"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"title",children:"Report Title"}),f.jsx("input",{type:"text",id:"title",name:"title",value:h.title,onChange:P,placeholder:"Brief title for the hazard",maxLength:100})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"type",children:"Hazard Type *"}),f.jsx("select",{id:"type",name:"type",value:h.type,onChange:P,required:!0,children:_.map(T=>f.jsx("option",{value:T.value,children:T.label},T.value))})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"severity",children:"Severity Level *"}),f.jsx("select",{id:"severity",name:"severity",value:h.severity,onChange:P,required:!0,children:v.map(T=>f.jsx("option",{value:T.value,children:T.label},T.value))})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"description",children:"Description *"}),f.jsx("textarea",{id:"description",name:"description",value:h.description,onChange:P,placeholder:"Detailed description of what you observed...",rows:4,required:!0,maxLength:1e3}),f.jsxs("small",{children:[h.description.length,"/1000 characters"]})]})]}),f.jsxs("div",{className:"form-section",children:[f.jsx("h3",{children:"Location"}),f.jsxs("div",{className:"location-controls",children:[f.jsx("button",{type:"button",onClick:k,disabled:a,className:"location-button",children:a?" Getting Location...":" Use Current Location"}),h.coordinates&&f.jsxs("div",{className:"coordinates-display",children:[f.jsxs("p",{children:[" Lat: ",h.coordinates.lat.toFixed(6),", Lng: ",h.coordinates.lng.toFixed(6)]}),h.locationAddress&&f.jsxs("p",{className:"address",children:[" ",h.locationAddress]})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"locationAddress",children:"Location Details"}),f.jsx("input",{type:"text",id:"locationAddress",name:"locationAddress",value:h.locationAddress,onChange:P,placeholder:"Describe the exact location (beach name, landmark, etc.)"})]})]}),f.jsxs("div",{className:"form-section",children:[f.jsx("h3",{children:"Photos/Videos (Optional)"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"mediaFiles",children:"Upload Images/Videos"}),f.jsx("input",{type:"file",id:"mediaFiles",multiple:!0,accept:"image/*,video/*",onChange:A,className:"file-input"}),f.jsx("small",{children:"Supported formats: JPG, PNG, MP4, MOV (Max 5 files, 10MB each)"}),h.mediaFiles.length>0&&f.jsx("div",{className:"file-preview",children:Array.from(h.mediaFiles).map((T,x)=>f.jsxs("div",{className:"file-item",children:[" ",T.name," (",(T.size/1024/1024).toFixed(2)," MB)"]},x))})]})]}),f.jsxs("div",{className:"form-actions",children:[f.jsx("button",{type:"button",onClick:t,className:"cancel-button",children:"Cancel"}),f.jsx("button",{type:"submit",disabled:i||!h.coordinates,className:"submit-button",children:i?"Submitting...":"Submit Report"})]})]})]})})]})},GV=()=>{const t=Un(),{user:e}=Pr(),[n,r]=U.useState("dashboard"),[i,o]=U.useState(!1),[a,u]=U.useState([]),[h,p]=U.useState(!0),[_,v]=U.useState({total:0,verified:0,pending:0,rejected:0});U.useEffect(()=>{E()},[e]);const E=async()=>{if(e!=null&&e.uid){p(!0);try{const I=await Vu.getReports({userId:e.uid,limit:20});u(I);const b={total:I.length,verified:I.filter(T=>T.status==="verified").length,pending:I.filter(T=>T.status==="unverified"||T.status==="pending").length,rejected:I.filter(T=>T.status==="rejected").length};v(b)}catch(I){console.error("Error loading user reports:",I),u([]),v({total:0,verified:0,pending:0,rejected:0})}finally{p(!1)}}},k=()=>{o(!1),E()},P=I=>{switch(I){case"report":o(!0);break;case"map":t("/map");break;case"community":t("/social-media");break;case"settings":t("/settings");break;case"support":t("/donations");break;default:console.log("Action not implemented:",I)}},A=[{id:"report",title:"Report Hazard",description:"Report ocean hazards you observe",icon:"",color:"#ef4444"},{id:"map",title:"View Map",description:"See hazard hotspots and alerts",icon:"",color:"#06b6d4"},{id:"community",title:"Community Feed",description:"Connect with other citizens",icon:"",color:"#8b5cf6"},{id:"settings",title:"Settings",description:"Manage your preferences",icon:"",color:"#64748b"},{id:"support",title:"Support Relief",description:"Donate to help emergency response",icon:"",color:"#10b981"}];return f.jsxs("div",{className:"citizen-dashboard",children:[f.jsx("header",{className:"dashboard-header",children:f.jsxs("div",{className:"header-content",children:[f.jsx("div",{className:"logo-section",children:f.jsx("button",{className:"logo-button",onClick:()=>t("/"),children:" Tarang Citizen Dashboard"})}),f.jsxs("div",{className:"header-actions",children:[f.jsx("button",{className:"user-button",children:"Citizen"}),f.jsx("button",{className:"sign-out-button",children:"Sign Out"})]})]})}),f.jsxs("nav",{className:"dashboard-nav",children:[f.jsx("button",{className:`nav-tab ${n==="dashboard"?"active":""}`,onClick:()=>r("dashboard"),children:"Dashboard"}),f.jsx("button",{className:`nav-tab ${n==="reports"?"active":""}`,onClick:()=>r("reports"),children:"My Reports"})]}),f.jsxs("main",{className:"dashboard-main",children:[n==="dashboard"&&f.jsxs(f.Fragment,{children:[f.jsx("section",{className:"welcome-section",children:f.jsxs("div",{className:"welcome-card",children:[f.jsx("h1",{className:"welcome-title",children:"Welcome to Tarang"}),f.jsx("p",{className:"welcome-subtitle",children:"Stay informed and help keep our coastal communities safe"})]})}),f.jsx("section",{className:"relief-section",children:f.jsx("div",{className:"relief-card",children:f.jsxs("div",{className:"relief-content",children:[f.jsx("div",{className:"relief-icon",children:""}),f.jsxs("div",{className:"relief-info",children:[f.jsx("h3",{children:"Emergency Relief Fund"}),f.jsx("p",{children:"Support communities affected by ocean hazards. Your donation helps provide emergency supplies, rescue equipment, and recovery assistance."})]}),f.jsxs("div",{className:"relief-stats",children:[f.jsx("div",{className:"relief-amount",children:"65.21"}),f.jsx("div",{className:"relief-label",children:"Raised"})]}),f.jsx("button",{className:"donate-button",onClick:()=>t("/donations"),children:" Donate Now"})]})})}),f.jsx("section",{className:"actions-section",children:f.jsx("div",{className:"actions-grid",children:A.map(I=>f.jsxs("div",{className:"action-card",onClick:()=>P(I.id),style:{cursor:"pointer"},children:[f.jsx("div",{className:"action-icon",style:{color:I.color},children:I.icon}),f.jsx("h3",{className:"action-title",children:I.title}),f.jsx("p",{className:"action-description",children:I.description})]},I.id))})}),f.jsx("section",{className:"stats-section",children:f.jsxs("div",{className:"stats-grid",children:[f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"stat-value",style:{color:"#6366f1"},children:h?"...":_.total}),f.jsx("div",{className:"stat-label",children:"Your Reports"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"stat-value",style:{color:"#10b981"},children:h?"...":_.verified}),f.jsx("div",{className:"stat-label",children:"Verified"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"stat-value",style:{color:"#f59e0b"},children:h?"...":_.pending}),f.jsx("div",{className:"stat-label",children:"Pending"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"stat-value",style:{color:"#ef4444"},children:h?"...":_.rejected}),f.jsx("div",{className:"stat-label",children:"Rejected"})]})]})}),f.jsxs("section",{className:"recent-reports-section",children:[f.jsx("h2",{className:"section-title",children:"Recent Reports"}),f.jsx("div",{className:"reports-list",children:h?f.jsx("div",{className:"loading-state",children:"Loading your reports..."}):a.length===0?f.jsx("div",{className:"empty-state",children:f.jsx("p",{children:'No reports yet. Click "Report Hazard" to submit your first report!'})}):a.slice(0,3).map(I=>f.jsxs("div",{className:"report-item",children:[f.jsxs("div",{className:"report-content",children:[f.jsx("div",{className:`report-status ${I.status}`,children:I.status.toUpperCase()}),f.jsx("h4",{className:"report-title",children:I.title||"Ocean Hazard Report"}),f.jsxs("div",{className:"report-meta",children:[f.jsx("span",{className:"report-type",children:I.type.replace("_"," ")}),f.jsx("span",{className:"report-date",children:new Date(I.reportedAt).toLocaleDateString()})]})]}),f.jsx("div",{className:`report-severity ${I.severity}`,children:I.severity.toUpperCase()})]},I.id))})]})]}),n==="reports"&&f.jsxs("section",{className:"reports-tab",children:[f.jsxs("div",{className:"reports-header",children:[f.jsx("h2",{children:"Your Reports"}),f.jsx("button",{className:"new-report-button",onClick:()=>o(!0),children:"+ New Report"})]}),f.jsx("div",{className:"reports-list",children:h?f.jsx("div",{className:"loading-state",children:"Loading your reports..."}):a.length===0?f.jsxs("div",{className:"empty-state",children:[f.jsx("p",{children:"No reports yet. Submit your first hazard report!"}),f.jsx("button",{className:"new-report-button",onClick:()=>o(!0),children:"+ Create Your First Report"})]}):a.map(I=>f.jsxs("div",{className:"report-card",children:[f.jsx("div",{className:`report-status ${I.status}`,children:I.status.toUpperCase()}),f.jsx("h3",{className:"report-title",children:I.title||"Ocean Hazard Report"}),f.jsxs("div",{className:"report-details",children:[f.jsx("span",{className:"report-type",children:I.type.replace("_"," ")}),f.jsx("span",{className:"report-date",children:new Date(I.reportedAt).toLocaleDateString()})]}),f.jsx("div",{className:`report-severity ${I.severity}`,children:I.severity.toUpperCase()}),I.description&&f.jsx("p",{className:"report-description",children:I.description}),I.images&&I.images.length>0&&f.jsxs("div",{className:"report-images",children:[I.images.slice(0,3).map((b,T)=>f.jsx("img",{src:b,alt:`Report image ${T+1}`,className:"report-image-thumbnail"},T)),I.images.length>3&&f.jsxs("span",{className:"more-images",children:["+",I.images.length-3," more"]})]})]},I.id))})]})]}),i&&f.jsx(gA,{onClose:()=>o(!1),onSuccess:k})]})},KV=()=>{const t=Un(),[e,n]=U.useState(!0),[r,i]=U.useState({totalReports:0,activeVolunteers:0,activeAlerts:0,socialMediaPosts:0,negativeSentiment:0,highRelevance:0,trendingTopics:0}),[o,a]=U.useState({}),[u,h]=U.useState([]),[p,_]=U.useState([]),[v,E]=U.useState([]);U.useEffect(()=>{k()},[]);const k=async()=>{n(!0);try{const T=Vu.getReports({limit:50}),x=ca.fetchSimulatedSocialMediaData(),V=ca.getSimulatedTrendingTopics(10),G=ca.getSimulatedSentimentStats(),[Z,N,R,O]=await Promise.all([T,x,V,G]);_(Z.slice(0,10));const D={totalReports:Z.length,activeVolunteers:Math.floor(Z.length*.7),activeAlerts:Z.filter(F=>F.severity==="critical"||F.severity==="high").length,socialMediaPosts:N.length,negativeSentiment:O.negative||0,highRelevance:N.filter(F=>F.isHazardRelated).length,trendingTopics:R.length};i(D),a(O),h(R),E(N.slice(0,5))}catch(T){console.error("Error loading analytics data:",T)}finally{n(!1)}},P=()=>{k()},A=[{type:"Tsunami",incidents:"15 incidents",trend:"up",status:"7up"},{type:"Cyclone",incidents:"8 incidents",trend:"down",status:"3down"},{type:"Storm Surge",incidents:"23 incidents",trend:"stable",status:"stable"},{type:"Coastal Erosion",incidents:"31 incidents",trend:"up",status:"7up"}],I=[{type:"Tsunami Warning",location:"Chennai Coast",time:"2025-01-15 14:30",severity:"HIGH"},{type:"Storm Surge",location:"Visakhapatnam",time:"2025-01-15 12:45",severity:"MEDIUM"},{type:"Cyclone Alert",location:"Kochi",time:"2025-01-15 10:15",severity:"LOW"}],b=[{id:"reports",title:"Detailed Reports",icon:"",color:"#6366f1"},{id:"geospatial",title:"Geospatial Analysis",icon:"",color:"#06b6d4"},{id:"social",title:"Social Media Analytics",icon:"",color:"#ec4899"},{id:"predictive",title:"Predictive Models",icon:"",color:"#f59e0b"},{id:"resource",title:"Resource Management",icon:"",color:"#10b981"}];return f.jsxs("div",{className:"analytics-dashboard",children:[f.jsx("header",{className:"dashboard-header",children:f.jsxs("div",{className:"header-content",children:[f.jsx("h1",{className:"dashboard-title",children:"Tarang Analytics Dashboard"}),f.jsx("p",{className:"dashboard-subtitle",children:"Comprehensive data insights and trend analysis for ocean hazard monitoring"}),f.jsxs("div",{className:"header-actions",children:[f.jsx("button",{className:"header-button",onClick:()=>t("/"),children:" Home"}),f.jsx("button",{className:"header-button",onClick:P,disabled:e,children:e?" Refreshing...":" Refresh Data"}),f.jsx("button",{className:"header-button",children:" Generate Report"}),f.jsx("button",{className:"header-button",children:" Export Data"})]})]})}),f.jsxs("main",{className:"dashboard-main",children:[f.jsx("section",{className:"stats-overview",children:f.jsxs("div",{className:"stats-grid",children:[f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"stat-value",style:{color:"#10b981"},children:e?"...":r.totalReports}),f.jsx("div",{className:"stat-title",children:"Total Reports"}),f.jsx("div",{className:"stat-change",children:"From Firebase Database"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"stat-value",style:{color:"#f59e0b"},children:e?"...":r.activeAlerts}),f.jsx("div",{className:"stat-title",children:"Active Alerts"}),f.jsx("div",{className:"stat-change",children:"High/Critical Severity"})]}),f.jsxs("div",{className:"stat-card",children:[f.jsx("div",{className:"stat-value",style:{color:"#3b82f6"},children:e?"...":r.socialMediaPosts}),f.jsx("div",{className:"stat-title",children:"Social Media Posts"}),f.jsx("div",{className:"stat-change",children:"Monitored Today"})]})]})}),f.jsxs("section",{className:"social-media-section",children:[f.jsxs("div",{className:"section-header",children:[f.jsx("h2",{className:"section-title",children:" Social Media Monitoring"}),f.jsx("button",{className:"view-full-button",onClick:()=>t("/social-media"),children:"View Full Dashboard "})]}),f.jsxs("div",{className:"social-stats-grid",children:[f.jsxs("div",{className:"social-stat-card",children:[f.jsx("div",{className:"social-stat-value",style:{color:"#6366f1"},children:e?"...":r.socialMediaPosts}),f.jsx("div",{className:"social-stat-title",children:"Total Posts Monitored"})]}),f.jsxs("div",{className:"social-stat-card",children:[f.jsx("div",{className:"social-stat-value",style:{color:"#ef4444"},children:e?"...":o.negative||0}),f.jsx("div",{className:"social-stat-title",children:"Negative Sentiment"})]}),f.jsxs("div",{className:"social-stat-card",children:[f.jsx("div",{className:"social-stat-value",style:{color:"#f59e0b"},children:e?"...":r.highRelevance}),f.jsx("div",{className:"social-stat-title",children:"High Relevance"})]}),f.jsxs("div",{className:"social-stat-card",children:[f.jsx("div",{className:"social-stat-value",style:{color:"#10b981"},children:e?"...":u.length}),f.jsx("div",{className:"social-stat-title",children:"Trending Topics"})]})]}),f.jsxs("div",{className:"social-content",children:[f.jsxs("div",{className:"trending-topics",children:[f.jsx("h3",{className:"subsection-title",children:" Trending Topics"}),f.jsx("div",{className:"topics-list",children:u.map((T,x)=>f.jsxs("div",{className:"topic-item",children:[f.jsx("span",{className:"topic-name",children:T.name}),f.jsxs("span",{className:"topic-posts",children:["(",T.posts,")"]}),f.jsx("span",{className:`topic-sentiment ${T.sentiment}`,children:T.sentiment})]},x))})]}),f.jsxs("div",{className:"high-impact-posts",children:[f.jsx("h3",{className:"subsection-title",children:" Recent High-Impact Posts"}),f.jsx("div",{className:"posts-list",children:e?f.jsx("div",{className:"loading-state",children:"Loading social media data..."}):v.length===0?f.jsx("div",{className:"empty-state",children:"No high-impact posts found"}):v.map((T,x)=>f.jsxs("div",{className:"post-item",children:[f.jsx("div",{className:"post-source",children:T.author}),f.jsx("div",{className:"post-content",children:T.content}),f.jsx("div",{className:"post-meta",children:f.jsxs("span",{className:`post-sentiment ${T.sentiment.label}`,children:[T.sentiment.label.toUpperCase(),"  ",T.platform]})})]},x))})]})]})]}),f.jsxs("div",{className:"analytics-grid",children:[f.jsxs("section",{className:"hazard-trends",children:[f.jsx("h2",{className:"section-title",children:"Hazard Trends Analysis"}),f.jsx("div",{className:"trends-list",children:A.map((T,x)=>f.jsxs("div",{className:"trend-item",children:[f.jsxs("div",{className:"trend-info",children:[f.jsx("div",{className:"trend-type",children:T.type}),f.jsx("div",{className:"trend-incidents",children:T.incidents})]}),f.jsx("div",{className:`trend-indicator ${T.trend}`,children:T.status})]},x))})]}),f.jsxs("section",{className:"critical-alerts",children:[f.jsx("h2",{className:"section-title",children:"Recent Critical Alerts"}),f.jsx("div",{className:"alerts-list",children:I.map((T,x)=>f.jsxs("div",{className:"alert-item",children:[f.jsxs("div",{className:"alert-content",children:[f.jsx("div",{className:"alert-type",children:T.type}),f.jsxs("div",{className:"alert-location",children:[" ",T.location]}),f.jsxs("div",{className:"alert-time",children:[" ",T.time]})]}),f.jsx("div",{className:`alert-severity ${T.severity.toLowerCase()}`,children:T.severity})]},x))})]})]}),f.jsxs("section",{className:"analysis-tools",children:[f.jsx("h2",{className:"section-title",children:"Data Analysis Tools"}),f.jsx("div",{className:"tools-grid",children:b.map(T=>f.jsxs("div",{className:"tool-card",children:[f.jsx("div",{className:"tool-icon",style:{color:T.color},children:T.icon}),f.jsx("div",{className:"tool-title",children:T.title})]},T.id))})]})]})]})},ZV=()=>f.jsxs("div",{className:"officer-dashboard",children:[f.jsx(mA,{role:"officer"}),f.jsxs("div",{className:"dashboard-content",children:[f.jsx("h2",{children:"Officer Dashboard"}),f.jsx("p",{children:"Welcome to your dashboard."})]})]}),QV=()=>{const t=Un(),[e,n]=U.useState({platform:"All Platforms",sentiment:"All Sentiments",timeframe:"Last 24 Hours",relevance:50}),r={positive:0,negative:4,neutral:2,total:6},i=[{name:"cyclone",posts:3,sentiment:"negative"}],o=[{location:"Chennai",activity:1},{location:"Kerala",activity:1},{location:"Tamil nadu",activity:1}],u=[{id:1,platform:"@TheHindu",verified:!0,content:"Cyclone Alert: IMD Issues Warning for East Coast Indian Meteorological Department has issued a cyclone warning for the east coast. Fishermen advised not to venture into the sea.",sentiment:"NEGATIVE",timestamp:"1h ago",engagement:{likes:456,shares:123,comments:89},relevance:"95%"},{id:2,platform:"@IndiaMetDept",verified:!0,content:"IMD issues cyclone warning for Bay of Bengal. Fishermen advised to return to shore immediately. #CycloneAlert #BayOfBengal",sentiment:"NEGATIVE",timestamp:"1h ago",engagement:{likes:567,shares:234,comments:89},relevance:"90%"},{id:3,platform:"@ChennaiWeatherLive",verified:!0,content:"High waves reported at Chennai Marina Beach. Coast Guard advisory issued for fishing vessels. Wave height: 3.5m #ChennaiWeather #MarineAlert",sentiment:"NEGATIVE",timestamp:"10m ago",engagement:{likes:245,shares:67,comments:23},relevance:"83%"},{id:4,platform:"@CoastalResident",verified:!1,content:"Cyclone approaching Bay of Bengal - preparation tips needed Looking for advice on cyclone preparation for coastal areas. First time dealing with this.",sentiment:"NEUTRAL",timestamp:"3h ago",engagement:{likes:76,shares:0,comments:21},relevance:"82%"},{id:5,platform:"@TimesofIndia",verified:!0,content:"High Wave Alert Along Kerala Coast Kerala State Disaster Management Authority issues high wave alert. Coast Guard residents advised to stay away from beaches.",sentiment:"NEGATIVE",timestamp:"1h ago",engagement:{likes:234,shares:67,comments:34},relevance:"70%"},{id:6,platform:"@WeatherWatcher2024",verified:!1,content:"Severe weather conditions reported along Tamil Nadu coast. Any updates from locals?",sentiment:"NEUTRAL",timestamp:"2h ago",engagement:{likes:34,shares:0,comments:12},relevance:"70%"}];return f.jsxs("div",{className:"social-media-monitoring",children:[f.jsx("header",{className:"monitoring-header",children:f.jsxs("div",{className:"header-content",children:[f.jsxs("div",{className:"header-info",children:[f.jsx("h1",{className:"page-title",children:" Social Media Monitoring"}),f.jsx("p",{className:"page-subtitle",children:"Real-time social media analysis for ocean hazard detection"})]}),f.jsxs("div",{className:"header-actions",children:[f.jsx("button",{className:"header-button",onClick:()=>t("/analyst"),children:" Back to Analytics"}),f.jsx("button",{className:"refresh-button",children:" Refresh"})]})]})}),f.jsxs("main",{className:"monitoring-main",children:[f.jsx("section",{className:"filters-section",children:f.jsxs("div",{className:"filters-grid",children:[f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Platform"}),f.jsxs("select",{value:e.platform,onChange:h=>n({...e,platform:h.target.value}),children:[f.jsx("option",{children:"All Platforms"}),f.jsx("option",{children:"Twitter"}),f.jsx("option",{children:"Facebook"}),f.jsx("option",{children:"Instagram"})]})]}),f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Sentiment"}),f.jsxs("select",{value:e.sentiment,onChange:h=>n({...e,sentiment:h.target.value}),children:[f.jsx("option",{children:"All Sentiments"}),f.jsx("option",{children:"Positive"}),f.jsx("option",{children:"Negative"}),f.jsx("option",{children:"Neutral"})]})]}),f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Timeframe"}),f.jsxs("select",{value:e.timeframe,onChange:h=>n({...e,timeframe:h.target.value}),children:[f.jsx("option",{children:"Last 24 Hours"}),f.jsx("option",{children:"Last 7 Days"}),f.jsx("option",{children:"Last 30 Days"})]})]}),f.jsxs("div",{className:"filter-group",children:[f.jsxs("label",{children:["Min Relevance: ",e.relevance,"%"]}),f.jsx("input",{type:"range",min:"0",max:"100",value:e.relevance,onChange:h=>n({...e,relevance:h.target.value}),className:"relevance-slider"})]})]})}),f.jsxs("section",{className:"analytics-grid",children:[f.jsxs("div",{className:"analytics-card sentiment-analysis",children:[f.jsx("h3",{className:"card-title",children:"Sentiment Analysis"}),f.jsxs("div",{className:"sentiment-stats",children:[f.jsxs("div",{className:"sentiment-item positive",children:[f.jsx("span",{className:"sentiment-label",children:" Positive"}),f.jsx("span",{className:"sentiment-value",children:r.positive})]}),f.jsxs("div",{className:"sentiment-item negative",children:[f.jsx("span",{className:"sentiment-label",children:" Negative"}),f.jsx("span",{className:"sentiment-value",children:r.negative})]}),f.jsxs("div",{className:"sentiment-item neutral",children:[f.jsx("span",{className:"sentiment-label",children:" Neutral"}),f.jsx("span",{className:"sentiment-value",children:r.neutral})]}),f.jsxs("div",{className:"sentiment-total",children:[f.jsx("span",{className:"total-label",children:"Total Posts"}),f.jsx("span",{className:"total-value",children:r.total})]})]})]}),f.jsxs("div",{className:"analytics-card trending-topics",children:[f.jsx("h3",{className:"card-title",children:" Trending Topics"}),f.jsx("div",{className:"topics-list",children:i.map((h,p)=>f.jsxs("div",{className:"topic-item",children:[f.jsx("span",{className:"topic-name",children:h.name}),f.jsxs("span",{className:"topic-posts",children:[h.posts," posts"]}),f.jsx("span",{className:`topic-sentiment ${h.sentiment}`,children:h.sentiment})]},p))})]}),f.jsxs("div",{className:"analytics-card geographic-activity",children:[f.jsx("h3",{className:"card-title",children:" Geographic Activity"}),f.jsx("div",{className:"activity-list",children:o.map((h,p)=>f.jsxs("div",{className:"activity-item",children:[f.jsx("span",{className:"location-name",children:h.location}),f.jsx("span",{className:"activity-indicator",children:""}),f.jsx("span",{className:"activity-count",children:h.activity})]},p))})]})]}),f.jsxs("section",{className:"posts-section",children:[f.jsxs("h2",{className:"section-title",children:["Social Media Posts (",u.length,")"]}),f.jsx("div",{className:"posts-list",children:u.map(h=>f.jsxs("div",{className:"post-card",children:[f.jsxs("div",{className:"post-header",children:[f.jsxs("div",{className:"post-source",children:[f.jsx("span",{className:"platform-name",children:h.platform}),h.verified&&f.jsx("span",{className:"verified-badge",children:""})]}),f.jsxs("div",{className:"post-meta",children:[f.jsx("span",{className:`sentiment-badge ${h.sentiment.toLowerCase()}`,children:h.sentiment}),f.jsx("span",{className:"timestamp",children:h.timestamp})]})]}),f.jsx("div",{className:"post-content",children:h.content}),f.jsxs("div",{className:"post-footer",children:[f.jsxs("div",{className:"engagement-stats",children:[f.jsxs("span",{children:[" ",h.engagement.likes]}),f.jsxs("span",{children:[" ",h.engagement.shares]}),f.jsxs("span",{children:[" ",h.engagement.comments]})]}),f.jsxs("div",{className:"relevance-score",children:["Relevance: ",h.relevance,f.jsx("button",{className:"view-button",children:"View "})]})]})]},h.id))})]})]})]})},JV=()=>{const t=Un(),[e,n]=U.useState(!1),[r,i]=U.useState({type:"Monetary",amount:"500",description:"Emergency relief donation of 500",anonymous:!1,receipt:!0}),o=["500","1000","2000","5000"],a=[{id:"relief-supplies",title:"Relief Supplies",description:"Food, water, medicines",icon:"",color:"#ec4899"},{id:"equipment",title:"Equipment",description:"Rescue gear, communication devices",icon:"",color:"#3b82f6"},{id:"services",title:"Services",description:"Transportation, technical support",icon:"",color:"#8b5cf6"}],u=()=>{console.log("Donation submitted:",r),n(!1)};return f.jsxs("div",{className:"donation-management",children:[f.jsx("header",{className:"donation-header",children:f.jsxs("div",{className:"header-content",children:[f.jsxs("div",{className:"header-info",children:[f.jsx("h1",{className:"page-title",children:" Make a Donation"}),f.jsx("p",{className:"page-subtitle",children:"Support emergency response through your generosity"})]}),f.jsx("div",{className:"header-actions",children:f.jsx("button",{className:"header-button",onClick:()=>t("/"),children:" Home"})})]})}),f.jsx("main",{className:"donation-main",children:f.jsx("section",{className:"quick-donation-section",children:f.jsxs("div",{className:"donation-grid",children:[f.jsxs("div",{className:"monetary-donations",children:[f.jsx("h3",{className:"section-title",children:" Quick Monetary Donation"}),f.jsxs("div",{className:"amount-buttons",children:[o.map(h=>f.jsx("button",{className:"amount-button",children:h},h)),f.jsx("button",{className:"custom-amount-button",onClick:()=>n(!0),children:"Custom Amount"})]})]}),f.jsxs("div",{className:"material-donations",children:[f.jsx("h3",{className:"section-title",children:" Donate Supplies or Services"}),f.jsx("div",{className:"material-grid",children:a.map(h=>f.jsxs("div",{className:"material-card",onClick:()=>n(!0),children:[f.jsx("div",{className:"material-icon",style:{color:h.color},children:h.icon}),f.jsxs("div",{className:"material-info",children:[f.jsx("h4",{className:"material-title",children:h.title}),f.jsx("p",{className:"material-description",children:h.description})]})]},h.id))})]})]})})}),e&&f.jsx("div",{className:"modal-overlay",onClick:()=>n(!1),children:f.jsxs("div",{className:"donation-modal",onClick:h=>h.stopPropagation(),children:[f.jsxs("div",{className:"modal-header",children:[f.jsx("h3",{children:" Make a Donation"}),f.jsx("button",{className:"close-button",onClick:()=>n(!1),children:""})]}),f.jsxs("div",{className:"modal-content",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Donation Type"}),f.jsxs("select",{value:r.type,onChange:h=>i({...r,type:h.target.value}),children:[f.jsx("option",{children:"Monetary"}),f.jsx("option",{children:"Supplies"}),f.jsx("option",{children:"Services"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Amount"}),f.jsx("input",{type:"text",value:r.amount,onChange:h=>i({...r,amount:h.target.value}),placeholder:"500"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Description"}),f.jsx("textarea",{value:r.description,onChange:h=>i({...r,description:h.target.value}),placeholder:"Emergency relief donation of 500",rows:"3"})]}),f.jsxs("div",{className:"form-checkboxes",children:[f.jsxs("label",{className:"checkbox-label",children:[f.jsx("input",{type:"checkbox",checked:r.anonymous,onChange:h=>i({...r,anonymous:h.target.checked})}),"Make this donation anonymous"]}),f.jsxs("label",{className:"checkbox-label",children:[f.jsx("input",{type:"checkbox",checked:r.receipt,onChange:h=>i({...r,receipt:h.target.checked})}),"Request tax receipt"]})]})]}),f.jsxs("div",{className:"modal-actions",children:[f.jsx("button",{className:"cancel-button",onClick:()=>n(!1),children:"Cancel"}),f.jsx("button",{className:"donate-now-button",onClick:u,children:" Donate Now"})]})]})})]})},XV=()=>f.jsxs("div",{className:"donation-container",children:[f.jsx("h2",{children:"Donation Page"}),f.jsx("p",{children:"Here you can manage donations."})]}),YV=()=>{const t=Un(),{registerVolunteer:e}=Pr(),[n,r]=U.useState(!1),[i,o]=U.useState({fullName:"",email:"",phone:"",password:"",skills:"",availability:"Weekends"}),a=async h=>{h.preventDefault(),r(!0);try{await e(i),kt.success("Volunteer registration successful!"),t("/login")}catch(p){kt.error(p.message||"Failed to register volunteer.")}finally{r(!1)}},u=h=>{const{name:p,value:_}=h.target;o(v=>({...v,[p]:_}))};return f.jsx("div",{className:"volunteer-registration",children:f.jsx("div",{className:"registration-container",children:f.jsxs("div",{className:"registration-card",children:[f.jsxs("div",{className:"registration-header",children:[f.jsx("button",{className:"back-button",onClick:()=>t("/"),children:" Back to Home"}),f.jsx("h1",{className:"registration-title",children:"Volunteer Registration"}),f.jsx("p",{className:"registration-subtitle",children:"Join our community of ocean hazard response volunteers"})]}),f.jsxs("form",{className:"registration-form",onSubmit:a,children:[f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"fullName",children:"Full Name *"}),f.jsx("input",{type:"text",id:"fullName",name:"fullName",value:i.fullName,onChange:u,placeholder:"Enter your full name",required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"email",children:"Email Address *"}),f.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:u,placeholder:"Enter your email",required:!0})]})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"password",children:"Password *"}),f.jsx("input",{type:"password",id:"password",name:"password",value:i.password,onChange:u,placeholder:"Enter your password",required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"phone",children:"Phone Number *"}),f.jsx("input",{type:"tel",id:"phone",name:"phone",value:i.phone,onChange:u,placeholder:"Enter your phone",required:!0})]})]}),f.jsxs("div",{className:"form-row",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"skills",children:"Skills & Expertise"}),f.jsx("textarea",{id:"skills",name:"skills",value:i.skills,onChange:u,placeholder:"e.g., First Aid, Swimming, Communication, etc.",rows:"3"})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"availability",children:"Availability"}),f.jsxs("select",{id:"availability",name:"availability",value:i.availability,onChange:u,children:[f.jsx("option",{value:"Weekends",children:"Weekends"}),f.jsx("option",{value:"Weekdays",children:"Weekdays"}),f.jsx("option",{value:"Full-time",children:"Full-time"}),f.jsx("option",{value:"Emergency Only",children:"Emergency Only"})]})]})]}),f.jsx("button",{type:"submit",className:"register-button",disabled:n,children:n?"Registering...":"Register as Volunteer"})]}),f.jsx("div",{className:"registration-footer",children:f.jsxs("p",{children:["Already registered? ",f.jsx("button",{onClick:()=>t("/login"),className:"sign-in-link",children:"Sign In"})]})})]})})})},eF=()=>{const t=Un(),{register:e}=Pr(),[n,r]=U.useState({fullName:"",email:"",password:"",confirmPassword:"",phone:"",role:"citizen",location:{state:"",district:"",coastalArea:""},preferences:{alerts:!0,newsletter:!0,smsNotifications:!1}}),[i,o]=U.useState(!1),[a,u]=U.useState({}),h=["Andhra Pradesh","Gujarat","Karnataka","Kerala","Maharashtra","Odisha","Tamil Nadu","West Bengal","Goa","Puducherry"],p=E=>{const{name:k,value:P,type:A,checked:I}=E.target;if(k.includes(".")){const[b,T]=k.split(".");r(x=>({...x,[b]:{...x[b],[T]:A==="checkbox"?I:P}}))}else r(b=>({...b,[k]:A==="checkbox"?I:P}))},_=()=>{const E={};return n.fullName.trim()||(E.fullName="Full name is required"),(!n.email.trim()||!n.email.includes("@"))&&(E.email="A valid email is required"),n.password.length<6&&(E.password="Password must be at least 6 characters"),n.password!==n.confirmPassword&&(E.confirmPassword="Passwords do not match"),n.phone.trim()||(E.phone="Phone number is required"),n.location.state||(E.state="State is required"),u(E),Object.keys(E).length===0},v=async E=>{if(E.preventDefault(),!!_()){o(!0);try{await e({...n,userId:`user_${Date.now()}`,registrationDate:new Date().toISOString()}),kt.success("Account created successfully!"),t("/login")}catch(k){kt.error(k.message||"Failed to create account.")}finally{o(!1)}}};return f.jsx("div",{className:"user-registration-page",children:f.jsxs("div",{className:"registration-container",children:[f.jsxs("div",{className:"registration-header",children:[f.jsx("h1",{children:" Create Your Citizen Account"}),f.jsx("p",{children:"Join the Tarang network to report ocean hazards and receive safety alerts."})]}),f.jsxs("form",{className:"registration-form",onSubmit:v,children:[f.jsxs("section",{className:"form-section",children:[f.jsx("h3",{children:"Personal Information"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"fullName",children:"Full Name *"}),f.jsx("input",{type:"text",id:"fullName",name:"fullName",value:n.fullName,onChange:p,required:!0}),a.fullName&&f.jsx("span",{className:"error-text",children:a.fullName})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"email",children:"Email Address *"}),f.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:p,required:!0}),a.email&&f.jsx("span",{className:"error-text",children:a.email})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"phone",children:"Phone Number *"}),f.jsx("input",{type:"tel",id:"phone",name:"phone",value:n.phone,onChange:p,required:!0}),a.phone&&f.jsx("span",{className:"error-text",children:a.phone})]})]}),f.jsxs("section",{className:"form-section",children:[f.jsx("h3",{children:"Security"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"password",children:"Password *"}),f.jsx("input",{type:"password",id:"password",name:"password",value:n.password,onChange:p,required:!0}),a.password&&f.jsx("span",{className:"error-text",children:a.password})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password *"}),f.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:p,required:!0}),a.confirmPassword&&f.jsx("span",{className:"error-text",children:a.confirmPassword})]})]}),f.jsxs("section",{className:"form-section",children:[f.jsx("h3",{children:"Location Information"}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"state",children:"State/Union Territory *"}),f.jsxs("select",{id:"state",name:"location.state",value:n.location.state,onChange:p,required:!0,children:[f.jsx("option",{value:"",children:"Select your state"}),h.map(E=>f.jsx("option",{value:E,children:E},E))]}),a.state&&f.jsx("span",{className:"error-text",children:a.state})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"district",children:"District"}),f.jsx("input",{type:"text",id:"district",name:"location.district",value:n.location.district,onChange:p})]})]}),f.jsxs("div",{className:"form-actions",children:[f.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>t("/login"),children:"Cancel"}),f.jsx("button",{type:"submit",className:"btn-primary",disabled:i,children:i?"Creating Account...":"Create Account"})]})]})]})})},tF=()=>{const t=Un(),{login:e,loading:n}=Pr(),[r,i]=U.useState({email:"",password:"",rememberMe:!1}),[o,a]=U.useState(!1),u=[{type:"Admin",email:"admin@oceanhazard.com",description:"Full system access & management",icon:"",password:"demo123"},{type:"Data Analyst",email:"analyst@oceanhazard.com",description:"Analytics, reports & social media monitoring",icon:"",password:"demo123"},{type:"Official",email:"official@oceanhazard.com",description:"Emergency response & coordination",icon:"",password:"demo123"},{type:"Citizen",email:"citizen@oceanhazard.com",description:"Report hazards & receive alerts",icon:"",password:"demo123"}],h=async v=>{if(v.preventDefault(),!r.email||!r.password){kt.error("Please enter both email and password");return}a(!0);try{const E=await e(r.email,r.password);t("/"),kt.success(`Welcome back, ${E.user.fullName}!`)}catch(E){kt.error(E.message)}finally{a(!1)}},p=v=>{const{name:E,value:k,type:P,checked:A}=v.target;i(I=>({...I,[E]:P==="checkbox"?A:k}))},_=async v=>{i({email:v.email,password:v.password,rememberMe:!1}),a(!0);try{const E=await e(v.email,v.password);t("/"),kt.success(`Logged in as ${v.type}`)}catch(E){kt.error(E.message)}finally{a(!1)}};return f.jsx("div",{className:"login-page",children:f.jsx("div",{className:"login-container",children:f.jsxs("div",{className:"login-card",children:[f.jsxs("div",{className:"login-header",children:[f.jsx("h1",{className:"login-title",children:"Welcome Back"}),f.jsx("p",{className:"login-subtitle",children:"Sign in to access your ocean safety dashboard"})]}),f.jsxs("form",{className:"login-form",onSubmit:h,children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"email",children:"Email Address"}),f.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:p,placeholder:"Enter your email",required:!0})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{htmlFor:"password",children:"Password"}),f.jsx("input",{type:"password",id:"password",name:"password",value:r.password,onChange:p,placeholder:"Enter your password",required:!0})]}),f.jsxs("div",{className:"form-options",children:[f.jsxs("label",{className:"checkbox-label",children:[f.jsx("input",{type:"checkbox",name:"rememberMe",checked:r.rememberMe,onChange:p}),"Remember me"]}),f.jsx("a",{href:"#",className:"forgot-password",children:"Forgot Password?"})]}),f.jsx("button",{type:"submit",className:"signin-button",disabled:o||n,children:o||n?"Signing In...":"Sign In"})]}),f.jsx("div",{className:"login-divider",children:f.jsx("span",{children:"Don't have an account?"})}),f.jsxs("div",{className:"account-options",children:[f.jsx("button",{className:"create-account-button",onClick:()=>t("/register"),children:"Create General Account"}),f.jsx("button",{className:"volunteer-register-button",onClick:()=>t("/volunteer-registration"),children:"Register as Volunteer"})]}),f.jsxs("div",{className:"demo-section",children:[f.jsx("h3",{className:"demo-title",children:"Demo Accounts"}),f.jsx("p",{className:"demo-subtitle",children:"Use these credentials for testing if configured in your SugaDesk"}),f.jsx("div",{className:"demo-accounts",children:u.map((v,E)=>f.jsxs("div",{className:"demo-account",onClick:()=>_(v),children:[f.jsx("div",{className:"demo-icon",children:v.icon}),f.jsxs("div",{className:"demo-info",children:[f.jsx("div",{className:"demo-type",children:v.type}),f.jsx("div",{className:"demo-email",children:v.email}),f.jsx("div",{className:"demo-description",children:v.description})]})]},E))})]})]})})})};function _A(t,e){const n=U.useRef(e);U.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function nF(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const rF=1;function iF(t){return Object.freeze({__version:rF,map:t})}function vA(t,e){return Object.freeze({...t,...e})}const yA=U.createContext(null),wA=yA.Provider;function Af(){const t=U.useContext(yA);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function EA(t){function e(n,r){const{instance:i,context:o}=t(n).current;return U.useImperativeHandle(r,()=>i),n.children==null?null:lu.createElement(wA,{value:o},n.children)}return U.forwardRef(e)}function sF(t){function e(n,r){const[i,o]=U.useState(!1),{instance:a}=t(n,o).current;U.useImperativeHandle(r,()=>a),U.useEffect(function(){i&&a.update()},[a,i,n.children]);const u=a._contentNode;return u?qT.createPortal(n.children,u):null}return U.forwardRef(e)}function oF(t){function e(n,r){const{instance:i}=t(n).current;return U.useImperativeHandle(r,()=>i),null}return U.forwardRef(e)}function uv(t,e){const n=U.useRef();U.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function Pf(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function aF(t,e){return function(r,i){const o=Af(),a=t(Pf(r,o),o);return _A(o.map,r.attribution),uv(a.current,r.eventHandlers),e(a.current,o,r,i),a}}var rg={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,r){r(e)})(XA,function(n){var r="1.9.4";function i(s){var l,d,m,y;for(d=1,m=arguments.length;d<m;d++){y=arguments[d];for(l in y)s[l]=y[l]}return s}var o=Object.create||function(){function s(){}return function(l){return s.prototype=l,new s}}();function a(s,l){var d=Array.prototype.slice;if(s.bind)return s.bind.apply(s,d.call(arguments,1));var m=d.call(arguments,2);return function(){return s.apply(l,m.length?m.concat(d.call(arguments)):arguments)}}var u=0;function h(s){return"_leaflet_id"in s||(s._leaflet_id=++u),s._leaflet_id}function p(s,l,d){var m,y,S,j;return j=function(){m=!1,y&&(S.apply(d,y),y=!1)},S=function(){m?y=arguments:(s.apply(d,arguments),setTimeout(j,l),m=!0)},S}function _(s,l,d){var m=l[1],y=l[0],S=m-y;return s===m&&d?s:((s-y)%S+S)%S+y}function v(){return!1}function E(s,l){if(l===!1)return s;var d=Math.pow(10,l===void 0?6:l);return Math.round(s*d)/d}function k(s){return s.trim?s.trim():s.replace(/^\s+|\s+$/g,"")}function P(s){return k(s).split(/\s+/)}function A(s,l){Object.prototype.hasOwnProperty.call(s,"options")||(s.options=s.options?o(s.options):{});for(var d in l)s.options[d]=l[d];return s.options}function I(s,l,d){var m=[];for(var y in s)m.push(encodeURIComponent(d?y.toUpperCase():y)+"="+encodeURIComponent(s[y]));return(!l||l.indexOf("?")===-1?"?":"&")+m.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function T(s,l){return s.replace(b,function(d,m){var y=l[m];if(y===void 0)throw new Error("No value provided for variable "+d);return typeof y=="function"&&(y=y(l)),y})}var x=Array.isArray||function(s){return Object.prototype.toString.call(s)==="[object Array]"};function V(s,l){for(var d=0;d<s.length;d++)if(s[d]===l)return d;return-1}var G="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Z(s){return window["webkit"+s]||window["moz"+s]||window["ms"+s]}var N=0;function R(s){var l=+new Date,d=Math.max(0,16-(l-N));return N=l+d,window.setTimeout(s,d)}var O=window.requestAnimationFrame||Z("RequestAnimationFrame")||R,D=window.cancelAnimationFrame||Z("CancelAnimationFrame")||Z("CancelRequestAnimationFrame")||function(s){window.clearTimeout(s)};function F(s,l,d){if(d&&O===R)s.call(l);else return O.call(window,a(s,l))}function z(s){s&&D.call(window,s)}var M={__proto__:null,extend:i,create:o,bind:a,get lastId(){return u},stamp:h,throttle:p,wrapNum:_,falseFn:v,formatNum:E,trim:k,splitWords:P,setOptions:A,getParamString:I,template:T,isArray:x,indexOf:V,emptyImageUrl:G,requestFn:O,cancelFn:D,requestAnimFrame:F,cancelAnimFrame:z};function Me(){}Me.extend=function(s){var l=function(){A(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},d=l.__super__=this.prototype,m=o(d);m.constructor=l,l.prototype=m;for(var y in this)Object.prototype.hasOwnProperty.call(this,y)&&y!=="prototype"&&y!=="__super__"&&(l[y]=this[y]);return s.statics&&i(l,s.statics),s.includes&&(xn(s.includes),i.apply(null,[m].concat(s.includes))),i(m,s),delete m.statics,delete m.includes,m.options&&(m.options=d.options?o(d.options):{},i(m.options,s.options)),m._initHooks=[],m.callInitHooks=function(){if(!this._initHooksCalled){d.callInitHooks&&d.callInitHooks.call(this),this._initHooksCalled=!0;for(var S=0,j=m._initHooks.length;S<j;S++)m._initHooks[S].call(this)}},l},Me.include=function(s){var l=this.prototype.options;return i(this.prototype,s),s.options&&(this.prototype.options=l,this.mergeOptions(s.options)),this},Me.mergeOptions=function(s){return i(this.prototype.options,s),this},Me.addInitHook=function(s){var l=Array.prototype.slice.call(arguments,1),d=typeof s=="function"?s:function(){this[s].apply(this,l)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(d),this};function xn(s){if(!(typeof L>"u"||!L||!L.Mixin)){s=x(s)?s:[s];for(var l=0;l<s.length;l++)s[l]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var je={on:function(s,l,d){if(typeof s=="object")for(var m in s)this._on(m,s[m],l);else{s=P(s);for(var y=0,S=s.length;y<S;y++)this._on(s[y],l,d)}return this},off:function(s,l,d){if(!arguments.length)delete this._events;else if(typeof s=="object")for(var m in s)this._off(m,s[m],l);else{s=P(s);for(var y=arguments.length===1,S=0,j=s.length;S<j;S++)y?this._off(s[S]):this._off(s[S],l,d)}return this},_on:function(s,l,d,m){if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}if(this._listens(s,l,d)===!1){d===this&&(d=void 0);var y={fn:l,ctx:d};m&&(y.once=!0),this._events=this._events||{},this._events[s]=this._events[s]||[],this._events[s].push(y)}},_off:function(s,l,d){var m,y,S;if(this._events&&(m=this._events[s],!!m)){if(arguments.length===1){if(this._firingCount)for(y=0,S=m.length;y<S;y++)m[y].fn=v;delete this._events[s];return}if(typeof l!="function"){console.warn("wrong listener type: "+typeof l);return}var j=this._listens(s,l,d);if(j!==!1){var $=m[j];this._firingCount&&($.fn=v,this._events[s]=m=m.slice()),m.splice(j,1)}}},fire:function(s,l,d){if(!this.listens(s,d))return this;var m=i({},l,{type:s,target:this,sourceTarget:l&&l.sourceTarget||this});if(this._events){var y=this._events[s];if(y){this._firingCount=this._firingCount+1||1;for(var S=0,j=y.length;S<j;S++){var $=y[S],H=$.fn;$.once&&this.off(s,H,$.ctx),H.call($.ctx||this,m)}this._firingCount--}}return d&&this._propagateEvent(m),this},listens:function(s,l,d,m){typeof s!="string"&&console.warn('"string" type argument expected');var y=l;typeof l!="function"&&(m=!!l,y=void 0,d=void 0);var S=this._events&&this._events[s];if(S&&S.length&&this._listens(s,y,d)!==!1)return!0;if(m){for(var j in this._eventParents)if(this._eventParents[j].listens(s,l,d,m))return!0}return!1},_listens:function(s,l,d){if(!this._events)return!1;var m=this._events[s]||[];if(!l)return!!m.length;d===this&&(d=void 0);for(var y=0,S=m.length;y<S;y++)if(m[y].fn===l&&m[y].ctx===d)return y;return!1},once:function(s,l,d){if(typeof s=="object")for(var m in s)this._on(m,s[m],l,!0);else{s=P(s);for(var y=0,S=s.length;y<S;y++)this._on(s[y],l,d,!0)}return this},addEventParent:function(s){return this._eventParents=this._eventParents||{},this._eventParents[h(s)]=s,this},removeEventParent:function(s){return this._eventParents&&delete this._eventParents[h(s)],this},_propagateEvent:function(s){for(var l in this._eventParents)this._eventParents[l].fire(s.type,i({layer:s.target,propagatedFrom:s.target},s),!0)}};je.addEventListener=je.on,je.removeEventListener=je.clearAllEventListeners=je.off,je.addOneTimeEventListener=je.once,je.fireEvent=je.fire,je.hasEventListeners=je.listens;var Tt=Me.extend(je);function K(s,l,d){this.x=d?Math.round(s):s,this.y=d?Math.round(l):l}var ce=Math.trunc||function(s){return s>0?Math.floor(s):Math.ceil(s)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(s){return this.clone()._add(ee(s))},_add:function(s){return this.x+=s.x,this.y+=s.y,this},subtract:function(s){return this.clone()._subtract(ee(s))},_subtract:function(s){return this.x-=s.x,this.y-=s.y,this},divideBy:function(s){return this.clone()._divideBy(s)},_divideBy:function(s){return this.x/=s,this.y/=s,this},multiplyBy:function(s){return this.clone()._multiplyBy(s)},_multiplyBy:function(s){return this.x*=s,this.y*=s,this},scaleBy:function(s){return new K(this.x*s.x,this.y*s.y)},unscaleBy:function(s){return new K(this.x/s.x,this.y/s.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ce(this.x),this.y=ce(this.y),this},distanceTo:function(s){s=ee(s);var l=s.x-this.x,d=s.y-this.y;return Math.sqrt(l*l+d*d)},equals:function(s){return s=ee(s),s.x===this.x&&s.y===this.y},contains:function(s){return s=ee(s),Math.abs(s.x)<=Math.abs(this.x)&&Math.abs(s.y)<=Math.abs(this.y)},toString:function(){return"Point("+E(this.x)+", "+E(this.y)+")"}};function ee(s,l,d){return s instanceof K?s:x(s)?new K(s[0],s[1]):s==null?s:typeof s=="object"&&"x"in s&&"y"in s?new K(s.x,s.y):new K(s,l,d)}function le(s,l){if(s)for(var d=l?[s,l]:s,m=0,y=d.length;m<y;m++)this.extend(d[m])}le.prototype={extend:function(s){var l,d;if(!s)return this;if(s instanceof K||typeof s[0]=="number"||"x"in s)l=d=ee(s);else if(s=de(s),l=s.min,d=s.max,!l||!d)return this;return!this.min&&!this.max?(this.min=l.clone(),this.max=d.clone()):(this.min.x=Math.min(l.x,this.min.x),this.max.x=Math.max(d.x,this.max.x),this.min.y=Math.min(l.y,this.min.y),this.max.y=Math.max(d.y,this.max.y)),this},getCenter:function(s){return ee((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,s)},getBottomLeft:function(){return ee(this.min.x,this.max.y)},getTopRight:function(){return ee(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(s){var l,d;return typeof s[0]=="number"||s instanceof K?s=ee(s):s=de(s),s instanceof le?(l=s.min,d=s.max):l=d=s,l.x>=this.min.x&&d.x<=this.max.x&&l.y>=this.min.y&&d.y<=this.max.y},intersects:function(s){s=de(s);var l=this.min,d=this.max,m=s.min,y=s.max,S=y.x>=l.x&&m.x<=d.x,j=y.y>=l.y&&m.y<=d.y;return S&&j},overlaps:function(s){s=de(s);var l=this.min,d=this.max,m=s.min,y=s.max,S=y.x>l.x&&m.x<d.x,j=y.y>l.y&&m.y<d.y;return S&&j},isValid:function(){return!!(this.min&&this.max)},pad:function(s){var l=this.min,d=this.max,m=Math.abs(l.x-d.x)*s,y=Math.abs(l.y-d.y)*s;return de(ee(l.x-m,l.y-y),ee(d.x+m,d.y+y))},equals:function(s){return s?(s=de(s),this.min.equals(s.getTopLeft())&&this.max.equals(s.getBottomRight())):!1}};function de(s,l){return!s||s instanceof le?s:new le(s,l)}function xe(s,l){if(s)for(var d=l?[s,l]:s,m=0,y=d.length;m<y;m++)this.extend(d[m])}xe.prototype={extend:function(s){var l=this._southWest,d=this._northEast,m,y;if(s instanceof Se)m=s,y=s;else if(s instanceof xe){if(m=s._southWest,y=s._northEast,!m||!y)return this}else return s?this.extend(ve(s)||be(s)):this;return!l&&!d?(this._southWest=new Se(m.lat,m.lng),this._northEast=new Se(y.lat,y.lng)):(l.lat=Math.min(m.lat,l.lat),l.lng=Math.min(m.lng,l.lng),d.lat=Math.max(y.lat,d.lat),d.lng=Math.max(y.lng,d.lng)),this},pad:function(s){var l=this._southWest,d=this._northEast,m=Math.abs(l.lat-d.lat)*s,y=Math.abs(l.lng-d.lng)*s;return new xe(new Se(l.lat-m,l.lng-y),new Se(d.lat+m,d.lng+y))},getCenter:function(){return new Se((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Se(this.getNorth(),this.getWest())},getSouthEast:function(){return new Se(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(s){typeof s[0]=="number"||s instanceof Se||"lat"in s?s=ve(s):s=be(s);var l=this._southWest,d=this._northEast,m,y;return s instanceof xe?(m=s.getSouthWest(),y=s.getNorthEast()):m=y=s,m.lat>=l.lat&&y.lat<=d.lat&&m.lng>=l.lng&&y.lng<=d.lng},intersects:function(s){s=be(s);var l=this._southWest,d=this._northEast,m=s.getSouthWest(),y=s.getNorthEast(),S=y.lat>=l.lat&&m.lat<=d.lat,j=y.lng>=l.lng&&m.lng<=d.lng;return S&&j},overlaps:function(s){s=be(s);var l=this._southWest,d=this._northEast,m=s.getSouthWest(),y=s.getNorthEast(),S=y.lat>l.lat&&m.lat<d.lat,j=y.lng>l.lng&&m.lng<d.lng;return S&&j},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(s,l){return s?(s=be(s),this._southWest.equals(s.getSouthWest(),l)&&this._northEast.equals(s.getNorthEast(),l)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function be(s,l){return s instanceof xe?s:new xe(s,l)}function Se(s,l,d){if(isNaN(s)||isNaN(l))throw new Error("Invalid LatLng object: ("+s+", "+l+")");this.lat=+s,this.lng=+l,d!==void 0&&(this.alt=+d)}Se.prototype={equals:function(s,l){if(!s)return!1;s=ve(s);var d=Math.max(Math.abs(this.lat-s.lat),Math.abs(this.lng-s.lng));return d<=(l===void 0?1e-9:l)},toString:function(s){return"LatLng("+E(this.lat,s)+", "+E(this.lng,s)+")"},distanceTo:function(s){return or.distance(this,ve(s))},wrap:function(){return or.wrapLatLng(this)},toBounds:function(s){var l=180*s/40075017,d=l/Math.cos(Math.PI/180*this.lat);return be([this.lat-l,this.lng-d],[this.lat+l,this.lng+d])},clone:function(){return new Se(this.lat,this.lng,this.alt)}};function ve(s,l,d){return s instanceof Se?s:x(s)&&typeof s[0]!="object"?s.length===3?new Se(s[0],s[1],s[2]):s.length===2?new Se(s[0],s[1]):null:s==null?s:typeof s=="object"&&"lat"in s?new Se(s.lat,"lng"in s?s.lng:s.lon,s.alt):l===void 0?null:new Se(s,l,d)}var _t={latLngToPoint:function(s,l){var d=this.projection.project(s),m=this.scale(l);return this.transformation._transform(d,m)},pointToLatLng:function(s,l){var d=this.scale(l),m=this.transformation.untransform(s,d);return this.projection.unproject(m)},project:function(s){return this.projection.project(s)},unproject:function(s){return this.projection.unproject(s)},scale:function(s){return 256*Math.pow(2,s)},zoom:function(s){return Math.log(s/256)/Math.LN2},getProjectedBounds:function(s){if(this.infinite)return null;var l=this.projection.bounds,d=this.scale(s),m=this.transformation.transform(l.min,d),y=this.transformation.transform(l.max,d);return new le(m,y)},infinite:!1,wrapLatLng:function(s){var l=this.wrapLng?_(s.lng,this.wrapLng,!0):s.lng,d=this.wrapLat?_(s.lat,this.wrapLat,!0):s.lat,m=s.alt;return new Se(d,l,m)},wrapLatLngBounds:function(s){var l=s.getCenter(),d=this.wrapLatLng(l),m=l.lat-d.lat,y=l.lng-d.lng;if(m===0&&y===0)return s;var S=s.getSouthWest(),j=s.getNorthEast(),$=new Se(S.lat-m,S.lng-y),H=new Se(j.lat-m,j.lng-y);return new xe($,H)}},or=i({},_t,{wrapLng:[-180,180],R:6371e3,distance:function(s,l){var d=Math.PI/180,m=s.lat*d,y=l.lat*d,S=Math.sin((l.lat-s.lat)*d/2),j=Math.sin((l.lng-s.lng)*d/2),$=S*S+Math.cos(m)*Math.cos(y)*j*j,H=2*Math.atan2(Math.sqrt($),Math.sqrt(1-$));return this.R*H}}),oc=6378137,li={R:oc,MAX_LATITUDE:85.0511287798,project:function(s){var l=Math.PI/180,d=this.MAX_LATITUDE,m=Math.max(Math.min(d,s.lat),-d),y=Math.sin(m*l);return new K(this.R*s.lng*l,this.R*Math.log((1+y)/(1-y))/2)},unproject:function(s){var l=180/Math.PI;return new Se((2*Math.atan(Math.exp(s.y/this.R))-Math.PI/2)*l,s.x*l/this.R)},bounds:function(){var s=oc*Math.PI;return new le([-s,-s],[s,s])}()};function ui(s,l,d,m){if(x(s)){this._a=s[0],this._b=s[1],this._c=s[2],this._d=s[3];return}this._a=s,this._b=l,this._c=d,this._d=m}ui.prototype={transform:function(s,l){return this._transform(s.clone(),l)},_transform:function(s,l){return l=l||1,s.x=l*(this._a*s.x+this._b),s.y=l*(this._c*s.y+this._d),s},untransform:function(s,l){return l=l||1,new K((s.x/l-this._b)/this._a,(s.y/l-this._d)/this._c)}};function Cr(s,l,d,m){return new ui(s,l,d,m)}var ls=i({},or,{code:"EPSG:3857",projection:li,transformation:function(){var s=.5/(Math.PI*li.R);return Cr(s,.5,-s,.5)}()}),Ba=i({},ls,{code:"EPSG:900913"});function ro(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function $a(s,l){var d="",m,y,S,j,$,H;for(m=0,S=s.length;m<S;m++){for($=s[m],y=0,j=$.length;y<j;y++)H=$[y],d+=(y?"L":"M")+H.x+" "+H.y;d+=l?ae.svg?"z":"x":""}return d||"M0 0"}var Ha=document.documentElement.style,io="ActiveXObject"in window,ac=io&&!document.addEventListener,so="msLaunchUri"in navigator&&!("documentMode"in document),oo=In("webkit"),lc=In("android"),ao=In("android 2")||In("android 3"),Wa=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),uc=lc&&In("Google")&&Wa<537&&!("AudioNode"in window),ht=!!window.opera,St=!so&&In("chrome"),us=In("gecko")&&!oo&&!ht&&!io,cc=!St&&In("safari"),qa=In("phantom"),hc="OTransition"in Ha,cs=navigator.platform.indexOf("Win")===0,Ga=io&&"transition"in Ha,lo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ao,uo="MozPerspective"in Ha,bf=!window.L_DISABLE_3D&&(Ga||lo||uo)&&!hc&&!qa,hs=typeof orientation<"u"||In("mobile"),Ka=hs&&oo,dc=hs&&lo,Za=!window.PointerEvent&&window.MSPointerEvent,ci=!!(window.PointerEvent||Za),co="ontouchstart"in window||!!window.TouchEvent,Qa=!window.L_NO_TOUCH&&(co||ci),Rr=hs&&ht,fc=hs&&us,ho=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,pc=function(){var s=!1;try{var l=Object.defineProperty({},"passive",{get:function(){s=!0}});window.addEventListener("testPassiveEventSupport",v,l),window.removeEventListener("testPassiveEventSupport",v,l)}catch{}return s}(),ds=function(){return!!document.createElement("canvas").getContext}(),fo=!!(document.createElementNS&&ro("svg").createSVGRect),Rt=!!fo&&function(){var s=document.createElement("div");return s.innerHTML="<svg/>",(s.firstChild&&s.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),mc=!fo&&function(){try{var s=document.createElement("div");s.innerHTML='<v:shape adj="1"/>';var l=s.firstChild;return l.style.behavior="url(#default#VML)",l&&typeof l.adj=="object"}catch{return!1}}(),fs=navigator.platform.indexOf("Mac")===0,ps=navigator.platform.indexOf("Linux")===0;function In(s){return navigator.userAgent.toLowerCase().indexOf(s)>=0}var ae={ie:io,ielt9:ac,edge:so,webkit:oo,android:lc,android23:ao,androidStock:uc,opera:ht,chrome:St,gecko:us,safari:cc,phantom:qa,opera12:hc,win:cs,ie3d:Ga,webkit3d:lo,gecko3d:uo,any3d:bf,mobile:hs,mobileWebkit:Ka,mobileWebkit3d:dc,msPointer:Za,pointer:ci,touch:Qa,touchNative:co,mobileOpera:Rr,mobileGecko:fc,retina:ho,passiveEvents:pc,canvas:ds,svg:fo,vml:mc,inlineSvg:Rt,mac:fs,linux:ps},br=ae.msPointer?"MSPointerDown":"pointerdown",gc=ae.msPointer?"MSPointerMove":"pointermove",_c=ae.msPointer?"MSPointerUp":"pointerup",ms=ae.msPointer?"MSPointerCancel":"pointercancel",po={touchstart:br,touchmove:gc,touchend:_c,touchcancel:ms},mo={touchstart:_o,touchmove:go,touchend:go,touchcancel:go},zn={},Bn=!1;function vc(s,l,d){return l==="touchstart"&&wc(),mo[l]?(d=mo[l].bind(this,d),s.addEventListener(po[l],d,!1),d):(console.warn("wrong event specified:",l),v)}function yc(s,l,d){if(!po[l]){console.warn("wrong event specified:",l);return}s.removeEventListener(po[l],d,!1)}function Ja(s){zn[s.pointerId]=s}function Xa(s){zn[s.pointerId]&&(zn[s.pointerId]=s)}function Ya(s){delete zn[s.pointerId]}function wc(){Bn||(document.addEventListener(br,Ja,!0),document.addEventListener(gc,Xa,!0),document.addEventListener(_c,Ya,!0),document.addEventListener(ms,Ya,!0),Bn=!0)}function go(s,l){if(l.pointerType!==(l.MSPOINTER_TYPE_MOUSE||"mouse")){l.touches=[];for(var d in zn)l.touches.push(zn[d]);l.changedTouches=[l],s(l)}}function _o(s,l){l.MSPOINTER_TYPE_TOUCH&&l.pointerType===l.MSPOINTER_TYPE_TOUCH&&Je(l),go(s,l)}function Ec(s){var l={},d,m;for(m in s)d=s[m],l[m]=d&&d.bind?d.bind(s):d;return s=l,l.type="dblclick",l.detail=2,l.isTrusted=!1,l._simulated=!0,l}var el=200;function gs(s,l){s.addEventListener("dblclick",l);var d=0,m;function y(S){if(S.detail!==1){m=S.detail;return}if(!(S.pointerType==="mouse"||S.sourceCapabilities&&!S.sourceCapabilities.firesTouchEvents)){var j=dl(S);if(!(j.some(function(H){return H instanceof HTMLLabelElement&&H.attributes.for})&&!j.some(function(H){return H instanceof HTMLInputElement||H instanceof HTMLSelectElement}))){var $=Date.now();$-d<=el?(m++,m===2&&l(Ec(S))):m=1,d=$}}}return s.addEventListener("click",y),{dblclick:l,simDblclick:y}}function kr(s,l){s.removeEventListener("dblclick",l.dblclick),s.removeEventListener("click",l.simDblclick)}var _s=Lr(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),vs=Lr(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),tl=vs==="webkitTransition"||vs==="OTransition"?vs+"End":"transitionend";function nl(s){return typeof s=="string"?document.getElementById(s):s}function hi(s,l){var d=s.style[l]||s.currentStyle&&s.currentStyle[l];if((!d||d==="auto")&&document.defaultView){var m=document.defaultView.getComputedStyle(s,null);d=m?m[l]:null}return d==="auto"?null:d}function Ce(s,l,d){var m=document.createElement(s);return m.className=l||"",d&&d.appendChild(m),m}function $e(s){var l=s.parentNode;l&&l.removeChild(s)}function ys(s){for(;s.firstChild;)s.removeChild(s.firstChild)}function Nr(s){var l=s.parentNode;l&&l.lastChild!==s&&l.appendChild(s)}function di(s){var l=s.parentNode;l&&l.firstChild!==s&&l.insertBefore(s,l.firstChild)}function rl(s,l){if(s.classList!==void 0)return s.classList.contains(l);var d=An(s);return d.length>0&&new RegExp("(^|\\s)"+l+"(\\s|$)").test(d)}function Ee(s,l){if(s.classList!==void 0)for(var d=P(l),m=0,y=d.length;m<y;m++)s.classList.add(d[m]);else if(!rl(s,l)){var S=An(s);il(s,(S?S+" ":"")+l)}}function Ke(s,l){s.classList!==void 0?s.classList.remove(l):il(s,k((" "+An(s)+" ").replace(" "+l+" "," ")))}function il(s,l){s.className.baseVal===void 0?s.className=l:s.className.baseVal=l}function An(s){return s.correspondingElement&&(s=s.correspondingElement),s.className.baseVal===void 0?s.className:s.className.baseVal}function it(s,l){"opacity"in s.style?s.style.opacity=l:"filter"in s.style&&vo(s,l)}function vo(s,l){var d=!1,m="DXImageTransform.Microsoft.Alpha";try{d=s.filters.item(m)}catch{if(l===1)return}l=Math.round(l*100),d?(d.Enabled=l!==100,d.Opacity=l):s.style.filter+=" progid:"+m+"(opacity="+l+")"}function Lr(s){for(var l=document.documentElement.style,d=0;d<s.length;d++)if(s[d]in l)return s[d];return!1}function ar(s,l,d){var m=l||new K(0,0);s.style[_s]=(ae.ie3d?"translate("+m.x+"px,"+m.y+"px)":"translate3d("+m.x+"px,"+m.y+"px,0)")+(d?" scale("+d+")":"")}function me(s,l){s._leaflet_pos=l,ae.any3d?ar(s,l):(s.style.left=l.x+"px",s.style.top=l.y+"px")}function Pn(s){return s._leaflet_pos||new K(0,0)}var $n,Hn,sl;if("onselectstart"in document)$n=function(){fe(window,"selectstart",Je)},Hn=function(){ze(window,"selectstart",Je)};else{var fi=Lr(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);$n=function(){if(fi){var s=document.documentElement.style;sl=s[fi],s[fi]="none"}},Hn=function(){fi&&(document.documentElement.style[fi]=sl,sl=void 0)}}function ol(){fe(window,"dragstart",Je)}function al(){ze(window,"dragstart",Je)}var yo,ll;function Or(s){for(;s.tabIndex===-1;)s=s.parentNode;s.style&&(fn(),yo=s,ll=s.style.outlineStyle,s.style.outlineStyle="none",fe(window,"keydown",fn))}function fn(){yo&&(yo.style.outlineStyle=ll,yo=void 0,ll=void 0,ze(window,"keydown",fn))}function ul(s){do s=s.parentNode;while((!s.offsetWidth||!s.offsetHeight)&&s!==document.body);return s}function wo(s){var l=s.getBoundingClientRect();return{x:l.width/s.offsetWidth||1,y:l.height/s.offsetHeight||1,boundingClientRect:l}}var Tc={__proto__:null,TRANSFORM:_s,TRANSITION:vs,TRANSITION_END:tl,get:nl,getStyle:hi,create:Ce,remove:$e,empty:ys,toFront:Nr,toBack:di,hasClass:rl,addClass:Ee,removeClass:Ke,setClass:il,getClass:An,setOpacity:it,testProp:Lr,setTransform:ar,setPosition:me,getPosition:Pn,get disableTextSelection(){return $n},get enableTextSelection(){return Hn},disableImageDrag:ol,enableImageDrag:al,preventOutline:Or,restoreOutline:fn,getSizedParentNode:ul,getScale:wo};function fe(s,l,d,m){if(l&&typeof l=="object")for(var y in l)cl(s,y,l[y],d);else{l=P(l);for(var S=0,j=l.length;S<j;S++)cl(s,l[S],d,m)}return this}var Cn="_leaflet_events";function ze(s,l,d,m){if(arguments.length===1)Sc(s),delete s[Cn];else if(l&&typeof l=="object")for(var y in l)hl(s,y,l[y],d);else if(l=P(l),arguments.length===2)Sc(s,function($){return V(l,$)!==-1});else for(var S=0,j=l.length;S<j;S++)hl(s,l[S],d,m);return this}function Sc(s,l){for(var d in s[Cn]){var m=d.split(/\d/)[0];(!l||l(m))&&hl(s,m,null,null,d)}}var Rn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function cl(s,l,d,m){var y=l+h(d)+(m?"_"+h(m):"");if(s[Cn]&&s[Cn][y])return this;var S=function($){return d.call(m||s,$||window.event)},j=S;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?S=vc(s,l,S):ae.touch&&l==="dblclick"?S=gs(s,S):"addEventListener"in s?l==="touchstart"||l==="touchmove"||l==="wheel"||l==="mousewheel"?s.addEventListener(Rn[l]||l,S,ae.passiveEvents?{passive:!1}:!1):l==="mouseenter"||l==="mouseleave"?(S=function($){$=$||window.event,fl(s,$)&&j($)},s.addEventListener(Rn[l],S,!1)):s.addEventListener(l,j,!1):s.attachEvent("on"+l,S),s[Cn]=s[Cn]||{},s[Cn][y]=S}function hl(s,l,d,m,y){y=y||l+h(d)+(m?"_"+h(m):"");var S=s[Cn]&&s[Cn][y];if(!S)return this;!ae.touchNative&&ae.pointer&&l.indexOf("touch")===0?yc(s,l,S):ae.touch&&l==="dblclick"?kr(s,S):"removeEventListener"in s?s.removeEventListener(Rn[l]||l,S,!1):s.detachEvent("on"+l,S),s[Cn][y]=null}function bn(s){return s.stopPropagation?s.stopPropagation():s.originalEvent?s.originalEvent._stopped=!0:s.cancelBubble=!0,this}function pi(s){return cl(s,"wheel",bn),this}function mi(s){return fe(s,"mousedown touchstart dblclick contextmenu",bn),s._leaflet_disable_click=!0,this}function Je(s){return s.preventDefault?s.preventDefault():s.returnValue=!1,this}function pn(s){return Je(s),bn(s),this}function dl(s){if(s.composedPath)return s.composedPath();for(var l=[],d=s.target;d;)l.push(d),d=d.parentNode;return l}function Eo(s,l){if(!l)return new K(s.clientX,s.clientY);var d=wo(l),m=d.boundingClientRect;return new K((s.clientX-m.left)/d.x-l.clientLeft,(s.clientY-m.top)/d.y-l.clientTop)}var Ze=ae.linux&&ae.chrome?window.devicePixelRatio:ae.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function xc(s){return ae.edge?s.wheelDeltaY/2:s.deltaY&&s.deltaMode===0?-s.deltaY/Ze:s.deltaY&&s.deltaMode===1?-s.deltaY*20:s.deltaY&&s.deltaMode===2?-s.deltaY*60:s.deltaX||s.deltaZ?0:s.wheelDelta?(s.wheelDeltaY||s.wheelDelta)/2:s.detail&&Math.abs(s.detail)<32765?-s.detail*20:s.detail?s.detail/-32765*60:0}function fl(s,l){var d=l.relatedTarget;if(!d)return!0;try{for(;d&&d!==s;)d=d.parentNode}catch{return!1}return d!==s}var Ic={__proto__:null,on:fe,off:ze,stopPropagation:bn,disableScrollPropagation:pi,disableClickPropagation:mi,preventDefault:Je,stop:pn,getPropagationPath:dl,getMousePosition:Eo,getWheelDelta:xc,isExternalTarget:fl,addListener:fe,removeListener:ze},pl=Tt.extend({run:function(s,l,d,m){this.stop(),this._el=s,this._inProgress=!0,this._duration=d||.25,this._easeOutPower=1/Math.max(m||.5,.2),this._startPos=Pn(s),this._offset=l.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=F(this._animate,this),this._step()},_step:function(s){var l=+new Date-this._startTime,d=this._duration*1e3;l<d?this._runFrame(this._easeOut(l/d),s):(this._runFrame(1),this._complete())},_runFrame:function(s,l){var d=this._startPos.add(this._offset.multiplyBy(s));l&&d._round(),me(this._el,d),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(s){return 1-Math.pow(1-s,this._easeOutPower)}}),Ae=Tt.extend({options:{crs:ls,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(s,l){l=A(this,l),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(s),this._initLayout(),this._onResize=a(this._onResize,this),this._initEvents(),l.maxBounds&&this.setMaxBounds(l.maxBounds),l.zoom!==void 0&&(this._zoom=this._limitZoom(l.zoom)),l.center&&l.zoom!==void 0&&this.setView(ve(l.center),l.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=vs&&ae.any3d&&!ae.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),fe(this._proxy,tl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(s,l,d){if(l=l===void 0?this._zoom:this._limitZoom(l),s=this._limitCenter(ve(s),l,this.options.maxBounds),d=d||{},this._stop(),this._loaded&&!d.reset&&d!==!0){d.animate!==void 0&&(d.zoom=i({animate:d.animate},d.zoom),d.pan=i({animate:d.animate,duration:d.duration},d.pan));var m=this._zoom!==l?this._tryAnimatedZoom&&this._tryAnimatedZoom(s,l,d.zoom):this._tryAnimatedPan(s,d.pan);if(m)return clearTimeout(this._sizeTimer),this}return this._resetView(s,l,d.pan&&d.pan.noMoveStart),this},setZoom:function(s,l){return this._loaded?this.setView(this.getCenter(),s,{zoom:l}):(this._zoom=s,this)},zoomIn:function(s,l){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+s,l)},zoomOut:function(s,l){return s=s||(ae.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-s,l)},setZoomAround:function(s,l,d){var m=this.getZoomScale(l),y=this.getSize().divideBy(2),S=s instanceof K?s:this.latLngToContainerPoint(s),j=S.subtract(y).multiplyBy(1-1/m),$=this.containerPointToLatLng(y.add(j));return this.setView($,l,{zoom:d})},_getBoundsCenterZoom:function(s,l){l=l||{},s=s.getBounds?s.getBounds():be(s);var d=ee(l.paddingTopLeft||l.padding||[0,0]),m=ee(l.paddingBottomRight||l.padding||[0,0]),y=this.getBoundsZoom(s,!1,d.add(m));if(y=typeof l.maxZoom=="number"?Math.min(l.maxZoom,y):y,y===1/0)return{center:s.getCenter(),zoom:y};var S=m.subtract(d).divideBy(2),j=this.project(s.getSouthWest(),y),$=this.project(s.getNorthEast(),y),H=this.unproject(j.add($).divideBy(2).add(S),y);return{center:H,zoom:y}},fitBounds:function(s,l){if(s=be(s),!s.isValid())throw new Error("Bounds are not valid.");var d=this._getBoundsCenterZoom(s,l);return this.setView(d.center,d.zoom,l)},fitWorld:function(s){return this.fitBounds([[-90,-180],[90,180]],s)},panTo:function(s,l){return this.setView(s,this._zoom,{pan:l})},panBy:function(s,l){if(s=ee(s).round(),l=l||{},!s.x&&!s.y)return this.fire("moveend");if(l.animate!==!0&&!this.getSize().contains(s))return this._resetView(this.unproject(this.project(this.getCenter()).add(s)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new pl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),l.noMoveStart||this.fire("movestart"),l.animate!==!1){Ee(this._mapPane,"leaflet-pan-anim");var d=this._getMapPanePos().subtract(s).round();this._panAnim.run(this._mapPane,d,l.duration||.25,l.easeLinearity)}else this._rawPanBy(s),this.fire("move").fire("moveend");return this},flyTo:function(s,l,d){if(d=d||{},d.animate===!1||!ae.any3d)return this.setView(s,l,d);this._stop();var m=this.project(this.getCenter()),y=this.project(s),S=this.getSize(),j=this._zoom;s=ve(s),l=l===void 0?j:l;var $=Math.max(S.x,S.y),H=$*this.getZoomScale(j,l),J=y.distanceTo(m)||1,ne=1.42,pe=ne*ne;function Ie(ft){var zc=ft?-1:1,GA=ft?H:$,KA=H*H-$*$+zc*pe*pe*J*J,ZA=2*GA*pe*J,jf=KA/ZA,kv=Math.sqrt(jf*jf+1)-jf,QA=kv<1e-9?-18:Math.log(kv);return QA}function Zt(ft){return(Math.exp(ft)-Math.exp(-ft))/2}function It(ft){return(Math.exp(ft)+Math.exp(-ft))/2}function Nn(ft){return Zt(ft)/It(ft)}var nn=Ie(0);function Oo(ft){return $*(It(nn)/It(nn+ne*ft))}function $A(ft){return $*(It(nn)*Nn(nn+ne*ft)-Zt(nn))/pe}function HA(ft){return 1-Math.pow(1-ft,1.5)}var WA=Date.now(),Rv=(Ie(1)-nn)/ne,qA=d.duration?1e3*d.duration:1e3*Rv*.8;function bv(){var ft=(Date.now()-WA)/qA,zc=HA(ft)*Rv;ft<=1?(this._flyToFrame=F(bv,this),this._move(this.unproject(m.add(y.subtract(m).multiplyBy($A(zc)/J)),j),this.getScaleZoom($/Oo(zc),j),{flyTo:!0})):this._move(s,l)._moveEnd(!0)}return this._moveStart(!0,d.noMoveStart),bv.call(this),this},flyToBounds:function(s,l){var d=this._getBoundsCenterZoom(s,l);return this.flyTo(d.center,d.zoom,l)},setMaxBounds:function(s){return s=be(s),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),s.isValid()?(this.options.maxBounds=s,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(s){var l=this.options.minZoom;return this.options.minZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(s):this},setMaxZoom:function(s){var l=this.options.maxZoom;return this.options.maxZoom=s,this._loaded&&l!==s&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(s):this},panInsideBounds:function(s,l){this._enforcingBounds=!0;var d=this.getCenter(),m=this._limitCenter(d,this._zoom,be(s));return d.equals(m)||this.panTo(m,l),this._enforcingBounds=!1,this},panInside:function(s,l){l=l||{};var d=ee(l.paddingTopLeft||l.padding||[0,0]),m=ee(l.paddingBottomRight||l.padding||[0,0]),y=this.project(this.getCenter()),S=this.project(s),j=this.getPixelBounds(),$=de([j.min.add(d),j.max.subtract(m)]),H=$.getSize();if(!$.contains(S)){this._enforcingBounds=!0;var J=S.subtract($.getCenter()),ne=$.extend(S).getSize().subtract(H);y.x+=J.x<0?-ne.x:ne.x,y.y+=J.y<0?-ne.y:ne.y,this.panTo(this.unproject(y),l),this._enforcingBounds=!1}return this},invalidateSize:function(s){if(!this._loaded)return this;s=i({animate:!1,pan:!0},s===!0?{animate:!0}:s);var l=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var d=this.getSize(),m=l.divideBy(2).round(),y=d.divideBy(2).round(),S=m.subtract(y);return!S.x&&!S.y?this:(s.animate&&s.pan?this.panBy(S):(s.pan&&this._rawPanBy(S),this.fire("move"),s.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(a(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:l,newSize:d}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(s){if(s=this._locateOptions=i({timeout:1e4,watch:!1},s),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var l=a(this._handleGeolocationResponse,this),d=a(this._handleGeolocationError,this);return s.watch?this._locationWatchId=navigator.geolocation.watchPosition(l,d,s):navigator.geolocation.getCurrentPosition(l,d,s),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(s){if(this._container._leaflet_id){var l=s.code,d=s.message||(l===1?"permission denied":l===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:l,message:"Geolocation error: "+d+"."})}},_handleGeolocationResponse:function(s){if(this._container._leaflet_id){var l=s.coords.latitude,d=s.coords.longitude,m=new Se(l,d),y=m.toBounds(s.coords.accuracy*2),S=this._locateOptions;if(S.setView){var j=this.getBoundsZoom(y);this.setView(m,S.maxZoom?Math.min(j,S.maxZoom):j)}var $={latlng:m,bounds:y,timestamp:s.timestamp};for(var H in s.coords)typeof s.coords[H]=="number"&&($[H]=s.coords[H]);this.fire("locationfound",$)}},addHandler:function(s,l){if(!l)return this;var d=this[s]=new l(this);return this._handlers.push(d),this.options[s]&&d.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),$e(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var s;for(s in this._layers)this._layers[s].remove();for(s in this._panes)$e(this._panes[s]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(s,l){var d="leaflet-pane"+(s?" leaflet-"+s.replace("Pane","")+"-pane":""),m=Ce("div",d,l||this._mapPane);return s&&(this._panes[s]=m),m},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var s=this.getPixelBounds(),l=this.unproject(s.getBottomLeft()),d=this.unproject(s.getTopRight());return new xe(l,d)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(s,l,d){s=be(s),d=ee(d||[0,0]);var m=this.getZoom()||0,y=this.getMinZoom(),S=this.getMaxZoom(),j=s.getNorthWest(),$=s.getSouthEast(),H=this.getSize().subtract(d),J=de(this.project($,m),this.project(j,m)).getSize(),ne=ae.any3d?this.options.zoomSnap:1,pe=H.x/J.x,Ie=H.y/J.y,Zt=l?Math.max(pe,Ie):Math.min(pe,Ie);return m=this.getScaleZoom(Zt,m),ne&&(m=Math.round(m/(ne/100))*(ne/100),m=l?Math.ceil(m/ne)*ne:Math.floor(m/ne)*ne),Math.max(y,Math.min(S,m))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(s,l){var d=this._getTopLeftPoint(s,l);return new le(d,d.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(s){return this.options.crs.getProjectedBounds(s===void 0?this.getZoom():s)},getPane:function(s){return typeof s=="string"?this._panes[s]:s},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(s,l){var d=this.options.crs;return l=l===void 0?this._zoom:l,d.scale(s)/d.scale(l)},getScaleZoom:function(s,l){var d=this.options.crs;l=l===void 0?this._zoom:l;var m=d.zoom(s*d.scale(l));return isNaN(m)?1/0:m},project:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.latLngToPoint(ve(s),l)},unproject:function(s,l){return l=l===void 0?this._zoom:l,this.options.crs.pointToLatLng(ee(s),l)},layerPointToLatLng:function(s){var l=ee(s).add(this.getPixelOrigin());return this.unproject(l)},latLngToLayerPoint:function(s){var l=this.project(ve(s))._round();return l._subtract(this.getPixelOrigin())},wrapLatLng:function(s){return this.options.crs.wrapLatLng(ve(s))},wrapLatLngBounds:function(s){return this.options.crs.wrapLatLngBounds(be(s))},distance:function(s,l){return this.options.crs.distance(ve(s),ve(l))},containerPointToLayerPoint:function(s){return ee(s).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(s){return ee(s).add(this._getMapPanePos())},containerPointToLatLng:function(s){var l=this.containerPointToLayerPoint(ee(s));return this.layerPointToLatLng(l)},latLngToContainerPoint:function(s){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ve(s)))},mouseEventToContainerPoint:function(s){return Eo(s,this._container)},mouseEventToLayerPoint:function(s){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(s))},mouseEventToLatLng:function(s){return this.layerPointToLatLng(this.mouseEventToLayerPoint(s))},_initContainer:function(s){var l=this._container=nl(s);if(l){if(l._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");fe(l,"scroll",this._onScroll,this),this._containerId=h(l)},_initLayout:function(){var s=this._container;this._fadeAnimated=this.options.fadeAnimation&&ae.any3d,Ee(s,"leaflet-container"+(ae.touch?" leaflet-touch":"")+(ae.retina?" leaflet-retina":"")+(ae.ielt9?" leaflet-oldie":"")+(ae.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var l=hi(s,"position");l!=="absolute"&&l!=="relative"&&l!=="fixed"&&l!=="sticky"&&(s.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var s=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ee(s.markerPane,"leaflet-zoom-hide"),Ee(s.shadowPane,"leaflet-zoom-hide"))},_resetView:function(s,l,d){me(this._mapPane,new K(0,0));var m=!this._loaded;this._loaded=!0,l=this._limitZoom(l),this.fire("viewprereset");var y=this._zoom!==l;this._moveStart(y,d)._move(s,l)._moveEnd(y),this.fire("viewreset"),m&&this.fire("load")},_moveStart:function(s,l){return s&&this.fire("zoomstart"),l||this.fire("movestart"),this},_move:function(s,l,d,m){l===void 0&&(l=this._zoom);var y=this._zoom!==l;return this._zoom=l,this._lastCenter=s,this._pixelOrigin=this._getNewPixelOrigin(s),m?d&&d.pinch&&this.fire("zoom",d):((y||d&&d.pinch)&&this.fire("zoom",d),this.fire("move",d)),this},_moveEnd:function(s){return s&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(s){me(this._mapPane,this._getMapPanePos().subtract(s))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(s){this._targets={},this._targets[h(this._container)]=this;var l=s?ze:fe;l(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&l(window,"resize",this._onResize,this),ae.any3d&&this.options.transform3DLimit&&(s?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=F(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var s=this._getMapPanePos();Math.max(Math.abs(s.x),Math.abs(s.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(s,l){for(var d=[],m,y=l==="mouseout"||l==="mouseover",S=s.target||s.srcElement,j=!1;S;){if(m=this._targets[h(S)],m&&(l==="click"||l==="preclick")&&this._draggableMoved(m)){j=!0;break}if(m&&m.listens(l,!0)&&(y&&!fl(S,s)||(d.push(m),y))||S===this._container)break;S=S.parentNode}return!d.length&&!j&&!y&&this.listens(l,!0)&&(d=[this]),d},_isClickDisabled:function(s){for(;s&&s!==this._container;){if(s._leaflet_disable_click)return!0;s=s.parentNode}},_handleDOMEvent:function(s){var l=s.target||s.srcElement;if(!(!this._loaded||l._leaflet_disable_events||s.type==="click"&&this._isClickDisabled(l))){var d=s.type;d==="mousedown"&&Or(l),this._fireDOMEvent(s,d)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(s,l,d){if(s.type==="click"){var m=i({},s);m.type="preclick",this._fireDOMEvent(m,m.type,d)}var y=this._findEventTargets(s,l);if(d){for(var S=[],j=0;j<d.length;j++)d[j].listens(l,!0)&&S.push(d[j]);y=S.concat(y)}if(y.length){l==="contextmenu"&&Je(s);var $=y[0],H={originalEvent:s};if(s.type!=="keypress"&&s.type!=="keydown"&&s.type!=="keyup"){var J=$.getLatLng&&(!$._radius||$._radius<=10);H.containerPoint=J?this.latLngToContainerPoint($.getLatLng()):this.mouseEventToContainerPoint(s),H.layerPoint=this.containerPointToLayerPoint(H.containerPoint),H.latlng=J?$.getLatLng():this.layerPointToLatLng(H.layerPoint)}for(j=0;j<y.length;j++)if(y[j].fire(l,H,!0),H.originalEvent._stopped||y[j].options.bubblingMouseEvents===!1&&V(this._mouseEvents,l)!==-1)return}},_draggableMoved:function(s){return s=s.dragging&&s.dragging.enabled()?s:this,s.dragging&&s.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var s=0,l=this._handlers.length;s<l;s++)this._handlers[s].disable()},whenReady:function(s,l){return this._loaded?s.call(l||this,{target:this}):this.on("load",s,l),this},_getMapPanePos:function(){return Pn(this._mapPane)||new K(0,0)},_moved:function(){var s=this._getMapPanePos();return s&&!s.equals([0,0])},_getTopLeftPoint:function(s,l){var d=s&&l!==void 0?this._getNewPixelOrigin(s,l):this.getPixelOrigin();return d.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(s,l){var d=this.getSize()._divideBy(2);return this.project(s,l)._subtract(d)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(s,l,d){var m=this._getNewPixelOrigin(d,l);return this.project(s,l)._subtract(m)},_latLngBoundsToNewLayerBounds:function(s,l,d){var m=this._getNewPixelOrigin(d,l);return de([this.project(s.getSouthWest(),l)._subtract(m),this.project(s.getNorthWest(),l)._subtract(m),this.project(s.getSouthEast(),l)._subtract(m),this.project(s.getNorthEast(),l)._subtract(m)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(s){return this.latLngToLayerPoint(s).subtract(this._getCenterLayerPoint())},_limitCenter:function(s,l,d){if(!d)return s;var m=this.project(s,l),y=this.getSize().divideBy(2),S=new le(m.subtract(y),m.add(y)),j=this._getBoundsOffset(S,d,l);return Math.abs(j.x)<=1&&Math.abs(j.y)<=1?s:this.unproject(m.add(j),l)},_limitOffset:function(s,l){if(!l)return s;var d=this.getPixelBounds(),m=new le(d.min.add(s),d.max.add(s));return s.add(this._getBoundsOffset(m,l))},_getBoundsOffset:function(s,l,d){var m=de(this.project(l.getNorthEast(),d),this.project(l.getSouthWest(),d)),y=m.min.subtract(s.min),S=m.max.subtract(s.max),j=this._rebound(y.x,-S.x),$=this._rebound(y.y,-S.y);return new K(j,$)},_rebound:function(s,l){return s+l>0?Math.round(s-l)/2:Math.max(0,Math.ceil(s))-Math.max(0,Math.floor(l))},_limitZoom:function(s){var l=this.getMinZoom(),d=this.getMaxZoom(),m=ae.any3d?this.options.zoomSnap:1;return m&&(s=Math.round(s/m)*m),Math.max(l,Math.min(d,s))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ke(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(s,l){var d=this._getCenterOffset(s)._trunc();return(l&&l.animate)!==!0&&!this.getSize().contains(d)?!1:(this.panBy(d,l),!0)},_createAnimProxy:function(){var s=this._proxy=Ce("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(s),this.on("zoomanim",function(l){var d=_s,m=this._proxy.style[d];ar(this._proxy,this.project(l.center,l.zoom),this.getZoomScale(l.zoom,1)),m===this._proxy.style[d]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){$e(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var s=this.getCenter(),l=this.getZoom();ar(this._proxy,this.project(s,l),this.getZoomScale(l,1))},_catchTransitionEnd:function(s){this._animatingZoom&&s.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(s,l,d){if(this._animatingZoom)return!0;if(d=d||{},!this._zoomAnimated||d.animate===!1||this._nothingToAnimate()||Math.abs(l-this._zoom)>this.options.zoomAnimationThreshold)return!1;var m=this.getZoomScale(l),y=this._getCenterOffset(s)._divideBy(1-1/m);return d.animate!==!0&&!this.getSize().contains(y)?!1:(F(function(){this._moveStart(!0,d.noMoveStart||!1)._animateZoom(s,l,!0)},this),!0)},_animateZoom:function(s,l,d,m){this._mapPane&&(d&&(this._animatingZoom=!0,this._animateToCenter=s,this._animateToZoom=l,Ee(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:s,zoom:l,noUpdate:m}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(a(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ke(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function To(s,l){return new Ae(s,l)}var tn=Me.extend({options:{position:"topright"},initialize:function(s){A(this,s)},getPosition:function(){return this.options.position},setPosition:function(s){var l=this._map;return l&&l.removeControl(this),this.options.position=s,l&&l.addControl(this),this},getContainer:function(){return this._container},addTo:function(s){this.remove(),this._map=s;var l=this._container=this.onAdd(s),d=this.getPosition(),m=s._controlCorners[d];return Ee(l,"leaflet-control"),d.indexOf("bottom")!==-1?m.insertBefore(l,m.firstChild):m.appendChild(l),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?($e(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(s){this._map&&s&&s.screenX>0&&s.screenY>0&&this._map.getContainer().focus()}}),Kt=function(s){return new tn(s)};Ae.include({addControl:function(s){return s.addTo(this),this},removeControl:function(s){return s.remove(),this},_initControlPos:function(){var s=this._controlCorners={},l="leaflet-",d=this._controlContainer=Ce("div",l+"control-container",this._container);function m(y,S){var j=l+y+" "+l+S;s[y+S]=Ce("div",j,d)}m("top","left"),m("top","right"),m("bottom","left"),m("bottom","right")},_clearControlPos:function(){for(var s in this._controlCorners)$e(this._controlCorners[s]);$e(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ml=tn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(s,l,d,m){return d<m?-1:m<d?1:0}},initialize:function(s,l,d){A(this,d),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var m in s)this._addLayer(s[m],m);for(m in l)this._addLayer(l[m],m,!0)},onAdd:function(s){this._initLayout(),this._update(),this._map=s,s.on("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(s){return tn.prototype.addTo.call(this,s),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(s,l){return this._addLayer(s,l),this._map?this._update():this},addOverlay:function(s,l){return this._addLayer(s,l,!0),this._map?this._update():this},removeLayer:function(s){s.off("add remove",this._onLayerChange,this);var l=this._getLayer(h(s));return l&&this._layers.splice(this._layers.indexOf(l),1),this._map?this._update():this},expand:function(){Ee(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var s=this._map.getSize().y-(this._container.offsetTop+50);return s<this._section.clientHeight?(Ee(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=s+"px"):Ke(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ke(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var s="leaflet-control-layers",l=this._container=Ce("div",s),d=this.options.collapsed;l.setAttribute("aria-haspopup",!0),mi(l),pi(l);var m=this._section=Ce("section",s+"-list");d&&(this._map.on("click",this.collapse,this),fe(l,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var y=this._layersLink=Ce("a",s+"-toggle",l);y.href="#",y.title="Layers",y.setAttribute("role","button"),fe(y,{keydown:function(S){S.keyCode===13&&this._expandSafely()},click:function(S){Je(S),this._expandSafely()}},this),d||this.expand(),this._baseLayersList=Ce("div",s+"-base",m),this._separator=Ce("div",s+"-separator",m),this._overlaysList=Ce("div",s+"-overlays",m),l.appendChild(m)},_getLayer:function(s){for(var l=0;l<this._layers.length;l++)if(this._layers[l]&&h(this._layers[l].layer)===s)return this._layers[l]},_addLayer:function(s,l,d){this._map&&s.on("add remove",this._onLayerChange,this),this._layers.push({layer:s,name:l,overlay:d}),this.options.sortLayers&&this._layers.sort(a(function(m,y){return this.options.sortFunction(m.layer,y.layer,m.name,y.name)},this)),this.options.autoZIndex&&s.setZIndex&&(this._lastZIndex++,s.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ys(this._baseLayersList),ys(this._overlaysList),this._layerControlInputs=[];var s,l,d,m,y=0;for(d=0;d<this._layers.length;d++)m=this._layers[d],this._addItem(m),l=l||m.overlay,s=s||!m.overlay,y+=m.overlay?0:1;return this.options.hideSingleBase&&(s=s&&y>1,this._baseLayersList.style.display=s?"":"none"),this._separator.style.display=l&&s?"":"none",this},_onLayerChange:function(s){this._handlingClick||this._update();var l=this._getLayer(h(s.target)),d=l.overlay?s.type==="add"?"overlayadd":"overlayremove":s.type==="add"?"baselayerchange":null;d&&this._map.fire(d,l)},_createRadioElement:function(s,l){var d='<input type="radio" class="leaflet-control-layers-selector" name="'+s+'"'+(l?' checked="checked"':"")+"/>",m=document.createElement("div");return m.innerHTML=d,m.firstChild},_addItem:function(s){var l=document.createElement("label"),d=this._map.hasLayer(s.layer),m;s.overlay?(m=document.createElement("input"),m.type="checkbox",m.className="leaflet-control-layers-selector",m.defaultChecked=d):m=this._createRadioElement("leaflet-base-layers_"+h(this),d),this._layerControlInputs.push(m),m.layerId=h(s.layer),fe(m,"click",this._onInputClick,this);var y=document.createElement("span");y.innerHTML=" "+s.name;var S=document.createElement("span");l.appendChild(S),S.appendChild(m),S.appendChild(y);var j=s.overlay?this._overlaysList:this._baseLayersList;return j.appendChild(l),this._checkDisabledLayers(),l},_onInputClick:function(){if(!this._preventClick){var s=this._layerControlInputs,l,d,m=[],y=[];this._handlingClick=!0;for(var S=s.length-1;S>=0;S--)l=s[S],d=this._getLayer(l.layerId).layer,l.checked?m.push(d):l.checked||y.push(d);for(S=0;S<y.length;S++)this._map.hasLayer(y[S])&&this._map.removeLayer(y[S]);for(S=0;S<m.length;S++)this._map.hasLayer(m[S])||this._map.addLayer(m[S]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var s=this._layerControlInputs,l,d,m=this._map.getZoom(),y=s.length-1;y>=0;y--)l=s[y],d=this._getLayer(l.layerId).layer,l.disabled=d.options.minZoom!==void 0&&m<d.options.minZoom||d.options.maxZoom!==void 0&&m>d.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var s=this._section;this._preventClick=!0,fe(s,"click",Je),this.expand();var l=this;setTimeout(function(){ze(s,"click",Je),l._preventClick=!1})}}),kf=function(s,l,d){return new ml(s,l,d)},Dr=tn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(s){var l="leaflet-control-zoom",d=Ce("div",l+" leaflet-bar"),m=this.options;return this._zoomInButton=this._createButton(m.zoomInText,m.zoomInTitle,l+"-in",d,this._zoomIn),this._zoomOutButton=this._createButton(m.zoomOutText,m.zoomOutTitle,l+"-out",d,this._zoomOut),this._updateDisabled(),s.on("zoomend zoomlevelschange",this._updateDisabled,this),d},onRemove:function(s){s.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(s){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(s.shiftKey?3:1))},_zoomOut:function(s){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(s.shiftKey?3:1))},_createButton:function(s,l,d,m,y){var S=Ce("a",d,m);return S.innerHTML=s,S.href="#",S.title=l,S.setAttribute("role","button"),S.setAttribute("aria-label",l),mi(S),fe(S,"click",pn),fe(S,"click",y,this),fe(S,"click",this._refocusOnMap,this),S},_updateDisabled:function(){var s=this._map,l="leaflet-disabled";Ke(this._zoomInButton,l),Ke(this._zoomOutButton,l),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||s._zoom===s.getMinZoom())&&(Ee(this._zoomOutButton,l),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||s._zoom===s.getMaxZoom())&&(Ee(this._zoomInButton,l),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ae.mergeOptions({zoomControl:!0}),Ae.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Dr,this.addControl(this.zoomControl))});var Ac=function(s){return new Dr(s)},So=tn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(s){var l="leaflet-control-scale",d=Ce("div",l),m=this.options;return this._addScales(m,l+"-line",d),s.on(m.updateWhenIdle?"moveend":"move",this._update,this),s.whenReady(this._update,this),d},onRemove:function(s){s.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(s,l,d){s.metric&&(this._mScale=Ce("div",l,d)),s.imperial&&(this._iScale=Ce("div",l,d))},_update:function(){var s=this._map,l=s.getSize().y/2,d=s.distance(s.containerPointToLatLng([0,l]),s.containerPointToLatLng([this.options.maxWidth,l]));this._updateScales(d)},_updateScales:function(s){this.options.metric&&s&&this._updateMetric(s),this.options.imperial&&s&&this._updateImperial(s)},_updateMetric:function(s){var l=this._getRoundNum(s),d=l<1e3?l+" m":l/1e3+" km";this._updateScale(this._mScale,d,l/s)},_updateImperial:function(s){var l=s*3.2808399,d,m,y;l>5280?(d=l/5280,m=this._getRoundNum(d),this._updateScale(this._iScale,m+" mi",m/d)):(y=this._getRoundNum(l),this._updateScale(this._iScale,y+" ft",y/l))},_updateScale:function(s,l,d){s.style.width=Math.round(this.options.maxWidth*d)+"px",s.innerHTML=l},_getRoundNum:function(s){var l=Math.pow(10,(Math.floor(s)+"").length-1),d=s/l;return d=d>=10?10:d>=5?5:d>=3?3:d>=2?2:1,l*d}}),xo=function(s){return new So(s)},Pc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',gi=tn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ae.inlineSvg?Pc+" ":"")+"Leaflet</a>"},initialize:function(s){A(this,s),this._attributions={}},onAdd:function(s){s.attributionControl=this,this._container=Ce("div","leaflet-control-attribution"),mi(this._container);for(var l in s._layers)s._layers[l].getAttribution&&this.addAttribution(s._layers[l].getAttribution());return this._update(),s.on("layeradd",this._addAttribution,this),this._container},onRemove:function(s){s.off("layeradd",this._addAttribution,this)},_addAttribution:function(s){s.layer.getAttribution&&(this.addAttribution(s.layer.getAttribution()),s.layer.once("remove",function(){this.removeAttribution(s.layer.getAttribution())},this))},setPrefix:function(s){return this.options.prefix=s,this._update(),this},addAttribution:function(s){return s?(this._attributions[s]||(this._attributions[s]=0),this._attributions[s]++,this._update(),this):this},removeAttribution:function(s){return s?(this._attributions[s]&&(this._attributions[s]--,this._update()),this):this},_update:function(){if(this._map){var s=[];for(var l in this._attributions)this._attributions[l]&&s.push(l);var d=[];this.options.prefix&&d.push(this.options.prefix),s.length&&d.push(s.join(", ")),this._container.innerHTML=d.join(' <span aria-hidden="true">|</span> ')}}});Ae.mergeOptions({attributionControl:!0}),Ae.addInitHook(function(){this.options.attributionControl&&new gi().addTo(this)});var Nf=function(s){return new gi(s)};tn.Layers=ml,tn.Zoom=Dr,tn.Scale=So,tn.Attribution=gi,Kt.layers=kf,Kt.zoom=Ac,Kt.scale=xo,Kt.attribution=Nf;var mn=Me.extend({initialize:function(s){this._map=s},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});mn.addTo=function(s,l){return s.addHandler(l,this),this};var ws={Events:je},gl=ae.touch?"touchstart mousedown":"mousedown",Wn=Tt.extend({options:{clickTolerance:3},initialize:function(s,l,d,m){A(this,m),this._element=s,this._dragStartTarget=l||s,this._preventOutline=d},enable:function(){this._enabled||(fe(this._dragStartTarget,gl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Wn._dragging===this&&this.finishDrag(!0),ze(this._dragStartTarget,gl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(s){if(this._enabled&&(this._moved=!1,!rl(this._element,"leaflet-zoom-anim"))){if(s.touches&&s.touches.length!==1){Wn._dragging===this&&this.finishDrag();return}if(!(Wn._dragging||s.shiftKey||s.which!==1&&s.button!==1&&!s.touches)&&(Wn._dragging=this,this._preventOutline&&Or(this._element),ol(),$n(),!this._moving)){this.fire("down");var l=s.touches?s.touches[0]:s,d=ul(this._element);this._startPoint=new K(l.clientX,l.clientY),this._startPos=Pn(this._element),this._parentScale=wo(d);var m=s.type==="mousedown";fe(document,m?"mousemove":"touchmove",this._onMove,this),fe(document,m?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(s){if(this._enabled){if(s.touches&&s.touches.length>1){this._moved=!0;return}var l=s.touches&&s.touches.length===1?s.touches[0]:s,d=new K(l.clientX,l.clientY)._subtract(this._startPoint);!d.x&&!d.y||Math.abs(d.x)+Math.abs(d.y)<this.options.clickTolerance||(d.x/=this._parentScale.x,d.y/=this._parentScale.y,Je(s),this._moved||(this.fire("dragstart"),this._moved=!0,Ee(document.body,"leaflet-dragging"),this._lastTarget=s.target||s.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ee(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(d),this._moving=!0,this._lastEvent=s,this._updatePosition())}},_updatePosition:function(){var s={originalEvent:this._lastEvent};this.fire("predrag",s),me(this._element,this._newPos),this.fire("drag",s)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(s){Ke(document.body,"leaflet-dragging"),this._lastTarget&&(Ke(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ze(document,"mousemove touchmove",this._onMove,this),ze(document,"mouseup touchend touchcancel",this._onUp,this),al(),Hn();var l=this._moved&&this._moving;this._moving=!1,Wn._dragging=!1,l&&this.fire("dragend",{noInertia:s,distance:this._newPos.distanceTo(this._startPos)})}});function Io(s,l,d){var m,y=[1,4,2,8],S,j,$,H,J,ne,pe,Ie;for(S=0,ne=s.length;S<ne;S++)s[S]._code=lr(s[S],l);for($=0;$<4;$++){for(pe=y[$],m=[],S=0,ne=s.length,j=ne-1;S<ne;j=S++)H=s[S],J=s[j],H._code&pe?J._code&pe||(Ie=xt(J,H,pe,l,d),Ie._code=lr(Ie,l),m.push(Ie)):(J._code&pe&&(Ie=xt(J,H,pe,l,d),Ie._code=lr(Ie,l),m.push(Ie)),m.push(H));s=m}return s}function Ao(s,l){var d,m,y,S,j,$,H,J,ne;if(!s||s.length===0)throw new Error("latlngs not passed");c(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var pe=ve([0,0]),Ie=be(s),Zt=Ie.getNorthWest().distanceTo(Ie.getSouthWest())*Ie.getNorthEast().distanceTo(Ie.getNorthWest());Zt<1700&&(pe=Po(s));var It=s.length,Nn=[];for(d=0;d<It;d++){var nn=ve(s[d]);Nn.push(l.project(ve([nn.lat-pe.lat,nn.lng-pe.lng])))}for($=H=J=0,d=0,m=It-1;d<It;m=d++)y=Nn[d],S=Nn[m],j=y.y*S.x-S.y*y.x,H+=(y.x+S.x)*j,J+=(y.y+S.y)*j,$+=j*3;$===0?ne=Nn[0]:ne=[H/$,J/$];var Oo=l.unproject(ee(ne));return ve([Oo.lat+pe.lat,Oo.lng+pe.lng])}function Po(s){for(var l=0,d=0,m=0,y=0;y<s.length;y++){var S=ve(s[y]);l+=S.lat,d+=S.lng,m++}return ve([l/m,d/m])}var Co={__proto__:null,clipPolygon:Io,polygonCenter:Ao,centroid:Po};function _l(s,l){if(!l||!s.length)return s.slice();var d=l*l;return s=Rc(s,d),s=Cc(s,d),s}function vl(s,l,d){return Math.sqrt(kn(s,l,d,!0))}function Mr(s,l,d){return kn(s,l,d)}function Cc(s,l){var d=s.length,m=typeof Uint8Array<"u"?Uint8Array:Array,y=new m(d);y[0]=y[d-1]=1,Ro(s,y,l,0,d-1);var S,j=[];for(S=0;S<d;S++)y[S]&&j.push(s[S]);return j}function Ro(s,l,d,m,y){var S=0,j,$,H;for($=m+1;$<=y-1;$++)H=kn(s[$],s[m],s[y],!0),H>S&&(j=$,S=H);S>d&&(l[j]=1,Ro(s,l,d,m,j),Ro(s,l,d,j,y))}function Rc(s,l){for(var d=[s[0]],m=1,y=0,S=s.length;m<S;m++)bc(s[m],s[y])>l&&(d.push(s[m]),y=m);return y<S-1&&d.push(s[S-1]),d}var yl;function Es(s,l,d,m,y){var S=m?yl:lr(s,d),j=lr(l,d),$,H,J;for(yl=j;;){if(!(S|j))return[s,l];if(S&j)return!1;$=S||j,H=xt(s,l,$,d,y),J=lr(H,d),$===S?(s=H,S=J):(l=H,j=J)}}function xt(s,l,d,m,y){var S=l.x-s.x,j=l.y-s.y,$=m.min,H=m.max,J,ne;return d&8?(J=s.x+S*(H.y-s.y)/j,ne=H.y):d&4?(J=s.x+S*($.y-s.y)/j,ne=$.y):d&2?(J=H.x,ne=s.y+j*(H.x-s.x)/S):d&1&&(J=$.x,ne=s.y+j*($.x-s.x)/S),new K(J,ne,y)}function lr(s,l){var d=0;return s.x<l.min.x?d|=1:s.x>l.max.x&&(d|=2),s.y<l.min.y?d|=4:s.y>l.max.y&&(d|=8),d}function bc(s,l){var d=l.x-s.x,m=l.y-s.y;return d*d+m*m}function kn(s,l,d,m){var y=l.x,S=l.y,j=d.x-y,$=d.y-S,H=j*j+$*$,J;return H>0&&(J=((s.x-y)*j+(s.y-S)*$)/H,J>1?(y=d.x,S=d.y):J>0&&(y+=j*J,S+=$*J)),j=s.x-y,$=s.y-S,m?j*j+$*$:new K(y,S)}function c(s){return!x(s[0])||typeof s[0][0]!="object"&&typeof s[0][0]<"u"}function g(s){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),c(s)}function w(s,l){var d,m,y,S,j,$,H,J;if(!s||s.length===0)throw new Error("latlngs not passed");c(s)||(console.warn("latlngs are not flat! Only the first ring will be used"),s=s[0]);var ne=ve([0,0]),pe=be(s),Ie=pe.getNorthWest().distanceTo(pe.getSouthWest())*pe.getNorthEast().distanceTo(pe.getNorthWest());Ie<1700&&(ne=Po(s));var Zt=s.length,It=[];for(d=0;d<Zt;d++){var Nn=ve(s[d]);It.push(l.project(ve([Nn.lat-ne.lat,Nn.lng-ne.lng])))}for(d=0,m=0;d<Zt-1;d++)m+=It[d].distanceTo(It[d+1])/2;if(m===0)J=It[0];else for(d=0,S=0;d<Zt-1;d++)if(j=It[d],$=It[d+1],y=j.distanceTo($),S+=y,S>m){H=(S-m)/y,J=[$.x-H*($.x-j.x),$.y-H*($.y-j.y)];break}var nn=l.unproject(ee(J));return ve([nn.lat+ne.lat,nn.lng+ne.lng])}var C={__proto__:null,simplify:_l,pointToSegmentDistance:vl,closestPointOnSegment:Mr,clipSegment:Es,_getEdgeIntersection:xt,_getBitCode:lr,_sqClosestPointOnSegment:kn,isFlat:c,_flat:g,polylineCenter:w},B={project:function(s){return new K(s.lng,s.lat)},unproject:function(s){return new Se(s.y,s.x)},bounds:new le([-180,-90],[180,90])},q={R:6378137,R_MINOR:6356752314245179e-9,bounds:new le([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(s){var l=Math.PI/180,d=this.R,m=s.lat*l,y=this.R_MINOR/d,S=Math.sqrt(1-y*y),j=S*Math.sin(m),$=Math.tan(Math.PI/4-m/2)/Math.pow((1-j)/(1+j),S/2);return m=-d*Math.log(Math.max($,1e-10)),new K(s.lng*l*d,m)},unproject:function(s){for(var l=180/Math.PI,d=this.R,m=this.R_MINOR/d,y=Math.sqrt(1-m*m),S=Math.exp(-s.y/d),j=Math.PI/2-2*Math.atan(S),$=0,H=.1,J;$<15&&Math.abs(H)>1e-7;$++)J=y*Math.sin(j),J=Math.pow((1-J)/(1+J),y/2),H=Math.PI/2-2*Math.atan(S*J)-j,j+=H;return new Se(j*l,s.x*l/d)}},te={__proto__:null,LonLat:B,Mercator:q,SphericalMercator:li},Ve=i({},or,{code:"EPSG:3395",projection:q,transformation:function(){var s=.5/(Math.PI*q.R);return Cr(s,.5,-s,.5)}()}),dt=i({},or,{code:"EPSG:4326",projection:B,transformation:Cr(1/180,1,-1/180,.5)}),Ne=i({},_t,{projection:B,transformation:Cr(1,0,-1,0),scale:function(s){return Math.pow(2,s)},zoom:function(s){return Math.log(s)/Math.LN2},distance:function(s,l){var d=l.lng-s.lng,m=l.lat-s.lat;return Math.sqrt(d*d+m*m)},infinite:!0});_t.Earth=or,_t.EPSG3395=Ve,_t.EPSG3857=ls,_t.EPSG900913=Ba,_t.EPSG4326=dt,_t.Simple=Ne;var Be=Tt.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(s){return s.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(s){return s&&s.removeLayer(this),this},getPane:function(s){return this._map.getPane(s?this.options[s]||s:this.options.pane)},addInteractiveTarget:function(s){return this._map._targets[h(s)]=this,this},removeInteractiveTarget:function(s){return delete this._map._targets[h(s)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(s){var l=s.target;if(l.hasLayer(this)){if(this._map=l,this._zoomAnimated=l._zoomAnimated,this.getEvents){var d=this.getEvents();l.on(d,this),this.once("remove",function(){l.off(d,this)},this)}this.onAdd(l),this.fire("add"),l.fire("layeradd",{layer:this})}}});Ae.include({addLayer:function(s){if(!s._layerAdd)throw new Error("The provided object is not a Layer.");var l=h(s);return this._layers[l]?this:(this._layers[l]=s,s._mapToAdd=this,s.beforeAdd&&s.beforeAdd(this),this.whenReady(s._layerAdd,s),this)},removeLayer:function(s){var l=h(s);return this._layers[l]?(this._loaded&&s.onRemove(this),delete this._layers[l],this._loaded&&(this.fire("layerremove",{layer:s}),s.fire("remove")),s._map=s._mapToAdd=null,this):this},hasLayer:function(s){return h(s)in this._layers},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},_addLayers:function(s){s=s?x(s)?s:[s]:[];for(var l=0,d=s.length;l<d;l++)this.addLayer(s[l])},_addZoomLimit:function(s){(!isNaN(s.options.maxZoom)||!isNaN(s.options.minZoom))&&(this._zoomBoundLayers[h(s)]=s,this._updateZoomLevels())},_removeZoomLimit:function(s){var l=h(s);this._zoomBoundLayers[l]&&(delete this._zoomBoundLayers[l],this._updateZoomLevels())},_updateZoomLevels:function(){var s=1/0,l=-1/0,d=this._getZoomSpan();for(var m in this._zoomBoundLayers){var y=this._zoomBoundLayers[m].options;s=y.minZoom===void 0?s:Math.min(s,y.minZoom),l=y.maxZoom===void 0?l:Math.max(l,y.maxZoom)}this._layersMaxZoom=l===-1/0?void 0:l,this._layersMinZoom=s===1/0?void 0:s,d!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Xe=Be.extend({initialize:function(s,l){A(this,l),this._layers={};var d,m;if(s)for(d=0,m=s.length;d<m;d++)this.addLayer(s[d])},addLayer:function(s){var l=this.getLayerId(s);return this._layers[l]=s,this._map&&this._map.addLayer(s),this},removeLayer:function(s){var l=s in this._layers?s:this.getLayerId(s);return this._map&&this._layers[l]&&this._map.removeLayer(this._layers[l]),delete this._layers[l],this},hasLayer:function(s){var l=typeof s=="number"?s:this.getLayerId(s);return l in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(s){var l=Array.prototype.slice.call(arguments,1),d,m;for(d in this._layers)m=this._layers[d],m[s]&&m[s].apply(m,l);return this},onAdd:function(s){this.eachLayer(s.addLayer,s)},onRemove:function(s){this.eachLayer(s.removeLayer,s)},eachLayer:function(s,l){for(var d in this._layers)s.call(l,this._layers[d]);return this},getLayer:function(s){return this._layers[s]},getLayers:function(){var s=[];return this.eachLayer(s.push,s),s},setZIndex:function(s){return this.invoke("setZIndex",s)},getLayerId:function(s){return h(s)}}),_i=function(s,l){return new Xe(s,l)},lt=Xe.extend({addLayer:function(s){return this.hasLayer(s)?this:(s.addEventParent(this),Xe.prototype.addLayer.call(this,s),this.fire("layeradd",{layer:s}))},removeLayer:function(s){return this.hasLayer(s)?(s in this._layers&&(s=this._layers[s]),s.removeEventParent(this),Xe.prototype.removeLayer.call(this,s),this.fire("layerremove",{layer:s})):this},setStyle:function(s){return this.invoke("setStyle",s)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var s=new xe;for(var l in this._layers){var d=this._layers[l];s.extend(d.getBounds?d.getBounds():d.getLatLng())}return s}}),bo=function(s,l){return new lt(s,l)},ur=Me.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(s){A(this,s)},createIcon:function(s){return this._createIcon("icon",s)},createShadow:function(s){return this._createIcon("shadow",s)},_createIcon:function(s,l){var d=this._getIconUrl(s);if(!d){if(s==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var m=this._createImg(d,l&&l.tagName==="IMG"?l:null);return this._setIconStyles(m,s),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),m},_setIconStyles:function(s,l){var d=this.options,m=d[l+"Size"];typeof m=="number"&&(m=[m,m]);var y=ee(m),S=ee(l==="shadow"&&d.shadowAnchor||d.iconAnchor||y&&y.divideBy(2,!0));s.className="leaflet-marker-"+l+" "+(d.className||""),S&&(s.style.marginLeft=-S.x+"px",s.style.marginTop=-S.y+"px"),y&&(s.style.width=y.x+"px",s.style.height=y.y+"px")},_createImg:function(s,l){return l=l||document.createElement("img"),l.src=s,l},_getIconUrl:function(s){return ae.retina&&this.options[s+"RetinaUrl"]||this.options[s+"Url"]}});function xA(s){return new ur(s)}var wl=ur.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(s){return typeof wl.imagePath!="string"&&(wl.imagePath=this._detectIconPath()),(this.options.imagePath||wl.imagePath)+ur.prototype._getIconUrl.call(this,s)},_stripUrl:function(s){var l=function(d,m,y){var S=m.exec(d);return S&&S[y]};return s=l(s,/^url\((['"])?(.+)\1\)$/,2),s&&l(s,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var s=Ce("div","leaflet-default-icon-path",document.body),l=hi(s,"background-image")||hi(s,"backgroundImage");if(document.body.removeChild(s),l=this._stripUrl(l),l)return l;var d=document.querySelector('link[href$="leaflet.css"]');return d?d.href.substring(0,d.href.length-11-1):""}}),cv=mn.extend({initialize:function(s){this._marker=s},addHooks:function(){var s=this._marker._icon;this._draggable||(this._draggable=new Wn(s,s,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ee(s,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ke(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(s){var l=this._marker,d=l._map,m=this._marker.options.autoPanSpeed,y=this._marker.options.autoPanPadding,S=Pn(l._icon),j=d.getPixelBounds(),$=d.getPixelOrigin(),H=de(j.min._subtract($).add(y),j.max._subtract($).subtract(y));if(!H.contains(S)){var J=ee((Math.max(H.max.x,S.x)-H.max.x)/(j.max.x-H.max.x)-(Math.min(H.min.x,S.x)-H.min.x)/(j.min.x-H.min.x),(Math.max(H.max.y,S.y)-H.max.y)/(j.max.y-H.max.y)-(Math.min(H.min.y,S.y)-H.min.y)/(j.min.y-H.min.y)).multiplyBy(m);d.panBy(J,{animate:!1}),this._draggable._newPos._add(J),this._draggable._startPos._add(J),me(l._icon,this._draggable._newPos),this._onDrag(s),this._panRequest=F(this._adjustPan.bind(this,s))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(s){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=F(this._adjustPan.bind(this,s)))},_onDrag:function(s){var l=this._marker,d=l._shadow,m=Pn(l._icon),y=l._map.layerPointToLatLng(m);d&&me(d,m),l._latlng=y,s.latlng=y,s.oldLatLng=this._oldLatLng,l.fire("move",s).fire("drag",s)},_onDragEnd:function(s){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",s)}}),kc=Be.extend({options:{icon:new wl,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(s,l){A(this,l),this._latlng=ve(s)},onAdd:function(s){this._zoomAnimated=this._zoomAnimated&&s.options.markerZoomAnimation,this._zoomAnimated&&s.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(s){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&s.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(s){var l=this._latlng;return this._latlng=ve(s),this.update(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},setZIndexOffset:function(s){return this.options.zIndexOffset=s,this.update()},getIcon:function(){return this.options.icon},setIcon:function(s){return this.options.icon=s,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var s=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(s)}return this},_initIcon:function(){var s=this.options,l="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),d=s.icon.createIcon(this._icon),m=!1;d!==this._icon&&(this._icon&&this._removeIcon(),m=!0,s.title&&(d.title=s.title),d.tagName==="IMG"&&(d.alt=s.alt||"")),Ee(d,l),s.keyboard&&(d.tabIndex="0",d.setAttribute("role","button")),this._icon=d,s.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&fe(d,"focus",this._panOnFocus,this);var y=s.icon.createShadow(this._shadow),S=!1;y!==this._shadow&&(this._removeShadow(),S=!0),y&&(Ee(y,l),y.alt=""),this._shadow=y,s.opacity<1&&this._updateOpacity(),m&&this.getPane().appendChild(this._icon),this._initInteraction(),y&&S&&this.getPane(s.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ze(this._icon,"focus",this._panOnFocus,this),$e(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&$e(this._shadow),this._shadow=null},_setPos:function(s){this._icon&&me(this._icon,s),this._shadow&&me(this._shadow,s),this._zIndex=s.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(s){this._icon&&(this._icon.style.zIndex=this._zIndex+s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center).round();this._setPos(l)},_initInteraction:function(){if(this.options.interactive&&(Ee(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),cv)){var s=this.options.draggable;this.dragging&&(s=this.dragging.enabled(),this.dragging.disable()),this.dragging=new cv(this),s&&this.dragging.enable()}},setOpacity:function(s){return this.options.opacity=s,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var s=this.options.opacity;this._icon&&it(this._icon,s),this._shadow&&it(this._shadow,s)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var s=this._map;if(s){var l=this.options.icon.options,d=l.iconSize?ee(l.iconSize):ee(0,0),m=l.iconAnchor?ee(l.iconAnchor):ee(0,0);s.panInside(this._latlng,{paddingTopLeft:m,paddingBottomRight:d.subtract(m)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function IA(s,l){return new kc(s,l)}var vi=Be.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(s){this._renderer=s.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(s){return A(this,s),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&s&&Object.prototype.hasOwnProperty.call(s,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Nc=vi.extend({options:{fill:!0,radius:10},initialize:function(s,l){A(this,l),this._latlng=ve(s),this._radius=this.options.radius},setLatLng:function(s){var l=this._latlng;return this._latlng=ve(s),this.redraw(),this.fire("move",{oldLatLng:l,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(s){return this.options.radius=this._radius=s,this.redraw()},getRadius:function(){return this._radius},setStyle:function(s){var l=s&&s.radius||this._radius;return vi.prototype.setStyle.call(this,s),this.setRadius(l),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var s=this._radius,l=this._radiusY||s,d=this._clickTolerance(),m=[s+d,l+d];this._pxBounds=new le(this._point.subtract(m),this._point.add(m))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(s){return s.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function AA(s,l){return new Nc(s,l)}var Lf=Nc.extend({initialize:function(s,l,d){if(typeof l=="number"&&(l=i({},d,{radius:l})),A(this,l),this._latlng=ve(s),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(s){return this._mRadius=s,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var s=[this._radius,this._radiusY||this._radius];return new xe(this._map.layerPointToLatLng(this._point.subtract(s)),this._map.layerPointToLatLng(this._point.add(s)))},setStyle:vi.prototype.setStyle,_project:function(){var s=this._latlng.lng,l=this._latlng.lat,d=this._map,m=d.options.crs;if(m.distance===or.distance){var y=Math.PI/180,S=this._mRadius/or.R/y,j=d.project([l+S,s]),$=d.project([l-S,s]),H=j.add($).divideBy(2),J=d.unproject(H).lat,ne=Math.acos((Math.cos(S*y)-Math.sin(l*y)*Math.sin(J*y))/(Math.cos(l*y)*Math.cos(J*y)))/y;(isNaN(ne)||ne===0)&&(ne=S/Math.cos(Math.PI/180*l)),this._point=H.subtract(d.getPixelOrigin()),this._radius=isNaN(ne)?0:H.x-d.project([J,s-ne]).x,this._radiusY=H.y-j.y}else{var pe=m.unproject(m.project(this._latlng).subtract([this._mRadius,0]));this._point=d.latLngToLayerPoint(this._latlng),this._radius=this._point.x-d.latLngToLayerPoint(pe).x}this._updateBounds()}});function PA(s,l,d){return new Lf(s,l,d)}var jr=vi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(s,l){A(this,l),this._setLatLngs(s)},getLatLngs:function(){return this._latlngs},setLatLngs:function(s){return this._setLatLngs(s),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(s){for(var l=1/0,d=null,m=kn,y,S,j=0,$=this._parts.length;j<$;j++)for(var H=this._parts[j],J=1,ne=H.length;J<ne;J++){y=H[J-1],S=H[J];var pe=m(s,y,S,!0);pe<l&&(l=pe,d=m(s,y,S))}return d&&(d.distance=Math.sqrt(l)),d},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return w(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(s,l){return l=l||this._defaultShape(),s=ve(s),l.push(s),this._bounds.extend(s),this.redraw()},_setLatLngs:function(s){this._bounds=new xe,this._latlngs=this._convertLatLngs(s)},_defaultShape:function(){return c(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(s){for(var l=[],d=c(s),m=0,y=s.length;m<y;m++)d?(l[m]=ve(s[m]),this._bounds.extend(l[m])):l[m]=this._convertLatLngs(s[m]);return l},_project:function(){var s=new le;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,s),this._bounds.isValid()&&s.isValid()&&(this._rawPxBounds=s,this._updateBounds())},_updateBounds:function(){var s=this._clickTolerance(),l=new K(s,s);this._rawPxBounds&&(this._pxBounds=new le([this._rawPxBounds.min.subtract(l),this._rawPxBounds.max.add(l)]))},_projectLatlngs:function(s,l,d){var m=s[0]instanceof Se,y=s.length,S,j;if(m){for(j=[],S=0;S<y;S++)j[S]=this._map.latLngToLayerPoint(s[S]),d.extend(j[S]);l.push(j)}else for(S=0;S<y;S++)this._projectLatlngs(s[S],l,d)},_clipPoints:function(){var s=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}var l=this._parts,d,m,y,S,j,$,H;for(d=0,y=0,S=this._rings.length;d<S;d++)for(H=this._rings[d],m=0,j=H.length;m<j-1;m++)$=Es(H[m],H[m+1],s,m,!0),$&&(l[y]=l[y]||[],l[y].push($[0]),($[1]!==H[m+1]||m===j-2)&&(l[y].push($[1]),y++))}},_simplifyPoints:function(){for(var s=this._parts,l=this.options.smoothFactor,d=0,m=s.length;d<m;d++)s[d]=_l(s[d],l)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(s,l){var d,m,y,S,j,$,H=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(d=0,S=this._parts.length;d<S;d++)for($=this._parts[d],m=0,j=$.length,y=j-1;m<j;y=m++)if(!(!l&&m===0)&&vl(s,$[y],$[m])<=H)return!0;return!1}});function CA(s,l){return new jr(s,l)}jr._flat=g;var ko=jr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ao(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(s){var l=jr.prototype._convertLatLngs.call(this,s),d=l.length;return d>=2&&l[0]instanceof Se&&l[0].equals(l[d-1])&&l.pop(),l},_setLatLngs:function(s){jr.prototype._setLatLngs.call(this,s),c(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return c(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var s=this._renderer._bounds,l=this.options.weight,d=new K(l,l);if(s=new le(s.min.subtract(d),s.max.add(d)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(s))){if(this.options.noClip){this._parts=this._rings;return}for(var m=0,y=this._rings.length,S;m<y;m++)S=Io(this._rings[m],s,!0),S.length&&this._parts.push(S)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(s){var l=!1,d,m,y,S,j,$,H,J;if(!this._pxBounds||!this._pxBounds.contains(s))return!1;for(S=0,H=this._parts.length;S<H;S++)for(d=this._parts[S],j=0,J=d.length,$=J-1;j<J;$=j++)m=d[j],y=d[$],m.y>s.y!=y.y>s.y&&s.x<(y.x-m.x)*(s.y-m.y)/(y.y-m.y)+m.x&&(l=!l);return l||jr.prototype._containsPoint.call(this,s,!0)}});function RA(s,l){return new ko(s,l)}var Vr=lt.extend({initialize:function(s,l){A(this,l),this._layers={},s&&this.addData(s)},addData:function(s){var l=x(s)?s:s.features,d,m,y;if(l){for(d=0,m=l.length;d<m;d++)y=l[d],(y.geometries||y.geometry||y.features||y.coordinates)&&this.addData(y);return this}var S=this.options;if(S.filter&&!S.filter(s))return this;var j=Lc(s,S);return j?(j.feature=Mc(s),j.defaultOptions=j.options,this.resetStyle(j),S.onEachFeature&&S.onEachFeature(s,j),this.addLayer(j)):this},resetStyle:function(s){return s===void 0?this.eachLayer(this.resetStyle,this):(s.options=i({},s.defaultOptions),this._setLayerStyle(s,this.options.style),this)},setStyle:function(s){return this.eachLayer(function(l){this._setLayerStyle(l,s)},this)},_setLayerStyle:function(s,l){s.setStyle&&(typeof l=="function"&&(l=l(s.feature)),s.setStyle(l))}});function Lc(s,l){var d=s.type==="Feature"?s.geometry:s,m=d?d.coordinates:null,y=[],S=l&&l.pointToLayer,j=l&&l.coordsToLatLng||Of,$,H,J,ne;if(!m&&!d)return null;switch(d.type){case"Point":return $=j(m),hv(S,s,$,l);case"MultiPoint":for(J=0,ne=m.length;J<ne;J++)$=j(m[J]),y.push(hv(S,s,$,l));return new lt(y);case"LineString":case"MultiLineString":return H=Oc(m,d.type==="LineString"?0:1,j),new jr(H,l);case"Polygon":case"MultiPolygon":return H=Oc(m,d.type==="Polygon"?1:2,j),new ko(H,l);case"GeometryCollection":for(J=0,ne=d.geometries.length;J<ne;J++){var pe=Lc({geometry:d.geometries[J],type:"Feature",properties:s.properties},l);pe&&y.push(pe)}return new lt(y);case"FeatureCollection":for(J=0,ne=d.features.length;J<ne;J++){var Ie=Lc(d.features[J],l);Ie&&y.push(Ie)}return new lt(y);default:throw new Error("Invalid GeoJSON object.")}}function hv(s,l,d,m){return s?s(l,d):new kc(d,m&&m.markersInheritOptions&&m)}function Of(s){return new Se(s[1],s[0],s[2])}function Oc(s,l,d){for(var m=[],y=0,S=s.length,j;y<S;y++)j=l?Oc(s[y],l-1,d):(d||Of)(s[y]),m.push(j);return m}function Df(s,l){return s=ve(s),s.alt!==void 0?[E(s.lng,l),E(s.lat,l),E(s.alt,l)]:[E(s.lng,l),E(s.lat,l)]}function Dc(s,l,d,m){for(var y=[],S=0,j=s.length;S<j;S++)y.push(l?Dc(s[S],c(s[S])?0:l-1,d,m):Df(s[S],m));return!l&&d&&y.length>0&&y.push(y[0].slice()),y}function No(s,l){return s.feature?i({},s.feature,{geometry:l}):Mc(l)}function Mc(s){return s.type==="Feature"||s.type==="FeatureCollection"?s:{type:"Feature",properties:{},geometry:s}}var Mf={toGeoJSON:function(s){return No(this,{type:"Point",coordinates:Df(this.getLatLng(),s)})}};kc.include(Mf),Lf.include(Mf),Nc.include(Mf),jr.include({toGeoJSON:function(s){var l=!c(this._latlngs),d=Dc(this._latlngs,l?1:0,!1,s);return No(this,{type:(l?"Multi":"")+"LineString",coordinates:d})}}),ko.include({toGeoJSON:function(s){var l=!c(this._latlngs),d=l&&!c(this._latlngs[0]),m=Dc(this._latlngs,d?2:l?1:0,!0,s);return l||(m=[m]),No(this,{type:(d?"Multi":"")+"Polygon",coordinates:m})}}),Xe.include({toMultiPoint:function(s){var l=[];return this.eachLayer(function(d){l.push(d.toGeoJSON(s).geometry.coordinates)}),No(this,{type:"MultiPoint",coordinates:l})},toGeoJSON:function(s){var l=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(l==="MultiPoint")return this.toMultiPoint(s);var d=l==="GeometryCollection",m=[];return this.eachLayer(function(y){if(y.toGeoJSON){var S=y.toGeoJSON(s);if(d)m.push(S.geometry);else{var j=Mc(S);j.type==="FeatureCollection"?m.push.apply(m,j.features):m.push(j)}}}),d?No(this,{geometries:m,type:"GeometryCollection"}):{type:"FeatureCollection",features:m}}});function dv(s,l){return new Vr(s,l)}var bA=dv,jc=Be.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(s,l,d){this._url=s,this._bounds=be(l),A(this,d)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ee(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){$e(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(s){return this.options.opacity=s,this._image&&this._updateOpacity(),this},setStyle:function(s){return s.opacity&&this.setOpacity(s.opacity),this},bringToFront:function(){return this._map&&Nr(this._image),this},bringToBack:function(){return this._map&&di(this._image),this},setUrl:function(s){return this._url=s,this._image&&(this._image.src=s),this},setBounds:function(s){return this._bounds=be(s),this._map&&this._reset(),this},getEvents:function(){var s={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var s=this._url.tagName==="IMG",l=this._image=s?this._url:Ce("img");if(Ee(l,"leaflet-image-layer"),this._zoomAnimated&&Ee(l,"leaflet-zoom-animated"),this.options.className&&Ee(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onload=a(this.fire,this,"load"),l.onerror=a(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),s){this._url=l.src;return}l.src=this._url,l.alt=this.options.alt},_animateZoom:function(s){var l=this._map.getZoomScale(s.zoom),d=this._map._latLngBoundsToNewLayerBounds(this._bounds,s.zoom,s.center).min;ar(this._image,d,l)},_reset:function(){var s=this._image,l=new le(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),d=l.getSize();me(s,l.min),s.style.width=d.x+"px",s.style.height=d.y+"px"},_updateOpacity:function(){it(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var s=this.options.errorOverlayUrl;s&&this._url!==s&&(this._url=s,this._image.src=s)},getCenter:function(){return this._bounds.getCenter()}}),kA=function(s,l,d){return new jc(s,l,d)},fv=jc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var s=this._url.tagName==="VIDEO",l=this._image=s?this._url:Ce("video");if(Ee(l,"leaflet-image-layer"),this._zoomAnimated&&Ee(l,"leaflet-zoom-animated"),this.options.className&&Ee(l,this.options.className),l.onselectstart=v,l.onmousemove=v,l.onloadeddata=a(this.fire,this,"load"),s){for(var d=l.getElementsByTagName("source"),m=[],y=0;y<d.length;y++)m.push(d[y].src);this._url=d.length>0?m:[l.src];return}x(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(l.style,"objectFit")&&(l.style.objectFit="fill"),l.autoplay=!!this.options.autoplay,l.loop=!!this.options.loop,l.muted=!!this.options.muted,l.playsInline=!!this.options.playsInline;for(var S=0;S<this._url.length;S++){var j=Ce("source");j.src=this._url[S],l.appendChild(j)}}});function NA(s,l,d){return new fv(s,l,d)}var pv=jc.extend({_initImage:function(){var s=this._image=this._url;Ee(s,"leaflet-image-layer"),this._zoomAnimated&&Ee(s,"leaflet-zoom-animated"),this.options.className&&Ee(s,this.options.className),s.onselectstart=v,s.onmousemove=v}});function LA(s,l,d){return new pv(s,l,d)}var cr=Be.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(s,l){s&&(s instanceof Se||x(s))?(this._latlng=ve(s),A(this,l)):(A(this,s),this._source=l),this.options.content&&(this._content=this.options.content)},openOn:function(s){return s=arguments.length?s:this._source._map,s.hasLayer(this)||s.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(s){return this._map?this.close():(arguments.length?this._source=s:s=this._source,this._prepareOpen(),this.openOn(s._map)),this},onAdd:function(s){this._zoomAnimated=s._zoomAnimated,this._container||this._initLayout(),s._fadeAnimated&&it(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),s._fadeAnimated&&it(this._container,1),this.bringToFront(),this.options.interactive&&(Ee(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(s){s._fadeAnimated?(it(this._container,0),this._removeTimeout=setTimeout(a($e,void 0,this._container),200)):$e(this._container),this.options.interactive&&(Ke(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(s){return this._latlng=ve(s),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(s){return this._content=s,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var s={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Nr(this._container),this},bringToBack:function(){return this._map&&di(this._container),this},_prepareOpen:function(s){var l=this._source;if(!l._map)return!1;if(l instanceof lt){l=null;var d=this._source._layers;for(var m in d)if(d[m]._map){l=d[m];break}if(!l)return!1;this._source=l}if(!s)if(l.getCenter)s=l.getCenter();else if(l.getLatLng)s=l.getLatLng();else if(l.getBounds)s=l.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(s),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var s=this._contentNode,l=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof l=="string")s.innerHTML=l;else{for(;s.hasChildNodes();)s.removeChild(s.firstChild);s.appendChild(l)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var s=this._map.latLngToLayerPoint(this._latlng),l=ee(this.options.offset),d=this._getAnchor();this._zoomAnimated?me(this._container,s.add(d)):l=l.add(s).add(d);var m=this._containerBottom=-l.y,y=this._containerLeft=-Math.round(this._containerWidth/2)+l.x;this._container.style.bottom=m+"px",this._container.style.left=y+"px"}},_getAnchor:function(){return[0,0]}});Ae.include({_initOverlay:function(s,l,d,m){var y=l;return y instanceof s||(y=new s(m).setContent(l)),d&&y.setLatLng(d),y}}),Be.include({_initOverlay:function(s,l,d,m){var y=d;return y instanceof s?(A(y,m),y._source=this):(y=l&&!m?l:new s(m,this),y.setContent(d)),y}});var Vc=cr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(s){return s=arguments.length?s:this._source._map,!s.hasLayer(this)&&s._popup&&s._popup.options.autoClose&&s.removeLayer(s._popup),s._popup=this,cr.prototype.openOn.call(this,s)},onAdd:function(s){cr.prototype.onAdd.call(this,s),s.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof vi||this._source.on("preclick",bn))},onRemove:function(s){cr.prototype.onRemove.call(this,s),s.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof vi||this._source.off("preclick",bn))},getEvents:function(){var s=cr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(s.preclick=this.close),this.options.keepInView&&(s.moveend=this._adjustPan),s},_initLayout:function(){var s="leaflet-popup",l=this._container=Ce("div",s+" "+(this.options.className||"")+" leaflet-zoom-animated"),d=this._wrapper=Ce("div",s+"-content-wrapper",l);if(this._contentNode=Ce("div",s+"-content",d),mi(l),pi(this._contentNode),fe(l,"contextmenu",bn),this._tipContainer=Ce("div",s+"-tip-container",l),this._tip=Ce("div",s+"-tip",this._tipContainer),this.options.closeButton){var m=this._closeButton=Ce("a",s+"-close-button",l);m.setAttribute("role","button"),m.setAttribute("aria-label","Close popup"),m.href="#close",m.innerHTML='<span aria-hidden="true">&#215;</span>',fe(m,"click",function(y){Je(y),this.close()},this)}},_updateLayout:function(){var s=this._contentNode,l=s.style;l.width="",l.whiteSpace="nowrap";var d=s.offsetWidth;d=Math.min(d,this.options.maxWidth),d=Math.max(d,this.options.minWidth),l.width=d+1+"px",l.whiteSpace="",l.height="";var m=s.offsetHeight,y=this.options.maxHeight,S="leaflet-popup-scrolled";y&&m>y?(l.height=y+"px",Ee(s,S)):Ke(s,S),this._containerWidth=this._container.offsetWidth},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center),d=this._getAnchor();me(this._container,l.add(d))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var s=this._map,l=parseInt(hi(this._container,"marginBottom"),10)||0,d=this._container.offsetHeight+l,m=this._containerWidth,y=new K(this._containerLeft,-d-this._containerBottom);y._add(Pn(this._container));var S=s.layerPointToContainerPoint(y),j=ee(this.options.autoPanPadding),$=ee(this.options.autoPanPaddingTopLeft||j),H=ee(this.options.autoPanPaddingBottomRight||j),J=s.getSize(),ne=0,pe=0;S.x+m+H.x>J.x&&(ne=S.x+m-J.x+H.x),S.x-ne-$.x<0&&(ne=S.x-$.x),S.y+d+H.y>J.y&&(pe=S.y+d-J.y+H.y),S.y-pe-$.y<0&&(pe=S.y-$.y),(ne||pe)&&(this.options.keepInView&&(this._autopanning=!0),s.fire("autopanstart").panBy([ne,pe]))}},_getAnchor:function(){return ee(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),OA=function(s,l){return new Vc(s,l)};Ae.mergeOptions({closePopupOnClick:!0}),Ae.include({openPopup:function(s,l,d){return this._initOverlay(Vc,s,l,d).openOn(this),this},closePopup:function(s){return s=arguments.length?s:this._popup,s&&s.close(),this}}),Be.include({bindPopup:function(s,l){return this._popup=this._initOverlay(Vc,this._popup,s,l),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(s){return this._popup&&(this instanceof lt||(this._popup._source=this),this._popup._prepareOpen(s||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(s){return this._popup&&this._popup.setContent(s),this},getPopup:function(){return this._popup},_openPopup:function(s){if(!(!this._popup||!this._map)){pn(s);var l=s.layer||s.target;if(this._popup._source===l&&!(l instanceof vi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(s.latlng);return}this._popup._source=l,this.openPopup(s.latlng)}},_movePopup:function(s){this._popup.setLatLng(s.latlng)},_onKeyPress:function(s){s.originalEvent.keyCode===13&&this._openPopup(s)}});var Fc=cr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(s){cr.prototype.onAdd.call(this,s),this.setOpacity(this.options.opacity),s.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(s){cr.prototype.onRemove.call(this,s),s.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var s=cr.prototype.getEvents.call(this);return this.options.permanent||(s.preclick=this.close),s},_initLayout:function(){var s="leaflet-tooltip",l=s+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ce("div",l),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(s){var l,d,m=this._map,y=this._container,S=m.latLngToContainerPoint(m.getCenter()),j=m.layerPointToContainerPoint(s),$=this.options.direction,H=y.offsetWidth,J=y.offsetHeight,ne=ee(this.options.offset),pe=this._getAnchor();$==="top"?(l=H/2,d=J):$==="bottom"?(l=H/2,d=0):$==="center"?(l=H/2,d=J/2):$==="right"?(l=0,d=J/2):$==="left"?(l=H,d=J/2):j.x<S.x?($="right",l=0,d=J/2):($="left",l=H+(ne.x+pe.x)*2,d=J/2),s=s.subtract(ee(l,d,!0)).add(ne).add(pe),Ke(y,"leaflet-tooltip-right"),Ke(y,"leaflet-tooltip-left"),Ke(y,"leaflet-tooltip-top"),Ke(y,"leaflet-tooltip-bottom"),Ee(y,"leaflet-tooltip-"+$),me(y,s)},_updatePosition:function(){var s=this._map.latLngToLayerPoint(this._latlng);this._setPosition(s)},setOpacity:function(s){this.options.opacity=s,this._container&&it(this._container,s)},_animateZoom:function(s){var l=this._map._latLngToNewLayerPoint(this._latlng,s.zoom,s.center);this._setPosition(l)},_getAnchor:function(){return ee(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),DA=function(s,l){return new Fc(s,l)};Ae.include({openTooltip:function(s,l,d){return this._initOverlay(Fc,s,l,d).openOn(this),this},closeTooltip:function(s){return s.close(),this}}),Be.include({bindTooltip:function(s,l){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Fc,this._tooltip,s,l),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(s){if(!(!s&&this._tooltipHandlersAdded)){var l=s?"off":"on",d={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?d.add=this._openTooltip:(d.mouseover=this._openTooltip,d.mouseout=this.closeTooltip,d.click=this._openTooltip,this._map?this._addFocusListeners():d.add=this._addFocusListeners),this._tooltip.options.sticky&&(d.mousemove=this._moveTooltip),this[l](d),this._tooltipHandlersAdded=!s}},openTooltip:function(s){return this._tooltip&&(this instanceof lt||(this._tooltip._source=this),this._tooltip._prepareOpen(s)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(s){return this._tooltip&&this._tooltip.setContent(s),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&(fe(l,"focus",function(){this._tooltip._source=s,this.openTooltip()},this),fe(l,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(s){var l=typeof s.getElement=="function"&&s.getElement();l&&l.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(s){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var l=this;this._map.once("moveend",function(){l._openOnceFlag=!1,l._openTooltip(s)});return}this._tooltip._source=s.layer||s.target,this.openTooltip(this._tooltip.options.sticky?s.latlng:void 0)}},_moveTooltip:function(s){var l=s.latlng,d,m;this._tooltip.options.sticky&&s.originalEvent&&(d=this._map.mouseEventToContainerPoint(s.originalEvent),m=this._map.containerPointToLayerPoint(d),l=this._map.layerPointToLatLng(m)),this._tooltip.setLatLng(l)}});var mv=ur.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(s){var l=s&&s.tagName==="DIV"?s:document.createElement("div"),d=this.options;if(d.html instanceof Element?(ys(l),l.appendChild(d.html)):l.innerHTML=d.html!==!1?d.html:"",d.bgPos){var m=ee(d.bgPos);l.style.backgroundPosition=-m.x+"px "+-m.y+"px"}return this._setIconStyles(l,"icon"),l},createShadow:function(){return null}});function MA(s){return new mv(s)}ur.Default=wl;var El=Be.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ae.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(s){A(this,s)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(s){s._addZoomLimit(this)},onRemove:function(s){this._removeAllTiles(),$e(this._container),s._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Nr(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(di(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(s){return this.options.opacity=s,this._updateOpacity(),this},setZIndex:function(s){return this.options.zIndex=s,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var s=this._clampZoom(this._map.getZoom());s!==this._tileZoom&&(this._tileZoom=s,this._updateLevels()),this._update()}return this},getEvents:function(){var s={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),s.move=this._onMove),this._zoomAnimated&&(s.zoomanim=this._animateZoom),s},createTile:function(){return document.createElement("div")},getTileSize:function(){var s=this.options.tileSize;return s instanceof K?s:new K(s,s)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(s){for(var l=this.getPane().children,d=-s(-1/0,1/0),m=0,y=l.length,S;m<y;m++)S=l[m].style.zIndex,l[m]!==this._container&&S&&(d=s(d,+S));isFinite(d)&&(this.options.zIndex=d+s(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ae.ielt9){it(this._container,this.options.opacity);var s=+new Date,l=!1,d=!1;for(var m in this._tiles){var y=this._tiles[m];if(!(!y.current||!y.loaded)){var S=Math.min(1,(s-y.loaded)/200);it(y.el,S),S<1?l=!0:(y.active?d=!0:this._onOpaqueTile(y),y.active=!0)}}d&&!this._noPrune&&this._pruneTiles(),l&&(z(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this))}},_onOpaqueTile:v,_initContainer:function(){this._container||(this._container=Ce("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var s=this._tileZoom,l=this.options.maxZoom;if(s!==void 0){for(var d in this._levels)d=Number(d),this._levels[d].el.children.length||d===s?(this._levels[d].el.style.zIndex=l-Math.abs(s-d),this._onUpdateLevel(d)):($e(this._levels[d].el),this._removeTilesAtZoom(d),this._onRemoveLevel(d),delete this._levels[d]);var m=this._levels[s],y=this._map;return m||(m=this._levels[s]={},m.el=Ce("div","leaflet-tile-container leaflet-zoom-animated",this._container),m.el.style.zIndex=l,m.origin=y.project(y.unproject(y.getPixelOrigin()),s).round(),m.zoom=s,this._setZoomTransform(m,y.getCenter(),y.getZoom()),v(m.el.offsetWidth),this._onCreateLevel(m)),this._level=m,m}},_onUpdateLevel:v,_onRemoveLevel:v,_onCreateLevel:v,_pruneTiles:function(){if(this._map){var s,l,d=this._map.getZoom();if(d>this.options.maxZoom||d<this.options.minZoom){this._removeAllTiles();return}for(s in this._tiles)l=this._tiles[s],l.retain=l.current;for(s in this._tiles)if(l=this._tiles[s],l.current&&!l.active){var m=l.coords;this._retainParent(m.x,m.y,m.z,m.z-5)||this._retainChildren(m.x,m.y,m.z,m.z+2)}for(s in this._tiles)this._tiles[s].retain||this._removeTile(s)}},_removeTilesAtZoom:function(s){for(var l in this._tiles)this._tiles[l].coords.z===s&&this._removeTile(l)},_removeAllTiles:function(){for(var s in this._tiles)this._removeTile(s)},_invalidateAll:function(){for(var s in this._levels)$e(this._levels[s].el),this._onRemoveLevel(Number(s)),delete this._levels[s];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(s,l,d,m){var y=Math.floor(s/2),S=Math.floor(l/2),j=d-1,$=new K(+y,+S);$.z=+j;var H=this._tileCoordsToKey($),J=this._tiles[H];return J&&J.active?(J.retain=!0,!0):(J&&J.loaded&&(J.retain=!0),j>m?this._retainParent(y,S,j,m):!1)},_retainChildren:function(s,l,d,m){for(var y=2*s;y<2*s+2;y++)for(var S=2*l;S<2*l+2;S++){var j=new K(y,S);j.z=d+1;var $=this._tileCoordsToKey(j),H=this._tiles[$];if(H&&H.active){H.retain=!0;continue}else H&&H.loaded&&(H.retain=!0);d+1<m&&this._retainChildren(y,S,d+1,m)}},_resetView:function(s){var l=s&&(s.pinch||s.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),l,l)},_animateZoom:function(s){this._setView(s.center,s.zoom,!0,s.noUpdate)},_clampZoom:function(s){var l=this.options;return l.minNativeZoom!==void 0&&s<l.minNativeZoom?l.minNativeZoom:l.maxNativeZoom!==void 0&&l.maxNativeZoom<s?l.maxNativeZoom:s},_setView:function(s,l,d,m){var y=Math.round(l);this.options.maxZoom!==void 0&&y>this.options.maxZoom||this.options.minZoom!==void 0&&y<this.options.minZoom?y=void 0:y=this._clampZoom(y);var S=this.options.updateWhenZooming&&y!==this._tileZoom;(!m||S)&&(this._tileZoom=y,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),y!==void 0&&this._update(s),d||this._pruneTiles(),this._noPrune=!!d),this._setZoomTransforms(s,l)},_setZoomTransforms:function(s,l){for(var d in this._levels)this._setZoomTransform(this._levels[d],s,l)},_setZoomTransform:function(s,l,d){var m=this._map.getZoomScale(d,s.zoom),y=s.origin.multiplyBy(m).subtract(this._map._getNewPixelOrigin(l,d)).round();ae.any3d?ar(s.el,y,m):me(s.el,y)},_resetGrid:function(){var s=this._map,l=s.options.crs,d=this._tileSize=this.getTileSize(),m=this._tileZoom,y=this._map.getPixelWorldBounds(this._tileZoom);y&&(this._globalTileRange=this._pxBoundsToTileRange(y)),this._wrapX=l.wrapLng&&!this.options.noWrap&&[Math.floor(s.project([0,l.wrapLng[0]],m).x/d.x),Math.ceil(s.project([0,l.wrapLng[1]],m).x/d.y)],this._wrapY=l.wrapLat&&!this.options.noWrap&&[Math.floor(s.project([l.wrapLat[0],0],m).y/d.x),Math.ceil(s.project([l.wrapLat[1],0],m).y/d.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(s){var l=this._map,d=l._animatingZoom?Math.max(l._animateToZoom,l.getZoom()):l.getZoom(),m=l.getZoomScale(d,this._tileZoom),y=l.project(s,this._tileZoom).floor(),S=l.getSize().divideBy(m*2);return new le(y.subtract(S),y.add(S))},_update:function(s){var l=this._map;if(l){var d=this._clampZoom(l.getZoom());if(s===void 0&&(s=l.getCenter()),this._tileZoom!==void 0){var m=this._getTiledPixelBounds(s),y=this._pxBoundsToTileRange(m),S=y.getCenter(),j=[],$=this.options.keepBuffer,H=new le(y.getBottomLeft().subtract([$,-$]),y.getTopRight().add([$,-$]));if(!(isFinite(y.min.x)&&isFinite(y.min.y)&&isFinite(y.max.x)&&isFinite(y.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var J in this._tiles){var ne=this._tiles[J].coords;(ne.z!==this._tileZoom||!H.contains(new K(ne.x,ne.y)))&&(this._tiles[J].current=!1)}if(Math.abs(d-this._tileZoom)>1){this._setView(s,d);return}for(var pe=y.min.y;pe<=y.max.y;pe++)for(var Ie=y.min.x;Ie<=y.max.x;Ie++){var Zt=new K(Ie,pe);if(Zt.z=this._tileZoom,!!this._isValidTile(Zt)){var It=this._tiles[this._tileCoordsToKey(Zt)];It?It.current=!0:j.push(Zt)}}if(j.sort(function(nn,Oo){return nn.distanceTo(S)-Oo.distanceTo(S)}),j.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Nn=document.createDocumentFragment();for(Ie=0;Ie<j.length;Ie++)this._addTile(j[Ie],Nn);this._level.el.appendChild(Nn)}}}},_isValidTile:function(s){var l=this._map.options.crs;if(!l.infinite){var d=this._globalTileRange;if(!l.wrapLng&&(s.x<d.min.x||s.x>d.max.x)||!l.wrapLat&&(s.y<d.min.y||s.y>d.max.y))return!1}if(!this.options.bounds)return!0;var m=this._tileCoordsToBounds(s);return be(this.options.bounds).overlaps(m)},_keyToBounds:function(s){return this._tileCoordsToBounds(this._keyToTileCoords(s))},_tileCoordsToNwSe:function(s){var l=this._map,d=this.getTileSize(),m=s.scaleBy(d),y=m.add(d),S=l.unproject(m,s.z),j=l.unproject(y,s.z);return[S,j]},_tileCoordsToBounds:function(s){var l=this._tileCoordsToNwSe(s),d=new xe(l[0],l[1]);return this.options.noWrap||(d=this._map.wrapLatLngBounds(d)),d},_tileCoordsToKey:function(s){return s.x+":"+s.y+":"+s.z},_keyToTileCoords:function(s){var l=s.split(":"),d=new K(+l[0],+l[1]);return d.z=+l[2],d},_removeTile:function(s){var l=this._tiles[s];l&&($e(l.el),delete this._tiles[s],this.fire("tileunload",{tile:l.el,coords:this._keyToTileCoords(s)}))},_initTile:function(s){Ee(s,"leaflet-tile");var l=this.getTileSize();s.style.width=l.x+"px",s.style.height=l.y+"px",s.onselectstart=v,s.onmousemove=v,ae.ielt9&&this.options.opacity<1&&it(s,this.options.opacity)},_addTile:function(s,l){var d=this._getTilePos(s),m=this._tileCoordsToKey(s),y=this.createTile(this._wrapCoords(s),a(this._tileReady,this,s));this._initTile(y),this.createTile.length<2&&F(a(this._tileReady,this,s,null,y)),me(y,d),this._tiles[m]={el:y,coords:s,current:!0},l.appendChild(y),this.fire("tileloadstart",{tile:y,coords:s})},_tileReady:function(s,l,d){l&&this.fire("tileerror",{error:l,tile:d,coords:s});var m=this._tileCoordsToKey(s);d=this._tiles[m],d&&(d.loaded=+new Date,this._map._fadeAnimated?(it(d.el,0),z(this._fadeFrame),this._fadeFrame=F(this._updateOpacity,this)):(d.active=!0,this._pruneTiles()),l||(Ee(d.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:d.el,coords:s})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ae.ielt9||!this._map._fadeAnimated?F(this._pruneTiles,this):setTimeout(a(this._pruneTiles,this),250)))},_getTilePos:function(s){return s.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(s){var l=new K(this._wrapX?_(s.x,this._wrapX):s.x,this._wrapY?_(s.y,this._wrapY):s.y);return l.z=s.z,l},_pxBoundsToTileRange:function(s){var l=this.getTileSize();return new le(s.min.unscaleBy(l).floor(),s.max.unscaleBy(l).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var s in this._tiles)if(!this._tiles[s].loaded)return!1;return!0}});function jA(s){return new El(s)}var Lo=El.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(s,l){this._url=s,l=A(this,l),l.detectRetina&&ae.retina&&l.maxZoom>0?(l.tileSize=Math.floor(l.tileSize/2),l.zoomReverse?(l.zoomOffset--,l.minZoom=Math.min(l.maxZoom,l.minZoom+1)):(l.zoomOffset++,l.maxZoom=Math.max(l.minZoom,l.maxZoom-1)),l.minZoom=Math.max(0,l.minZoom)):l.zoomReverse?l.minZoom=Math.min(l.maxZoom,l.minZoom):l.maxZoom=Math.max(l.minZoom,l.maxZoom),typeof l.subdomains=="string"&&(l.subdomains=l.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(s,l){return this._url===s&&l===void 0&&(l=!0),this._url=s,l||this.redraw(),this},createTile:function(s,l){var d=document.createElement("img");return fe(d,"load",a(this._tileOnLoad,this,l,d)),fe(d,"error",a(this._tileOnError,this,l,d)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(d.referrerPolicy=this.options.referrerPolicy),d.alt="",d.src=this.getTileUrl(s),d},getTileUrl:function(s){var l={r:ae.retina?"@2x":"",s:this._getSubdomain(s),x:s.x,y:s.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var d=this._globalTileRange.max.y-s.y;this.options.tms&&(l.y=d),l["-y"]=d}return T(this._url,i(l,this.options))},_tileOnLoad:function(s,l){ae.ielt9?setTimeout(a(s,this,null,l),0):s(null,l)},_tileOnError:function(s,l,d){var m=this.options.errorTileUrl;m&&l.getAttribute("src")!==m&&(l.src=m),s(d,l)},_onTileRemove:function(s){s.tile.onload=null},_getZoomForUrl:function(){var s=this._tileZoom,l=this.options.maxZoom,d=this.options.zoomReverse,m=this.options.zoomOffset;return d&&(s=l-s),s+m},_getSubdomain:function(s){var l=Math.abs(s.x+s.y)%this.options.subdomains.length;return this.options.subdomains[l]},_abortLoading:function(){var s,l;for(s in this._tiles)if(this._tiles[s].coords.z!==this._tileZoom&&(l=this._tiles[s].el,l.onload=v,l.onerror=v,!l.complete)){l.src=G;var d=this._tiles[s].coords;$e(l),delete this._tiles[s],this.fire("tileabort",{tile:l,coords:d})}},_removeTile:function(s){var l=this._tiles[s];if(l)return l.el.setAttribute("src",G),El.prototype._removeTile.call(this,s)},_tileReady:function(s,l,d){if(!(!this._map||d&&d.getAttribute("src")===G))return El.prototype._tileReady.call(this,s,l,d)}});function gv(s,l){return new Lo(s,l)}var _v=Lo.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(s,l){this._url=s;var d=i({},this.defaultWmsParams);for(var m in l)m in this.options||(d[m]=l[m]);l=A(this,l);var y=l.detectRetina&&ae.retina?2:1,S=this.getTileSize();d.width=S.x*y,d.height=S.y*y,this.wmsParams=d},onAdd:function(s){this._crs=this.options.crs||s.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var l=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[l]=this._crs.code,Lo.prototype.onAdd.call(this,s)},getTileUrl:function(s){var l=this._tileCoordsToNwSe(s),d=this._crs,m=de(d.project(l[0]),d.project(l[1])),y=m.min,S=m.max,j=(this._wmsVersion>=1.3&&this._crs===dt?[y.y,y.x,S.y,S.x]:[y.x,y.y,S.x,S.y]).join(","),$=Lo.prototype.getTileUrl.call(this,s);return $+I(this.wmsParams,$,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+j},setParams:function(s,l){return i(this.wmsParams,s),l||this.redraw(),this}});function VA(s,l){return new _v(s,l)}Lo.WMS=_v,gv.wms=VA;var Fr=Be.extend({options:{padding:.1},initialize:function(s){A(this,s),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ee(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var s={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(s.zoomanim=this._onAnimZoom),s},_onAnimZoom:function(s){this._updateTransform(s.center,s.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(s,l){var d=this._map.getZoomScale(l,this._zoom),m=this._map.getSize().multiplyBy(.5+this.options.padding),y=this._map.project(this._center,l),S=m.multiplyBy(-d).add(y).subtract(this._map._getNewPixelOrigin(s,l));ae.any3d?ar(this._container,S,d):me(this._container,S)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var s in this._layers)this._layers[s]._reset()},_onZoomEnd:function(){for(var s in this._layers)this._layers[s]._project()},_updatePaths:function(){for(var s in this._layers)this._layers[s]._update()},_update:function(){var s=this.options.padding,l=this._map.getSize(),d=this._map.containerPointToLayerPoint(l.multiplyBy(-s)).round();this._bounds=new le(d,d.add(l.multiplyBy(1+s*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),vv=Fr.extend({options:{tolerance:0},getEvents:function(){var s=Fr.prototype.getEvents.call(this);return s.viewprereset=this._onViewPreReset,s},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Fr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var s=this._container=document.createElement("canvas");fe(s,"mousemove",this._onMouseMove,this),fe(s,"click dblclick mousedown mouseup contextmenu",this._onClick,this),fe(s,"mouseout",this._handleMouseOut,this),s._leaflet_disable_events=!0,this._ctx=s.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,$e(this._container),ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var s;this._redrawBounds=null;for(var l in this._layers)s=this._layers[l],s._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fr.prototype._update.call(this);var s=this._bounds,l=this._container,d=s.getSize(),m=ae.retina?2:1;me(l,s.min),l.width=m*d.x,l.height=m*d.y,l.style.width=d.x+"px",l.style.height=d.y+"px",ae.retina&&this._ctx.scale(2,2),this._ctx.translate(-s.min.x,-s.min.y),this.fire("update")}},_reset:function(){Fr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(s){this._updateDashArray(s),this._layers[h(s)]=s;var l=s._order={layer:s,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=l),this._drawLast=l,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(s){this._requestRedraw(s)},_removePath:function(s){var l=s._order,d=l.next,m=l.prev;d?d.prev=m:this._drawLast=m,m?m.next=d:this._drawFirst=d,delete s._order,delete this._layers[h(s)],this._requestRedraw(s)},_updatePath:function(s){this._extendRedrawBounds(s),s._project(),s._update(),this._requestRedraw(s)},_updateStyle:function(s){this._updateDashArray(s),this._requestRedraw(s)},_updateDashArray:function(s){if(typeof s.options.dashArray=="string"){var l=s.options.dashArray.split(/[, ]+/),d=[],m,y;for(y=0;y<l.length;y++){if(m=Number(l[y]),isNaN(m))return;d.push(m)}s.options._dashArray=d}else s.options._dashArray=s.options.dashArray},_requestRedraw:function(s){this._map&&(this._extendRedrawBounds(s),this._redrawRequest=this._redrawRequest||F(this._redraw,this))},_extendRedrawBounds:function(s){if(s._pxBounds){var l=(s.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new le,this._redrawBounds.extend(s._pxBounds.min.subtract([l,l])),this._redrawBounds.extend(s._pxBounds.max.add([l,l]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var s=this._redrawBounds;if(s){var l=s.getSize();this._ctx.clearRect(s.min.x,s.min.y,l.x,l.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var s,l=this._redrawBounds;if(this._ctx.save(),l){var d=l.getSize();this._ctx.beginPath(),this._ctx.rect(l.min.x,l.min.y,d.x,d.y),this._ctx.clip()}this._drawing=!0;for(var m=this._drawFirst;m;m=m.next)s=m.layer,(!l||s._pxBounds&&s._pxBounds.intersects(l))&&s._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(s,l){if(this._drawing){var d,m,y,S,j=s._parts,$=j.length,H=this._ctx;if($){for(H.beginPath(),d=0;d<$;d++){for(m=0,y=j[d].length;m<y;m++)S=j[d][m],H[m?"lineTo":"moveTo"](S.x,S.y);l&&H.closePath()}this._fillStroke(H,s)}}},_updateCircle:function(s){if(!(!this._drawing||s._empty())){var l=s._point,d=this._ctx,m=Math.max(Math.round(s._radius),1),y=(Math.max(Math.round(s._radiusY),1)||m)/m;y!==1&&(d.save(),d.scale(1,y)),d.beginPath(),d.arc(l.x,l.y/y,m,0,Math.PI*2,!1),y!==1&&d.restore(),this._fillStroke(d,s)}},_fillStroke:function(s,l){var d=l.options;d.fill&&(s.globalAlpha=d.fillOpacity,s.fillStyle=d.fillColor||d.color,s.fill(d.fillRule||"evenodd")),d.stroke&&d.weight!==0&&(s.setLineDash&&s.setLineDash(l.options&&l.options._dashArray||[]),s.globalAlpha=d.opacity,s.lineWidth=d.weight,s.strokeStyle=d.color,s.lineCap=d.lineCap,s.lineJoin=d.lineJoin,s.stroke())},_onClick:function(s){for(var l=this._map.mouseEventToLayerPoint(s),d,m,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(l)&&(!(s.type==="click"||s.type==="preclick")||!this._map._draggableMoved(d))&&(m=d);this._fireEvent(m?[m]:!1,s)},_onMouseMove:function(s){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var l=this._map.mouseEventToLayerPoint(s);this._handleMouseHover(s,l)}},_handleMouseOut:function(s){var l=this._hoveredLayer;l&&(Ke(this._container,"leaflet-interactive"),this._fireEvent([l],s,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(s,l){if(!this._mouseHoverThrottled){for(var d,m,y=this._drawFirst;y;y=y.next)d=y.layer,d.options.interactive&&d._containsPoint(l)&&(m=d);m!==this._hoveredLayer&&(this._handleMouseOut(s),m&&(Ee(this._container,"leaflet-interactive"),this._fireEvent([m],s,"mouseover"),this._hoveredLayer=m)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,s),this._mouseHoverThrottled=!0,setTimeout(a(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(s,l,d){this._map._fireDOMEvent(l,d||l.type,s)},_bringToFront:function(s){var l=s._order;if(l){var d=l.next,m=l.prev;if(d)d.prev=m;else return;m?m.next=d:d&&(this._drawFirst=d),l.prev=this._drawLast,this._drawLast.next=l,l.next=null,this._drawLast=l,this._requestRedraw(s)}},_bringToBack:function(s){var l=s._order;if(l){var d=l.next,m=l.prev;if(m)m.next=d;else return;d?d.prev=m:m&&(this._drawLast=m),l.prev=null,l.next=this._drawFirst,this._drawFirst.prev=l,this._drawFirst=l,this._requestRedraw(s)}}});function yv(s){return ae.canvas?new vv(s):null}var Tl=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(s){return document.createElement("<lvml:"+s+' class="lvml">')}}catch{}return function(s){return document.createElement("<"+s+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),FA={_initContainer:function(){this._container=Ce("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Fr.prototype._update.call(this),this.fire("update"))},_initPath:function(s){var l=s._container=Tl("shape");Ee(l,"leaflet-vml-shape "+(this.options.className||"")),l.coordsize="1 1",s._path=Tl("path"),l.appendChild(s._path),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){var l=s._container;this._container.appendChild(l),s.options.interactive&&s.addInteractiveTarget(l)},_removePath:function(s){var l=s._container;$e(l),s.removeInteractiveTarget(l),delete this._layers[h(s)]},_updateStyle:function(s){var l=s._stroke,d=s._fill,m=s.options,y=s._container;y.stroked=!!m.stroke,y.filled=!!m.fill,m.stroke?(l||(l=s._stroke=Tl("stroke")),y.appendChild(l),l.weight=m.weight+"px",l.color=m.color,l.opacity=m.opacity,m.dashArray?l.dashStyle=x(m.dashArray)?m.dashArray.join(" "):m.dashArray.replace(/( *, *)/g," "):l.dashStyle="",l.endcap=m.lineCap.replace("butt","flat"),l.joinstyle=m.lineJoin):l&&(y.removeChild(l),s._stroke=null),m.fill?(d||(d=s._fill=Tl("fill")),y.appendChild(d),d.color=m.fillColor||m.color,d.opacity=m.fillOpacity):d&&(y.removeChild(d),s._fill=null)},_updateCircle:function(s){var l=s._point.round(),d=Math.round(s._radius),m=Math.round(s._radiusY||d);this._setPath(s,s._empty()?"M0 0":"AL "+l.x+","+l.y+" "+d+","+m+" 0,"+65535*360)},_setPath:function(s,l){s._path.v=l},_bringToFront:function(s){Nr(s._container)},_bringToBack:function(s){di(s._container)}},Uc=ae.vml?Tl:ro,Sl=Fr.extend({_initContainer:function(){this._container=Uc("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Uc("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){$e(this._container),ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Fr.prototype._update.call(this);var s=this._bounds,l=s.getSize(),d=this._container;(!this._svgSize||!this._svgSize.equals(l))&&(this._svgSize=l,d.setAttribute("width",l.x),d.setAttribute("height",l.y)),me(d,s.min),d.setAttribute("viewBox",[s.min.x,s.min.y,l.x,l.y].join(" ")),this.fire("update")}},_initPath:function(s){var l=s._path=Uc("path");s.options.className&&Ee(l,s.options.className),s.options.interactive&&Ee(l,"leaflet-interactive"),this._updateStyle(s),this._layers[h(s)]=s},_addPath:function(s){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(s._path),s.addInteractiveTarget(s._path)},_removePath:function(s){$e(s._path),s.removeInteractiveTarget(s._path),delete this._layers[h(s)]},_updatePath:function(s){s._project(),s._update()},_updateStyle:function(s){var l=s._path,d=s.options;l&&(d.stroke?(l.setAttribute("stroke",d.color),l.setAttribute("stroke-opacity",d.opacity),l.setAttribute("stroke-width",d.weight),l.setAttribute("stroke-linecap",d.lineCap),l.setAttribute("stroke-linejoin",d.lineJoin),d.dashArray?l.setAttribute("stroke-dasharray",d.dashArray):l.removeAttribute("stroke-dasharray"),d.dashOffset?l.setAttribute("stroke-dashoffset",d.dashOffset):l.removeAttribute("stroke-dashoffset")):l.setAttribute("stroke","none"),d.fill?(l.setAttribute("fill",d.fillColor||d.color),l.setAttribute("fill-opacity",d.fillOpacity),l.setAttribute("fill-rule",d.fillRule||"evenodd")):l.setAttribute("fill","none"))},_updatePoly:function(s,l){this._setPath(s,$a(s._parts,l))},_updateCircle:function(s){var l=s._point,d=Math.max(Math.round(s._radius),1),m=Math.max(Math.round(s._radiusY),1)||d,y="a"+d+","+m+" 0 1,0 ",S=s._empty()?"M0 0":"M"+(l.x-d)+","+l.y+y+d*2+",0 "+y+-d*2+",0 ";this._setPath(s,S)},_setPath:function(s,l){s._path.setAttribute("d",l)},_bringToFront:function(s){Nr(s._path)},_bringToBack:function(s){di(s._path)}});ae.vml&&Sl.include(FA);function wv(s){return ae.svg||ae.vml?new Sl(s):null}Ae.include({getRenderer:function(s){var l=s.options.renderer||this._getPaneRenderer(s.options.pane)||this.options.renderer||this._renderer;return l||(l=this._renderer=this._createRenderer()),this.hasLayer(l)||this.addLayer(l),l},_getPaneRenderer:function(s){if(s==="overlayPane"||s===void 0)return!1;var l=this._paneRenderers[s];return l===void 0&&(l=this._createRenderer({pane:s}),this._paneRenderers[s]=l),l},_createRenderer:function(s){return this.options.preferCanvas&&yv(s)||wv(s)}});var Ev=ko.extend({initialize:function(s,l){ko.prototype.initialize.call(this,this._boundsToLatLngs(s),l)},setBounds:function(s){return this.setLatLngs(this._boundsToLatLngs(s))},_boundsToLatLngs:function(s){return s=be(s),[s.getSouthWest(),s.getNorthWest(),s.getNorthEast(),s.getSouthEast()]}});function UA(s,l){return new Ev(s,l)}Sl.create=Uc,Sl.pointsToPath=$a,Vr.geometryToLayer=Lc,Vr.coordsToLatLng=Of,Vr.coordsToLatLngs=Oc,Vr.latLngToCoords=Df,Vr.latLngsToCoords=Dc,Vr.getFeature=No,Vr.asFeature=Mc,Ae.mergeOptions({boxZoom:!0});var Tv=mn.extend({initialize:function(s){this._map=s,this._container=s._container,this._pane=s._panes.overlayPane,this._resetStateTimeout=0,s.on("unload",this._destroy,this)},addHooks:function(){fe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){$e(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(s){if(!s.shiftKey||s.which!==1&&s.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),$n(),ol(),this._startPoint=this._map.mouseEventToContainerPoint(s),fe(document,{contextmenu:pn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(s){this._moved||(this._moved=!0,this._box=Ce("div","leaflet-zoom-box",this._container),Ee(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(s);var l=new le(this._point,this._startPoint),d=l.getSize();me(this._box,l.min),this._box.style.width=d.x+"px",this._box.style.height=d.y+"px"},_finish:function(){this._moved&&($e(this._box),Ke(this._container,"leaflet-crosshair")),Hn(),al(),ze(document,{contextmenu:pn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(s){if(!(s.which!==1&&s.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(a(this._resetState,this),0);var l=new xe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(l).fire("boxzoomend",{boxZoomBounds:l})}},_onKeyDown:function(s){s.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ae.addInitHook("addHandler","boxZoom",Tv),Ae.mergeOptions({doubleClickZoom:!0});var Sv=mn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(s){var l=this._map,d=l.getZoom(),m=l.options.zoomDelta,y=s.originalEvent.shiftKey?d-m:d+m;l.options.doubleClickZoom==="center"?l.setZoom(y):l.setZoomAround(s.containerPoint,y)}});Ae.addInitHook("addHandler","doubleClickZoom",Sv),Ae.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var xv=mn.extend({addHooks:function(){if(!this._draggable){var s=this._map;this._draggable=new Wn(s._mapPane,s._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),s.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),s.on("zoomend",this._onZoomEnd,this),s.whenReady(this._onZoomEnd,this))}Ee(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ke(this._map._container,"leaflet-grab"),Ke(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var s=this._map;if(s._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var l=be(this._map.options.maxBounds);this._offsetLimit=de(this._map.latLngToContainerPoint(l.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(l.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;s.fire("movestart").fire("dragstart"),s.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(s){if(this._map.options.inertia){var l=this._lastTime=+new Date,d=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(d),this._times.push(l),this._prunePositions(l)}this._map.fire("move",s).fire("drag",s)},_prunePositions:function(s){for(;this._positions.length>1&&s-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var s=this._map.getSize().divideBy(2),l=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=l.subtract(s).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(s,l){return s-(s-l)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var s=this._draggable._newPos.subtract(this._draggable._startPos),l=this._offsetLimit;s.x<l.min.x&&(s.x=this._viscousLimit(s.x,l.min.x)),s.y<l.min.y&&(s.y=this._viscousLimit(s.y,l.min.y)),s.x>l.max.x&&(s.x=this._viscousLimit(s.x,l.max.x)),s.y>l.max.y&&(s.y=this._viscousLimit(s.y,l.max.y)),this._draggable._newPos=this._draggable._startPos.add(s)}},_onPreDragWrap:function(){var s=this._worldWidth,l=Math.round(s/2),d=this._initialWorldOffset,m=this._draggable._newPos.x,y=(m-l+d)%s+l-d,S=(m+l+d)%s-l-d,j=Math.abs(y+d)<Math.abs(S+d)?y:S;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=j},_onDragEnd:function(s){var l=this._map,d=l.options,m=!d.inertia||s.noInertia||this._times.length<2;if(l.fire("dragend",s),m)l.fire("moveend");else{this._prunePositions(+new Date);var y=this._lastPos.subtract(this._positions[0]),S=(this._lastTime-this._times[0])/1e3,j=d.easeLinearity,$=y.multiplyBy(j/S),H=$.distanceTo([0,0]),J=Math.min(d.inertiaMaxSpeed,H),ne=$.multiplyBy(J/H),pe=J/(d.inertiaDeceleration*j),Ie=ne.multiplyBy(-pe/2).round();!Ie.x&&!Ie.y?l.fire("moveend"):(Ie=l._limitOffset(Ie,l.options.maxBounds),F(function(){l.panBy(Ie,{duration:pe,easeLinearity:j,noMoveStart:!0,animate:!0})}))}}});Ae.addInitHook("addHandler","dragging",xv),Ae.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Iv=mn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(s){this._map=s,this._setPanDelta(s.options.keyboardPanDelta),this._setZoomDelta(s.options.zoomDelta)},addHooks:function(){var s=this._map._container;s.tabIndex<=0&&(s.tabIndex="0"),fe(s,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var s=document.body,l=document.documentElement,d=s.scrollTop||l.scrollTop,m=s.scrollLeft||l.scrollLeft;this._map._container.focus(),window.scrollTo(m,d)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(s){var l=this._panKeys={},d=this.keyCodes,m,y;for(m=0,y=d.left.length;m<y;m++)l[d.left[m]]=[-1*s,0];for(m=0,y=d.right.length;m<y;m++)l[d.right[m]]=[s,0];for(m=0,y=d.down.length;m<y;m++)l[d.down[m]]=[0,s];for(m=0,y=d.up.length;m<y;m++)l[d.up[m]]=[0,-1*s]},_setZoomDelta:function(s){var l=this._zoomKeys={},d=this.keyCodes,m,y;for(m=0,y=d.zoomIn.length;m<y;m++)l[d.zoomIn[m]]=s;for(m=0,y=d.zoomOut.length;m<y;m++)l[d.zoomOut[m]]=-s},_addHooks:function(){fe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(s){if(!(s.altKey||s.ctrlKey||s.metaKey)){var l=s.keyCode,d=this._map,m;if(l in this._panKeys){if(!d._panAnim||!d._panAnim._inProgress)if(m=this._panKeys[l],s.shiftKey&&(m=ee(m).multiplyBy(3)),d.options.maxBounds&&(m=d._limitOffset(ee(m),d.options.maxBounds)),d.options.worldCopyJump){var y=d.wrapLatLng(d.unproject(d.project(d.getCenter()).add(m)));d.panTo(y)}else d.panBy(m)}else if(l in this._zoomKeys)d.setZoom(d.getZoom()+(s.shiftKey?3:1)*this._zoomKeys[l]);else if(l===27&&d._popup&&d._popup.options.closeOnEscapeKey)d.closePopup();else return;pn(s)}}});Ae.addInitHook("addHandler","keyboard",Iv),Ae.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Av=mn.extend({addHooks:function(){fe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(s){var l=xc(s),d=this._map.options.wheelDebounceTime;this._delta+=l,this._lastMousePos=this._map.mouseEventToContainerPoint(s),this._startTime||(this._startTime=+new Date);var m=Math.max(d-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(a(this._performZoom,this),m),pn(s)},_performZoom:function(){var s=this._map,l=s.getZoom(),d=this._map.options.zoomSnap||0;s._stop();var m=this._delta/(this._map.options.wheelPxPerZoomLevel*4),y=4*Math.log(2/(1+Math.exp(-Math.abs(m))))/Math.LN2,S=d?Math.ceil(y/d)*d:y,j=s._limitZoom(l+(this._delta>0?S:-S))-l;this._delta=0,this._startTime=null,j&&(s.options.scrollWheelZoom==="center"?s.setZoom(l+j):s.setZoomAround(this._lastMousePos,l+j))}});Ae.addInitHook("addHandler","scrollWheelZoom",Av);var zA=600;Ae.mergeOptions({tapHold:ae.touchNative&&ae.safari&&ae.mobile,tapTolerance:15});var Pv=mn.extend({addHooks:function(){fe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(s){if(clearTimeout(this._holdTimeout),s.touches.length===1){var l=s.touches[0];this._startPos=this._newPos=new K(l.clientX,l.clientY),this._holdTimeout=setTimeout(a(function(){this._cancel(),this._isTapValid()&&(fe(document,"touchend",Je),fe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",l))},this),zA),fe(document,"touchend touchcancel contextmenu",this._cancel,this),fe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function s(){ze(document,"touchend",Je),ze(document,"touchend touchcancel",s)},_cancel:function(){clearTimeout(this._holdTimeout),ze(document,"touchend touchcancel contextmenu",this._cancel,this),ze(document,"touchmove",this._onMove,this)},_onMove:function(s){var l=s.touches[0];this._newPos=new K(l.clientX,l.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(s,l){var d=new MouseEvent(s,{bubbles:!0,cancelable:!0,view:window,screenX:l.screenX,screenY:l.screenY,clientX:l.clientX,clientY:l.clientY});d._simulated=!0,l.target.dispatchEvent(d)}});Ae.addInitHook("addHandler","tapHold",Pv),Ae.mergeOptions({touchZoom:ae.touch,bounceAtZoomLimits:!0});var Cv=mn.extend({addHooks:function(){Ee(this._map._container,"leaflet-touch-zoom"),fe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ke(this._map._container,"leaflet-touch-zoom"),ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(s){var l=this._map;if(!(!s.touches||s.touches.length!==2||l._animatingZoom||this._zooming)){var d=l.mouseEventToContainerPoint(s.touches[0]),m=l.mouseEventToContainerPoint(s.touches[1]);this._centerPoint=l.getSize()._divideBy(2),this._startLatLng=l.containerPointToLatLng(this._centerPoint),l.options.touchZoom!=="center"&&(this._pinchStartLatLng=l.containerPointToLatLng(d.add(m)._divideBy(2))),this._startDist=d.distanceTo(m),this._startZoom=l.getZoom(),this._moved=!1,this._zooming=!0,l._stop(),fe(document,"touchmove",this._onTouchMove,this),fe(document,"touchend touchcancel",this._onTouchEnd,this),Je(s)}},_onTouchMove:function(s){if(!(!s.touches||s.touches.length!==2||!this._zooming)){var l=this._map,d=l.mouseEventToContainerPoint(s.touches[0]),m=l.mouseEventToContainerPoint(s.touches[1]),y=d.distanceTo(m)/this._startDist;if(this._zoom=l.getScaleZoom(y,this._startZoom),!l.options.bounceAtZoomLimits&&(this._zoom<l.getMinZoom()&&y<1||this._zoom>l.getMaxZoom()&&y>1)&&(this._zoom=l._limitZoom(this._zoom)),l.options.touchZoom==="center"){if(this._center=this._startLatLng,y===1)return}else{var S=d._add(m)._divideBy(2)._subtract(this._centerPoint);if(y===1&&S.x===0&&S.y===0)return;this._center=l.unproject(l.project(this._pinchStartLatLng,this._zoom).subtract(S),this._zoom)}this._moved||(l._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var j=a(l._move,l,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=F(j,this,!0),Je(s)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),ze(document,"touchmove",this._onTouchMove,this),ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ae.addInitHook("addHandler","touchZoom",Cv),Ae.BoxZoom=Tv,Ae.DoubleClickZoom=Sv,Ae.Drag=xv,Ae.Keyboard=Iv,Ae.ScrollWheelZoom=Av,Ae.TapHold=Pv,Ae.TouchZoom=Cv,n.Bounds=le,n.Browser=ae,n.CRS=_t,n.Canvas=vv,n.Circle=Lf,n.CircleMarker=Nc,n.Class=Me,n.Control=tn,n.DivIcon=mv,n.DivOverlay=cr,n.DomEvent=Ic,n.DomUtil=Tc,n.Draggable=Wn,n.Evented=Tt,n.FeatureGroup=lt,n.GeoJSON=Vr,n.GridLayer=El,n.Handler=mn,n.Icon=ur,n.ImageOverlay=jc,n.LatLng=Se,n.LatLngBounds=xe,n.Layer=Be,n.LayerGroup=Xe,n.LineUtil=C,n.Map=Ae,n.Marker=kc,n.Mixin=ws,n.Path=vi,n.Point=K,n.PolyUtil=Co,n.Polygon=ko,n.Polyline=jr,n.Popup=Vc,n.PosAnimation=pl,n.Projection=te,n.Rectangle=Ev,n.Renderer=Fr,n.SVG=Sl,n.SVGOverlay=pv,n.TileLayer=Lo,n.Tooltip=Fc,n.Transformation=ui,n.Util=M,n.VideoOverlay=fv,n.bind=a,n.bounds=de,n.canvas=yv,n.circle=PA,n.circleMarker=AA,n.control=Kt,n.divIcon=MA,n.extend=i,n.featureGroup=bo,n.geoJSON=dv,n.geoJson=bA,n.gridLayer=jA,n.icon=xA,n.imageOverlay=kA,n.latLng=ve,n.latLngBounds=be,n.layerGroup=_i,n.map=To,n.marker=IA,n.point=ee,n.polygon=RA,n.polyline=CA,n.popup=OA,n.rectangle=UA,n.setOptions=A,n.stamp=h,n.svg=wv,n.svgOverlay=LA,n.tileLayer=gv,n.tooltip=DA,n.transformation=Cr,n.version=r,n.videoOverlay=NA;var BA=window.L;n.noConflict=function(){return window.L=BA,this},window.L=n})})(rg,rg.exports);var as=rg.exports;function Cf(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function Rf(t,e){return e==null?function(r,i){const o=U.useRef();return o.current||(o.current=t(r,i)),o}:function(r,i){const o=U.useRef();o.current||(o.current=t(r,i));const a=U.useRef(r),{instance:u}=o.current;return U.useEffect(function(){a.current!==r&&(e(u,r,a.current),a.current=r)},[u,r,i]),o}}function TA(t,e){U.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){var o;(o=e.layerContainer)==null||o.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function SA(t){return function(n){const r=Af(),i=t(Pf(n,r),r);return _A(r.map,n.attribution),uv(i.current,n.eventHandlers),TA(i.current,r),i}}function lF(t,e){const n=U.useRef();U.useEffect(function(){if(e.pathOptions!==n.current){const i=e.pathOptions??{};t.instance.setStyle(i),n.current=i}},[t,e])}function uF(t){return function(n){const r=Af(),i=t(Pf(n,r),r);return uv(i.current,n.eventHandlers),TA(i.current,r),lF(i.current,n),i}}function cF(t,e){const n=Rf(t,e),r=SA(n);return EA(r)}function hF(t,e){const n=Rf(t),r=aF(n,e);return sF(r)}function dF(t,e){const n=Rf(t,e),r=uF(n);return EA(r)}function fF(t,e){const n=Rf(t,e),r=SA(n);return oF(r)}function pF(t,e,n){const{opacity:r,zIndex:i}=e;r!=null&&r!==n.opacity&&t.setOpacity(r),i!=null&&i!==n.zIndex&&t.setZIndex(i)}function mF(){return Af().map}const gF=dF(function({center:e,children:n,...r},i){const o=new as.Circle(e,r);return Cf(o,vA(i,{overlayContainer:o}))},nF);function ig(){return ig=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ig.apply(this,arguments)}function _F({bounds:t,boundsOptions:e,center:n,children:r,className:i,id:o,placeholder:a,style:u,whenReady:h,zoom:p,..._},v){const[E]=U.useState({className:i,id:o,style:u}),[k,P]=U.useState(null);U.useImperativeHandle(v,()=>(k==null?void 0:k.map)??null,[k]);const A=U.useCallback(b=>{if(b!==null&&k===null){const T=new as.Map(b,_);n!=null&&p!=null?T.setView(n,p):t!=null&&T.fitBounds(t,e),h!=null&&T.whenReady(h),P(iF(T))}},[]);U.useEffect(()=>()=>{k==null||k.map.remove()},[k]);const I=k?lu.createElement(wA,{value:k},r):a??null;return lu.createElement("div",ig({},E,{ref:A}),I)}const vF=U.forwardRef(_F),L0=cF(function({position:e,...n},r){const i=new as.Marker(e,n);return Cf(i,vA(r,{overlayContainer:i}))},function(e,n,r){n.position!==r.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==r.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==r.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==r.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==r.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),Cp=hF(function(e,n){const r=new as.Popup(e,n.overlayContainer);return Cf(r,n)},function(e,n,{position:r},i){U.useEffect(function(){const{instance:a}=e;function u(p){p.popup===a&&(a.update(),i(!0))}function h(p){p.popup===a&&i(!1)}return n.map.on({popupopen:u,popupclose:h}),n.overlayContainer==null?(r!=null&&a.setLatLng(r),a.openOn(n.map)):n.overlayContainer.bindPopup(a),function(){var _;n.map.off({popupopen:u,popupclose:h}),(_=n.overlayContainer)==null||_.unbindPopup(),n.map.removeLayer(a)}},[e,n,i,r])}),yF=fF(function({url:e,...n},r){const i=new as.TileLayer(e,Pf(n,r));return Cf(i,r)},function(e,n,r){pF(e,n,r);const{url:i}=n;i!=null&&i!==r.url&&e.setUrl(i)});delete as.Icon.Default.prototype._getIconUrl;as.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/images/marker-shadow.png"});const wF=t=>{const e=`
    <svg width="30" height="40" viewBox="0 0 30 40" xmlns="http://www.w3.org/2000/svg">
      <path d="M15 0C6.7 0 0 6.7 0 15c0 15 15 25 15 25s15-10 15-25C30 6.7 23.3 0 15 0z" fill="${t}"/>
      <circle cx="15" cy="15" r="8" fill="white"/>
      <text x="15" y="19" text-anchor="middle" font-size="10" fill="${t}">!</text>
    </svg>
  `.trim(),n=window.btoa(unescape(encodeURIComponent(e)));return new as.Icon({iconUrl:`data:image/svg+xml;base64,${n}`,iconSize:[30,40],iconAnchor:[15,40],popupAnchor:[0,-40]})},Ts=t=>{const e={critical:"#dc2626",high:"#ea580c",medium:"#d97706",low:"#16a34a",default:"#6b7280"};return e[t]||e.default},EF=({center:t,zoom:e})=>{const n=mF();return U.useEffect(()=>{t&&n.setView(t,e||n.getZoom())},[t,e,n]),null},TF=({onReportClick:t,onMapClick:e,showHeatmap:n=!0,center:r=[20.5937,78.9629],zoom:i=5,height:o="calc(100vh - 200px)",selectedLocation:a=null})=>{const[u,h]=U.useState(r),[p,_]=U.useState(i),[v,E]=U.useState({reports:!0,heatmap:n}),k=dA(Vs),P=Vs.filter(x=>x.verifiedAt),A=new Set(k.flatMap(x=>x.reports)),I=k.filter(x=>x.reports.some(V=>A.has(V))),b=x=>{E(V=>({...V,[x]:!V[x]}))},T=x=>{const G={chennai:[13.0827,80.2707],mumbai:[19.076,72.8777],kochi:[9.9312,76.2673],visakhapatnam:[17.6868,83.2185],goa:[15.2993,74.124],punjab:[31.53,75.92],himachal:[31.83,77],bihar:[25.61,85.15]}[x.toLowerCase()];G?(h(G),_(10)):(h([20.5937,78.9629]),_(5))};return f.jsxs("div",{className:"interactive-map-container",children:[f.jsxs("div",{className:"map-controls",children:[f.jsxs("div",{className:"layer-controls",children:[f.jsx("h4",{children:"Map Layers"}),f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:v.reports,onChange:()=>b("reports")}),"Hazard Reports"]}),f.jsxs("label",{children:[f.jsx("input",{type:"checkbox",checked:v.heatmap,onChange:()=>b("heatmap")}),"Density Heatmap"]})]}),f.jsx("div",{className:"location-search",children:f.jsxs("select",{onChange:x=>T(x.target.value),defaultValue:"",children:[f.jsx("option",{value:"",children:"Quick Jump To..."}),f.jsx("option",{value:"",children:"All India"}),f.jsx("option",{value:"punjab",children:"Punjab"}),f.jsx("option",{value:"himachal",children:"Himachal Pradesh"}),f.jsx("option",{value:"mumbai",children:"Mumbai"}),f.jsx("option",{value:"chennai",children:"Chennai"}),f.jsx("option",{value:"bihar",children:"Bihar"}),f.jsx("option",{value:"kochi",children:"Kochi"}),f.jsx("option",{value:"visakhapatnam",children:"Visakhapatnam"}),f.jsx("option",{value:"goa",children:"Goa"})]})})]}),f.jsxs("div",{className:"map-legend",children:[f.jsx("h4",{children:"Legend"}),f.jsxs("div",{className:"legend-items",children:[f.jsxs("div",{className:"legend-item",children:[f.jsx("div",{className:"legend-marker",style:{backgroundColor:Ts("critical")}}),f.jsx("span",{children:"Critical"})]}),f.jsxs("div",{className:"legend-item",children:[f.jsx("div",{className:"legend-marker",style:{backgroundColor:Ts("high")}}),f.jsx("span",{children:"High"})]}),f.jsxs("div",{className:"legend-item",children:[f.jsx("div",{className:"legend-marker",style:{backgroundColor:Ts("medium")}}),f.jsx("span",{children:"Medium"})]}),f.jsxs("div",{className:"legend-item",children:[f.jsx("div",{className:"legend-marker",style:{backgroundColor:Ts("low")}}),f.jsx("span",{children:"Low"})]})]})]}),f.jsx("div",{className:"map-wrapper",style:{height:o},children:f.jsxs(vF,{center:u,zoom:p,style:{width:"100%",height:"100%"},onClick:e,children:[f.jsx(EF,{center:u,zoom:p}),f.jsx(yF,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),v.reports&&P.map(x=>f.jsx(L0,{position:[x.location.latitude,x.location.longitude],icon:wF(Ts(x.severity)),eventHandlers:{click:()=>t&&t(x)},children:f.jsx(Cp,{children:f.jsxs("div",{className:"map-popup",children:[f.jsx("h4",{children:x.title}),f.jsxs("p",{children:[f.jsx("strong",{children:"Type:"})," ",x.type.replace("_"," ")]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Severity:"})," ",x.severity]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Status:"})," ",x.status]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Time:"})," ",new Date(x.reportedAt).toLocaleString()]}),x.description&&f.jsxs("p",{children:[f.jsx("strong",{children:"Details:"})," ",x.description]}),x.reportedBy&&f.jsxs("p",{children:[f.jsx("strong",{children:"Reported by:"})," ",x.reportedBy.name]})]})})},x.id)),v.heatmap&&I.map(x=>f.jsx(gF,{center:x.center,radius:x.radius,fillColor:Ts(x.intensity),fillOpacity:.4,color:Ts(x.intensity),weight:2,children:f.jsx(Cp,{children:f.jsxs("div",{className:"map-popup",children:[f.jsx("h4",{children:"Hazard Hotspot"}),f.jsxs("p",{children:[f.jsx("strong",{children:"Intensity:"})," ",x.intensity]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Reports:"})," ",x.reportCount]}),f.jsxs("p",{children:[f.jsx("strong",{children:"Dominant Types:"})," ",x.dominantTypes.join(", ")]})]})})},x.id)),a&&f.jsx(L0,{position:[a.lat,a.lng],children:f.jsx(Cp,{children:"Selected Location"})})]})}),f.jsxs("div",{className:"map-stats",children:[f.jsxs("div",{className:"stat-item",children:[f.jsx("span",{className:"stat-value",children:P.length}),f.jsx("span",{className:"stat-label",children:"Verified Reports"})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("span",{className:"stat-value",children:I.length}),f.jsx("span",{className:"stat-label",children:"Hotspots"})]}),f.jsxs("div",{className:"stat-item",children:[f.jsx("span",{className:"stat-value",children:P.filter(x=>x.severity==="critical"||x.severity==="high").length}),f.jsx("span",{className:"stat-label",children:"High Priority"})]})]})]})},SF=({selectedLocation:t,setSelectedLocation:e})=>{const n=Un(),{reports:r,loadReports:i,reportsLoading:o}=Pr(),[a,u]=U.useState({severity:"all",type:"all",timeRange:"24h"}),[h,p]=U.useState(!1);U.useEffect(()=>{r.length===0&&i()},[]);const _=A=>{console.log("Report clicked:",A)},v=A=>{console.log("Map clicked at:",A.latlng),e(A.latlng),p(!0)},E=()=>{p(!1),e(null)},k=A=>{p(!1),e(null),i()},P=r.filter(A=>{if(a.severity!=="all"&&A.severity!==a.severity||a.type!=="all"&&A.type!==a.type)return!1;const I=new Date,b=new Date(A.timestamp),T=I-b;switch(a.timeRange){case"1h":return T<=36e5;case"24h":return T<=864e5;case"7d":return T<=6048e5;default:return!0}});return f.jsxs("div",{className:"map-view-page",children:[f.jsx("header",{className:"map-header",children:f.jsxs("div",{className:"header-content",children:[f.jsxs("div",{className:"header-info",children:[f.jsx("h1",{className:"page-title",children:" Interactive Hazard Map"}),f.jsx("p",{className:"page-subtitle",children:"Real-time ocean hazard visualization and monitoring"})]}),f.jsxs("div",{className:"header-actions",children:[f.jsx("button",{className:"header-button",onClick:()=>n("/"),children:" Home"}),f.jsx("button",{className:"header-button report-button",onClick:()=>p(!0),children:"+ Report a Hazard"}),f.jsxs("button",{className:"header-button",onClick:()=>i(),disabled:o,children:[" ",o?"Loading...":"Refresh"]})]})]})}),f.jsx("section",{className:"map-filters",children:f.jsxs("div",{className:"filters-container",children:[f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Severity Level"}),f.jsxs("select",{value:a.severity,onChange:A=>u({...a,severity:A.target.value}),children:[f.jsx("option",{value:"all",children:"All Levels"}),f.jsx("option",{value:"critical",children:"Critical"}),f.jsx("option",{value:"high",children:"High"}),f.jsx("option",{value:"medium",children:"Medium"}),f.jsx("option",{value:"low",children:"Low"})]})]}),f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Hazard Type"}),f.jsxs("select",{value:a.type,onChange:A=>u({...a,type:A.target.value}),children:[f.jsx("option",{value:"all",children:"All Types"}),f.jsx("option",{value:"tsunami",children:"Tsunami"}),f.jsx("option",{value:"cyclone",children:"Cyclone"}),f.jsx("option",{value:"high_waves",children:"High Waves"}),f.jsx("option",{value:"storm",children:"Storm"}),f.jsx("option",{value:"flood",children:"Flood"})]})]}),f.jsxs("div",{className:"filter-group",children:[f.jsx("label",{children:"Time Range"}),f.jsxs("select",{value:a.timeRange,onChange:A=>u({...a,timeRange:A.target.value}),children:[f.jsx("option",{value:"1h",children:"Last Hour"}),f.jsx("option",{value:"24h",children:"Last 24 Hours"}),f.jsx("option",{value:"7d",children:"Last 7 Days"}),f.jsx("option",{value:"all",children:"All Time"})]})]}),f.jsxs("div",{className:"filter-stats",children:[f.jsx("span",{className:"stats-label",children:"Showing:"}),f.jsxs("span",{className:"stats-value",children:[P.length," reports"]})]})]})}),f.jsx("section",{className:"map-section",children:f.jsx(TF,{reports:P,onReportClick:_,onMapClick:v,height:"600px",showHeatmap:!0,selectedLocation:t})}),h&&f.jsx(gA,{onClose:E,onSuccess:k,initialLocation:t}),f.jsx("section",{className:"quick-stats",children:f.jsxs("div",{className:"stats-grid",children:[f.jsxs("div",{className:"stat-card critical",children:[f.jsx("div",{className:"stat-icon",children:""}),f.jsxs("div",{className:"stat-content",children:[f.jsx("div",{className:"stat-value",children:P.filter(A=>A.severity==="critical").length}),f.jsx("div",{className:"stat-label",children:"Critical Alerts"})]})]}),f.jsxs("div",{className:"stat-card active",children:[f.jsx("div",{className:"stat-icon",children:""}),f.jsxs("div",{className:"stat-content",children:[f.jsx("div",{className:"stat-value",children:P.length}),f.jsx("div",{className:"stat-label",children:"Active Reports"})]})]}),f.jsxs("div",{className:"stat-card verified",children:[f.jsx("div",{className:"stat-icon",children:""}),f.jsxs("div",{className:"stat-content",children:[f.jsx("div",{className:"stat-value",children:P.filter(A=>A.status==="verified").length}),f.jsx("div",{className:"stat-label",children:"Verified Reports"})]})]}),f.jsxs("div",{className:"stat-card coverage",children:[f.jsx("div",{className:"stat-icon",children:""}),f.jsxs("div",{className:"stat-content",children:[f.jsx("div",{className:"stat-value",children:new Set(P.map(A=>A.type)).size}),f.jsx("div",{className:"stat-label",children:"Hazard Types"})]})]})]})})]})},xF=()=>{var b,T,x;const{user:t,logout:e}=Pr(),[n,r]=U.useState("profile"),[i,o]=U.useState({fullName:(t==null?void 0:t.fullName)||"Demo User",email:(t==null?void 0:t.email)||"demo@oceanhazard.com",phone:(t==null?void 0:t.phone)||"+91 9876543210",role:(t==null?void 0:t.role)||"citizen",location:{state:((b=t==null?void 0:t.location)==null?void 0:b.state)||"Tamil Nadu",district:((T=t==null?void 0:t.location)==null?void 0:T.district)||"Chennai",coastalArea:((x=t==null?void 0:t.location)==null?void 0:x.coastalArea)||"Marina Beach"}}),[a,u]=U.useState({emailAlerts:!0,smsAlerts:!1,pushNotifications:!0,newsletter:!0,emergencyAlerts:!0,socialMediaMentions:!1}),[h,p]=U.useState({language:"en",theme:"light",mapStyle:"satellite",alertRadius:"50",autoLocation:!0,dataSharing:!1}),_=[{id:"profile",label:"Profile",icon:""},{id:"notifications",label:"Notifications",icon:""},{id:"preferences",label:"Preferences",icon:""},{id:"security",label:"Security",icon:""},{id:"data",label:"Data & Privacy",icon:""}],v=V=>{const{name:G,value:Z}=V.target;if(G.includes(".")){const[N,R]=G.split(".");o(O=>({...O,[N]:{...O[N],[R]:Z}}))}else o(N=>({...N,[G]:Z}))},E=V=>{const{name:G,checked:Z}=V.target;u(N=>({...N,[G]:Z}))},k=V=>{const{name:G,value:Z,type:N,checked:R}=V.target;p(O=>({...O,[G]:N==="checkbox"?R:Z}))},P=()=>{alert("Settings saved successfully!")},A=()=>{e()},I=()=>{switch(n){case"profile":return f.jsxs("div",{className:"tab-content",children:[f.jsx("h3",{children:"Profile Information"}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Full Name"}),f.jsx("input",{type:"text",name:"fullName",value:i.fullName,onChange:v})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Email"}),f.jsx("input",{type:"email",name:"email",value:i.email,onChange:v})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Phone"}),f.jsx("input",{type:"tel",name:"phone",value:i.phone,onChange:v})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Role"}),f.jsxs("select",{name:"role",value:i.role,onChange:v,children:[f.jsx("option",{value:"citizen",children:"Citizen"}),f.jsx("option",{value:"volunteer",children:"Volunteer"}),f.jsx("option",{value:"official",children:"Official"}),f.jsx("option",{value:"analyst",children:"Analyst"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"State"}),f.jsx("input",{type:"text",name:"location.state",value:i.location.state,onChange:v})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"District"}),f.jsx("input",{type:"text",name:"location.district",value:i.location.district,onChange:v})]})]})]});case"notifications":return f.jsxs("div",{className:"tab-content",children:[f.jsx("h3",{children:"Notification Preferences"}),f.jsx("div",{className:"notification-settings",children:Object.entries(a).map(([V,G])=>f.jsxs("label",{className:"notification-item",children:[f.jsx("input",{type:"checkbox",name:V,checked:G,onChange:E}),f.jsx("span",{className:"notification-label",children:V.replace(/([A-Z])/g," $1").replace(/^./,Z=>Z.toUpperCase())})]},V))})]});case"preferences":return f.jsxs("div",{className:"tab-content",children:[f.jsx("h3",{children:"Application Preferences"}),f.jsxs("div",{className:"form-grid",children:[f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Language"}),f.jsxs("select",{name:"language",value:h.language,onChange:k,children:[f.jsx("option",{value:"en",children:"English"}),f.jsx("option",{value:"hi",children:"Hindi"}),f.jsx("option",{value:"ta",children:"Tamil"}),f.jsx("option",{value:"te",children:"Telugu"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Theme"}),f.jsxs("select",{name:"theme",value:h.theme,onChange:k,children:[f.jsx("option",{value:"light",children:"Light"}),f.jsx("option",{value:"dark",children:"Dark"}),f.jsx("option",{value:"auto",children:"Auto"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Map Style"}),f.jsxs("select",{name:"mapStyle",value:h.mapStyle,onChange:k,children:[f.jsx("option",{value:"satellite",children:"Satellite"}),f.jsx("option",{value:"street",children:"Street"}),f.jsx("option",{value:"terrain",children:"Terrain"})]})]}),f.jsxs("div",{className:"form-group",children:[f.jsx("label",{children:"Alert Radius (km)"}),f.jsxs("select",{name:"alertRadius",value:h.alertRadius,onChange:k,children:[f.jsx("option",{value:"10",children:"10 km"}),f.jsx("option",{value:"25",children:"25 km"}),f.jsx("option",{value:"50",children:"50 km"}),f.jsx("option",{value:"100",children:"100 km"})]})]})]}),f.jsxs("div",{className:"checkbox-settings",children:[f.jsxs("label",{className:"checkbox-item",children:[f.jsx("input",{type:"checkbox",name:"autoLocation",checked:h.autoLocation,onChange:k}),f.jsx("span",{children:"Auto-detect location"})]}),f.jsxs("label",{className:"checkbox-item",children:[f.jsx("input",{type:"checkbox",name:"dataSharing",checked:h.dataSharing,onChange:k}),f.jsx("span",{children:"Share anonymous usage data"})]})]})]});case"security":return f.jsxs("div",{className:"tab-content",children:[f.jsx("h3",{children:"Security Settings"}),f.jsxs("div",{className:"security-actions",children:[f.jsxs("div",{className:"security-item",children:[f.jsx("h4",{children:"Change Password"}),f.jsx("p",{children:"Update your account password"}),f.jsx("button",{className:"btn-secondary",children:"Change Password"})]}),f.jsxs("div",{className:"security-item",children:[f.jsx("h4",{children:"Two-Factor Authentication"}),f.jsx("p",{children:"Add an extra layer of security to your account"}),f.jsx("button",{className:"btn-secondary",children:"Enable 2FA"})]}),f.jsxs("div",{className:"security-item",children:[f.jsx("h4",{children:"Active Sessions"}),f.jsx("p",{children:"Manage your active login sessions"}),f.jsx("button",{className:"btn-secondary",children:"View Sessions"})]}),f.jsxs("div",{className:"security-item danger",children:[f.jsx("h4",{children:"Sign Out All Devices"}),f.jsx("p",{children:"Sign out from all devices except this one"}),f.jsx("button",{className:"btn-danger",children:"Sign Out All"})]})]})]});case"data":return f.jsxs("div",{className:"tab-content",children:[f.jsx("h3",{children:"Data & Privacy"}),f.jsxs("div",{className:"data-actions",children:[f.jsxs("div",{className:"data-item",children:[f.jsx("h4",{children:"Download Your Data"}),f.jsx("p",{children:"Download a copy of your account data"}),f.jsx("button",{className:"btn-secondary",children:"Download Data"})]}),f.jsxs("div",{className:"data-item",children:[f.jsx("h4",{children:"Data Retention"}),f.jsx("p",{children:"Manage how long we keep your data"}),f.jsx("button",{className:"btn-secondary",children:"Manage Retention"})]}),f.jsxs("div",{className:"data-item danger",children:[f.jsx("h4",{children:"Delete Account"}),f.jsx("p",{children:"Permanently delete your account and all data"}),f.jsx("button",{className:"btn-danger",children:"Delete Account"})]})]})]});default:return null}};return f.jsxs("div",{className:"settings-page",children:[f.jsxs("div",{className:"settings-header",children:[f.jsx("h1",{children:" Settings"}),f.jsx("p",{children:"Manage your account preferences and settings"})]}),f.jsxs("div",{className:"settings-container",children:[f.jsxs("div",{className:"settings-sidebar",children:[f.jsxs("div",{className:"user-info",children:[f.jsx("div",{className:"user-avatar",children:i.fullName.split(" ").map(V=>V[0]).join("")}),f.jsxs("div",{className:"user-details",children:[f.jsx("h3",{children:i.fullName}),f.jsx("p",{children:i.role})]})]}),f.jsx("nav",{className:"settings-nav",children:_.map(V=>f.jsxs("button",{className:`nav-item ${n===V.id?"active":""}`,onClick:()=>r(V.id),children:[f.jsx("span",{className:"nav-icon",children:V.icon}),f.jsx("span",{className:"nav-label",children:V.label})]},V.id))}),f.jsx("div",{className:"settings-actions",children:f.jsx("button",{className:"logout-btn",onClick:A,children:" Sign Out"})})]}),f.jsxs("div",{className:"settings-content",children:[I(),f.jsx("div",{className:"content-actions",children:f.jsx("button",{className:"btn-primary",onClick:P,children:" Save Changes"})})]})]})]})},IF=()=>{const{user:t}=Pr();return f.jsxs("div",{className:"app-container",children:[t&&f.jsx(mA,{role:t.role}),f.jsx("main",{className:"main-content",children:f.jsxs(pb,{children:[f.jsx(gn,{path:"/",element:f.jsx(qV,{})}),f.jsx(gn,{path:"/login",element:t?f.jsx(sh,{to:`/${t.role}/dashboard`}):f.jsx(tF,{})}),f.jsx(gn,{path:"/register",element:f.jsx(eF,{})}),f.jsx(gn,{path:"/citizen/dashboard",element:(t==null?void 0:t.role)==="citizen"?f.jsx(GV,{}):f.jsx(sh,{to:"/login"})}),f.jsx(gn,{path:"/analyst/dashboard",element:(t==null?void 0:t.role)==="analyst"?f.jsx(KV,{}):f.jsx(sh,{to:"/login"})}),f.jsx(gn,{path:"/official/dashboard",element:(t==null?void 0:t.role)==="official"?f.jsx(ZV,{}):f.jsx(sh,{to:"/login"})}),f.jsx(gn,{path:"/social-media",element:f.jsx(QV,{})}),f.jsx(gn,{path:"/donations",element:f.jsx(XV,{})}),f.jsx(gn,{path:"/donation-management",element:f.jsx(JV,{})}),f.jsx(gn,{path:"/volunteer-registration",element:f.jsx(YV,{})}),f.jsx(gn,{path:"/map",element:f.jsx(SF,{})}),f.jsx(gn,{path:"/settings",element:f.jsx(xF,{})})]})})]})};function AF(){return f.jsx($V,{children:f.jsxs(Tb,{children:[f.jsx(gk,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#333",color:"#fff"}}}),f.jsx(HV,{}),f.jsx(IF,{})]})})}Rp.createRoot(document.getElementById("root")).render(f.jsx(lu.StrictMode,{children:f.jsx(AF,{})}));
